import{e as i,i as t}from"./CustomFetch.ggXvTdIz.js";import{l as r}from"./entry.32UGFqj-.js";const o="PREPAYMENT IN FULL",n="CASH",g="CREDIT 7 DAYS",c="CREDIT 15 DAYS",d="CREDIT 30 DAYS",h="PROGRESS BILLING",u=[o,n,g,c,d,h],R=r("receivingStore",{state:()=>({receiving:{isLoading:!1,isLoaded:!1,details:{},form:{},items:[],params:{},list:[],pagination:{}},allRequests:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{}},warehouseReceivings:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{}},errorMessage:"",successMessage:"",remarks:""}),actions:{async getAllRequests(){await i("/api/material-receiving/resource",{method:"GET",params:this.allRequests.params,onRequest:()=>{this.allRequests.isLoading=!0},onResponse:({response:s})=>{this.allRequests.isLoading=!1,s.ok&&(this.allRequests.list=s._data.data,this.allRequests.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last},this.allRequests.isLoaded=!0)}})},async fetchReceivingDetails(s){await i("/api/material-receiving/resource/"+s,{method:"GET",watch:!1,onRequest:()=>{this.receiving.isLoading=!0},onResponse:({response:e})=>{if(this.receiving.isLoading=!1,e.ok)this.receiving.details=e._data.data;else throw this.errorMessage=e._data.message,new Error(e._data.message)}})},async fetchReceivingByWarehouseId(s){await i("/api/warehouse/material-receivings/"+s,{method:"GET",watch:!1,onRequest:()=>{this.warehouseReceivings.isLoading=!0},onResponseError:({response:e})=>{throw this.warehouseReceivings.isLoading=!1,new Error(e._data.message)},onResponse:({response:e})=>{this.warehouseReceivings.isLoading=!1,e.ok&&(this.warehouseReceivings.list=e._data.data,this.warehouseReceivings.pagination={first_page:e._data.links.first,pages:e._data.meta.links,last_page:e._data.links.last})}})},async getOne(s){return await t("/api/material-receiving/resource/"+s,{method:"GET",params:this.receiving.params,onResponse:({response:e})=>{if(e.ok)return this.receiving.details=e._data.data,e._data.data;throw new Error(e._data.message)}})},async updateReceiving(s){this.errorMessage="",this.successMessage="",await t(`/api/material-receiving/resource/${s.id}`,{method:"PATCH",body:s,watch:!1,onRequest:()=>{this.receiving.isLoading=!0},onResponseError:({response:e})=>{throw this.receiving.isLoading=!1,new Error(e._data.message)},onResponse:({response:e})=>{if(this.receiving.isLoading=!1,e.ok)return this.successMessage=e._data.message,e._data}})},async updateReceivingItem(s){await t("/api/material-receiving/item/resource/"+s.id,{method:"PATCH",watch:!1,body:s,onRequest:()=>{this.receiving.isLoading=!0},onResponseError:({response:e})=>{throw this.receiving.isLoading=!1,this.errorMessage=e._data.message,new Error(e._data.message)},onResponse:({response:e})=>{this.receiving.isLoading=!1,e.ok&&(this.successMessage=e._data.message)}})},async acceptAllItem(s){this.errorMessage="",this.successMessage="",await i(`/api/material-receiving/item/${s}/accept-all`,{method:"PATCH",watch:!1,onRequest:()=>{this.receiving.isLoading=!0},onResponseError:({response:e})=>{throw this.receiving.isLoading=!1,this.errorMessage=e._data.message,new Error(e._data.message)},onResponse:({response:e})=>{this.receiving.isLoading=!1,e.ok&&(this.successMessage=e._data.message)}})},async acceptQtyRemarks(s,e){this.errorMessage="",this.successMessage="",await i(`/api/material-receiving/item/${s}/accept-some`,{method:"PATCH",body:JSON.stringify(e),watch:!1,onRequest:()=>{this.receiving.isLoading=!0},onResponseError:({response:a})=>{throw this.receiving.isLoading=!1,this.errorMessage=a._data.message,new Error(a._data.message)},onResponse:({response:a})=>{this.receiving.isLoading=!1,a.ok&&(this.successMessage=a._data.message)}})},async rejectItem(s,e){this.errorMessage="",this.successMessage="",await i(`/api/material-receiving/item/${s}/reject`,{method:"PATCH",body:JSON.stringify(e),watch:!1,onRequest:()=>{this.receiving.isLoading=!0},onResponseError:({response:a})=>{throw this.receiving.isLoading=!1,this.errorMessage=a._data.message,new Error(a._data.message)},onResponse:({response:a})=>{this.receiving.isLoading=!1,a.ok&&(this.successMessage=a._data.message)}})},clearMessages(){this.errorMessage="",this.successMessage=""},reloadResources(){const s=[];this.allRequests.isLoaded&&s.push(this.getAllRequests),this.$reset(),s.forEach(e=>{e()})}}});export{u as T,R as u};
