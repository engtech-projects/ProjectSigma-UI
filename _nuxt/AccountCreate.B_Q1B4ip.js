import{_ as L}from"./LayoutBoards.vue.1keADq5t.js";import{l as k,_ as E,s as F,B,r as N,o as p,h as V,w as D,a as e,g as P,x as u,u as s,A as x,c as m,F as w,i as G,t as h,D as b,G as U,y as q,p as C,e as I}from"./entry.R6V7NTxy.js";import{u as S}from"./Utilities.Cbr1Z9cn.js";import{u as z}from"./account.BEeYOjpy.js";import{u as j}from"./accounttype.DaqzDmyP.js";import{u as g}from"./CustomFetch.BRBLzGci.js";const H=k("reportGroupStore",{state:()=>({reportGroup:{id:null,name:null,description:null},list:[],pagination:{},getParams:{},errorMessage:"",successMessage:"",isLoading:!1,isEdit:!1}),actions:{async getReportGroups(){this.isLoading=!0;const{data:t,error:o}=await g("/api/report-group",{method:"GET",params:this.getParams,onResponse:({response:a})=>{this.isLoading=!1,this.list=a._data.data,this.pagination={first_page:a._data.first_page_url,pages:a._data.links,last_page:a._data.last_page_url}}});if(t)return t;if(o)return o},async showAccountGroup(t){const{data:o,error:a}=await g("/api/account-group/"+t,{method:"GET",params:this.getParams,onResponse:({response:n})=>{this.accountGroup=n._data}});if(o)return o;if(a)return a},async createAccountGroup(){this.successMessage="",this.errorMessage="",await g("/api/account-group",{method:"POST",body:this.accountGroup,watch:!1,onResponse:({response:t})=>{t.ok?(this.getReportGroups(),this.successMessage=t._data.message):this.errorMessage=t._data.message}})},async editAccountGroup(){this.successMessage="",this.errorMessage="";const{data:t,error:o}=await g("/api/account-group/"+this.accountGroup.id,{method:"PATCH",body:this.accountGroup,watch:!1});if(t.value)return this.getReportGroups(),this.successMessage=t.value.message,t;if(o.value)return this.errorMessage=o.value.data.message,o},async deleteAccountGroup(t){this.isLoading=!0;const{data:o,error:a}=await g("/api/account-group/"+t,{method:"DELETE",body:this.accountGroup,watch:!1,onResponse:({response:n})=>{this.isLoading=!1,n._data.success?this.successMessage=n._data.message:this.errorMessage=n._data.message}});if(o.value)return this.getReportGroups(),this.successMessage=o.value.message,o;if(a.value)return this.errorMessage="Something went wrong",a},clearMessages(){this.errorMessage="",this.successMessage=""},reset(){this.accountGroup={id:null,name:null},this.successMessage="",this.errorMessage=""}}}),l=t=>(C("data-v-d388380c"),t=t(),I(),t),O={class:"text-gray-500"},$=["onSubmit"],J={class:"flex flex-col gap-2"},K=l(()=>e("label",{for:"account_no",class:"text-xs italic"},"Account No",-1)),Q=l(()=>e("label",{for:"account_name",class:"text-xs italic"},"Account Name",-1)),W=l(()=>e("label",{for:"account_type",class:"text-xs italic"},"Account Type",-1)),X=["value"],Y=l(()=>e("label",{for:"account_type",class:"text-xs italic"},"Report Group",-1)),Z=["value"],ee=l(()=>e("label",{for:"account_name",class:"text-xs italic"},"Description",-1)),te=l(()=>e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"flex-1 text-white p-2 rounded bg-teal-600 content-center mt-5"}," Add Account ")],-1)),se={__name:"AccountCreate",emits:["saved"],setup(t,{emit:o}){const a=z(),n=j(),A=H(),{account:c,errorMessage:_,successMessage:M}=F(a),f=B(),y=N(!1),T=async()=>{try{y.value=!0,await a.createAccount(),a.errorMessage!==""?f.add({type:"error",text:a.errorMessage}):(o("saved"),f.add({type:"success",text:a.successMessage}))}catch{_.value=_,f.add({type:"error",text:a.errorMessage})}finally{a.clearMessages(),y.value=!1}};return(d,i)=>{const R=L;return p(),V(R,{title:"Account",loading:s(y)},{default:D(()=>[e("div",O,[e("form",{onSubmit:P(T,["prevent"])},[e("div",J,[e("div",null,[K,u(e("input",{id:"accountNo","onUpdate:modelValue":i[0]||(i[0]=r=>s(c).account_number=r),type:"text",class:"w-full rounded-lg",required:""},null,512),[[x,s(c).account_number]])]),e("div",null,[Q,u(e("input",{id:"accountName","onUpdate:modelValue":i[1]||(i[1]=r=>s(c).account_name=r),type:"text",class:"w-full rounded-lg",required:""},null,512),[[x,s(c).account_name]])]),e("div",null,[W,u(e("select",{id:"accountType","onUpdate:modelValue":i[2]||(i[2]=r=>s(c).account_type_id=r),class:"w-full rounded-lg",required:""},[(p(!0),m(w,null,G(s(n).list,(r,v)=>(p(),m("option",{key:v,value:r.id},h(("upperFirst"in d?d.upperFirst:s(S))(r.account_type)),9,X))),128))],512),[[b,s(c).account_type_id]])]),e("div",null,[Y,u(e("select",{id:"accountType","onUpdate:modelValue":i[3]||(i[3]=r=>s(c).report_group_id=r),class:"w-full rounded-lg",required:""},[(p(!0),m(w,null,G(s(A).list,(r,v)=>(p(),m("option",{key:v,value:r.id},h(("upperFirst"in d?d.upperFirst:s(S))(r.name)),9,Z))),128))],512),[[b,s(c).report_group_id]])]),e("div",null,[ee,u(e("textarea",{id:"accountName","onUpdate:modelValue":i[4]||(i[4]=r=>s(c).account_description=r),class:"w-full rounded-lg resize-none h-24"},null,512),[[x,s(c).account_description]])])]),te],40,$),e("p",{hidden:"",class:U(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!s(_)}])},h(s(_)),3),u(e("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic transition-opacity delay-1000"},h(s(M)),513),[[q,s(M)]])])]),_:1},8,["loading"])}}},ue=E(se,[["__scopeId","data-v-d388380c"]]);export{ue as _,H as u};
