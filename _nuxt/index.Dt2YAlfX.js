import{_ as st,a as at,b as lt}from"./MainContainer.B1BT_8sq.js";import{_ as I}from"./PsTextInput.vue.DFQbUHfC.js";import{_ as M}from"./PsTable.CTJad9K5.js";import{_ as S}from"./CustomPagination.CR9ildFS.js";import{_ as R}from"./LayoutBoards.vue.1keADq5t.js";import{_ as it}from"./StatusRibbon.BLB8aOUn.js";import{_ as rt}from"./JournalEntryInfo.DsNENXSW.js";import{_ as et}from"./PsModal.DW9SixU3.js";import{n as Y,r as $,q as K,o as y,h as E,w,b as s,u as o,s as N,m as ut,c as P,a as t,v as D,F as T,t as A,d as L,i as ot,j,x as J,y as nt,z as dt,A as U,g as H,B as ct,C as G}from"./entry.R6V7NTxy.js";import{u as C}from"./journal.CrUgBYVO.js";import{u as q,A as F}from"./Accessibilities.uaboihcy.js";import{_ as mt}from"./ListView.DgUPeMcI.js";import Q from"./Icon.DcF_NU9d.js";import{a as z}from"./Utilities.Cbr1Z9cn.js";import{_ as pt}from"./Journal-accounts.vue.BTyziT4t.js";import{_ as _t}from"./StakeholderSelect.vue.EuZikxcY.js";import{_ as yt}from"./AcessContainer.DJcSsti6.js";import"./id.Dwf9xs1O.js";import"./client-only.QuN6N-R_.js";import"./nuxt-link.drPfi767.js";import"./loader.C2wIXBoB.js";import"./CustomFetch.BRBLzGci.js";import"./users.D5_vMoUK.js";import"./index.T-zbMaZc.js";import"./PsSelectSearch.vue.CrY1IpH8.js";import"./enum.Bd1Z-unS.js";import"./index.Cobg6QK2.js";const V={__name:"InfoModal",props:Y({type:{type:String,required:!1,default:"info"},entryData:{type:Object,required:!1,default:null},fillable:{type:Boolean,required:!1,default:!1}},{showModal:{required:!1,type:Boolean}}),emits:["update:showModal"],setup(m){const u=$({open:"info",unposted:"warning",posted:"success",void:"error"}),e=K(m,"showModal");return(l,a)=>{const d=it,p=rt,r=et;return y(),E(r,{"show-modal":e.value,"onUpdate:showModal":a[0]||(a[0]=i=>e.value=i),"is-loading":l.boardLoading,title:""},{body:w(()=>{var i,n;return[s(d,{type:o(u)[(i=m.entryData)==null?void 0:i.status.toLowerCase()],position:"top-left",status:(n=m.entryData)==null?void 0:n.status,class:"z-[999]"},null,8,["type","status"]),s(p,{"entry-data":m.entryData,type:m.type},null,8,["entry-data","type"])]}),_:1},8,["show-modal","is-loading"])}}},ft={class:"w-1/3 flex"},ht={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},gt={class:"flex justify-center mx-auto"},vt={__name:"OpenList",async setup(m){let u,e;const l=C(),{openEntries:a}=N(l),d=$(null),p=$(!1);[u,e]=ut(()=>l.getOpenEntries()),await u,e();const r=b=>{d.value=b,p.value=!0},i=b=>{a.value.params.page=b.page??""},n=[{name:"Journal No.",id:"journal_no"},{name:"Reference No (PRF-no)",id:"payment_request.prf_no"},{name:"Payee",id:"payment_request.stakeholder.name"},{name:"Amount",id:"total_amount_formatted"},{name:"Date Posted",id:"date_filed"},{name:"Status",id:"status"}],c={showTable:!0};return(b,h)=>{var B;const f=I,v=M,x=S,g=R,_=V;return y(),P(T,null,[s(g,{class:"w-full",loading:o(a).isLoading},{default:w(()=>[t("div",ft,[s(f,{modelValue:o(a).params.key,"onUpdate:modelValue":h[0]||(h[0]=O=>o(a).params.key=O),title:"Journal No. / PRF No.",class:"w-full"},null,8,["modelValue"])]),t("div",ht,[s(v,{"header-columns":n,actions:c,datas:o(a).list??[],onShowTable:r},null,8,["datas"]),t("div",gt,[s(x,{links:o(a).pagination,onChangeParams:i},null,8,["links"])])])]),_:1},8,["loading"]),s(_,{showModal:o(p),"onUpdate:showModal":h[1]||(h[1]=O=>D(p)?p.value=O:null),fillable:!1,"entry-data":o(d),type:(B=o(d))==null?void 0:B.status},null,8,["showModal","entry-data","type"])],64)}}},bt={class:"w-1/3 flex"},xt={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},wt={class:"flex justify-center mx-auto"},kt={__name:"VoidList",setup(m){const u=C(),{voidEntries:e}=N(u),l=$(null),a=$(!1),d=n=>{l.value=n,a.value=!0},p=n=>{e.value.params.page=n.page??""},r=[{name:"Journal No.",id:"journal_no"},{name:"Reference No (PRF-no)",id:"payment_request.prf_no"},{name:"Payee",id:"payment_request.stakeholder.name"},{name:"Amount",id:"total_amount_formatted"},{name:"Date Posted",id:"date_filed"},{name:"Status",id:"status"}],i={showTable:!0};return(n,c)=>{var g;const b=I,h=M,f=S,v=R,x=V;return y(),P(T,null,[s(v,{class:"w-full",loading:o(e).isLoading},{default:w(()=>[t("div",bt,[s(b,{modelValue:o(e).params.key,"onUpdate:modelValue":c[0]||(c[0]=_=>o(e).params.key=_),title:"Journal No. / PRF No.",class:"w-full"},null,8,["modelValue"])]),t("div",xt,[s(h,{"header-columns":r,actions:i,datas:o(e).list??[],onShowTable:d},null,8,["datas"]),t("div",wt,[s(f,{links:o(e).pagination,onChangeParams:p},null,8,["links"])])])]),_:1},8,["loading"]),s(x,{showModal:o(a),"onUpdate:showModal":c[1]||(c[1]=_=>D(a)?a.value=_:null),fillable:!1,"entry-data":o(l),type:(g=o(l))==null?void 0:g.status},null,8,["showModal","entry-data","type"])],64)}}},Pt={class:"w-1/3 flex"},$t={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},At={class:"flex justify-center mx-auto"},Ct={__name:"PostedList",setup(m){const u=C(),{postedEntries:e}=N(u),l=$(null),a=$(!1),d=n=>{l.value=n,a.value=!0},p=n=>{e.value.params.page=n.page??""},r=[{name:"Journal No.",id:"journal_no"},{name:"Reference No (PRF-no)",id:"payment_request.prf_no"},{name:"Payee",id:"payment_request.stakeholder.name"},{name:"Amount",id:"total_amount_formatted"},{name:"Date Posted",id:"date_filed"},{name:"Status",id:"status"}],i={showTable:!0};return(n,c)=>{var g;const b=I,h=M,f=S,v=R,x=V;return y(),P(T,null,[s(v,{class:"w-full",loading:o(e).isLoading},{default:w(()=>[t("div",Pt,[s(b,{modelValue:o(e).params.key,"onUpdate:modelValue":c[0]||(c[0]=_=>o(e).params.key=_),title:"Journal No. / PRF No.",class:"w-full"},null,8,["modelValue"])]),t("div",$t,[s(h,{"header-columns":r,actions:i,datas:o(e).list??[],onShowTable:d},null,8,["datas"]),t("div",At,[s(f,{links:o(e).pagination,onChangeParams:p},null,8,["links"])])])]),_:1},8,["loading"]),s(x,{showModal:o(a),"onUpdate:showModal":c[1]||(c[1]=_=>D(a)?a.value=_:null),fillable:!1,"entry-data":o(l),type:(g=o(l))==null?void 0:g.status},null,8,["showModal","entry-data","type"])],64)}}},Tt={class:"w-1/3 flex"},Nt={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},Et={class:"flex justify-center mx-auto"},Jt={__name:"Un-posted",setup(m){const u=C(),{unpostedEntries:e}=N(u),l=$(null),a=$(!1),d=n=>{l.value=n,a.value=!0},p=n=>{e.value.params.page=n.page??""},r=[{name:"Journal No.",id:"journal_no"},{name:"Reference No (PRF-no)",id:"payment_request.prf_no"},{name:"Payee",id:"payment_request.stakeholder.name"},{name:"Amount",id:"total_amount_formatted"},{name:"Date Posted",id:"date_filed"},{name:"Status",id:"status"}],i={showTable:!0};return(n,c)=>{var g;const b=I,h=M,f=S,v=R,x=V;return y(),P(T,null,[s(v,{class:"w-full",loading:o(e).isLoading},{default:w(()=>[t("div",Tt,[s(b,{modelValue:o(e).params.key,"onUpdate:modelValue":c[0]||(c[0]=_=>o(e).params.key=_),title:"Journal No. / PRF No.",class:"w-full"},null,8,["modelValue"])]),t("div",Nt,[s(h,{"header-columns":r,actions:i,datas:o(e).list??[],onShowTable:d},null,8,["datas"]),t("div",Et,[s(f,{links:o(e).pagination,onChangeParams:p},null,8,["links"])])])]),_:1},8,["loading"]),s(x,{showModal:o(a),"onUpdate:showModal":c[1]||(c[1]=_=>D(a)?a.value=_:null),fillable:!1,"entry-data":o(l),type:(g=o(l))==null?void 0:g.status},null,8,["showModal","entry-data","type"])],64)}}},Rt={key:0,class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},It={class:"w-1/3 flex"},Mt={class:"flex justify-center mx-auto"},St={key:1,class:"w-full py-2"},Dt={__name:"ForPaymentEntry",setup(m){const u=C(),{forPaymentEntries:e}=N(u),l=$(null),a=$(!1),d=n=>{l.value=n,a.value=!0},p=n=>{e.value.params.page=n.page??""},r=[{name:"Journal No.",id:"journal_no"},{name:"Reference No (PRF-no)",id:"payment_request.prf_no"},{name:"Payee",id:"payment_request.stakeholder.name"},{name:"Amount",id:"total_amount_formatted"},{name:"Date Posted",id:"date_filed"},{name:"Status",id:"status"}],i={showTable:!0};return(n,c)=>{var g;const b=I,h=M,f=S,v=R,x=V;return y(),P(T,null,[s(v,{class:"w-full",loading:o(e).isLoading},{default:w(()=>[("useCheckAccessibility"in n?n.useCheckAccessibility:o(q))([("AccessibilityTypes"in n?n.AccessibilityTypes:o(F)).ACCOUNTING_JOURNAL_ENTRY_FOR_PAYMENT_ENTRIES])?(y(),P("div",Rt,[t("div",It,[s(b,{modelValue:o(e).params.key,"onUpdate:modelValue":c[0]||(c[0]=_=>o(e).params.key=_),title:"Journal No. / PRF No.",class:"w-full"},null,8,["modelValue"])]),s(h,{"header-columns":r,actions:i,datas:o(e).list??[],onShowTable:d},null,8,["datas"]),t("div",Mt,[s(f,{links:o(e).pagination,onChangeParams:p},null,8,["links"])])])):(y(),P("div",St," RESTRICTED "))]),_:1},8,["loading"]),s(x,{showModal:o(a),"onUpdate:showModal":c[1]||(c[1]=_=>D(a)?a.value=_:null),fillable:!1,"entry-data":o(l),type:(g=o(l))==null?void 0:g.status},null,8,["showModal","entry-data","type"])],64)}}},Lt={key:0,class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},jt={class:"w-1/3 flex"},Ut={class:"flex justify-center mx-auto"},qt={key:1,class:"w-full py-2"},Ft={__name:"CashJournalEntry",setup(m){const u=C(),{cashEntries:e}=N(u),l=$(null),a=$(!1),d=n=>{l.value=n,a.value=!0},p=n=>{e.value.params.page=n.page??""},r=[{name:"Journal No.",id:"journal_no"},{name:"Reference No (PRF-no)",id:"payment_request.prf_no"},{name:"Payee",id:"payment_request.stakeholder.name"},{name:"Amount",id:"total_amount_formatted"},{name:"Date Posted",id:"date_filed"},{name:"Status",id:"status"}],i={showTable:!0};return(n,c)=>{var g;const b=I,h=M,f=S,v=R,x=V;return y(),P(T,null,[s(v,{class:"w-full",loading:o(e).isLoading},{default:w(()=>[("useCheckAccessibility"in n?n.useCheckAccessibility:o(q))([("AccessibilityTypes"in n?n.AccessibilityTypes:o(F)).ACCOUNTING_JOURNAL_ENTRY_CASH_ENTRIES])?(y(),P("div",Lt,[t("div",jt,[s(b,{modelValue:o(e).params.key,"onUpdate:modelValue":c[0]||(c[0]=_=>o(e).params.key=_),title:"Journal No. / PRF No.",class:"w-full"},null,8,["modelValue"])]),s(h,{"header-columns":r,actions:i,datas:o(e).list??[],onShowTable:d},null,8,["datas"]),t("div",Ut,[s(f,{links:o(e).pagination,onChangeParams:p},null,8,["links"])])])):(y(),P("div",qt," RESTRICTED "))]),_:1},8,["loading"]),s(x,{showModal:o(a),"onUpdate:showModal":c[1]||(c[1]=_=>D(a)?a.value=_:null),fillable:!1,"entry-data":o(l),type:(g=o(l))==null?void 0:g.status},null,8,["showModal","entry-data","type"])],64)}}},Vt={key:0,class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},Ot={class:"w-1/3 flex"},Bt={class:"flex justify-center mx-auto"},Yt={key:1,class:"w-full py-2"},Gt={__name:"DisbursementJournalEntry",setup(m){const u=C(),{disbursementEntries:e}=N(u),l=$(null),a=$(!1),d=n=>{l.value=n,a.value=!0},p=n=>{e.value.params.page=n.page??""},r=[{name:"Journal No.",id:"journal_no"},{name:"Reference No (PRF-no)",id:"payment_request.prf_no"},{name:"Payee",id:"payment_request.stakeholder.name"},{name:"Amount",id:"total_amount_formatted"},{name:"Date Posted",id:"date_filed"},{name:"Status",id:"status"}],i={showTable:!0};return(n,c)=>{var g;const b=I,h=M,f=S,v=R,x=V;return y(),P(T,null,[s(v,{class:"w-full",loading:o(e).isLoading},{default:w(()=>[("useCheckAccessibility"in n?n.useCheckAccessibility:o(q))([("AccessibilityTypes"in n?n.AccessibilityTypes:o(F)).ACCOUNTING_JOURNAL_ENTRY_DISBURSEMENT_ENTRIES])?(y(),P("div",Vt,[t("div",Ot,[s(b,{modelValue:o(e).params.key,"onUpdate:modelValue":c[0]||(c[0]=_=>o(e).params.key=_),title:"Journal No. / PRF No.",class:"w-full"},null,8,["modelValue"])]),s(h,{"header-columns":r,actions:i,datas:o(e).list??[],onShowTable:d},null,8,["datas"]),t("div",Bt,[s(f,{links:o(e).pagination,onChangeParams:p},null,8,["links"])])])):(y(),P("div",Yt," RESTRICTED "))]),_:1},8,["loading"]),s(x,{showModal:o(a),"onUpdate:showModal":c[1]||(c[1]=_=>D(a)?a.value=_:null),fillable:!1,"entry-data":o(l),type:(g=o(l))==null?void 0:g.status},null,8,["showModal","entry-data","type"])],64)}}},zt=t("div",{class:"grid gap-2 md:justify-between"},[t("div",{class:"p-2 flex gap-2"},[t("span",{class:"text-gray-900 text-4xl"},"Payment Request (For Journal Entries)")])],-1),Ht={class:"grid md:grid-cols-3 gap-2 md:justify-between"},Kt={class:"p-2 flex gap-2"},Qt=t("span",{class:"text-teal-600 text-light"},"PRF Number: ",-1),Wt={class:"text-gray-900"},Xt={class:"p-2 flex gap-2"},Zt=t("span",{class:"text-teal-600 text-light"},"Payee: ",-1),te={class:"p-2 flex gap-2"},ee=t("span",{class:"text-teal-600 text-light"},"Amount: ",-1),oe={class:"grid md:grid-cols-3 gap-2 md:justify-between"},ne={class:"p-2 flex gap-2"},se=t("span",{class:"text-teal-600 text-light"},"Status: ",-1),ae={class:"p-2 flex gap-2"},le=t("span",{class:"text-teal-600 text-light"},"Prepared by: ",-1),ie={class:"p-2 flex gap-2"},re=t("span",{class:"text-teal-600 text-light"},"Prepared on: ",-1),ue={class:"grid md:grid-cols-1 gap-2 md:justify-between"},de={class:"p-2 flex gap-2"},ce=t("span",{class:"text-teal-600 text-light"},"Description: ",-1),me={class:"p-2 border border-gray-200 rounded-lg"},pe=t("h2",{class:"text-xl text-gray-800 tex-center font-bold p-2"}," Payment Request Details ",-1),_e={class:"overflow-x-auto"},ye={class:"min-w-full overflow-hidden overflow-x-auto align-middle shadow sm:rounded-lg"},fe={class:"min-w-full divide-y border border-gray-200"},he=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Particulars "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Project/Section Code "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," COST "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Vat Amount "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Amount ")])],-1),ge={class:"bg-white divide-y divide-gray-200"},ve={key:0},be={class:"px-6 py-4 whitespace-nowrap"},xe={class:"text-sm text-gray-900"},we={class:"px-6 py-4 whitespace-nowrap"},ke={class:"text-sm text-gray-900"},Pe={class:"px-6 py-4 whitespace-nowrap"},$e={class:"text-sm text-gray-900"},Ae={class:"px-6 py-4 whitespace-nowrap"},Ce={class:"text-sm text-gray-900"},Te={class:"px-6 py-4 whitespace-nowrap"},Ne={class:"text-sm text-gray-900"},Ee={class:"w-full"},Je={class:"flex gap-2 p-2 justify-end relative"},Re={__name:"InfoModalPaymentRequestEntries",props:Y({paymentDataEntries:{type:Object,required:!1,default:null},fillable:{type:Boolean,required:!1,default:!1}},{showModal:{required:!1,type:Boolean}}),emits:["update:showModal"],setup(m){const{journal:u}=N(C()),e=C(),l=async r=>{await e.generateJournalNumber(),u.value.details=r.details.map(i=>{var n;return{debit:i.debit,credit:i.credit,vat:parseInt(i.vat??0),stakeholder_id:i.stakeholder_id??"",stakeholder_type:a((n=i==null?void 0:i.stakeholder)==null?void 0:n.stakeholdable_type),stakeholderInformation:i.stakeholder??{},journalAccountInfo:(i==null?void 0:i.journalAccountInfo)??{},description:i.particulars}}),u.value.stakeholder_id=r==null?void 0:r.stakeholder_id,u.value.journal_date=r.date_filed,u.value.reference_no=r.prf_no,u.value.payment_request_id=r.id,u.value.description=r.description,u.value.remarks=r.description,u.value.total=parseFloat(r.total),d.value=!1},a=r=>r?r.replace("App\\Models\\Stakeholders\\","").toLowerCase():null,d=K(m,"showModal"),p=$(!1);return(r,i)=>{const n=mt,c=Q,b=et;return y(),E(b,{"show-modal":d.value,"onUpdate:showModal":i[1]||(i[1]=h=>d.value=h),"is-loading":o(p),title:""},{body:w(()=>{var h,f,v,x,g,_,B,O,W,X,Z;return[zt,t("div",Ht,[t("div",Kt,[Qt,t("span",Wt,A((h=m.paymentDataEntries)==null?void 0:h.prf_no),1)]),t("div",Xt,[Zt,L(" "+A((v=(f=m.paymentDataEntries)==null?void 0:f.stakeholder)==null?void 0:v.name),1)]),t("div",te,[ee,L(" "+A((x=m.paymentDataEntries)==null?void 0:x.total),1)])]),t("div",oe,[t("div",ne,[se,L(" "+A((g=m.paymentDataEntries)==null?void 0:g.request_status),1)]),t("div",ae,[le,L(" "+A((_=m.paymentDataEntries)==null?void 0:_.created_by_user),1)]),t("div",ie,[re,L(" "+A((B=m.paymentDataEntries)==null?void 0:B.date_filed),1)])]),t("div",ue,[t("div",de,[ce,L(" "+A((O=m.paymentDataEntries)==null?void 0:O.description),1)])]),t("div",me,[pe,t("div",_e,[t("div",ye,[t("table",fe,[he,t("tbody",ge,[(y(!0),P(T,null,ot((W=m.paymentDataEntries)==null?void 0:W.details,k=>{var tt;return y(),P(T,{key:k.id},[(k==null?void 0:k.particulars)!="INPUT VAT"&&(k==null?void 0:k.particulars)!="CASH IN BANK"?(y(),P("tr",ve,[t("td",be,[t("div",xe,A(k==null?void 0:k.particulars),1)]),t("td",we,[t("div",ke,A((tt=k==null?void 0:k.stakeholder)==null?void 0:tt.name),1)]),t("td",Pe,[t("div",$e,A(("accountingCurrency"in r?r.accountingCurrency:o(z))(k==null?void 0:k.cost)),1)]),t("td",Ae,[t("div",Ce,A(("accountingCurrency"in r?r.accountingCurrency:o(z))(k==null?void 0:k.total_vat_amount)),1)]),t("td",Te,[t("div",Ne,A(("accountingCurrency"in r?r.accountingCurrency:o(z))(k==null?void 0:k.amount)),1)])])):j("",!0)],64)}),128))])])])])]),J(t("div",Ee,[s(n,{approvals:(X=m.paymentDataEntries)==null?void 0:X.approvals},null,8,["approvals"])],512),[[nt,(Z=m.paymentDataEntries)==null?void 0:Z.approvals]])]}),footer:w(()=>[t("div",Je,[t("button",{class:"w-38 h-8 text-white bg-teal-700 hover:bg-teal-800 focus:ring-4 focus:outline-none focus:ring-teal-300 font-medium rounded-lg text-sm px-2 py-0 text-center dark:bg-teal-600 dark:hover:bg-teal-700 dark:focus:ring-teal-800",onClick:i[0]||(i[0]=h=>l(m.paymentDataEntries))},[s(c,{name:"ic:baseline-send",color:"white",class:"w-5 h-5"}),L(" Generate Journal ")])])]),_:1},8,["show-modal","is-loading"])}}},Ie={class:"w-1/3 flex"},Me={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},Se={class:"flex justify-center mx-auto"},De={__name:"PaymentRequestList",setup(m){const u=C(),{paymentRequestEntries:e}=N(u),l=$(null),a=$(!1),d=n=>{l.value=n,a.value=!0},p=n=>{e.value.params.page=n.page??""},r=[{name:"PRF Number",id:"prf_no"},{name:"Payee",id:"stakeholder.name"},{name:"Amount",id:"total_amount_formatted"},{name:"PRF Date Created",id:"date_filed"},{name:"Status",id:"request_status"}],i={showTable:!0};return(n,c)=>{const b=I,h=M,f=S,v=R,x=Re;return y(),P(T,null,[s(v,{class:"w-full",loading:o(e).isLoading},{default:w(()=>[t("div",Ie,[s(b,{modelValue:o(e).params.key,"onUpdate:modelValue":c[0]||(c[0]=g=>o(e).params.key=g),title:"PRF No.",class:"w-full"},null,8,["modelValue"])]),t("div",Me,[s(h,{"header-columns":r,actions:i,datas:o(e).list??[],onShowTable:d},null,8,["datas"]),t("div",Se,[s(f,{links:o(e).pagination,onChangeParams:p},null,8,["links"])])])]),_:1},8,["loading"]),s(x,{showModal:o(a),"onUpdate:showModal":c[1]||(c[1]=g=>D(a)?a.value=g:null),fillable:!1,"payment-data-entries":o(l)},null,8,["showModal","payment-data-entries"])],64)}}},Le={class:"grid grid-cols-8 gap-2 p-2"},je={class:"col-span-2 self-center"},Ue=t("label",{for:"account",class:"text-xs italic"},"Account",-1),qe={class:"col-span-2 self-center"},Fe=t("label",{for:"particulars",class:"text-xs italic"},"Project/Department",-1),Ve={class:"col-span-1 self-center"},Oe=t("label",{for:"debit",class:"text-xs italic"},"Debit",-1),Be=["disabled"],Ye={class:"col-span-1 self-center"},Ge=t("label",{for:"credit",class:"text-xs italic"},"Credit",-1),ze=["disabled"],He={class:"flex gap-2 col-span-2 self-center"},Ke={class:""},Qe=t("label",{for:"remarks",class:"text-xs italic"},"Remarks/Description",-1),We={__name:"DetailItem",props:Y({index:{type:Number,required:!0},totalDebit:{type:Number,required:!0},itemCount:{type:Number,required:!0}},{details:{required:!0,type:Object}}),emits:Y("delete-item",["update:details"]),setup(m,{emit:u}){const e=K(m,"details"),l=a=>{e.value.stakeholderInformation=a,e.value.stakeholder_id=a.id};return(a,d)=>{const p=pt,r=_t,i=Q;return y(),P("div",Le,[t("div",je,[Ue,s(p,{"journal-account-info":e.value.journalAccountInfo,"onUpdate:journalAccountInfo":d[0]||(d[0]=n=>e.value.journalAccountInfo=n),"account-id":e.value.account_id,"onUpdate:accountId":d[1]||(d[1]=n=>e.value.account_id=n)},null,8,["journal-account-info","account-id"])]),t("div",qe,[Fe,s(r,{"stakeholder-id":e.value.stakeholder_id,stakeholder:e.value.stakeholderInformation,style:dt("z-index:"+(10+(m.itemCount-m.index))),"select-options":["project","department","employee"],onSelect:l},null,8,["stakeholder-id","stakeholder","style"])]),t("div",Ve,[Oe,J(t("input",{id:"debit","onUpdate:modelValue":d[2]||(d[2]=n=>e.value.debit=n),disabled:e.value.credit!=0,type:"number",step:".01",class:"w-full rounded-lg h-9 text-sm"},null,8,Be),[[U,e.value.debit]])]),t("div",Ye,[Ge,J(t("input",{id:"credit","onUpdate:modelValue":d[3]||(d[3]=n=>e.value.credit=n),disabled:e.value.debit!=0,type:"number",step:".01",class:"w-full rounded-lg h-9 text-sm"},null,8,ze),[[U,e.value.credit]]),m.index===m.itemCount-1&&e.value.debit===0?(y(),P("p",{key:0,class:"text-italic text-xs text-blue-500 cursor-pointer hidden",onClick:d[4]||(d[4]=n=>e.value.credit=m.totalDebit)}," max : "+A(m.totalDebit),1)):j("",!0)]),t("div",He,[t("div",Ke,[Qe,J(t("input",{id:"remarks","onUpdate:modelValue":d[5]||(d[5]=n=>e.value.description=n),type:"text",class:"w-full rounded-lg h-9 text-sm"},null,512),[[U,e.value.description]])]),t("div",null,[t("button",{class:"text-white p-2 bg-red-500 content-center mt-5 rounded-md w-fit",onClick:d[6]||(d[6]=H(n=>u("delete-item",m.index),["prevent"]))},[s(i,{name:"ion:trash",color:"white",class:"bg-red-500 rounded h-8 w-8 p-1"})])])])])}}},Xe=["onSubmit"],Ze={class:"flex flex-col gap-16 pt-8 sticky"},to=t("h1",{class:"text-2xl text-center font-bold"}," JOURNAL ENTRY FORM ",-1),eo={class:"w-full"},oo={class:"flex gap-2"},no={class:"w-full"},so=t("label",{for:"journal_no",class:"text-xs italic"},"Journal Number",-1),ao={class:"w-full"},lo=t("label",{for:"reference_no",class:"text-xs italic"},"Reference Number (PRF-No)",-1),io={class:"grid grid-cols-2 gap-4"},ro=t("label",{for:"date",class:"text-xs italic"},"Entry Date:",-1),uo=t("label",{for:"remarks",class:"text-xs italic"},"Remarks",-1),co={class:"w-full"},mo={class:"flex justify-between p-2 items-center mb-2"},po=t("h2",{class:"text-xl font-bold text-center"}," JOURNAL ENTRY DETAILS ",-1),_o=["onClick"],yo={class:"flex flex-col bg-white rounded-lg gap-1"},fo={key:0,class:"block text-center text-gray-600"},ho={class:"w-full"},go={class:"flex justify-end p-4 bg-gray-100 rounded-lg"},vo={class:"flex gap-8"},bo=t("label",{class:"text-xs italic"},"Total Debit",-1),xo=["value"],wo=t("label",{class:"text-xs italic"},"Total Credit",-1),ko=["value"],Po={class:"hidden"},$o=t("label",{class:"text-xs italic"},"Balance",-1),Ao=["value"],Co=t("div",{class:"flex justify-end"},[t("div",{class:"flex gap-2"},[t("button",{type:"submit",class:"text-white p-2 bg-teal-600 content-center rounded-md w-fit"}," Create Journal Entry ")])],-1),To={__name:"JournalEntryForm",props:{fillable:{type:Boolean,required:!1,default:!1}},setup(m){const u=C(),{journal:e}=N(u),l=ct(),a=$({account_id:null,debit:0,credit:0,remarks:""}),d=()=>{a.value={account_id:null,debit:0,credit:0,remarks:""},e.value.details.push(a.value)},p=i=>{e.value.details.splice(i,1)},r=async()=>{try{await u.addJournal(),e.value.successMessage?l.add({type:"success",text:e.value.successMessage}):l.add({type:"error",text:e.value.errorMessage})}catch{l.add({type:"error",text:e.value.errorMessage})}};return e.value.total_debit=G(()=>e.value.details.reduce((i,n)=>i+parseFloat(n.debit),0)),e.value.total_credit=G(()=>e.value.details.reduce((i,n)=>i+parseFloat(n.credit),0)),e.value.entry_balance=G(()=>e.value.total_debit-e.value.total_credit),(i,n)=>{const c=Q,b=We,h=R;return y(),E(h,{title:"",class:"w-90",loading:o(e).isLoading},{default:w(()=>[t("div",null,[t("form",{onSubmit:H(r,["prevent"])},[t("div",Ze,[to,t("div",eo,[t("div",oo,[t("div",no,[so,J(t("input",{id:"journal_no","onUpdate:modelValue":n[0]||(n[0]=f=>o(e).journal_no=f),type:"text",disabled:"",class:"w-full rounded-lg",required:""},null,512),[[U,o(e).journal_no]])]),t("div",ao,[lo,J(t("input",{id:"reference_no","onUpdate:modelValue":n[1]||(n[1]=f=>o(e).reference_no=f),type:"text",disabled:"",class:"w-full rounded-lg",required:""},null,512),[[U,o(e).reference_no]])])]),t("div",io,[t("div",null,[ro,J(t("input",{id:"date","onUpdate:modelValue":n[2]||(n[2]=f=>o(e).entry_date=f),type:"date",class:"w-full rounded-lg",required:""},null,512),[[U,o(e).entry_date]])]),t("div",null,[uo,J(t("textarea",{id:"remarks","onUpdate:modelValue":n[3]||(n[3]=f=>o(e).remarks=f),class:"w-full rounded-lg"},null,512),[[U,o(e).remarks]])])])]),t("div",co,[t("div",mo,[po,t("button",{class:"text-white p-2 px-4 bg-teal-600 content-center mt-5 rounded-md w-fit",onClick:H(d,["prevent"])},[s(c,{name:"fa:plus-circle"})],8,_o)]),J(t("div",yo,[(y(!0),P(T,null,ot(o(e).details,(f,v)=>(y(),E(b,{key:"detail"+v,details:o(e).details[v],"onUpdate:details":x=>o(e).details[v]=x,"total-debit":o(e).total,index:v,"item-count":o(e).details.length,class:"hover:bg-gray-50 bg-white border",onDeleteItem:x=>p(v)},null,8,["details","onUpdate:details","total-debit","index","item-count","onDeleteItem"]))),128))],512),[[nt,o(u).journal.details.length>0]]),o(e).details.length===0?(y(),P("span",fo," No entries yet. ")):j("",!0)]),t("div",ho,[t("div",go,[t("div",vo,[t("div",null,[bo,t("input",{value:o(e).total,type:"number",class:"w-full rounded-lg h-9 text-sm bg-white",disabled:""},null,8,xo)]),t("div",null,[wo,t("input",{value:o(e).total,type:"number",class:"w-full rounded-lg h-9 text-sm bg-white",disabled:""},null,8,ko)]),t("div",Po,[$o,t("input",{value:o(e).entry_balance,type:"number",class:"w-full rounded-lg h-9 text-sm bg-white",disabled:""},null,8,Ao)])])])]),Co])],40,Xe)])]),_:1},8,["loading"])}}},No={class:"flex flex-col gap-4"},Eo=t("div",{class:"w-full"},[t("p",{class:"text-xl"}," Journal Entry ")],-1),Jo={class:"w-full"},an={__name:"index",setup(m){const u=C();return(e,l)=>{const a=st,d=vt,p=at,r=kt,i=Ct,n=Jt,c=Dt,b=Ft,h=Gt,f=De,v=lt,x=To,g=yt;return y(),E(g,{"if-access":("useCheckAccessibility"in e?e.useCheckAccessibility:o(q))([("AccessibilityTypes"in e?e.AccessibilityTypes:o(F)).ACCOUNTING_JOURNAL_ENTRY])},{default:w(()=>[t("div",No,[Eo,s(v,{class:"w-full"},{"tab-titles":w(()=>[s(a,{title:"Open Journals","target-id":"openJournals"}),s(a,{title:"Void Journals","target-id":"voidJournals",onClickOnce:l[0]||(l[0]=_=>o(u).getVoidEntries())}),s(a,{title:"Posted Journals","target-id":"postedJournals",onClickOnce:l[1]||(l[1]=_=>o(u).getPostedEntries())}),s(a,{title:"Unposted Journals","target-id":"unpostedJournals",onClickOnce:l[2]||(l[2]=_=>o(u).getUnpostedEntries())}),("useCheckAccessibility"in e?e.useCheckAccessibility:o(q))([("AccessibilityTypes"in e?e.AccessibilityTypes:o(F)).ACCOUNTING_JOURNAL_ENTRY_FOR_PAYMENT_ENTRIES])?(y(),E(a,{key:0,title:"For Payment Journal Entry","target-id":"forPaymentJournalEntry",onClickOnce:l[3]||(l[3]=_=>o(u).getForPaymentJournalEntries())})):j("",!0),("useCheckAccessibility"in e?e.useCheckAccessibility:o(q))([("AccessibilityTypes"in e?e.AccessibilityTypes:o(F)).ACCOUNTING_JOURNAL_ENTRY_CASH_ENTRIES])?(y(),E(a,{key:1,title:"Cash","target-id":"treasuryJournalEntry",onClickOnce:l[4]||(l[4]=_=>o(u).getCashJournalEntries())})):j("",!0),("useCheckAccessibility"in e?e.useCheckAccessibility:o(q))([("AccessibilityTypes"in e?e.AccessibilityTypes:o(F)).ACCOUNTING_JOURNAL_ENTRY_DISBURSEMENT_ENTRIES])?(y(),E(a,{key:2,title:"Disbursement","target-id":"disbursementJournalEntry",onClickOnce:l[5]||(l[5]=_=>o(u).getDisbursementJournalEntries())})):j("",!0),s(a,{title:"PRF Journal Entries","target-id":"paymentRequestJournals",onClickOnce:l[6]||(l[6]=_=>o(u).getPaymentRequestEntries())})]),"tab-containers":w(()=>[s(p,{id:"openJournals"},{default:w(()=>[s(d)]),_:1}),s(p,{id:"voidJournals"},{default:w(()=>[s(r)]),_:1}),s(p,{id:"postedJournals"},{default:w(()=>[s(i)]),_:1}),s(p,{id:"unpostedJournals"},{default:w(()=>[s(n)]),_:1}),s(p,{id:"forPaymentJournalEntry"},{default:w(()=>[s(c)]),_:1}),s(p,{id:"treasuryJournalEntry"},{default:w(()=>[s(b)]),_:1}),s(p,{id:"disbursementJournalEntry"},{default:w(()=>[s(h)]),_:1}),s(p,{id:"paymentRequestJournals"},{default:w(()=>[s(f)]),_:1})]),_:1})]),t("div",Jo,[o(u).journal.journal_no?(y(),E(x,{key:0,fillable:!0})):j("",!0)])]),_:1},8,["if-access"])}}};export{an as default};
