import F from"./Icon.DcF_NU9d.js";import{_ as R}from"./nuxt-link.drPfi767.js";import{u as T,_ as $}from"./ModalContainer.CDqF-arx.js";import{r as g,B as z,C as D,K as I,o as n,c,u as o,j as C,a as e,x as d,A as u,v as J,F as S,i as E,M as K,t as L,b as h,h as G,w as V,d as P,g as x,E as Q}from"./entry.R6V7NTxy.js";import{c as W}from"./CustomFetch.BRBLzGci.js";import{_ as X}from"./loader.C2wIXBoB.js";import{u as Y}from"./hmo.BQFQzC6a.js";const Z={class:"relative"},ee={key:0,class:"absolute bg-slate-200/50 rounded-lg w-full h-full flex items-center justify-center z-50"},te=e("img",{class:"flex justify-center w-28 rounded-md",src:X,alt:"logo"},null,-1),re=[te],oe=["onSubmit"],ae={class:"mt-5 edit-item w-full max-w-full bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700 p-6 overflow-auto"},se=e("label",{for:"",class:"text-xl font-semibold text-gray-900"},"Add HMO Share",-1),le={class:"mt-5 b-6"},de=e("label",{for:"hmo_name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"HMO Name",-1),ne={class:"flex gap-4"},ue={class:"mt-5 b-6 flex-1"},ie=e("label",{for:"employer_share",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Employer's Share",-1),me={class:"mt-5 b-6 flex-1"},ce=e("label",{for:"employeeShare",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Employee's Share",-1),be={class:"flex gap-4"},ge={class:"mt-5 b-6 flex-1"},fe=e("label",{for:"hmo_start",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"HMO Start",-1),he={class:"mt-5 b-6 flex-1"},pe=e("label",{for:"hmo_end",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"HMO End",-1),ye={class:"mt-5 mb-6"},_e={class:"flex items-center gap-4 justify-between"},xe=e("span",{for:"employee",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Employees",-1),ke={class:"flex flex-col p-4 h-[300px] overflow-auto"},we={class:"flex justify-between py-2 border-b border-slate-100"},ve={class:"flex gap-2 items-center"},Me=["onUpdate:modelValue"],Ce={class:"text-md text-slate-800"},Se={key:0,class:"flex flex-col gap-1 bg-slate-100 rounded"},Ee={class:"flex gap-2"},Le={key:1,class:"w-4"},Ve={class:"text-sm"},Ue=e("span",{class:"rounded-full px-2 py-[1px] bg-green-400 text-white text-[11px]"},"Add-on",-1),Ne={class:"flex gap-4 justify-end"},je=e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"}," Save ",-1),qe=["onSubmit"],He=e("label",{for:"firstname",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Firstname",-1),Ae=e("label",{for:"middlename",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Middlename",-1),Oe=e("label",{for:"lastname",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Lastname",-1),Be={class:"flex justify-end gap-4 mt-4"},Fe=e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"}," Add ",-1),Pe={__name:"HmoNew",setup(Re){const s=Y(),f=T(),k=g([]),w=g({}),p=g(!1),i=g(""),y=z(),m=g({hmo_id:null,member_type:null,employee_id:null,member_name:null,member_belongs_to:null});function U(){const a=g([]);return v.value.forEach(t=>{t.checked&&(a.value.push({hmo_id:null,member_type:"employee",employee_id:t.id,member_name:t.first_name+" "+t.family_name,member_belongs_to:null}),t.members.length>0&&t.members.forEach(l=>{a.value.push({hmo_id:null,member_type:"external(addon)",employee_id:null,member_name:l.firstname+" "+l.lastname,member_belongs_to:t.id})}))}),JSON.stringify(a.value)}async function N(){s.hmo.hmo_members=U();try{p.value=!0,await s.createHmo(),s.errorMessage!==""?y.add({type:"error",text:s.errorMessage}):y.add({type:"success",text:s.successMessage})}catch{errorMessage.value=errorMessage,y.add({type:"error",text:s.errorMessage})}finally{p.value=!1,await Q("/hrms/hmo")}}async function j(){await W("/api/employee/list",{onResponse:({response:a})=>{var t;if(a.ok)k.value=q((t=a._data)==null?void 0:t.data);else throw new Error(a._data.message)}})}function q(a){const t=[];return a.forEach(l=>{l.members=[],l.checked=!0,t.push(l)}),t}function H(){w.value.members.push(m.value),f.hideModal(),m.value={firstname:null,middlename:null,lastname:null}}function A(a,t){return a.filter(_=>_!==t)}function O(a){w.value=a,f.showModal()}const v=D(()=>{const a=[];return k.value.forEach(t=>{t.members=[],t.checked=!0,a.push(t)}),i.value.length>2?a.filter(t=>t.first_name.toLowerCase().includes(i.value.toLowerCase())||t.family_name.toLowerCase().includes(i.value.toLowerCase())||(t.family_name.toLowerCase()+" "+t.first_name.toLowerCase()).includes(i.value.toLowerCase())||(t.first_name.toLowerCase()+" "+t.family_name.toLowerCase()).includes(i.value.toLowerCase())):a});return I(async()=>{await j()}),(a,t)=>{const l=F,_=R,B=$;return n(),c("div",Z,[o(p)?(n(),c("div",ee,re)):C("",!0),e("form",{onSubmit:x(N,["prevent"])},[e("div",ae,[se,e("div",le,[de,d(e("input",{id:"hmoName","onUpdate:modelValue":t[0]||(t[0]=r=>o(s).hmo.hmo_name=r),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""},null,512),[[u,o(s).hmo.hmo_name]])]),e("div",ne,[e("div",ue,[ie,d(e("input",{id:"employerShare","onUpdate:modelValue":t[1]||(t[1]=r=>o(s).hmo.employer_share=r),type:"number",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"0.00",required:""},null,512),[[u,o(s).hmo.employer_share]])]),e("div",me,[ce,d(e("input",{id:"employeeShare","onUpdate:modelValue":t[2]||(t[2]=r=>o(s).hmo.employee_share=r),type:"number",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"0.00",required:""},null,512),[[u,o(s).hmo.employee_share]])])]),e("div",be,[e("div",ge,[fe,d(e("input",{id:"hmoStart","onUpdate:modelValue":t[3]||(t[3]=r=>o(s).hmo.hmo_start=r),type:"date",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""},null,512),[[u,o(s).hmo.hmo_start]])]),e("div",he,[pe,d(e("input",{id:"hmoEnd","onUpdate:modelValue":t[4]||(t[4]=r=>o(s).hmo.hmo_end=r),type:"date",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""},null,512),[[u,o(s).hmo.hmo_end]])])]),e("div",ye,[e("div",_e,[xe,d(e("input",{id:"searchEmployees","onUpdate:modelValue":t[5]||(t[5]=r=>J(i)?i.value=r:null),type:"text",class:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Employee Search"},null,512),[[u,o(i)]])]),e("div",ke,[(n(!0),c(S,null,E(o(v),r=>(n(),c("div",{key:r.id,class:"flex flex-col"},[e("div",we,[e("div",ve,[d(e("input",{"onUpdate:modelValue":b=>r.checked=b,type:"checkbox"},null,8,Me),[[K,r.checked]]),e("span",Ce,L(r.family_name+", "+r.first_name+" "),1)]),h(l,{name:"iconoir:plus",class:"text-2xl text-slate-800 hover:text-blue-500 cursor-pointer",onClick:b=>O(r)},null,8,["onClick"])]),r.members.length>0?(n(),c("div",Se,[(n(!0),c(S,null,E(r.members,(b,M)=>(n(),c("div",{key:M,class:"flex justify-between items-center hover:bg-slate-200 px-4 py-1 border-b border-white"},[e("div",Ee,[M===0?(n(),G(l,{key:0,name:"iconoir:long-arrow-down-right"})):(n(),c("span",Le)),e("span",Ve,L(b.lastname+", "+b.firstname+" "+b.middlename[0].toUpperCase()+"."),1),Ue]),h(l,{name:"iconoir:trash",class:"text-slate-700 hover:text-red-500 cursor-pointer",onClick:Te=>r.members=A(r.members,b)},null,8,["onClick"])]))),128))])):C("",!0)]))),128))])]),e("div",Ne,[h(_,{to:"/hrms/hmo",class:"text-white bg-slate-700 hover:bg-slate-800 focus:ring-4 focus:outline-none focus:ring-slate-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-slate-600 dark:hover:bg-slate-700 dark:focus:ring-slate-800"},{default:V(()=>[P(" Cancel ")]),_:1}),je])])],40,oe),h(B,{size:"modal-sm",title:"Membership Addon"},{default:V(()=>[e("form",{class:"flex flex-col px-4 py-2 gap-2",onSubmit:x(H,["prevent"])},[e("div",null,[He,d(e("input",{id:"firstname","onUpdate:modelValue":t[6]||(t[6]=r=>o(m).firstname=r),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""},null,512),[[u,o(m).firstname]])]),e("div",null,[Ae,d(e("input",{id:"middlename","onUpdate:modelValue":t[7]||(t[7]=r=>o(m).middlename=r),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""},null,512),[[u,o(m).middlename]])]),e("div",null,[Oe,d(e("input",{id:"lastname","onUpdate:modelValue":t[8]||(t[8]=r=>o(m).lastname=r),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""},null,512),[[u,o(m).lastname]])]),e("div",Be,[e("button",{class:"text-white bg-slate-700 hover:bg-slate-800 focus:ring-4 focus:outline-none focus:ring-slate-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-slate-600 dark:hover:bg-slate-700 dark:focus:ring-slate-800",onClick:t[9]||(t[9]=x((...r)=>o(f).hideModal&&o(f).hideModal(...r),["prevent"]))}," Cancel "),Fe])],40,qe)]),_:1})])}}};export{Pe as _};
