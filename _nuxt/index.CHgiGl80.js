import{_ as X,a as Z,b as ee}from"./MainContainer.BswisYLp.js";import{_ as te}from"./DetailedMultipleEmployeeSelector.BkTpFMRq.js";import{_ as j}from"./PsDateInput.vue.Dioz8erE.js";import{_ as ae}from"./PsNumberInput.vue.BU6zn-2O.js";import{_ as se}from"./DepartmentProjectSelector.BGO9zzOz.js";import{_ as G}from"./ApprovalsList.aVDiIVet.js";import{u as R,_ as oe,F as ne}from"./13thmonth.CzlCkiGp.js";import{_ as Q}from"./PsButton.Cqg1ndZS.js";import{_ as le}from"./PsModal.Bk3xu63Y.js";import{f as V,B as J,s as w,q as re,o as m,h as g,w as y,b as n,u as e,a,c as L,F as D,i as F,r as Y,L as T,m as ie,x as $,M as de,v as B,y as I,t as v,j as P}from"./entry.32UGFqj-.js";import{u as ue}from"./approvals.89EhJm5V.js";import{_ as U}from"./PsTable.BPIFONj1.js";import{_ as N}from"./CustomPagination.C91H0oe5.js";import{_ as k}from"./LoadingContainer.vue.BZUQ77Em.js";import{u as E}from"./index.CBzzh1I-.js";import{d as H}from"./Utilities.DofxnkSu.js";import{_ as ce}from"./LayoutPrint.BjcxelaN.js";import{_ as me}from"./AcessContainer.Dum7aOuo.js";import{u as pe}from"./id.WqrvI90c.js";import{u as _e}from"./vue.f36acd1f.Ds2AlAv6.js";import{u as M,A as x}from"./Accessibilities.xGffDRXj.js";import"./LayoutBoards.vue.D_rbqYxd.js";import"./loader.BQ9QddgL.js";import"./DepartmentSelector.vue.D5_eirUz.js";import"./enum.M1X5V5yu.js";import"./CustomFetch.ggXvTdIz.js";import"./ProjectSelector.vue.D_IMAiNS.js";import"./PsSelectSearch.vue.CT-F0Leg.js";import"./Icon.CrHlyQOo.js";import"./index.T-zbMaZc.js";import"./PsTextInput.vue.C7eOWbog.js";import"./PsSelect.vue.DvuFdhGo.js";import"./UserEmployeeSelector.vue.CW0bAtx_.js";import"./nuxt-link.C5IpI_HT.js";import"./client-only.CuVny2dr.js";import"./users.G4iuGzk0.js";const ye={class:"w-full mb-2 rounded-lg p-4 bg-slate-100"},he=a("label",{for:"approved_by",class:"block text-sm font-medium text-gray-900 dark:text-white"},"Approvals:",-1),fe={class:"flex gap-2 p-2 justify-end relative"},ge=V({__name:"DraftModal",props:{showModal:{required:!1,type:Boolean}},emits:["update:showModal"],setup(b){const s=R(),t=J(),{createRequestData:r,createApprovalsBackup:d}=w(s),p=re(b,"showModal"),o=()=>{p.value=!1},l=async()=>{try{r.value.data.approvals=d.value,await s.createRequest(),t.add({type:"success",text:"13th Month Successfully Generated."}),o()}catch(u){t.add({type:"error",text:u})}};return(u,_)=>{const f=oe,h=G,i=Q,S=le;return m(),g(S,{"show-modal":p.value,"onUpdate:showModal":_[0]||(_[0]=A=>p.value=A),"is-loading":e(r).isLoading,title:"Salary Disbursement Request"},{body:y(()=>[n(f,{data:e(r).resourceData,class:"mt-4"},null,8,["data"]),a("div",ye,[he,(m(!0),L(D,null,F(e(d),(A,C)=>(m(),g(h,{key:"13thMonthApprovalsListItem"+C,modelValue:e(d)[C],"onUpdate:modelValue":q=>e(d)[C]=q},null,8,["modelValue","onUpdate:modelValue"]))),128))])]),footer:y(()=>[a("div",fe,[n(i,{"button-title":"Submit",onClick:l})])]),_:1},8,["show-modal","is-loading"])}}}),be={class:"flex flex-col gap-2"},ve={class:"w-full flex gap-2 md:flex-row flex-col"},Ae={class:"w-full flex gap-2 md:flex-row flex-col"},Me={class:"flex items-center"},xe=a("label",{for:"showAdvance"},"Show Advance",-1),Le={class:"w-full flex gap-2 md:flex-row flex-col"},Re={class:"w-full mb-2 rounded-lg p-4 bg-slate-100"},we=a("label",{for:"approved_by",class:"block text-sm font-medium text-gray-900 dark:text-white"},"Approvals:",-1),Ce=V({__name:"13thmonth_form",async setup(b){let s,t;const r=R(),d=ue(),p=J(),{generateDraftRequest:o,createApprovalsBackup:l}=w(r),u=Y(!1),_=Y(!1),f=async()=>{try{await r.generateDraft(),_.value=!0,p.add({type:"success",text:"Payroll Draft Successfully Generated."})}catch(h){p.add({type:"error",text:h})}};return T(u,h=>{h||(o.value.data.days_advance=0,o.value.data.charging_type="",o.value.data.charging_id=null)}),l.value=([s,t]=ie(()=>d.getApprovalByName(ne)),s=await s,t(),s),(h,i)=>{const S=te,A=j,C=ae,q=se,z=G,K=ge;return m(),L("div",be,[n(S,{modelValue:e(o).data.employee_ids,"onUpdate:modelValue":i[0]||(i[0]=c=>e(o).data.employee_ids=c),title:"Employee Name",name:"Employee Name"},null,8,["modelValue"]),a("div",ve,[n(A,{modelValue:e(o).data.date_from,"onUpdate:modelValue":i[1]||(i[1]=c=>e(o).data.date_from=c),class:"w-full",title:"Cut-off Date (Start)"},null,8,["modelValue"]),n(A,{modelValue:e(o).data.date_to,"onUpdate:modelValue":i[2]||(i[2]=c=>e(o).data.date_to=c),class:"w-full",title:"Cut-off Date (End)"},null,8,["modelValue"]),n(A,{modelValue:e(o).data.date_requested,"onUpdate:modelValue":i[3]||(i[3]=c=>e(o).data.date_requested=c),class:"w-full",title:"Release Date"},null,8,["modelValue"])]),a("div",Ae,[a("div",Me,[$(a("input",{id:"showAdvance","onUpdate:modelValue":i[4]||(i[4]=c=>B(u)?u.value=c:null),type:"checkbox","true-value":!0,"false-value":!1},null,512),[[de,e(u)]]),xe]),$(n(C,{modelValue:e(o).data.days_advance,"onUpdate:modelValue":i[5]||(i[5]=c=>e(o).data.days_advance=c),title:"Advance Days",class:"md:w-1/3 w-full"},null,8,["modelValue"]),[[I,e(u)]]),$(n(q,{"select-type":e(o).data.charging_type,"onUpdate:selectType":i[6]||(i[6]=c=>e(o).data.charging_type=c),"department-id":e(o).data.charging_id,"onUpdate:departmentId":i[7]||(i[7]=c=>e(o).data.charging_id=c),"project-id":e(o).data.charging_id,"onUpdate:projectId":i[8]||(i[8]=c=>e(o).data.charging_id=c),"use-class-charge-type":!0,class:"md:w-1/3 w-full",title:"Charging",required:e(o).data.days_advance>0},null,8,["select-type","department-id","project-id","required"]),[[I,e(u)]])]),a("div",Le,[a("div",Re,[we,(m(!0),L(D,null,F(e(l),(c,O)=>(m(),g(z,{key:"13thMonthApprovalsListItem"+O,modelValue:e(l)[O],"onUpdate:modelValue":W=>e(l)[O]=W},null,8,["modelValue","onUpdate:modelValue"]))),128))])]),a("div",{class:"w-full flex gap-2 md:flex-row flex-col"},[a("div",{class:"w-full md:w-1/5"},[a("button",{type:"button",class:"text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-green-700 dark:focus:ring-green-800",onClick:f}," Generate 13th Month ")])]),n(K,{"show-modal":e(_),"onUpdate:showModal":i[9]||(i[9]=c=>B(_)?_.value=c:null)},null,8,["show-modal"])])}}}),Pe={class:"pb-2 text-gray-500 p-2"},Te={class:"flex justify-center mx-auto"},ke={__name:"AllRequests",setup(b){const s=R(),{allRequests:t}=w(s),r=E(()=>{s.getAllRequests()},500);t.value.isLoaded||r(),T(()=>({...t.value.params}),(l,u)=>{l.page===u.page&&(t.value.params.page=1),r()},{deep:!0});const d=l=>{t.value.params.page=l.page??""},p=[{name:"Payroll Duration",id:"payroll_duration"},{name:"13th Month Date",id:"date_requested"},{name:"Requested By",id:"requested_by"},{name:"Requested On",id:"created_at_human"},{name:"Request Status",id:"request_status"}],o={link:{show:!0,url:"/hrms/payroll/13thmonthpay/details"}};return(l,u)=>{const _=U,f=N,h=k;return m(),g(h,{class:"w-full",loading:e(t).isLoading},{default:y(()=>[a("div",Pe,[n(_,{"header-columns":p,datas:e(t).list,actions:o},null,8,["datas"])]),a("div",Te,[n(f,{links:e(t).pagination,onChangeParams:d},null,8,["links"])])]),_:1},8,["loading"])}}},Se={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},qe={class:"flex justify-center mx-auto"},Oe={__name:"MyRequests",setup(b){const s=R(),{myRequests:t}=w(s),r=E(()=>{s.getMyRequests()},500);t.value.isLoaded||r(),T(()=>({...t.value.params}),(l,u)=>{l.page===u.page&&(t.value.params.page=1),r()},{deep:!0});const d=[{name:"Payroll Duration",id:"payroll_duration"},{name:"13th Month Date",id:"date_requested"},{name:"Requested By",id:"requested_by"},{name:"Requested On",id:"created_at_human"},{name:"Request Status",id:"request_status"}],p={link:{show:!0,url:"/hrms/payroll/13thmonthpay/details"}},o=l=>{t.value.params.page=l.page??""};return(l,u)=>{const _=U,f=N,h=k;return m(),g(h,{class:"w-full",loading:e(t).isLoading},{default:y(()=>[a("div",Se,[n(_,{"header-columns":d,actions:p,datas:e(t).list??[]},null,8,["datas"])]),a("div",qe,[n(f,{links:e(t).pagination,onChangeParams:o},null,8,["links"])])]),_:1},8,["loading"])}}},$e={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},He={class:"flex justify-center mx-auto"},Ve={__name:"MyApprovals",setup(b){const s=R(),{myApprovals:t}=w(s),r=E(()=>{s.getMyApprovals()},500);t.value.isLoaded||r(),T(()=>({...t.value.params}),(l,u)=>{l.page===u.page&&(t.value.params.page=1),r()},{deep:!0});const d=[{name:"Payroll Duration",id:"payroll_duration"},{name:"13th Month Date",id:"date_requested"},{name:"Requested By",id:"requested_by"},{name:"Requested On",id:"created_at_human"},{name:"Request Status",id:"request_status"}],p={link:{show:!0,url:"/hrms/payroll/13thmonthpay/details"}},o=l=>{t.value.params.page=l.page??""};return(l,u)=>{const _=U,f=N,h=k;return m(),g(h,{class:"w-full",loading:e(t).isLoading},{default:y(()=>[a("div",$e,[n(_,{"header-columns":d,actions:p,datas:e(t).list??[]},null,8,["datas"])]),a("div",He,[n(f,{links:e(t).pagination,onChangeParams:o},null,8,["links"])])]),_:1},8,["loading"])}}},De={class:"printTable border border-gray-500"},Fe=a("thead",{class:"text-md"},[a("tr",{class:"py-4"},[a("th",{colspan:"7",class:"py-4 border-gray-500"}," 13TH MONTH FORMULA COMPUTATION ")]),a("tr",null,[a("th",{class:"border border-gray-500"}," NO "),a("th",{class:"border border-gray-500"}," OFFICE / PROJECT CODE "),a("th",{class:"border border-gray-500"}," PAYROLL DURATION "),a("th",{class:"border border-gray-500"}," TOTAL NO. OF PAYROLLS "),a("th",{class:"border border-gray-500"}," REGULAR DAYS "),a("th",{class:"border border-gray-500"}," SPECIAL HOLIDAY "),a("th",{class:"border border-gray-500"}," TOTAL AMOUNT OF GROSS PAY ")])],-1),Ue={class:"text-sm"},Ne={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-center"},Ee={class:"border border-gray-500 h-8 px-2 font-bold text-sm"},Ye={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-center"},Be={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-right"},Ie={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-right"},je={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-right"},Ge={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-right"},Qe={__name:"SummaryTable",props:{data:{type:Object,required:!0}},setup(b){return(s,t)=>(m(),L("table",De,[Fe,a("tbody",Ue,[(m(!0),L(D,null,F(b.data,(r,d,p)=>(m(),L("tr",{key:"13thMonthSummaryDataRow"+p,class:"h-2"},[a("td",Ne,v(d+1),1),a("td",Ee,v(r.charging_name||"N/A"),1),a("td",Ye,v(r.payroll_duration||"N/A"),1),a("td",Be,v(r.unique_payrolls||0),1),a("td",Ie,v(("useFormatCurrency"in s?s.useFormatCurrency:e(H))(r.total_regular_salary||0)),1),a("td",je,v(("useFormatCurrency"in s?s.useFormatCurrency:e(H))(r.total_special_holiday_salary||0)),1),a("td",Ge,v(("useFormatCurrency"in s?s.useFormatCurrency:e(H))(r.total_amount||0)),1)]))),128))])]))}},Je={class:"flex gap-2"},ze={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2 items-center"},Ke={__name:"SummaryDetails",setup(b){const s=R(),{summary:t}=w(s);return(r,d)=>{const p=j,o=Q,l=Qe,u=ce,_=k;return m(),g(_,{class:"w-full"},{default:y(()=>[a("div",Je,[n(p,{modelValue:e(t).params.date_requested,"onUpdate:modelValue":d[0]||(d[0]=f=>e(t).params.date_requested=f),title:"13th Month Date"},null,8,["modelValue"]),n(o,{"button-title":"Get Summary",loading:e(s).summary.isLoading,onClick:e(s).getSummary},null,8,["loading","onClick"])]),n(u,null,{default:y(()=>[a("div",ze,[n(l,{data:e(s).summary.data},null,8,["data"])])]),_:1})]),_:1})}}},We={class:"grid grid-cols-1 md:flex-row gap-4"},$t=V({__name:"index",setup(b){const s=pe("$5V1V1LtQby");return _e({title:"13th Month Pay"}),(t,r)=>{const d=X,p=Ce,o=Z,l=ke,u=Oe,_=Ve,f=Ke,h=ee,i=me;return m(),g(i,{"if-access":("useCheckAccessibility"in t?t.useCheckAccessibility:e(M))([("AccessibilityTypes"in t?t.AccessibilityTypes:e(x)).HRMS_PAYROLL_13THMONTH_GROUP])},{default:y(()=>[a("div",We,[n(h,null,{"tab-titles":y(()=>[("useCheckAccessibility"in t?t.useCheckAccessibility:e(M))([("AccessibilityTypes"in t?t.AccessibilityTypes:e(x)).HRMS_PAYROLL_13THMONTH_FORMANDMYREQUEST])?(m(),g(d,{key:0,"target-id":"tab1"+e(s),title:"Generate 13th Month Pays"},null,8,["target-id"])):P("",!0),("useCheckAccessibility"in t?t.useCheckAccessibility:e(M))([("AccessibilityTypes"in t?t.AccessibilityTypes:e(x)).HRMS_PAYROLL_13THMONTH_ALLREQUESTS])?(m(),g(d,{key:1,"target-id":"tab2"+e(s),title:"All Requests"},null,8,["target-id"])):P("",!0),("useCheckAccessibility"in t?t.useCheckAccessibility:e(M))([("AccessibilityTypes"in t?t.AccessibilityTypes:e(x)).HRMS_PAYROLL_13THMONTH_FORMANDMYREQUEST])?(m(),g(d,{key:2,"target-id":"tab3"+e(s),title:"My Requests"},null,8,["target-id"])):P("",!0),("useCheckAccessibility"in t?t.useCheckAccessibility:e(M))([("AccessibilityTypes"in t?t.AccessibilityTypes:e(x)).HRMS_PAYROLL_13THMONTH_MYAPPROVALS])?(m(),g(d,{key:3,"target-id":"tab4"+e(s),title:"My Approvals"},null,8,["target-id"])):P("",!0),("useCheckAccessibility"in t?t.useCheckAccessibility:e(M))([("AccessibilityTypes"in t?t.AccessibilityTypes:e(x)).HRMS_PAYROLL_13THMONTH_SUMMARY])?(m(),g(d,{key:4,"target-id":"tab5"+e(s),title:"Payroll Summary"},null,8,["target-id"])):P("",!0)]),"tab-containers":y(()=>[n(o,{id:"tab1"+e(s)},{default:y(()=>[n(p)]),_:1},8,["id"]),n(o,{id:"tab2"+e(s)},{default:y(()=>[n(l)]),_:1},8,["id"]),n(o,{id:"tab3"+e(s)},{default:y(()=>[n(u)]),_:1},8,["id"]),n(o,{id:"tab4"+e(s)},{default:y(()=>[n(_)]),_:1},8,["id"]),n(o,{id:"tab5"+e(s)},{default:y(()=>[n(f)]),_:1},8,["id"])]),_:1})])]),_:1},8,["if-access"])}}});export{$t as default};
