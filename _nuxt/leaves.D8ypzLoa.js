import{_ as I}from"./LayoutBoards.vue.D_rbqYxd.js";import{ab as Z,l as Q,O as W,_ as O,s as R,B as k,r as N,o as v,h as P,w as S,a as e,g as B,x as d,u as t,A as w,c as T,F as j,i as H,t as f,D,G as U,y as x,p as V,e as Y,b as L}from"./entry.32UGFqj-.js";import{h as M}from"./CustomFetch.ggXvTdIz.js";import{_ as X}from"./editBoards.vue.DA5g6BdX.js";import{_ as ee}from"./PsTable.BPIFONj1.js";import{_ as se}from"./CustomPagination.C91H0oe5.js";import{_ as te}from"./AcessContainer.Dum7aOuo.js";import{u as ae}from"./vue.f36acd1f.Ds2AlAv6.js";import{u as oe,A as le}from"./Accessibilities.xGffDRXj.js";import"./loader.BQ9QddgL.js";import"./Icon.CrHlyQOo.js";import"./index.T-zbMaZc.js";import"./nuxt-link.C5IpI_HT.js";import"./Utilities.DofxnkSu.js";import"./users.G4iuGzk0.js";const{token:A}=Z(),E=W(),ne="Regular",ie="Probationary",ce="Part Time",re="Project Based",de="Contractual",F=[ie,ne,ce,re,de],$=Q("leaves",{state:()=>({isEdit:!1,leave:{id:null,leave_name:null,amt_of_leave:null,employment_status:[]},list:[],leaveList:[],pagination:{},getParams:{},errorMessage:"",successMessage:""}),getters:{getLeaveNameAndAmtOfLeave:a=>a.list.map(s=>({id:s.id,leave_name:s.leave_name,amt_of_leave:s.amt_of_leave,employment_status:s.employment_status}))},actions:{async getLeave(){const{data:a,error:s}=await M("/api/leave",{baseURL:E.public.HRMS_API_URL,method:"GET",headers:{Authorization:A.value+"",Accept:"application/json"},params:this.getParams,onResponse:({response:o})=>{this.list=o._data.data.data.map(l=>({id:l.id,leave_name:l.leave_name,amt_of_leave:l.amt_of_leave,employment_status:l.employment_status.join(", ")})),this.pagination={first_page:o._data.links.first,pages:o._data.meta.links,last_page:o._data.links.last}}},"$wmnqtaKsGI");if(a)return a;if(s)return s},async createLeave(){this.successMessage="",this.errorMessage="",await M("/api/leave",{baseURL:E.public.HRMS_API_URL,method:"POST",headers:{Authorization:A.value+"",Accept:"application/json"},body:this.leave,watch:!1,onResponse:({response:a})=>{a.ok?(this.getLeave(),this.reset(),this.successMessage=a._data.message):this.errorMessage=a._data.message}},"$PUp6C8UqZE")},clearMessages(){this.errorMessage="",this.successMessage=""},async editLeaves(){this.successMessage="",this.errorMessage="";const{data:a,error:s}=await M("/api/leave/"+this.leave.id,{baseURL:E.public.HRMS_API_URL,method:"PATCH",headers:{Authorization:A.value+"",Accept:"application/json"},body:this.leave,watch:!1,onResponse:({response:o})=>{this.successMessage=o._data.message}},"$fD3eKrGgJq");if(a.value)return this.getLeave(),this.reset(),this.successMessage=a.value.message,a;if(s.value)return this.errorMessage=s.value.message,s},async deleteLeave(a){await M("/api/leave/"+a,{baseURL:E.public.HRMS_API_URL,method:"DELETE",headers:{Authorization:A.value+"",Accept:"application/json"},watch:!1,onResponse:({response:s})=>{this.successMessage=s._data.message,this.getLeave()},onResponseError:({response:s})=>{this.errorMessage=s._data.message}},"$D4NTA9mbJb")},reset(){this.leave={id:null,leave_name:null,amt_of_leave:null,employment_status:[]},this.isEdit=!1,this.successMessage="",this.errorMessage=""}}}),y=a=>(V("data-v-03be9927"),a=a(),Y(),a),ue={class:"text-gray-500 mt-2"},me=["onSubmit"],_e=y(()=>e("label",{class:"text-sm"},"Create Leave Type",-1)),pe=y(()=>e("label",{for:"leaveName",class:"text-sm italic"},"Leave Name",-1)),ve=y(()=>e("label",{for:"leaveAmt",class:"text-sm italic"},"Amount of Leaves",-1)),fe={class:"grid grid-rows-1 p-px"},ge=y(()=>e("label",{for:"employment_type",class:"text-sm italic"},"Employment Status",-1)),he=y(()=>e("option",{class:"italic font-semibold",value:"",disabled:"",selected:""}," Choose Employment Type ",-1)),ye=["value"],be=y(()=>e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"flex-1 text-white p-2 rounded bg-teal-600 content-center mt-5"}," Add Leave ")],-1)),Le={__name:"LeavesForm",setup(a){const s=$(),{leave:o,errorMessage:l,successMessage:_}=R(s),u=k(),r=N(!1),p=async()=>{try{r.value=!0,await s.createLeave(),s.errorMessage!==""?u.add({type:"error",text:s.errorMessage}):u.add({type:"success",text:s.successMessage})}catch{u.add({type:"error",text:s.errorMessage})}finally{s.clearMessages(),r.value=!1}};return(g,m)=>{const n=I;return v(),P(n,{title:"Leaves",loading:t(r)},{default:S(()=>[e("div",ue,[e("form",{onSubmit:B(p,["prevent"])},[_e,e("div",null,[e("div",null,[pe,d(e("input",{id:"leaveName","onUpdate:modelValue":m[0]||(m[0]=i=>t(o).leave_name=i),type:"text",class:"w-full rounded-lg"},null,512),[[w,t(o).leave_name]])]),e("div",null,[ve,d(e("input",{id:"leaveAmt","onUpdate:modelValue":m[1]||(m[1]=i=>t(o).amt_of_leave=i),type:"number",class:"w-full rounded-lg"},null,512),[[w,t(o).amt_of_leave]])]),e("div",fe,[ge,d(e("select",{id:"employment_status","onUpdate:modelValue":m[2]||(m[2]=i=>t(o).employment_status=i),class:"bg-slate-100 border border-slate-300 rounded py-1.5 pl-3 cursor-pointer focus:outline focus:outline-color1 focus:bg-white",multiple:""},[he,(v(!0),T(j,null,H(t(F),(i,c)=>(v(),T("option",{key:c,value:i},f(i),9,ye))),128))],512),[[D,t(o).employment_status]])])]),be],40,me),e("p",{hidden:"",class:U(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!t(l)}])},f(t(l)),3),d(e("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic"},f(t(_)),513),[[x,t(_)]])])]),_:1},8,["loading"])}}},xe=O(Le,[["__scopeId","data-v-03be9927"]]),b=a=>(V("data-v-1dccca5a"),a=a(),Y(),a),Me={class:"text-gray-500 mt-2"},Ae=["onSubmit"],Ee=b(()=>e("label",{class:"text-sm italic"},"Edit Leave Type",-1)),we=b(()=>e("label",{for:"leaveName",class:"text-sm italic"},"Leave Name",-1)),Te=b(()=>e("label",{for:"leaveAmt",class:"text-sm italic"},"Amount of Leaves",-1)),Re={class:"grid grid-rows-1 p-px"},Pe=b(()=>e("label",{for:"employment_type",class:"text-sm italic"},"Employment Type",-1)),Se=b(()=>e("option",{class:"italic font-semibold",value:"",disabled:"",selected:""}," Choose Employment Type ",-1)),$e=["value"],Ce=b(()=>e("button",{type:"submit",class:"flex-1 text-white p-2 rounded bg-teal-600 content-center mt-5"}," Save ",-1)),ke={__name:"EditForm",setup(a){const s=$(),{leave:o,errorMessage:l,successMessage:_}=R(s),u=k(),r=N(!1),p=()=>{s.reset()},g=async()=>{try{r.value=!0,await s.editLeaves(),u.add({type:"success",text:s.successMessage})}finally{r.value=!1,s.clearMessages()}};return(m,n)=>{const i=X;return v(),P(i,{title:"Edit Leaves",loading:t(r)},{default:S(()=>[e("div",Me,[e("form",{onSubmit:B(g,["prevent"])},[Ee,e("div",null,[e("div",null,[we,d(e("input",{id:"leaveName","onUpdate:modelValue":n[0]||(n[0]=c=>t(o).leave_name=c),type:"text",class:"w-full rounded-lg"},null,512),[[w,t(o).leave_name]])]),e("div",null,[Te,d(e("input",{id:"leaveAmt","onUpdate:modelValue":n[1]||(n[1]=c=>t(o).amt_of_leave=c),type:"number",class:"w-full rounded-lg"},null,512),[[w,t(o).amt_of_leave]])]),e("div",Re,[Pe,d(e("select",{id:"edit_employment_type","onUpdate:modelValue":n[2]||(n[2]=c=>t(o).employment_status=c),class:"bg-slate-100 border border-slate-300 rounded py-1.5 pl-3 cursor-pointer focus:outline focus:outline-color1 focus:bg-white",required:"",multiple:""},[Se,(v(!0),T(j,null,H(t(F),(c,C)=>(v(),T("option",{key:C,value:c},f(c),9,$e))),128))],512),[[D,t(o).employment_status]])])]),e("div",{class:"flex justify-end gap-4"},[Ce,e("button",{type:"button",class:"flex-1 text-white p-2 rounded bg-gray-700 content-center mt-5 hover:bg-gray-500",onClick:p}," Cancel ")])],40,Ae),e("p",{hidden:"",class:U(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!t(l)}])},f(t(l)),3),d(e("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic"},f(t(_)),513),[[x,t(_)]])])]),_:1},8,["loading"])}}},Ne=O(ke,[["__scopeId","data-v-1dccca5a"]]),Ue={class:"pb-2 text-gray-500"},Ie={class:"flex justify-center mx-auto"},Oe={__name:"LeavesTable",setup(a){const s=$(),{list:o,isEdit:l,leave:_,getParams:u,pagination:r,errorMessage:p,successMessage:g}=R(s),m=k(),n=N(!1),i=h=>{l.value=!0,_.value=h},c=async h=>{try{n.value=!0,await s.deleteLeave(h.id),m.add({type:"success",text:s.successMessage})}finally{n.value=!1}},C=h=>{u.value.page=h.page??""},z=[{name:"Leave Name",id:"leave_name"},{name:"Amount of Leaves",id:"amt_of_leave"},{name:"Employment Status",id:"employment_status"}],G={edit:!0,delete:!0};return(h,je)=>{const q=ee,J=se,K=I;return v(),P(K,{title:"Leave List",class:"w-full",loading:t(n)},{default:S(()=>[e("div",Ue,[L(q,{"header-columns":z,datas:t(o),actions:G,onEditRow:i,onDeleteRow:c},null,8,["datas"])]),e("div",Ie,[L(J,{links:t(r),onChangeParams:C},null,8,["links"])]),e("p",{hidden:"",class:U(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!t(p)}])},f(t(p)),3),d(e("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic"},f(t(g)),513),[[x,t(g)]])]),_:1},8,["loading"])}}},Be={class:"flex flex-col md:flex-row gap-4"},ss={__name:"leaves",setup(a){const s=$(),{isEdit:o}=R(s);return s.getLeave(),ae({title:"Leaves"}),(l,_)=>{const u=xe,r=Ne,p=Oe,g=te;return v(),P(g,{"if-access":("useCheckAccessibility"in l?l.useCheckAccessibility:t(oe))([("AccessibilityTypes"in l?l.AccessibilityTypes:t(le)).hrms_setup_leaves])},{default:S(()=>[e("div",Be,[d(L(u,null,null,512),[[x,!t(o)]]),d(L(r,null,null,512),[[x,t(o)]]),L(p)])]),_:1},8,["if-access"])}}};export{ss as default};
