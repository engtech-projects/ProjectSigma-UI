import{_ as A}from"./UserEmployeeSelector.vue.DiXko0wz.js";import{f as R,ax as V,s as k,r as b,C as L,B as T,L as M,o as n,c,a as o,x as r,y as u,u as e,t as _,F as O,j as y,b as U,v as j}from"./entry.R6V7NTxy.js";import{A as B}from"./Accessibilities.uaboihcy.js";import{u as I}from"./request.D7XiJo_f.js";const q={class:"flex flex-col gap-2"},D={class:"flex flex-col gap-4"},F={class:"flex flex-col gap-2 justify-start items-start"},P={class:"flex flex-row gap-2"},G={key:0,class:"flex flex-row"},H=["disabled"],Q={key:1,class:"flex flex-row gap-2 justify-start items-center"},Y=["disabled"],$=["disabled"],z={class:"flex flex-col gap-2"},J={key:0},K={class:"text-sm font-semibold"},W={class:"flex flex-col gap-4"},X={class:"flex flex-col gap-2"},Z={class:"flex flex-row justify-between gap-4"},ie=R({__name:"CanvasserSelector",setup(ee){const v=V(),i=I(),{canvasser:s,canvasserForm:h}=k(i),l=b(!0),d=L(()=>v.query.pr_id),a=b(null),m=T(),S=()=>{var t;s.value.list.length>0?a.value=(t=s==null?void 0:s.list)==null?void 0:t.name:a.value=null,l.value=!1},C=()=>{a.value=null,l.value=!0},N=async()=>{h.value={user_id:a.value,request_procurement_id:Number(d.value)},await i.setCanvasser(Number(d.value)),i.errorMessage!==""?m.add({type:"error",text:i.errorMessage}):(m.add({type:"success",text:i.successMessage}),l.value=!0),await i.getOne(Number(d.value))};return M(s,t=>{t!=null&&t.id&&(t!=null&&t.name)&&(selectedCanvasser.value={id:t.id,name:t.name})},{immediate:!0}),(t,f)=>{var p,x,g;const w=A;return n(),c("div",q,[o("div",D,[o("div",F,[o("div",P,[r(o("data",null,[e(l)?(n(),c("div",G,[o("button",{class:"px-3 py-1 bg-purple-600 text-white text-xs font-bold rounded-md",disabled:e(s).isLoading,onClick:S},_(e(s).isLoading?"LOADING...":"SET CANVASSER"),9,H)])):(n(),c("div",Q,[o("button",{class:"px-3 py-1 bg-green-600 text-white text-xs font-bold",disabled:e(s).isLoading||!e(a),onClick:N},_(e(s).isLoading?"SAVING...":"SAVE"),9,Y),r(o("button",{class:"px-3 py-1 bg-red-600 text-white text-xs font-bold",disabled:e(s).isLoading,onClick:C}," CANCEL ",8,$),[[u,!e(s).isLoading]])]))],512),[[u,("AccessibilityTypes"in t?t.AccessibilityTypes:e(B)).INVENTORY_PROCUREMENT_PROCUREMENTREQUESTS_SETCANVASSER]])]),o("div",z,[e(l)?(n(),c(O,{key:0},[(p=e(s).list)!=null&&p.length?(n(),c("div",J,[o("span",K,_((g=(x=e(s))==null?void 0:x.list)==null?void 0:g.name),1)])):y("",!0)],64)):y("",!0)])]),r(o("div",W,[o("div",X,[o("div",Z,[U(w,{modelValue:e(a),"onUpdate:modelValue":f[0]||(f[0]=E=>j(a)?a.value=E:null),class:"w-1/4",disabled:e(s).isLoading},null,8,["modelValue","disabled"])])])],512),[[u,!e(l)]])])])}}});export{ie as _};
