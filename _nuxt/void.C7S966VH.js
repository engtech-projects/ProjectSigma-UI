import{b as i,c as o}from"./CustomFetch.ggXvTdIz.js";import{l as r}from"./entry.32UGFqj-.js";const p=r("VoidsStore",{state:()=>({allRequests:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""},myApprovals:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""},myRequests:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""}}),actions:{async getOne(s){return await i("/api/request-voids/resource/"+s,{method:"GET",onResponse:({response:a})=>{if(a.ok)return a._data.data;throw new Error(a._data.message)}})},async getAllRequests(){this.allRequests.isLoaded=!0,await o("/api/request-voids/resource",{method:"GET",params:this.allRequests.params,onRequest:()=>{this.allRequests.isLoading=!0},onResponse:({response:s})=>{this.allRequests.isLoading=!1,s.ok&&(this.allRequests.list=s._data.data,this.allRequests.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last})}})},async getMyRequests(){this.myRequests.isLoaded=!0,await o("/api/request-voids/my-requests",{method:"GET",params:this.myRequests.params,onRequest:()=>{this.myRequests.isLoading=!0},onResponse:({response:s})=>{if(this.myRequests.isLoading=!1,s.ok)this.myRequests.list=s._data.data,this.myRequests.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last};else throw this.myRequests.errorMessage=s._data.message,new Error(s._data.message)}})},async getMyApprovals(){this.myApprovals.isLoaded=!0,await o("/api/request-voids/my-approvals",{method:"GET",params:this.myApprovals.params,onRequest:()=>{this.myApprovals.isLoading=!0},onResponse:({response:s})=>{if(this.myApprovals.isLoading=!1,s.ok)this.myApprovals.list=s._data.data,this.myApprovals.successMessage=s._data.message,this.myApprovals.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last};else throw this.myApprovals.errorMessage=s._data.message,new Error(s._data.message)}})},async approveApprovalForm(s){await i("/api/approvals/approve/RequestVoid/"+s,{method:"POST",onResponseError:({response:a})=>{throw new Error(a._data.message)},onResponse:({response:a})=>{if(a.ok)return this.reloadResources(),a._data;throw new Error(a._data.message)}})},async denyApprovalForm(s,a){const t=new FormData;t.append("id",s),t.append("remarks",a),await i("/api/approvals/disapprove/RequestVoid/"+s,{method:"POST",body:t,onResponseError:({response:e})=>{throw new Error(e._data.message)},onResponse:({response:e})=>{if(e.ok)return this.reloadResources(),e._data}})},reloadResources(){const s=[];this.allRequests.isLoaded&&s.push(this.getAllRequests),this.myRequests.isLoaded&&s.push(this.getMyRequests),this.myApprovals.isLoaded&&s.push(this.getMyApprovals),this.$reset(),s.forEach(a=>{a()})}}});export{p as u};
