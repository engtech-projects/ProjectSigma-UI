import P from"./Icon.DcF_NU9d.js";import{f as x,o as s,c,a as e,b as d,d as D,x as j,D as q,u as o,F as h,i as f,t as n,B,y as O,G as w,g as V,j as S,r as I,_ as Y,H,w as g,h as M,aa as Q,ax as z,s as J,L as W,v as G}from"./entry.R6V7NTxy.js";import{u as A}from"./revisions.DP_29BCq.js";import{u as E}from"./projects.BzIGGuNp.js";import{_ as K,a as X,b as Z}from"./SummaryOfBid.vue.FfDlM4LU.js";import{_ as R}from"./IsoHeader.vue.CeUOAvDJ.js";import{_ as ee}from"./LoadScreen.nbfquDjl.js";import{_ as te}from"./nuxt-link.drPfi767.js";import{b as L}from"./enums.DZVv3ml5.js";import{a as p}from"./Utilities.Cbr1Z9cn.js";import{_ as re}from"./LayoutPrintAdvanced.shu-O4kB.js";import{_ as oe}from"./LayoutBoards.vue.1keADq5t.js";import"./index.T-zbMaZc.js";import"./CustomFetch.BRBLzGci.js";import"./editBoards.vue.DJ7sTR7u.js";import"./loader.C2wIXBoB.js";import"./ModalsTask.vue.C-5HMoFc.js";import"./ModalContainer.CDqF-arx.js";import"./evenpar.D2HxGWpc.js";import"./id.Dwf9xs1O.js";import"./client-only.QuN6N-R_.js";const ne={class:"mb-4 flex flex-col gap-2"},se={class:"text-md font-semibold"},ae={class:"relative"},ce=e("option",{value:null,selected:""}," Main Project ",-1),ie=["value"],le=x({__name:"ProjectVersionDropdown",setup(_){const a=A();return(r,t)=>{const y=P;return s(),c("div",ne,[e("label",se,[d(y,{name:"mdi:history"}),D(" Project Version ")]),e("div",ae,[j(e("select",{"onUpdate:modelValue":t[0]||(t[0]=i=>o(a).revisionSelected=i),class:"block w-full bg-gray-100 border border-gray-300 text-gray-700 text-xs font-medium rounded px-3 py-2"},[ce,(s(!0),c(h,null,f(o(a).list,(i,b)=>(s(),c("option",{key:b,value:i.id},n(i==null?void 0:i.project_name_version),9,ie))),128))],512),[[q,o(a).revisionSelected]])])])}}}),de={class:"flex items-center justify-between mb-2"},ue={class:"text-md font-semibold"},be=x({__name:"ProjectPanelHeader",setup(_){const a=E(),r=A(),t=B(),y=async()=>{try{await r.restoreRevisions(),t.add({type:"success",text:r.successMessage}),a.getProject(r.getParams.project_id)}catch(i){t.add({type:"error",text:i instanceof Error?i.message:String(i)})}finally{r.clearMessages(),a.clearMessages()}};return(i,b)=>{const u=P;return s(),c("div",de,[e("label",ue,[d(u,{name:"mdi:folder-information"}),D(" Project Details ")]),j(e("button",{class:"text-xs px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded shadow-sm transition",onClick:y}," Restore Revision ",512),[[O,o(r).revisionSelected!==null]])])}}}),pe={class:"flex"},_e={class:"space-y-1 text-xs"},me=["onClick"],ye={class:"flex items-center"},ge={key:0,class:"px-2 py-1"},he={class:"pl-4 mt-1 space-y-1"},fe=["onClick"],xe={class:"flex items-center"},ve=x({__name:"ProjectPanelList",props:{activeTab:{type:String,default:""},tabs:{type:Array,default:()=>[]}},emits:["update:activeTab"],setup(_,{emit:a}){const r=t=>{a("update:activeTab",t)};return(t,y)=>{const i=P;return s(),c("div",pe,[e("ul",_e,[(s(!0),c(h,null,f(_.tabs,b=>(s(),c(h,{key:b.key},[e("li",{class:w(["cursor-pointer hover:bg-gray-100 px-2 py-1",{"bg-gray-200 font-bold":_.activeTab===b.key}]),onClick:u=>r(b.key)},[e("div",ye,[d(i,{name:b.icon,class:"mr-2"},null,8,["name"]),e("span",null,n(b.label),1)])],10,me),b.children?(s(),c("li",ge,[e("ul",he,[(s(!0),c(h,null,f(b.children,u=>(s(),c("li",{key:u.key,class:w(["cursor-pointer hover:underline",{"text-blue-600 font-semibold":_.activeTab===u.key}]),onClick:V(l=>r(u.key),["stop"])},[e("div",xe,[d(i,{name:u.icon,class:"mr-2"},null,8,["name"]),e("span",null,n(u.label),1)])],10,fe))),128))])])):S("",!0)],64))),128))])])}}}),Ce={class:"mt-4 w-full h-screen bg-white border-r shadow-md relative overflow-hidden"},Te=x({__name:"ProjectPanel",props:{activeTab:{type:String,default:""},tabs:{type:Array,default:()=>[]}},emits:["update:activeTab"],setup(_,{emit:a}){const r=_,t=I(!0),y=I(!0),i=()=>{t.value?(t.value=!1,y.value=!0):(y.value=!0,requestAnimationFrame(()=>{t.value=!0}))},b=()=>{t.value||(y.value=!1)},u=l=>{a("update:activeTab",l)};return(l,$)=>{const C=le,T=be,v=ve;return s(),c("div",{class:w([o(t)?"w-96":"w-0"])},[e("button",{class:"text-xs absolute top-2 left-2 z-50 bg-gray-200 hover:bg-gray-300p p-1 rounded",onClick:i},n(o(t)?"← Hide Panel":"→ Show Panel"),1),j(e("aside",Ce,[e("div",{class:w(["absolute inset-0 transition-transform duration-300 ease-in-out p-2",o(t)?"translate-x-0":"-translate-x-full"]),onTransitionend:b},[d(C),d(T),d(v,{tabs:_.tabs,"active-tab":r.activeTab,"onUpdate:activeTab":u},null,8,["tabs","active-tab"])],34)],512),[[O,o(t)||o(y)]])],2)}}}),Se={},$e={class:"mx-auto"},we=H('<div class="flex justify-start mb-4"><div class="flex gap-2"><h2 class="text-left text-lg text-black uppercase"> DISTRIBUTION OF DIRECT COST </h2></div></div><table class="table-auto w-full border border-collapse border-gray-800 text-sm mb-4"><thead class="uppercase text-center border border-gray-800 border-b-2"><tr><th class="px-2"></th><th class="px-2"><p> PHP </p></th><th class="px-2"><p> % </p></th></tr></thead><tbody><tr><td class="px-2"> Materials </td><td class="px-2 text-center"> 13,108,362.84 </td><td class="px-2 text-right"> 13,108,362.84 </td></tr><tr><td class="px-2"> Labor </td><td class="px-2 text-center"> 13,108,362.84 </td><td class="px-2 text-right"> 13,108,362.84 </td></tr><tr><td class="px-2"> Fuel &amp; Oil </td><td class="px-2 text-center"> 13,108,362.84 </td><td class="px-2 text-right"> 13,108,362.84 </td></tr><tr><td class="px-2"> Equipment </td><td class="px-2 text-center"> 13,108,362.84 </td><td class="px-2 text-right"> 13,108,362.84 </td></tr><tr><td class="px-2"> Overhead Cost </td><td class="px-2 text-center"> 13,108,362.84 </td><td class="px-2 text-right"> 13,108,362.84 </td></tr><tr><td class="px-2 border border-gray-700 font-normal border-b-0"> Direct Cost: </td><td class="text-center px-2 border border-gray-700 font-normal border-b-0"> 13,108,362.84 </td><td class="px-2 text-right border border-gray-700 font-normal border-b-0"> 13,108,362.84 </td></tr></tbody></table>',2),Pe=[we];function Ee(_,a){return s(),c("div",$e,Pe)}const N=Y(Se,[["render",Ee]]),Ie={class:"flex flex-row gap-8"},je={class:"font-semibold capitalize mb-2"},Ae={class:"font-medium"},De={class:"text-sm text-gray-600"},Oe=x({__name:"SignatureApproval",props:{signatories:{type:Array,required:!0,default:()=>[]}},setup(_){return(a,r)=>(s(),c("div",Ie,[(s(!0),c(h,null,f(_.signatories,(t,y)=>(s(),c("div",{key:y,class:"flex flex-col items-start"},[e("div",je,n(t.label),1),e("div",Ae,n(t.name),1),e("div",De,n(t.position),1)]))),128))]))}}),Me={class:"mx-auto"},Re={class:"mb-4"},Le=e("div",{class:"flex justify-center mb-4"},[e("div",{class:"flex gap-2"},[e("h1",{class:"text-center text-3xl text-black uppercase"}," SUMMARY OF ESTIMATED DIRECT COST ")])],-1),Ne={class:"text-sm grid grid-cols-[auto_1fr] gap-4 mb-4"},ke=e("div",null,[e("p",null," Project Name "),e("p",null," Location ")],-1),Fe={class:"table-auto w-full border border-collapse border-gray-800 text-sm mb-4"},Ue=e("thead",{class:"uppercase text-center bg-[#b8cce4]"},[e("tr",null,[e("th",{rowspan:"2",class:"px-2 border border-gray-700 font-normal border-b-0"},[e("p",null," Pay Item No. ")]),e("th",{rowspan:"2",class:"px-2 border border-gray-700 font-normal border-b-0"},[e("p",null," Description ")]),e("th",{rowspan:"2",class:"px-2 border border-gray-700 font-normal border-b-0"},[e("p",null," Unit Price ")]),e("th",{colspan:"3",class:"px-2 border border-gray-700 font-normal border-b-0"},[e("p",null," CONTRACT COST ")]),e("th",{colspan:"5",class:"px-2 border border-gray-700 font-normal border-b-0"},[e("p",null," DIRECT COST ")]),e("th",{rowspan:"2",class:"px-2 border border-gray-700 font-normal border-b-0"},[e("p",null," TOTAL ")]),e("th",{rowspan:"2",class:"px-2 border border-gray-700 font-normal border-b-0"},[e("p",null," UNIT COST PER ITEM ")])]),e("tr",null,[e("th",{class:"uppercase border border-gray-700 font-normal border-b-0"}," Quantity "),e("th",{class:"uppercase border border-gray-700 font-normal border-b-0"}," Unit "),e("th",{class:"uppercase border border-gray-700 font-normal border-b-0"}," Amount "),e("th",{class:"uppercase border border-gray-700 font-normal border-b-0"}," Materials "),e("th",{class:"uppercase border border-gray-700 font-normal border-b-0"}," Equipment "),e("th",{class:"uppercase border border-gray-700 font-normal border-b-0"}," Labor "),e("th",{class:"uppercase border border-gray-700 font-normal border-b-0"}," Fuel / Oil Cost "),e("th",{class:"uppercase border border-gray-700 font-normal border-b-0"}," Overhead Cost ")])],-1),qe={key:0},Be=e("tr",null,[e("td",{colspan:"13",class:"text-center py-4 font-semibold text-md italic text-gray-500"}," No Data Available! ")],-1),Ve=[Be],Ye={class:"whitespace-nowrap p-2 text-center border border-gray-700"},He={class:"whitespace-nowrap p-2 w-full text-left border border-gray-700"},Qe={class:"text-right border p-2 border-gray-700"},ze={class:"text-right p-2 border border-gray-700"},Je={class:"text-center p-2 border border-gray-700"},We={class:"text-right p-2 border border-gray-700"},Ge={class:"text-center p-2 border border-gray-700"},Ke={class:"text-center p-2 border border-gray-700"},Xe={class:"text-center p-2 border border-gray-700"},Ze={class:"text-center p-2 border border-gray-700"},et={class:"text-center p-2 border border-gray-700"},tt={class:"text-center p-2 border border-gray-700"},rt={class:"text-center p-2 border border-gray-700"},ot={class:"flex justify-between items-center"},nt=x({__name:"SummaryOfEstimatedDirectCost",setup(_){const a=E();return(r,t)=>{const y=R,i=N,b=Oe;return s(),c("div",Me,[e("div",Re,[d(y,{page:{currentPage:1,totalPages:1},"document-code":("useInventoryDocCode"in r?r.useInventoryDocCode:o(L)).mrr},null,8,["document-code"])]),Le,e("div",Ne,[ke,e("div",null,[e("p",null,n(o(a).information.name),1),e("p",null,n(o(a).information.location),1)])]),e("table",Fe,[Ue,o(a).information.phases.length===0?(s(),c("tbody",qe,Ve)):S("",!0),e("tbody",null,[(s(!0),c(h,null,f(o(a).information.phases,u=>(s(),c(h,{key:u.id},[(s(!0),c(h,null,f(u.tasks,l=>(s(),c("tr",{key:l.id,class:"border border-black"},[e("td",Ye,n(l.name),1),e("td",He,n(l.description),1),e("td",Qe,n(("accountingCurrency"in r?r.accountingCurrency:o(p))(l.unit_price)),1),e("td",ze,n(l.quantity),1),e("td",Je,n(l.unit),1),e("td",We,n(("accountingCurrency"in r?r.accountingCurrency:o(p))(l.amount)),1),e("td",Ge,n(("accountingCurrency"in r?r.accountingCurrency:o(p))(l.total_materials_amount)),1),e("td",Ke,n(("accountingCurrency"in r?r.accountingCurrency:o(p))(l.total_equipment_amount)),1),e("td",Xe,n(("accountingCurrency"in r?r.accountingCurrency:o(p))(l.total_labor_amount)),1),e("td",Ze,n(("accountingCurrency"in r?r.accountingCurrency:o(p))(l.total_fuel_oil_amount)),1),e("td",et,n(("accountingCurrency"in r?r.accountingCurrency:o(p))(l.total_overhead_amount)),1),e("td",tt,n(("accountingCurrency"in r?r.accountingCurrency:o(p))(l.total)),1),e("td",rt,n(("accountingCurrency"in r?r.accountingCurrency:o(p))(l.unit_cost_per_item)),1)]))),128))],64))),128))])]),e("div",null,[d(i)]),e("div",ot,[d(b,{signatories:[{label:"prepared by",name:"Juan Dela Cruz",position:"Project Engineer"},{label:"checked and reviewed by",name:"Maria Reyes",position:"QA Supervisor"},{label:"recommending approval",name:"Carlos Tan",position:"Ops Manager"},{label:"approved by",name:"Anna Lim",position:"CEO"}]})])])}}}),st={class:"mb-4"},at={class:"mb-4"},ct={class:"flex flex-col gap-6 my-4"},it=e("div",{class:"flex justify-center"},[e("div",{class:"flex gap-2"},[e("h1",{class:"text-center text-3xl text-black uppercase"}," SUMMARY OF ESTIMATED DIRECT COST ")])],-1),lt={class:"table-auto w-full border border-collapse border-gray-800 text-sm"},dt=e("thead",{class:"uppercase text-center bg-[#b8cce4]"},[e("tr",null,[e("th",{rowspan:"2",class:"px-2 border border-gray-700 font-normal border-b-0"},[e("p",null," Pay Item No. ")]),e("th",{rowspan:"2",class:"px-2 border border-gray-700 font-normal border-b-0"},[e("p",null," Description ")]),e("th",{rowspan:"2",class:"px-2 border border-gray-700 font-normal border-b-0"},[e("p",null," Unit Price ")]),e("th",{colspan:"3",class:"px-2 border border-gray-700 font-normal border-b-0"},[e("p",null," CONTRACT COST ")]),e("th",{colspan:"5",class:"px-2 border border-gray-700 font-normal border-b-0"},[e("p",null," DIRECT COST ")]),e("th",{rowspan:"2",class:"px-2 border border-gray-700 font-normal border-b-0"},[e("p",null," TOTAL ")]),e("th",{rowspan:"2",class:"px-2 border border-gray-700 font-normal border-b-0"},[e("p",null," UNIT COST PER ITEM ")]),e("th",{rowspan:"2",class:"px-2 border border-gray-700 font-normal border-b-0"},[e("p",null," ACTION ")])]),e("tr",null,[e("th",{class:"uppercase border border-gray-700 font-normal border-b-0"}," Quantity "),e("th",{class:"uppercase border border-gray-700 font-normal border-b-0"}," Unit "),e("th",{class:"uppercase border border-gray-700 font-normal border-b-0"}," Amount "),e("th",{class:"uppercase border border-gray-700 font-normal border-b-0"}," Materials "),e("th",{class:"uppercase border border-gray-700 font-normal border-b-0"}," Equipment "),e("th",{class:"uppercase border border-gray-700 font-normal border-b-0"}," Labor "),e("th",{class:"uppercase border border-gray-700 font-normal border-b-0"}," Fuel / Oil Cost "),e("th",{class:"uppercase border border-gray-700 font-normal border-b-0"}," Overhead Cost ")])],-1),ut={key:0},bt=e("tr",null,[e("td",{colspan:"14",class:"text-center py-4 font-semibold text-md italic text-gray-500"}," No Data Available! ")],-1),pt=[bt],_t={class:"whitespace-nowrap p-2 text-center border border-gray-700"},mt={class:"whitespace-nowrap p-2 w-full text-left border border-gray-700"},yt={class:"text-right border p-2 border-gray-700"},gt={class:"text-right p-2 border border-gray-700"},ht={class:"text-center p-2 border border-gray-700"},ft={class:"text-right p-2 border border-gray-700"},xt={class:"text-center p-2 border border-gray-700"},vt={class:"text-center p-2 border border-gray-700"},Ct={class:"text-center p-2 border border-gray-700"},Tt={class:"text-center p-2 border border-gray-700"},St={class:"text-center p-2 border border-gray-700"},$t={class:"text-center p-2 border border-gray-700"},wt={class:"text-center p-2 border border-gray-700"},Pt={class:"text-center p-2 border border-gray-700"},Et={class:"flex items-center justify-center bg-green-500 hover:bg-green-600 active:bg-green-700 text-white rounded-lg text-xs w-44 h-8 gap-1"},It=e("span",{class:"whitespace-nowrap"},"Detailed Estimates",-1),jt=x({__name:"SummaryOfEstimatedDirectCost",setup(_){const a=E();a.viewState=!0;const r=a.viewState;return(t,y)=>{const i=R,b=ee,u=P,l=te,$=N,C=nt,T=re;return s(),c("div",null,[d(T,null,{"system-layout":g(()=>[e("div",st,[d(i,{page:{currentPage:1,totalPages:1},"document-code":("useInventoryDocCode"in t?t.useInventoryDocCode:o(L)).mrr},null,8,["document-code"])]),e("div",at,[d(b,{"is-loading":o(a).isLoading.list},null,8,["is-loading"]),e("div",ct,[it,e("table",lt,[dt,o(a).information.phases.length===0?(s(),c("tbody",ut,pt)):S("",!0),e("tbody",null,[(s(!0),c(h,null,f(o(a).information.phases,v=>(s(),c(h,{key:v.id},[(s(!0),c(h,null,f(v.tasks,m=>(s(),c("tr",{key:m.id,class:"border border-black"},[e("td",_t,n(m.name),1),e("td",mt,n(m.description),1),e("td",yt,n(("accountingCurrency"in t?t.accountingCurrency:o(p))(m.unit_price)),1),e("td",gt,n(m.quantity),1),e("td",ht,n(m.unit),1),e("td",ft,n(("accountingCurrency"in t?t.accountingCurrency:o(p))(m.amount)),1),e("td",xt,n(("accountingCurrency"in t?t.accountingCurrency:o(p))(m.total_materials_amount)),1),e("td",vt,n(("accountingCurrency"in t?t.accountingCurrency:o(p))(m.total_equipment_amount)),1),e("td",Ct,n(("accountingCurrency"in t?t.accountingCurrency:o(p))(m.total_labor_amount)),1),e("td",Tt,n(("accountingCurrency"in t?t.accountingCurrency:o(p))(m.total_fuel_oil_amount)),1),e("td",St,n(("accountingCurrency"in t?t.accountingCurrency:o(p))(m.total_overhead_amount)),1),e("td",$t,n(("accountingCurrency"in t?t.accountingCurrency:o(p))(m.total)),1),e("td",wt,n(("accountingCurrency"in t?t.accountingCurrency:o(p))(m.unit_cost_per_item)),1),e("td",Pt,[o(r)?(s(),M(l,{key:0,to:`/project-monitoring/technical-service/detailed-estimates?id=${m.id}`,class:"flex items-center justify-center"},{default:g(()=>[e("div",Et,[d(u,{name:"material-symbols:calculate",color:"white",class:"h-5 w-5"}),It])]),_:2},1032,["to"])):S("",!0)])]))),128))],64))),128))])])]),e("div",null,[d($)])])]),"print-layout":g(()=>[d(C)]),_:1})])}}}),At={class:"flex-1 p-4 overflow-y-auto h-screen"},Dt={key:0,class:"text-gray-400 italic"},Ot={__name:"ProjectPanelViewer",props:{activeTab:{type:String,required:!0}},setup(_){return(a,r)=>(s(),c("section",At,[Q(a.$slots,_.activeTab),a.$slots[_.activeTab]?S("",!0):(s(),c("div",Dt," Select a tab to view content. "))]))}},Mt={class:"flex flex-row gap-2"},Rt={class:"w-full flex flex-col"},Lt=e("h2",null," SUMMARY OF RATES ",-1),Nt=e("h2",null," DETAILED ESTIMATES ",-1),kt=e("h2",null," DIRECT COST ANALYSIS ",-1),Ft=e("h2",null," DETAILED UNIT PRICE ANALYSIS ",-1),Ut=e("h2",null," BILL OF MATERIALS ",-1),qt=e("h2",null," CASH FLOW ",-1),lr=x({__name:"project-details",setup(_){const a=A(),r=z(),t=E();r.query.id&&(t.getProject(r.query.id),a.getParams.project_id=r.query.id,a.getRevisions());const{revisionSelected:y}=J(a);W(y,u=>{u===null?t.getProject(r.query.id):t.viewProjectRevisions(u)},{immediate:!0});const i=I("project"),b=[{key:"project",label:"PROJECT FORM",icon:"mdi:file-document-outline"},{key:"boq",label:"BILL OF QUANTITIES",icon:"mdi:file-document-outline"},{key:"rates",label:"SUMMARY OF RATES",icon:"mdi:file-document-outline"},{key:"bid",label:"SUMMARY OF BID",icon:"mdi:file-document-outline"},{key:"estimated",label:"SUMMARY OF ESTIMATED DIRECT COST",icon:"mdi:file-chart-outline",children:[{key:"estimated-detailed",label:"DETAILED ESTIMATES",icon:"mdi:file-document-outline"},{key:"estimated-analysis",label:"DIRECT COST ANALYSIS",icon:"mdi:file-document-outline"},{key:"estimated-unit-price",label:"DETAILED UNIT PRICE ANALYSIS",icon:"mdi:file-document-outline"}]},{key:"materials",label:"BILL OF MATERIALS",icon:"mdi:file-document-outline"},{key:"cashflow",label:"CASH FLOW",icon:"mdi:file-document-outline"}];return(u,l)=>{const $=Te,C=K,T=X,v=Z,m=jt,k=Ot,F=oe;return s(),M(F,{class:"w-full"},{default:g(()=>[e("div",Mt,[d($,{"active-tab":o(i),"onUpdate:activeTab":l[0]||(l[0]=U=>G(i)?i.value=U:null),tabs:b},null,8,["active-tab"]),e("div",Rt,[d(k,{"active-tab":o(i)},{project:g(()=>[d(C)]),boq:g(()=>[d(T)]),rates:g(()=>[Lt]),bid:g(()=>[d(v)]),estimated:g(()=>[d(m)]),"estimated-detailed":g(()=>[Nt]),"estimated-analysis":g(()=>[kt]),"estimated-unit-price":g(()=>[Ft]),materials:g(()=>[Ut]),cashflow:g(()=>[qt]),_:1},8,["active-tab"])])])]),_:1})}}});export{lr as default};
