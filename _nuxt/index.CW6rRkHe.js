import{_ as E}from"./UserEmployeeSelector.vue.CW0bAtx_.js";import{_ as H}from"./LoadingContainer.vue.BZUQ77Em.js";import{_ as R}from"./LayoutBoards.vue.D_rbqYxd.js";import{f as N,s as F,r as A,B as q,o,c as i,b as r,w as _,a as e,u as s,x as j,v as V,F as w,i as L,t as u,D as O,y as G,j as f,h as W}from"./entry.32UGFqj-.js";import{A as b,u as M}from"./Accessibilities.xGffDRXj.js";import{u as I}from"./warehouse.CXTwMaCB.js";import{_ as J,a as K,b as Q}from"./MainContainer.BswisYLp.js";import{_ as X}from"./PsTable.BPIFONj1.js";import{_ as Y}from"./AcessContainer.Dum7aOuo.js";import{u as Z}from"./vue.f36acd1f.Ds2AlAv6.js";import"./enum.M1X5V5yu.js";import"./CustomFetch.ggXvTdIz.js";import"./loader.BQ9QddgL.js";import"./users.G4iuGzk0.js";import"./id.WqrvI90c.js";import"./client-only.CuVny2dr.js";import"./Icon.CrHlyQOo.js";import"./index.T-zbMaZc.js";import"./nuxt-link.C5IpI_HT.js";import"./Utilities.DofxnkSu.js";const ee={class:"bg-gray-50"},se={id:"warehouse-overview",class:"max-w-7xl mx-auto p-2"},te={class:"bg-white overflow-hidden"},oe={class:"p-4"},ae={class:"flex items-center space-x-4"},ie=e("label",{class:"text-sm font-medium text-gray-700 shrink-0"},"Choose a Warehouse",-1),ne={class:"relative flex-1 max-w-sm"},le=e("option",{value:"",disabled:""}," Select warehouse... ",-1),re=["value"],ce=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1),de={key:0,class:"flex flex-col md:flex-row gap-2 w-full"},ue={class:"w-full md:w-1/2 min-w-0"},_e={class:"bg-white rounded-lg border border-gray-200"},me=e("div",{class:"p-4 border-b border-gray-100"},[e("h2",{class:"text-lg font-medium text-gray-900"}," Details ")],-1),he={class:"p-4"},pe={class:"grid grid-cols-1 gap-8"},fe={class:"group"},ge={class:"flex items-start space-x-3"},ye={class:"flex-1 min-w-0"},ve=e("dt",{class:"text-xs font-medium text-gray-500 uppercase mb-1"}," Warehouse Name ",-1),xe={class:"text-md font-bold text-gray-900 truncate"},we={class:"group md:col-span-2"},be={class:"flex items-start space-x-3"},ke={class:"flex-1 min-w-0"},Ce=e("dt",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1"}," Project Code / Department ",-1),Se={class:"text-md font-bold text-gray-900 truncate"},Te={class:"group"},Ae={class:"flex items-start space-x-3"},Le={class:"flex-1 min-w-0"},We=e("dt",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1"}," Location ",-1),Me={class:"text-md font-bold text-gray-900 truncate"},De={class:"w-full md:w-1/2 min-w-0"},$e={class:"bg-white rounded-lg border border-gray-200 h-fit"},Be={class:"p-4 border-b border-gray-100"},Pe={class:"flex items-center justify-between"},je=e("h2",{class:"text-lg font-medium text-gray-900"}," PSS ",-1),Ve={key:1,class:"flex items-center space-x-3"},He={class:"p-2"},Ne={key:0,class:"space-y-2"},Fe={class:"flex items-start space-x-4 p-2 bg-gray-50 rounded-lg"},Ie={class:"flex-1 min-w-0"},Ue={class:"text-sm font-medium text-gray-900 truncate"},ze=e("div",{class:"w-2 h-2 bg-green-500 rounded-full shrink-0 mt-2"},null,-1),Ee={key:1,class:"space-y-4"},Re={class:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center shrink-0"},qe={class:"text-sm font-medium text-white"},Oe={class:"flex-1 min-w-0"},Ge={class:"text-sm font-medium text-gray-900 truncate"},Je={class:"text-xs text-gray-500 truncate"},Ke={class:"text-xs text-gray-400 truncate"},Qe=e("div",{class:"w-2 h-2 bg-green-500 rounded-full shrink-0 mt-2"},null,-1),Xe={key:2,class:"space-y-4"},Ye={class:"p-4 bg-gray-50 rounded-lg"},Ze=e("label",{class:"block text-xs font-medium text-gray-700 mb-3 uppercase tracking-wide"}," Select Manager ",-1),es={key:3,class:"text-center py-8"},ss=e("div",{class:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1),ts=e("p",{class:"text-sm text-gray-500 font-light"}," No manager assigned ",-1),os=[ss,ts],as=N({__name:"WarehouseFilter",setup(U){const a=I();a.fetchWarehouse();const{warehouse:g,warehousePss:l,warehouseDetails:m,warehousePssForm:k}=F(a),c=A(!0),n=A(null),t=A(null),D=()=>{l.value.list&&l.value.list.length>0?t.value=l.value.list[0].user_id:t.value=null,c.value=!1},C=async()=>{k.value={user_id:t.value},await a.updatePssWarehouse(n.value),a.errorMessage!==""?p.add({type:"error",text:a.errorMessage}):(p.add({type:"success",text:a.successMessage}),c.value=!0),await a.fetchWarehouseDetails(n.value)},p=q(),y=async()=>{c.value=!0,t.value=null,await a.fetchWarehouseDetails(n.value),await a.fetchWarehouseLogs(n.value),await a.fetchWarehouseStocks(n.value),a.errorMessage!==""&&p.add({type:"error",text:a.errorMessage}),a.errorMessage=""};return(v,h)=>{const S=E,T=H,z=R;return o(),i("div",ee,[r(z,{title:"Overview",class:"w-full"},{default:_(()=>[e("div",se,[r(T,{class:"w-full",loading:s(l).isLoading},{default:_(()=>{var $,B,P;return[e("div",null,[e("div",te,[e("div",oe,[e("div",ae,[ie,e("div",ne,[j(e("select",{"onUpdate:modelValue":h[0]||(h[0]=d=>V(n)?n.value=d:null),class:"w-full appearance-none bg-transparent border-0 border-b-2 border-gray-200 focus:border-blue-600 text-gray-900 text-sm py-2 pr-8 focus:outline-none focus:ring-0 transition-colors",onChange:y},[le,(o(!0),i(w,null,L(s(g).list,d=>(o(),i("option",{key:d.id,value:d.id},u(d.name),9,re))),128))],544),[[O,s(n)]]),ce])])])])]),s(n)?(o(),i("div",de,[e("div",ue,[e("div",_e,[me,e("div",he,[e("div",pe,[e("div",fe,[e("div",ge,[e("div",ye,[ve,e("dd",xe,u(s(m).name||"—"),1)])])]),e("div",we,[e("div",be,[e("div",ke,[Ce,e("dd",Se,u(s(m).owner_type||"—"),1)])])]),e("div",Te,[e("div",Ae,[e("div",Le,[We,e("dd",Me,u(s(m).location||"—"),1)])])])])])])]),e("div",De,[e("div",$e,[e("div",Be,[e("div",Pe,[je,j(e("div",null,[s(c)?(o(),i("button",{key:0,class:"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",onClick:D}," Set ")):(o(),i("div",Ve,[e("button",{class:"text-sm text-green-600 hover:text-green-700 font-medium transition-colors",onClick:C}," Save "),e("button",{class:"text-sm text-gray-400 hover:text-gray-600 font-medium transition-colors",onClick:y}," Cancel ")]))],512),[[G,("AccessibilityTypes"in v?v.AccessibilityTypes:s(b)).inventory_warehouse_pssmanager&&s(n)]])])]),e("div",He,[s(c)&&s(m).warehouse_pss?(o(),i("div",Ne,[e("div",Fe,[e("div",Ie,[e("p",Ue,u((B=($=s(m).warehouse_pss)==null?void 0:$.employee)==null?void 0:B.fullname_last),1)]),ze])])):s(c)?(o(),i("div",Ee,[(o(!0),i(w,null,L(s(l).list,d=>(o(),i(w,{key:d.id},[(o(!0),i(w,null,L(d.user,x=>(o(),i("div",{key:x.id,class:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg"},[e("div",Re,[e("span",qe,u(x.employee.fullname_first.charAt(0)),1)]),e("div",Oe,[e("p",Ge,u(x.employee.fullname_first),1),e("p",Je,u(x.employee.current_position),1),e("p",Ke,u(x.employee.current_department),1)]),Qe]))),128))],64))),128))])):f("",!0),s(c)?f("",!0):(o(),i("div",Xe,[e("div",Ye,[Ze,r(S,{modelValue:s(t),"onUpdate:modelValue":h[1]||(h[1]=d=>V(t)?t.value=d:null),class:"w-full"},null,8,["modelValue"])])])),s(c)&&!((P=s(m).warehouse_pss)!=null&&P.user)&&(!s(l).list||s(l).list.length===0)?(o(),i("div",es,os)):f("",!0)])])])])):f("",!0)]}),_:1},8,["loading"])])]),_:1})])}}}),is={class:"flex flex-col md:flex-row gap-4 w-full"},ns={class:"w-full md:w-1/2 min-w-0"},ls={class:"w-full md:w-1/2 min-w-0"},Ls=N({__name:"index",setup(U){Z({title:"Warehouse"});const a=I(),{stocks:g,logs:l}=F(a),m=[{name:"Item Code",id:"item_codename"},{name:"Stocks",id:"quantity"}],k=[{name:"Transaction Date",id:"transaction_date"},{name:"Transaction Type",id:"transaction_type"},{name:"Item Code",id:"item_code"},{name:"Deduction / Addition of Stock",id:"movement"}],c=t=>{entryData.value=t},n={showTable:!0};return(t,D)=>{const C=as,p=J,y=X,v=H,h=K,S=Q,T=Y;return o(),W(T,{"if-access":("useCheckAccessibility"in t?t.useCheckAccessibility:s(M))([("AccessibilityTypes"in t?t.AccessibilityTypes:s(b)).inventory_warehouse_group]),class:"w-full"},{default:_(()=>[e("div",is,[e("div",ns,[r(C)]),e("div",ls,[r(S,null,{"tab-titles":_(()=>[r(p,{"if-access":("useCheckAccessibility"in t?t.useCheckAccessibility:s(M))([("AccessibilityTypes"in t?t.AccessibilityTypes:s(b)).inventory_warehouse_group]),title:"Stocks","target-id":"Stocks"},null,8,["if-access"]),r(p,{"if-access":("useCheckAccessibility"in t?t.useCheckAccessibility:s(M))([("AccessibilityTypes"in t?t.AccessibilityTypes:s(b)).inventory_warehouse_group]),title:"Logs","target-id":"Logs"},null,8,["if-access"])]),"tab-containers":_(()=>[r(h,{id:"Stocks"},{default:_(()=>[s(g).list?(o(),W(v,{key:0,class:"w-full",loading:s(g).isLoading},{default:_(()=>[r(y,{"header-columns":m,actions:n,datas:s(g).list??[],onShowTable:c},null,8,["datas"])]),_:1},8,["loading"])):f("",!0)]),_:1}),r(h,{id:"Logs"},{default:_(()=>[s(l).list?(o(),W(v,{key:0,class:"w-full",loading:s(l).isLoading},{default:_(()=>[r(y,{"header-columns":k,datas:s(l).list??[]},null,8,["datas"])]),_:1},8,["loading"])):f("",!0)]),_:1})]),_:1})])])]),_:1},8,["if-access"])}}});export{Ls as default};
