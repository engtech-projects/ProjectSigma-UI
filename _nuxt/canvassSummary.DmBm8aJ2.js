import{e as r,i as t}from"./CustomFetch.ggXvTdIz.js";import{l as i}from"./entry.32UGFqj-.js";const o="PREPAYMENT IN FULL",m="CREDIT 7 DAYS",n="CREDIT 15 DAYS",c="CREDIT 30 DAYS",u="PROGRESS BILLING",l="50% DOWNPAYMENT, 50% UPON PICK UP",d="30% DOWNPAYMENT, 70% UPON PICK UP",L=[o,m,n,c,u,l,d],h="AVAILABLE",g="UNAVAILABLE",p="ORDER BASIS 7 DAYS",v="ORDER BASIS 10 DAYS",E=[h,g,p,v],y="PICKUP",R="DELIVERED ON SITE",S="FOR SHIPMENT",A=[y,R,S],M=i("canvassSummaryStore",{state:()=>({canvassSummary:{isLoading:!1,isLoaded:!1,form:{},items:[],details:null,params:{},list:[],pagination:{},errorMessage:"",successMessage:""},createRequest:{isLoading:!1,isLoaded:!1,form:{price_quotation_id:0,terms_of_payment:"",availability:"",delivery_terms:"",remarks:"",items:[],approvals:[]},pagination:{},errorMessage:"",successMessage:""},myApprovals:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""},allRequests:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""},approvalList:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""},items:{isLoading:!1,isLoaded:!1,list:[]},errorMessage:"",successMessage:"",remarks:""}),actions:{async getAllRequests(){await r("/api/procurement-request/canvass-summary/all-request",{method:"GET",params:this.allRequests.params,onRequest:()=>{this.allRequests.isLoading=!0},onResponse:({response:s})=>{this.allRequests.isLoading=!1,s.ok&&(this.allRequests.list=s._data.data,this.allRequests.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last},this.allRequests.isLoaded=!0)}})},async getMyApprovals(){await r("/api/procurement-request/canvass-summary/my-approvals",{method:"GET",params:this.myApprovals.params,onRequest:()=>{this.myApprovals.isLoading=!0},onResponseError:({response:s})=>{var a;throw this.myApprovals.isLoading=!1,this.myApprovals.errorMessage=((a=s==null?void 0:s._data)==null?void 0:a.message)||"Unexpected server error while fetching my approvals.",new Error(this.errorMessage||"Unexpected server error while fetching my approvals.")},onResponse:({response:s})=>{this.myApprovals.isLoading=!1,s.ok&&(this.myApprovals.list=s._data.data,this.myApprovals.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last})}})},async getCanvassSummaryResource(){await r("/api/procurement-request/canvass-summary/resource",{method:"GET",params:this.canvassSummary.params,onRequest:()=>{this.canvassSummary.isLoading=!0},onResponseError:({response:s})=>{var a;throw this.canvassSummary.isLoading=!1,this.canvassSummary.errorMessage=((a=s==null?void 0:s._data)==null?void 0:a.message)||"Unexpected server error while fetching canvass summary.",new Error(this.canvassSummary.errorMessage||"Unexpected server error while fetching canvass summary.")},onResponse:({response:s})=>{this.canvassSummary.isLoading=!1,s.ok&&(this.canvassSummary.list=s._data.data,this.canvassSummary.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last},this.canvassSummary.isLoaded=!0)}})},async getOne(s){return await t("/api/procurement-request/canvass-summary/"+s,{method:"GET",params:this.canvassSummary.params,onRequest:()=>{this.canvassSummary.isLoading=!0},onResponseError:({response:a})=>{var e;throw this.canvassSummary.isLoading=!1,this.canvassSummary.errorMessage=((e=a==null?void 0:a._data)==null?void 0:e.message)||"Unexpected server error while fetching canvass summary.",new Error(this.canvassSummary.errorMessage||"Unexpected server error while fetching canvass summary.")},onResponse:({response:a})=>{if(this.canvassSummary.isLoading=!1,a.ok)return this.canvassSummary.details=a._data.data,this.canvassSummary.isLoaded=!0,a._data.data}})},async fetchCanvassSummaryByWarehouseId(s){await r("/api/procurement-request/canvass-summary/warehouse/"+s,{method:"GET",watch:!1,onRequest:()=>{this.canvassSummary.isLoading=!0},onResponseError:({response:a})=>{var e;throw this.canvassSummary.isLoading=!1,this.canvassSummary.errorMessage=((e=a==null?void 0:a._data)==null?void 0:e.message)||"Unexpected server error while creating canvass summary.",new Error(this.canvassSummary.errorMessage||"Unexpected server error while creating canvass summary.")},onResponse:({response:a})=>{this.canvassSummary.isLoading=!1,a.ok&&(this.canvassSummary.details=a._data.data)}})},async storeRequest(){this.clearMessages(),await t("/api/procurement-request/canvass-summary/resource",{method:"POST",body:this.createRequest.form,watch:!1,onRequest:()=>{this.createRequest.isLoading=!0},onResponseError:({response:s})=>{var a;throw this.createRequest.isLoading=!1,this.createRequest.errorMessage=((a=s==null?void 0:s._data)==null?void 0:a.message)||"Unexpected server error while creating canvass summary.",new Error(this.createRequest.errorMessage||"Unexpected server error while creating canvass summary.")},onResponse:({response:s})=>{s.ok&&(this.createRequest.successMessage=s._data.message),this.createRequest.isLoading=!1}})},async approveApprovalForm(s){this.successMessage="",this.errorMessage="",await r("/api/approvals/approve/RequestCanvassSummary/"+s,{method:"POST",onResponseError:({response:a})=>{throw this.errorMessage=a._data.message,new Error(a._data.message)},onResponse:({response:a})=>{if(a.ok)return this.successMessage=a._data.message,a._data}})},async denyApprovalForm(s){this.successMessage="",this.errorMessage="";const a=new FormData;a.append("id",s),a.append("remarks",this.remarks),await r("/api/approvals/disapprove/RequestCanvassSummary/"+s,{method:"POST",body:a,onResponseError:({response:e})=>{throw this.errorMessage=e._data.message,new Error(e._data.message)},onResponse:({response:e})=>{if(e.ok)return this.successMessage=e._data.message,e._data}})},clearMessages(){this.errorMessage="",this.successMessage="",this.approvalList.errorMessage="",this.approvalList.successMessage=""},resetForm(){this.canvassSummary.form={},this.canvassSummary.items=[],this.canvassSummary.details=null,this.createRequest.form={price_quotation_id:0,terms_of_payment:"",availability:"",delivery_terms:""}},reloadResources(){const s=this.approvalList.list,a=[];this.myRequests.isLoaded&&a.push(this.getMyRequests),this.myApprovals.isLoaded&&a.push(this.getMyApprovals),this.canvassSummary.isLoaded&&a.push(this.getCanvassSummaryResource),this.$reset(),this.approvalList.list=s,a.forEach(e=>{e()})}}});export{E as A,A as D,L as T,M as u};
