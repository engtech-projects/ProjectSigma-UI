import{_ as Z,a as ee,b as te}from"./MainContainer.BswisYLp.js";import{_ as F}from"./PsDateInput.vue.Dioz8erE.js";import{_ as H}from"./PsSelect.vue.DvuFdhGo.js";import{_ as ae}from"./ApprovalsList.aVDiIVet.js";import{_ as $}from"./LoadingContainer.vue.BZUQ77Em.js";import{_ as J}from"./DetailsTable.Cy6G1pbV.js";import{_ as Q}from"./PsModal.Bk3xu63Y.js";import{f as U,s as L,q as W,B as K,o as g,h as q,w as f,b as o,u as t,a as l,m as se,r as T,c as x,g as oe,F as C,i as le,v as I,n as ne,d as A,t as R,j as S,K as B,L as E,E as X}from"./entry.32UGFqj-.js";import{u as k}from"./salaryDisbursement.C2HreKfi.js";import{u as re,h as ie}from"./approvals.89EhJm5V.js";import{P as j,R as G}from"./generatePayroll.Cxsn1tKG.js";import{_ as N}from"./PsTable.BPIFONj1.js";import{_ as Y}from"./CustomPagination.C91H0oe5.js";import{_ as de}from"./ApprovalDenyButton.2aaI0auR.js";import{_ as ue}from"./PsButton.Cqg1ndZS.js";import{a as pe,u as V,A as M}from"./Accessibilities.xGffDRXj.js";import{u as O}from"./index.CBzzh1I-.js";import{_ as me}from"./AcessContainer.Dum7aOuo.js";import{u as ce}from"./vue.f36acd1f.Ds2AlAv6.js";import{u as ye}from"./id.WqrvI90c.js";import"./LayoutBoards.vue.D_rbqYxd.js";import"./loader.BQ9QddgL.js";import"./UserEmployeeSelector.vue.CW0bAtx_.js";import"./enum.M1X5V5yu.js";import"./CustomFetch.ggXvTdIz.js";import"./ListView.CUwkSJ9r.js";import"./Icon.CrHlyQOo.js";import"./index.T-zbMaZc.js";import"./LayoutPrint.BjcxelaN.js";import"./Utilities.DofxnkSu.js";import"./nuxt-link.C5IpI_HT.js";import"./users.G4iuGzk0.js";import"./client-only.CuVny2dr.js";const _e=U({__name:"DraftModal",props:{showModal:{required:!1,type:Boolean}},emits:["update:showModal"],setup(c){const n=k(),{createRequestData:e}=L(n),d=W(c,"showModal"),r=K(),b=()=>{d.value=!1},m=async()=>{try{await n.createRequest(),r.add({type:"success",text:"Success created Allowance Request."}),b()}catch(p){r.add({type:"error",text:p})}};return(p,i)=>{const _=J,s=Q;return g(),q(s,{"show-modal":d.value,"onUpdate:showModal":i[1]||(i[1]=a=>d.value=a),"is-loading":t(e).isLoading,title:"Salary Disbursement Request Draft"},{body:f(()=>[o(_,{data:t(e).data},null,8,["data"])]),footer:f(()=>[l("button",{type:"submit",class:"m-2 text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-green-700 dark:focus:ring-green-800",onClick:i[0]||(i[0]=a=>m())}," Submit ")]),_:1},8,["show-modal","is-loading"])}}}),fe={class:"mt-5 mb-6"},ge=["onSubmit"],be={class:"mt-5 mb-5 grid gap-4"},he={class:"w-full flex gap-2 md:flex-row flex-col"},ve={class:"w-full mb-2 rounded-lg p-4 bg-slate-100"},we=l("label",{for:"approved_by",class:"block text-sm font-medium text-gray-900 dark:text-white"},"Approvals:",-1),Pe=l("div",{class:"flex flex-row justify-between"},[l("div",null,[l("button",{type:"submit",class:"text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-green-700 dark:focus:ring-green-800"}," Generate Salary Disbursement Request Draft ")])],-1),De=U({__name:"RequestForm",async setup(c){let n,e;const d=k(),{generateDraftRequest:r}=L(d),b=re();r.value.data.approvals=([n,e]=se(()=>b.getApprovalByName(ie)),n=await n,e(),n);const m=T(!1),p=K(),i=async()=>{try{await d.generateDraft(),p.add({type:"success",text:"Payroll Draft Successfully Generated."}),m.value=!0}catch(_){p.add({type:"error",text:_})}};return(_,s)=>{const a=F,h=H,v=ae,P=$,D=_e;return g(),x(C,null,[o(P,{class:"w-full",loading:t(r).isLoading},{default:f(()=>[l("div",fe,[l("form",{onSubmit:oe(i,["prevent"])},[l("div",be,[l("div",he,[o(a,{modelValue:t(r).data.payroll_date,"onUpdate:modelValue":s[0]||(s[0]=y=>t(r).data.payroll_date=y),class:"w-full",title:"Payroll Date",required:""},null,8,["modelValue"]),o(h,{modelValue:t(r).data.payroll_type,"onUpdate:modelValue":s[1]||(s[1]=y=>t(r).data.payroll_type=y),"options-list":t(j),title:"Payroll Type",class:"w-full p-2",required:""},null,8,["modelValue","options-list"]),o(h,{modelValue:t(r).data.release_type,"onUpdate:modelValue":s[2]||(s[2]=y=>t(r).data.release_type=y),"options-list":t(G),title:"Release Type",class:"w-full p-2",required:""},null,8,["modelValue","options-list"])])]),l("div",ve,[we,(g(!0),x(C,null,le(t(r).data.approvals,(y,w)=>(g(),q(v,{key:"hrmsetupapprovallist"+w,modelValue:t(r).data.approvals[w],"onUpdate:modelValue":u=>t(r).data.approvals[w]=u},null,8,["modelValue","onUpdate:modelValue"]))),128))]),Pe],40,ge)])]),_:1},8,["loading"]),o(D,{"show-modal":t(m),"onUpdate:showModal":s[3]||(s[3]=y=>I(m)?m.value=y:null)},null,8,["show-modal"])],64)}}}),qe={class:"grid md:grid-cols-3 gap-2 md:justify-between"},Te={class:"p-2 flex gap-2"},xe=l("span",{class:"text-teal-600 text-light font-medium"},"Payroll Date: ",-1),Ae={class:"text-gray-900"},Re={class:"p-2 flex gap-2"},Se=l("span",{class:"text-teal-600 text-light font-medium"},"Payroll Type: ",-1),ke={class:"p-2 flex gap-2"},Ve=l("span",{class:"text-teal-600 text-light font-medium"},"Release Type: ",-1),Me={class:"p-2 flex gap-2"},Ce=l("span",{class:"text-teal-600 text-light font-medium"},"Requested By: ",-1),Le=l("br",null,null,-1),$e={class:"p-2 flex gap-2"},Ue=l("span",{class:"text-teal-600 text-light font-medium"},"Request Status: ",-1),Ie={class:"p-2 flex gap-2"},Fe=l("span",{class:"text-teal-600 text-light font-medium"},"Disbursement Status: ",-1),He={class:"w-full"},Be={key:0,class:"flex gap-2 p-2 justify-end relative"},Ee={key:1},z=U({__name:"InfoModal",props:ne({data:{type:Object,required:!0}},{showModal:{required:!1,type:Boolean}}),emits:["update:showModal"],setup(c){const n=W(c,"showModal"),e=k(),d=K(),r=T(!1),b=()=>{n.value=!1},m=async s=>{try{r.value=!0,await e.approveApprovalForm(s),d.add({type:"success",text:"Successfully Approved."}),b()}catch(a){d.add({type:"error",text:a||"something went wrong."})}finally{r.value=!1}},p=T(""),i=async s=>{try{r.value=!0,await e.denyApprovalForm(s,p.value),d.add({type:"success",text:"Successfully Denied"}),b()}catch(a){d.add({type:"error",text:a||"something went wrong."})}finally{r.value=!1}},_=async s=>{try{await e.submitToAccounting(s),d.add({type:"success",text:"Successfully submitted to accounting."})}catch(a){d.add({type:"error",text:a||"something went wrong."})}};return(s,a)=>{const h=J,v=de,P=ue,D=Q;return g(),q(D,{"show-modal":n.value,"onUpdate:showModal":a[2]||(a[2]=y=>n.value=y),"is-loading":t(r),title:"Salary Disbursement Request"},{body:f(()=>[l("div",qe,[l("div",Te,[xe,A(),l("span",Ae,R(c.data.payroll_date_human),1)]),l("div",Re,[Se,A(" "+R(c.data.payroll_type),1)]),l("div",ke,[Ve,A(" "+R(c.data.release_type),1)]),l("div",Me,[Ce,A(" "+R(c.data.created_by_user_name),1),Le,A(R(c.data.created_at_human),1)]),l("div",$e,[Ue,A(" "+R(c.data.request_status),1)]),l("div",Ie,[Fe,A(" "+R(c.data.disbursement_status),1)])]),l("div",He,[o(h,{data:c.data},null,8,["data"])])]),footer:f(()=>{var y;return[c.data.next_approval&&("useCheckIsCurrentUser"in s?s.useCheckIsCurrentUser:t(pe))((y=c.data.next_approval)==null?void 0:y.user_id)?(g(),x("div",Be,[o(v,{"deny-remarks":t(p),"onUpdate:denyRemarks":a[0]||(a[0]=w=>I(p)?p.value=w:null),"request-id":c.data.id,onApprove:m,onDeny:i},null,8,["deny-remarks","request-id"])])):S("",!0),c.data.request_status==="Approved"?(g(),x("div",Ee,[o(P,{"button-title":"Submit to Accounting",onClick:a[1]||(a[1]=w=>_(c.data.id))})])):S("",!0)]}),_:1},8,["show-modal","is-loading"])}}}),je={class:"pb-2 text-gray-500 p-2"},Ge={class:"flex gap-2"},Ne={class:"flex justify-center mx-auto"},Ye={__name:"AllRequests",setup(c){const n=k(),{allRequests:e}=L(n),d=O(()=>{n.getAllRequests()},500);B(()=>{e.value.isLoaded||d()}),E(()=>({...e.value.params}),(s,a)=>{s.page===a.page&&(e.value.params.page=1),d()},{deep:!0});const r=s=>{e.value.params.page=s.page??""},b=[{name:"Payroll Date",id:"payroll_date_human"},{name:"Payroll Type",id:"payroll_type"},{name:"Release Type",id:"release_type"},{name:"Requested By",id:"created_by_user_name"},{name:"Request Status",id:"request_status"}],m={showTable:!0},p=T({}),i=T(!1),_=s=>{X({path:"/hrms/payroll/salary-disbursement/details",query:{id:s.id}})};return(s,a)=>{const h=F,v=H,P=N,D=$,y=Y,w=z;return g(),x(C,null,[l("div",je,[o(D,{loading:t(e).isLoading},{default:f(()=>[l("div",Ge,[o(h,{modelValue:t(e).params.payroll_date,"onUpdate:modelValue":a[0]||(a[0]=u=>t(e).params.payroll_date=u),class:"w-full",title:"Payroll Date",required:""},null,8,["modelValue"]),o(v,{modelValue:t(e).params.payroll_type,"onUpdate:modelValue":a[1]||(a[1]=u=>t(e).params.payroll_type=u),"options-list":t(j),"add-all":!0,title:"Payroll Type",class:"w-full p-2",required:""},null,8,["modelValue","options-list"]),o(v,{modelValue:t(e).params.release_type,"onUpdate:modelValue":a[2]||(a[2]=u=>t(e).params.release_type=u),"options-list":t(G),"add-all":!0,title:"Release Type",class:"w-full p-2",required:""},null,8,["modelValue","options-list"])]),o(P,{"header-columns":b,datas:t(e).list,actions:m,onShowTable:_},null,8,["datas"])]),_:1},8,["loading"])]),l("div",Ne,[o(y,{links:t(e).pagination,onChangeParams:r},null,8,["links"])]),o(w,{"show-modal":t(i),"onUpdate:showModal":a[3]||(a[3]=u=>I(i)?i.value=u:null),data:t(p)},null,8,["show-modal","data"])],64)}}},Oe={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},Ke={class:"flex gap-2"},ze={class:"flex justify-center mx-auto"},Je={__name:"MyRequests",setup(c){const n=k(),{myRequests:e}=L(n),d=O(()=>{n.getMyRequests()},500);B(()=>{e.value.isLoaded||d()}),E(()=>({...e.value.params}),(s,a)=>{s.page===a.page&&(e.value.params.page=1),d()},{deep:!0});const r=[{name:"Payroll Date",id:"payroll_date_human"},{name:"Payroll Type",id:"payroll_type"},{name:"Release Type",id:"release_type"},{name:"Requested By",id:"created_by_user_name"},{name:"Request Status",id:"request_status"}],b={showTable:!0},m=s=>{e.value.params.page=s.page??""},p=T({}),i=T(!1),_=s=>{p.value=s,i.value=!0};return(s,a)=>{const h=F,v=H,P=N,D=$,y=Y,w=z;return g(),x(C,null,[l("div",Oe,[o(D,{loading:t(e).isLoading},{default:f(()=>[l("div",Ke,[o(h,{modelValue:t(e).params.payroll_date,"onUpdate:modelValue":a[0]||(a[0]=u=>t(e).params.payroll_date=u),class:"w-full",title:"Payroll Date",required:""},null,8,["modelValue"]),o(v,{modelValue:t(e).params.payroll_type,"onUpdate:modelValue":a[1]||(a[1]=u=>t(e).params.payroll_type=u),"options-list":t(j),"add-all":!0,title:"Payroll Type",class:"w-full p-2",required:""},null,8,["modelValue","options-list"]),o(v,{modelValue:t(e).params.release_type,"onUpdate:modelValue":a[2]||(a[2]=u=>t(e).params.release_type=u),"options-list":t(G),"add-all":!0,title:"Release Type",class:"w-full p-2",required:""},null,8,["modelValue","options-list"])]),o(P,{"header-columns":r,actions:b,datas:t(e).list??[],onShowTable:_},null,8,["datas"])]),_:1},8,["loading"])]),l("div",ze,[o(y,{links:t(e).pagination,onChangeParams:m},null,8,["links"])]),o(w,{"show-modal":t(i),"onUpdate:showModal":a[3]||(a[3]=u=>I(i)?i.value=u:null),data:t(p)},null,8,["show-modal","data"])],64)}}},Qe={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},We={class:"flex gap-2"},Xe={class:"flex justify-center mx-auto"},Ze={__name:"MyApprovals",setup(c){const n=k(),{myApprovals:e}=L(n),d=O(()=>{n.getMyApprovals()},500);B(()=>{e.value.isLoaded||d()}),E(()=>({...e.value.params}),(s,a)=>{s.page===a.page&&(e.value.params.page=1),d()},{deep:!0});const r=[{name:"Payroll Date",id:"payroll_date_human"},{name:"Payroll Type",id:"payroll_type"},{name:"Release Type",id:"release_type"},{name:"Requested By",id:"created_by_user_name"},{name:"Request Status",id:"request_status"}],b={showTable:!0},m=T({}),p=T(!1),i=s=>{m.value=s,p.value=!0},_=s=>{e.value.params.page=s.page??1};return(s,a)=>{const h=F,v=H,P=N,D=$,y=Y,w=z;return g(),x(C,null,[l("div",Qe,[o(D,{loading:t(e).isLoading},{default:f(()=>[l("div",We,[o(h,{modelValue:t(e).params.payroll_date,"onUpdate:modelValue":a[0]||(a[0]=u=>t(e).params.payroll_date=u),class:"w-full",title:"Payroll Date",required:""},null,8,["modelValue"]),o(v,{modelValue:t(e).params.payroll_type,"onUpdate:modelValue":a[1]||(a[1]=u=>t(e).params.payroll_type=u),"options-list":t(j),"add-all":!0,title:"Payroll Type",class:"w-full p-2",required:""},null,8,["modelValue","options-list"]),o(v,{modelValue:t(e).params.release_type,"onUpdate:modelValue":a[2]||(a[2]=u=>t(e).params.release_type=u),"options-list":t(G),"add-all":!0,title:"Release Type",class:"w-full p-2",required:""},null,8,["modelValue","options-list"])]),o(P,{"header-columns":r,actions:b,datas:t(e).list??[],onShowTable:i},null,8,["datas"])]),_:1},8,["loading"])]),l("div",Xe,[o(y,{links:t(e).pagination,onChangeParams:_},null,8,["links"])]),o(w,{"show-modal":t(p),"onUpdate:showModal":a[3]||(a[3]=u=>I(p)?p.value=u:null),data:t(m)},null,8,["show-modal","data"])],64)}}},et={class:"pb-2 text-gray-500 p-2"},tt={class:"flex justify-center mx-auto"},at=U({__name:"ListPayslips",setup(c){const n=k(),{payslipReadyRecords:e}=L(n),d=O(()=>{n.getPayslipReadyRecords()},500);B(()=>{e.value.isLoaded||d()}),E(()=>({...e.value.params}),(i,_)=>{i.page===_.page&&(e.value.params.page=1),d()},{deep:!0});const r=i=>{e.value.params.page=i.page??""},b=[{name:"Payroll Date",id:"payroll_date_human"},{name:"Payroll Type",id:"payroll_type"},{name:"Release Type",id:"release_type"},{name:"Requested By",id:"created_by_user_name"},{name:"Request Status",id:"request_status"},{name:"Disbursement Status",id:"disbursement_status"}],m={showTable:!0},p=i=>{X({path:"/hrms/payroll/release-payslip",query:{id:i.id}})};return(i,_)=>{const s=N,a=$,h=Y;return g(),x(C,null,[l("div",et,[o(a,{loading:t(e).isLoading},{default:f(()=>[o(s,{"header-columns":b,datas:t(e).list,actions:m,onShowTable:p},null,8,["datas"])]),_:1},8,["loading"])]),l("div",tt,[o(h,{links:t(e).pagination,onChangeParams:r},null,8,["links"])])],64)}}}),st={class:"grid grid-cols-1 md:flex-row gap-4"},It=U({__name:"index",setup(c){ce({title:"Salary Disbursement"});const n=ye("$d1g9eE0q4M");return(e,d)=>{const r=Z,b=De,m=ee,p=Ye,i=Je,_=Ze,s=at,a=te,h=me;return g(),q(h,{"if-access":("useCheckAccessibility"in e?e.useCheckAccessibility:t(V))([("AccessibilityTypes"in e?e.AccessibilityTypes:t(M)).hrms_payroll_salarydisbursement_group])},{default:f(()=>[l("div",st,[o(a,null,{"tab-titles":f(()=>[("useCheckAccessibility"in e?e.useCheckAccessibility:t(V))([("AccessibilityTypes"in e?e.AccessibilityTypes:t(M)).hrms_payroll_salarydisbursement_form])?(g(),q(r,{key:0,"target-id":t(n)+"1",title:"Generate Salary Disbursement Request"},null,8,["target-id"])):S("",!0),("useCheckAccessibility"in e?e.useCheckAccessibility:t(V))([("AccessibilityTypes"in e?e.AccessibilityTypes:t(M)).hrms_payroll_salarydisbursement_allrequests])?(g(),q(r,{key:1,"target-id":t(n)+"2",title:"All Request"},null,8,["target-id"])):S("",!0),("useCheckAccessibility"in e?e.useCheckAccessibility:t(V))([("AccessibilityTypes"in e?e.AccessibilityTypes:t(M)).hrms_payroll_salarydisbursement_form])?(g(),q(r,{key:2,"target-id":t(n)+"3",title:"My Request"},null,8,["target-id"])):S("",!0),("useCheckAccessibility"in e?e.useCheckAccessibility:t(V))([("AccessibilityTypes"in e?e.AccessibilityTypes:t(M)).hrms_payroll_salarydisbursement_myapprovals])?(g(),q(r,{key:3,"target-id":t(n)+"4",title:"My Approvals"},null,8,["target-id"])):S("",!0),("useCheckAccessibility"in e?e.useCheckAccessibility:t(V))([("AccessibilityTypes"in e?e.AccessibilityTypes:t(M)).hrms_payroll_salarydisbursement_viewpayslips])?(g(),q(r,{key:4,"target-id":t(n)+"5",title:"Release Payslips"},null,8,["target-id"])):S("",!0)]),"tab-containers":f(()=>[o(m,{id:t(n)+"1"},{default:f(()=>[o(b)]),_:1},8,["id"]),o(m,{id:t(n)+"2"},{default:f(()=>[o(p)]),_:1},8,["id"]),o(m,{id:t(n)+"3"},{default:f(()=>[o(i)]),_:1},8,["id"]),o(m,{id:t(n)+"4"},{default:f(()=>[o(_)]),_:1},8,["id"]),o(m,{id:t(n)+"5"},{default:f(()=>[o(s)]),_:1},8,["id"])]),_:1})])]),_:1},8,["if-access"])}}});export{It as default};
