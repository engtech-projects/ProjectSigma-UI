import{c as t,b as o}from"./CustomFetch.BRBLzGci.js";import{l as i}from"./entry.R6V7NTxy.js";const l="Manpower Request",d="Travel Order",A="Overtime",c="Cash Advance",g="Generate Allowance",m="Payroll",h="Failure To Log",u="Salary Disbursement",v="Payment Request Form (NPO)",_="Disbursement Voucher Request",R="Cash Voucher Request",f="New Item Profile",L="Request Canvass Summary",P=i("hrmsapprovals",{state:()=>({editApproval:{errorMessage:"",successMessage:""},hrmsApprovals:{isLoaded:!1,isLoading:!1,list:[],params:{module:"HRMS"},pagination:{},successMessage:"",errorMessage:""},accountingApprovals:{isLoaded:!1,isLoading:!1,list:[],params:{module:"Accounting"},pagination:{},successMessage:"",errorMessage:""},inventoryApprovals:{isLoaded:!1,isLoading:!1,list:[],params:{module:"Inventory"},pagination:{},successMessage:"",errorMessage:""},projectsApprovals:{isLoaded:!1,isLoading:!1,list:[],params:{module:"Project"},pagination:{},successMessage:"",errorMessage:""}}),actions:{async getHrmsApprovals(){this.hrmsApprovals.isLoaded=!0,await t("/api/approvals",{method:"GET",params:this.hrmsApprovals.params,watch:!1,onRequest:()=>{this.hrmsApprovals.isLoading=!0},onResponse:({response:a})=>{this.hrmsApprovals.isLoading=!1,a.ok&&(this.hrmsApprovals.list=a._data.data.map(s=>({id:s.id,form:s.form,approvals:s.approvals})),this.hrmsApprovals.pagination={first_page:a._data.links.first,pages:a._data.meta.links,last_page:a._data.links.last},this.hrmsApprovals.successMessage=a._data.message)},onResponseError:({response:a})=>{throw this.hrmsApprovals.errorMessage=a._data.message,new Error(a._data.message)}})},async getAccountingApprovals(){this.accountingApprovals.isLoaded=!0,await t("/api/approvals",{method:"GET",params:this.accountingApprovals.params,onRequest:()=>{this.accountingApprovals.isLoading=!0},onResponse:({response:a})=>{this.accountingApprovals.isLoading=!1,a.ok&&(this.accountingApprovals.list=a._data.data.map(s=>({id:s.id,form:s.form,approvals:s.approvals})),this.accountingApprovals.pagination={first_page:a._data.links.first,pages:a._data.meta.links,last_page:a._data.links.last},this.accountingApprovals.successMessage=a._data.message)},onResponseError:({response:a})=>{throw this.accountingApprovals.errorMessage=a._data.message,new Error(a._data.message)}})},async getInventoryApprovals(){this.inventoryApprovals.isLoaded=!0,await t("/api/approvals",{method:"GET",params:this.inventoryApprovals.params,onRequest:()=>{this.inventoryApprovals.isLoading=!0},onResponse:({response:a})=>{this.inventoryApprovals.isLoading=!1,a.ok&&(this.inventoryApprovals.list=a._data.data.map(s=>({id:s.id,form:s.form,approvals:s.approvals})),this.inventoryApprovals.pagination={first_page:a._data.links.first,pages:a._data.meta.links,last_page:a._data.links.last},this.inventoryApprovals.successMessage=a._data.message)},onResponseError:({response:a})=>{throw this.inventoryApprovals.errorMessage=a._data.message,new Error(a._data.message)}})},async getProjectsApprovals(){this.projectsApprovals.isLoaded=!0,await t("/api/approvals",{method:"GET",params:this.projectsApprovals.params,onRequest:()=>{this.projectsApprovals.isLoading=!0},onResponse:({response:a})=>{this.projectsApprovals.isLoading=!1,a.ok&&(this.projectsApprovals.list=a._data.data.map(s=>({id:s.id,form:s.form,approvals:s.approvals})),this.projectsApprovals.pagination={first_page:a._data.links.first,pages:a._data.meta.links,last_page:a._data.links.last},this.projectsApprovals.successMessage=a._data.message)},onResponseError:({response:a})=>{throw this.projectsApprovals.errorMessage=a._data.message,new Error(a._data.message)}})},async getApprovalByName(a){const{data:s}=await t("/api/get-form-requests/"+a,{method:"GET",watch:!1,onResponse:({response:e})=>{if(e.ok)return e._data.data.approvals.map(r=>({type:r.type,status:"Pending",user_id:r.user_id,selector_type:r.selector_type,date_approved:"",remarks:"",employee_name:r.employee_name}));this.errorMessage=e._data.message}});if(s.value)return s.value.data.approvals.map(e=>({type:e.type,status:"Pending",user_id:e.user_id,selector_type:e.selector_type,date_approved:"",remarks:"",employee_name:e.employee_name}))},async editApprovals(a){await o("/api/approvals/"+a.id,{method:"PATCH",body:a,onResponse:({response:s})=>{this.reloadResources(),s.ok?this.editApproval.successMessage=s._data.message:this.editApproval.errorMessage=s._data.message}})},reloadResources(){const a=[];this.hrmsApprovals.isLoaded&&a.push(this.getHrmsApprovals),this.accountingApprovals.isLoaded&&a.push(this.getAccountingApprovals),this.inventoryApprovals.isLoaded&&a.push(this.getInventoryApprovals),this.projectsApprovals.isLoaded&&a.push(this.getProjectsApprovals),this.$reset(),a.forEach(s=>{s()})}}});export{v as A,R as a,_ as b,h as c,l as d,c as e,A as f,g,u as h,m as i,d as j,f as k,L as l,P as u};
