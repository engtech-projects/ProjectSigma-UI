import{_ as Y}from"./PsButton.Cqg1ndZS.js";import{_ as Z}from"./PsTable.BPIFONj1.js";import{_ as q}from"./CustomPagination.C91H0oe5.js";import{_ as U}from"./LayoutBoards.vue.D_rbqYxd.js";import{ab as J,l as K,O as Q,s as k,B as $,r as S,o as v,h as M,w as f,b as p,a as s,u as t,G as N,t as b,x as g,y as R,_ as H,g as I,A as x,j as T,p as B,e as j}from"./entry.32UGFqj-.js";import{c as W,h as C}from"./CustomFetch.ggXvTdIz.js";import X from"./Icon.CrHlyQOo.js";import{_ as ee}from"./editBoards.vue.DA5g6BdX.js";import{_ as te}from"./ContainerLastchild.aL7Tv4Du.js";import{_ as se}from"./AcessContainer.Dum7aOuo.js";import{u as ae}from"./vue.f36acd1f.Ds2AlAv6.js";import{u as ne,A as oe}from"./Accessibilities.xGffDRXj.js";import"./nuxt-link.C5IpI_HT.js";import"./Utilities.DofxnkSu.js";import"./loader.BQ9QddgL.js";import"./index.T-zbMaZc.js";import"./users.G4iuGzk0.js";const{token:A}=J(),L=Q(),w=K("departments",{state:()=>({isEdit:!1,isCreate:!1,department:{id:null,code:null,department_name:null},list:[],pagination:{},getParams:{},errorMessage:"",successMessage:""}),actions:{async getDepartment(){const{data:n,error:e}=await W("/api/department/resource",{params:this.getParams,onResponse:({response:a})=>{this.list=a._data.data.data,this.pagination={first_page:a._data.data.links.first,pages:a._data.data.links,last_page:a._data.data.links.last}}});if(n)return n;if(e)return e},async createDepartment(){this.successMessage="",this.errorMessage="",await C("/api/department/resource",{baseURL:L.public.HRMS_API_URL,method:"POST",headers:{Authorization:A.value+"",Accept:"application/json"},body:this.department,onResponse:({response:n})=>{n.ok?(this.reset(),this.successMessage=n._data.message):this.errorMessage=n._data.message}},"$MwsPZSMUIY")},clearMessages(){this.errorMessage="",this.successMessage=""},async editDepartmentName(){this.successMessage="",this.errorMessage="";const{data:n,error:e}=await C("/api/department/resource/"+this.department.id,{baseURL:L.public.HRMS_API_URL,method:"PATCH",headers:{Authorization:A.value+"",Accept:"application/json"},body:this.department,watch:!1},"$ainbpOLF0U");if(n.value)return this.reset(),this.successMessage=n.value.message,n;if(e.value)return this.errorMessage=e.value.data.message,e},async deleteDepartment(n){const{data:e,error:a}=await C("/api/department/resource/"+n,{baseURL:L.public.HRMS_API_URL,method:"DELETE",headers:{Authorization:A.value+"",Accept:"application/json"},watch:!1,onResponse:({response:o})=>{this.successMessage=o._data.message}},"$mzkHNygkfM");if(e.value)return this.successMessage=e.value.message,e;if(a.value)return this.errorMessage=a.value.data.message,a},reset(){this.department={id:null,department_name:null},this.isEdit=!1,this.successMessage="",this.errorMessage=""}}}),re={class:"pb-2 text-gray-500"},ie={class:"flex justify-center mx-auto"},ce={__name:"DepartmentList",setup(n){const e=w(),{list:a,getParams:o,pagination:d,errorMessage:i,successMessage:r}=k(e),u=h=>{e.department=h,e.isEdit=!0},_=async h=>{try{D.value=!0,await e.deleteDepartment(h.id),V.add({type:"success",text:e.successMessage})}finally{D.value=!1}},l=h=>{o.value.page=h.page??""},m=[{name:"Department Code",id:"code"},{name:"Department Name",id:"department_name"}],y={edit:!0,delete:!0},c=()=>{e.isCreate=!0},V=$(),D=S(!1);return(h,De)=>{const z=Y,F=Z,O=q,G=U;return v(),M(G,{title:"Department List",class:"w-full",loading:t(D)},{"header-options":f(()=>[p(z,{class:"content-center mt-5 !w-auto text-white bg-teal-600 hover:bg-teal-700 focus:ring-4 font-semibold text-sm p-2 me-2 mb-2 rounded-lg","button-title":"Add Department","button-icon":"",onClick:c})]),default:f(()=>[s("div",re,[p(F,{"header-columns":m,datas:t(a),actions:y,onEditRow:u,onDeleteRow:_},null,8,["datas"])]),s("div",ie,[p(O,{links:t(d),onChangeParams:l},null,8,["links"])]),s("p",{hidden:"",class:N(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!t(i)}])},b(t(i)),3),g(s("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic"},b(t(r)),513),[[R,t(r)]])]),_:1},8,["loading"])}}},E=n=>(B("data-v-38b64025"),n=n(),j(),n),de={class:"text-gray-500"},le=["onSubmit"],me=E(()=>s("label",{for:"departmentCode",class:"text-xs italic mt-2"},"Department Code",-1)),pe=E(()=>s("label",{for:"department_name",class:"text-xs italic mt-2"},"Department Name",-1)),ue=E(()=>s("div",{class:"flex justify-end"},[s("button",{type:"submit",class:"flex-1 text-white p-2 rounded bg-teal-600 content-center mt-5"}," Add Department ")],-1)),_e={__name:"NewDepartment",setup(n){const e=w(),{department:a,errorMessage:o,successMessage:d}=k(e),i=$(),r=S(!1),u=async()=>{try{r.value=!0,await e.createDepartment(),e.errorMessage!==""?i.add({type:"error",text:e.errorMessage}):i.add({type:"success",text:e.successMessage})}catch{o.value=o,i.add({type:"error",text:e.errorMessage})}finally{e.clearMessages(),r.value=!1}};return(_,l)=>{const m=X,y=U;return t(e).isCreate?(v(),M(y,{key:0,title:"Create New Department",loading:t(r)},{"header-options":f(()=>[s("button",{class:"text-gray-500 hover:text-white hover:bg-red-600 absolute top-2 right-2",onClick:l[0]||(l[0]=c=>t(e).isCreate=!1)},[p(m,{name:"mdi:close",class:"h-5 w-5"})])]),default:f(()=>[s("div",de,[s("form",{onSubmit:I(u,["prevent"])},[me,g(s("input",{id:"departmentCode","onUpdate:modelValue":l[1]||(l[1]=c=>t(a).code=c),type:"text",class:"w-full rounded-lg"},null,512),[[x,t(a).code]]),pe,g(s("input",{id:"departmentName","onUpdate:modelValue":l[2]||(l[2]=c=>t(a).department_name=c),type:"text",class:"w-full rounded-lg"},null,512),[[x,t(a).department_name]]),ue],40,le),s("p",{hidden:"",class:N(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!t(o)}])},b(t(o)),3),g(s("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic transition-opacity delay-1000"},b(t(d)),513),[[R,t(d)]])])]),_:1},8,["loading"])):T("",!0)}}},ge=H(_e,[["__scopeId","data-v-38b64025"]]),P=n=>(B("data-v-8b248be2"),n=n(),j(),n),fe={class:"text-gray-500 mt-2"},he=["onSubmit"],be={class:"space-y-2"},ye=P(()=>s("label",{for:"departmentCode",class:"text-xs italic mt-2"},"New Department Code",-1)),xe=P(()=>s("label",{for:"departmentName",class:"text-xs italic mt-2"},"New Department Name",-1)),ve=P(()=>s("button",{type:"submit",class:"flex-1 text-white p-2 rounded bg-teal-600 content-center mt-5 hover:bg-teal-500"}," Save ",-1)),Me={__name:"EditDepartment",setup(n){const e=w(),{department:a,errorMessage:o,successMessage:d}=k(e),i=$(),r=S(!1),u=async()=>{try{r.value=!0,await e.editDepartmentName(),i.add({type:"success",text:e.successMessage}),e.isEdit=!1}catch{i.add({type:"error",text:e.errorMessage||"something went wrong."})}finally{e.clearMessages(),r.value=!1}},_=()=>{e.reset(),e.isEdit=!1};return(l,m)=>{const y=ee;return t(e).isEdit?(v(),M(y,{key:0,title:"Edit Department",loading:t(r)},{default:f(()=>[s("div",fe,[s("form",{onSubmit:I(u,["prevent"])},[s("div",be,[ye,g(s("input",{id:"departmentCode","onUpdate:modelValue":m[0]||(m[0]=c=>t(a).code=c),type:"text",class:"w-full rounded-lg"},null,512),[[x,t(a).code]]),xe,g(s("input",{id:"departmentName","onUpdate:modelValue":m[1]||(m[1]=c=>t(a).department_name=c),type:"text",class:"w-full rounded-lg"},null,512),[[x,t(a).department_name]])]),s("div",{class:"flex justify-end gap-2"},[ve,s("button",{type:"button",class:"flex-1 text-white p-2 rounded bg-gray-700 content-center mt-5 hover:bg-gray-500",onClick:_}," Cancel ")])],40,he),s("p",{hidden:"",class:N(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!t(o)}])},b(t(o)),3),g(s("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic transition-opacity delay-1000"},b(t(d)),513),[[R,t(d)]])])]),_:1},8,["loading"])):T("",!0)}}},we=H(Me,[["__scopeId","data-v-8b248be2"]]),ze={__name:"department",setup(n){return w().getDepartment(),ae({title:"Department"}),(a,o)=>{const d=ce,i=ge,r=we,u=te,_=se;return v(),M(_,{"if-access":("useCheckAccessibility"in a?a.useCheckAccessibility:t(ne))([("AccessibilityTypes"in a?a.AccessibilityTypes:t(oe)).hrms_setup_department])},{default:f(()=>[p(u,null,{default:f(()=>[p(d),p(i),p(r)]),_:1})]),_:1},8,["if-access"])}}};export{ze as default};
