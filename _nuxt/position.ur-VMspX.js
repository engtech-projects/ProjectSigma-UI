import{_ as te}from"./PsButton.aXG5uXyp.js";import{_ as se}from"./PsTextInput.vue.DFQbUHfC.js";import{_ as oe}from"./PsTable.CTJad9K5.js";import{_ as ae}from"./CustomPagination.CR9ildFS.js";import{_ as N}from"./LayoutBoards.vue.1keADq5t.js";import{ab as ie,l as ne,O as re,s as T,B as C,r as E,o as _,h as w,w as y,b as l,a as s,u as e,G as I,t as g,x as h,y as V,_ as U,g as j,c as M,F as D,i as B,P as F,A as O,j as q,p as z,e as G}from"./entry.R6V7NTxy.js";import{c as ce,h as A}from"./CustomFetch.BRBLzGci.js";import le from"./Icon.DcF_NU9d.js";import{_ as J}from"./DepartmentSelector.vue.Cl6IMdR7.js";import{_ as de}from"./editBoards.vue.DJ7sTR7u.js";import{_ as ue}from"./ContainerLastchild.CF2N10u6.js";import{_ as me}from"./AcessContainer.DJcSsti6.js";import{u as pe}from"./vue.f36acd1f.Dv_A-myg.js";import{u as _e,A as ge}from"./Accessibilities.uaboihcy.js";import"./id.Dwf9xs1O.js";import"./client-only.QuN6N-R_.js";import"./nuxt-link.drPfi767.js";import"./Utilities.Cbr1Z9cn.js";import"./loader.C2wIXBoB.js";import"./index.T-zbMaZc.js";import"./enum.D7iLG1Bk.js";import"./users.D5_vMoUK.js";const{token:L}=ie(),R=re(),fe="Head",he="Staff",Q=[fe,he],k=ne("positions",{state:()=>({isEdit:!1,isCreate:!1,position:{id:null,department_name:null,name:null},allRequests:{isLoaded:!1,list:[],params:{name:""},pagination:{},errorMessage:"",successMessage:""},list:[],pagination:{},getParams:{},errorMessage:"",successMessage:""}),actions:{async getPosition(){const{data:a,error:t}=await ce("/api/position/resource",{params:this.allRequests.params,onResponse:({response:o})=>{this.allRequests.list=o._data.data.data,this.allRequests.pagination={first_page:o._data.data.links.first,pages:o._data.data.links,last_page:o._data.data.links.last}}});if(a)return a;if(t)return t},async createPosition(){this.successMessage="",this.errorMessage="",await A("/api/position/resource",{baseURL:R.public.HRMS_API_URL,method:"POST",headers:{Authorization:L.value+"",Accept:"application/json"},body:this.position,watch:!1,onResponse:({response:a})=>{a.ok?(this.clearPosition(),this.successMessage=a._data.message):this.errorMessage=a._data.message}},"$zqVr02m4fo")},clearMessages(){this.errorMessage="",this.successMessage=""},clearPosition(){this.position={id:null,department_name:null,name:null}},async editPosition(){this.successMessage="",this.errorMessage="";const{data:a,error:t}=await A("/api/position/resource/"+this.position.id,{baseURL:R.public.HRMS_API_URL,method:"PATCH",headers:{Authorization:L.value+"",Accept:"application/json"},body:this.position,watch:!1},"$sLXyclIAjQ");if(a.value)return this.successMessage=a.value.message,this.clearPosition(),a;if(t.value)return this.errorMessage=t.value.data.message,t},async deletePosition(a){const{data:t,error:o}=await A("/api/position/resource/"+a,{baseURL:R.public.HRMS_API_URL,method:"DELETE",headers:{Authorization:L.value+"",Accept:"application/json"},watch:!1,onResponse:({response:d})=>{this.successMessage=d._data.message}},"$p1WJtL1SH9");if(t.value)return this.successMessage=t.value.message,t;if(o.value)return this.errorMessage=o.value.data.message,o},reset(){this.$reset(),this.isEdit=!1,this.successMessage="",this.errorMessage=""}}}),ye={class:"pb-2 text-gray-500"},be={class:"flex justify-center mx-auto"},xe={__name:"PositionTable",setup(a){const t=k(),{allRequests:o,isEdit:d,position:p,errorMessage:r,successMessage:n}=T(t),f=m=>{d.value=!0,p.value=m},b=async m=>{try{i.value=!0,await t.deletePosition(m.id),v.add({type:"success",text:t.successMessage})}finally{i.value=!1}},c=m=>{o.value.params.page=m.page??""},u=[{name:"Department",id:"departments.department_name"},{name:"Position Type",id:"position_type"},{name:"Position Name",id:"name"}],P={edit:!0,delete:!0},v=C(),i=E(!1),x=()=>{t.isCreate=!0};return(m,H)=>{const W=te,X=se,Y=oe,K=ae,Z=N;return _(),w(Z,{title:"Position List",class:"w-full",loading:e(i)},{"header-options":y(()=>[l(W,{class:"content-center mt-5 !w-auto text-white bg-teal-600 hover:bg-teal-700 focus:ring-4 font-semibold text-sm p-2 me-2 mb-2 rounded-lg","button-title":"Add Position","button-icon":"",onClick:x})]),default:y(()=>[s("div",ye,[l(X,{modelValue:e(o).params.name,"onUpdate:modelValue":H[0]||(H[0]=ee=>e(o).params.name=ee),title:"Search Position Name"},null,8,["modelValue"]),l(Y,{"header-columns":u,datas:e(o).list,actions:P,onEditRow:f,onDeleteRow:b},null,8,["datas"])]),s("div",be,[l(K,{links:e(o).pagination,onChangeParams:c},null,8,["links"])]),s("p",{hidden:"",class:I(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!e(r)}])},g(e(r)),3),h(s("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic"},g(e(n)),513),[[V,e(n)]])]),_:1},8,["loading"])}}},S=a=>(z("data-v-09e112ed"),a=a(),G(),a),Pe={class:"text-gray-500"},ve=["onSubmit"],Me={class:"grid grid-rows-1 mt-1"},we=S(()=>s("label",{for:"share_type",class:"text-sm italic"},"Department",-1)),ke=S(()=>s("label",{for:"positionType",class:"text-sm italic"},"Position Type",-1)),Se={class:"grid md:grid-cols-2 justify-items-center"},$e=["value"],Ae=["for"],Le=S(()=>s("label",{for:"position_name",class:"text-xs italic"},"New Position Name",-1)),Re=S(()=>s("div",{class:"flex justify-end"},[s("button",{type:"submit",class:"flex-1 text-white p-2 rounded bg-teal-600 content-center mt-5"}," Add Position ")],-1)),Te={__name:"NewPosition",setup(a){const t=k(),{position:o,errorMessage:d,successMessage:p}=T(t),r=C(),n=E(!1),f=async()=>{try{n.value=!0,await t.createPosition(),t.errorMessage!==""?r.add({type:"error",text:t.errorMessage}):r.add({type:"success",text:t.successMessage})}catch{r.add({type:"error",text:t.errorMessage})}finally{t.clearMessages(),n.value=!1}};return(b,c)=>{const u=le,P=J,v=N;return e(t).isCreate?(_(),w(v,{key:0,title:"Position Name",loading:e(n)},{"header-options":y(()=>[s("button",{class:"text-gray-500 hover:text-white hover:bg-red-600 absolute top-2 right-2",onClick:c[0]||(c[0]=i=>e(t).isCreate=!1)},[l(u,{name:"mdi:close",class:"h-5 w-5"})])]),default:y(()=>[s("div",Pe,[s("form",{onSubmit:j(f,["prevent"])},[s("div",Me,[we,l(P,{modelValue:e(o).department_id,"onUpdate:modelValue":c[1]||(c[1]=i=>e(o).department_id=i)},null,8,["modelValue"])]),ke,s("div",Se,[(_(!0),M(D,null,B(e(Q),(i,x)=>(_(),M("div",{key:x},[h(s("input",{id:"positionType","onUpdate:modelValue":c[2]||(c[2]=m=>e(o).position_type=m),value:i,type:"radio",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,$e),[[F,e(o).position_type]]),s("label",{for:"positionType"+x,class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},g(i),9,Ae)]))),128))]),Le,h(s("input",{id:"position_name","onUpdate:modelValue":c[3]||(c[3]=i=>e(o).name=i),type:"text",class:"w-full rounded-lg"},null,512),[[O,e(o).name]]),Re],40,ve),s("p",{hidden:"",class:I(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!e(d)}])},g(e(d)),3),h(s("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic transition-opacity delay-1000"},g(e(p)),513),[[V,e(p)]])])]),_:1},8,["loading"])):q("",!0)}}},Ce=U(Te,[["__scopeId","data-v-09e112ed"]]),$=a=>(z("data-v-caea2f67"),a=a(),G(),a),Ee={class:"text-gray-500"},Ie=["onSubmit"],Ve=$(()=>s("label",{for:"position_name",class:"text-xs italic"},"Edit Position Name",-1)),He={class:"grid grid-rows-1 mt-1"},Ne=$(()=>s("label",{for:"share_type",class:"text-sm italic"},"Department",-1)),Ue=$(()=>s("label",{for:"positionType",class:"text-sm italic"},"Position Type",-1)),je={class:"grid md:grid-cols-2 justify-items-center"},De=["value"],Be={class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},Fe=$(()=>s("button",{type:"submit",class:"flex-1 text-white p-2 rounded bg-teal-600 content-center mt-5 hover:bg-teal-500"}," Save ",-1)),Oe={__name:"EditPosition",setup(a){const t=k(),{position:o,errorMessage:d,successMessage:p}=T(t),r=C(),n=E(!1),f=()=>{t.isEdit=!1},b=async()=>{try{n.value=!0,await t.editPosition(),r.add({type:"success",text:t.successMessage}),t.isEdit=!1}catch{r.add({type:"error",text:t.errorMessage})}finally{t.clearMessages(),n.value=!1}};return(c,u)=>{const P=J,v=de;return e(t).isEdit?(_(),w(v,{key:0,title:"Edit Position Name",loading:e(n)},{default:y(()=>[s("div",Ee,[s("form",{onSubmit:j(b,["prevent"])},[Ve,h(s("input",{id:"position_name","onUpdate:modelValue":u[0]||(u[0]=i=>e(o).name=i),type:"text",class:"w-full rounded-lg",required:""},null,512),[[O,e(o).name]]),s("div",He,[Ne,l(P,{modelValue:e(o).department_id,"onUpdate:modelValue":u[1]||(u[1]=i=>e(o).department_id=i)},null,8,["modelValue"])]),Ue,s("div",je,[(_(!0),M(D,null,B(e(Q),(i,x)=>(_(),M("div",{key:x},[h(s("input",{id:"positionType","onUpdate:modelValue":u[2]||(u[2]=m=>e(o).position_type=m),value:i,type:"radio",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,De),[[F,e(o).position_type]]),s("label",Be,g(i),1)]))),128))]),s("div",{class:"flex justify-end gap-2"},[Fe,s("button",{type:"button",class:"flex-1 text-white p-2 rounded bg-gray-700 content-center mt-5 hover:bg-gray-500",onClick:f}," Cancel ")])],40,Ie),s("p",{hidden:"",class:I(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!e(d)}])},g(e(d)),3),h(s("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic transition-opacity delay-1000"},g(e(p)),513),[[V,e(p)]])])]),_:1},8,["loading"])):q("",!0)}}},qe=U(Oe,[["__scopeId","data-v-caea2f67"]]),pt={__name:"position",setup(a){return k().getPosition(),pe({title:"Position"}),(o,d)=>{const p=xe,r=Ce,n=qe,f=ue,b=me;return _(),w(b,{"if-access":("useCheckAccessibility"in o?o.useCheckAccessibility:e(_e))([("AccessibilityTypes"in o?o.AccessibilityTypes:e(ge)).hrms_setup_position])},{default:y(()=>[l(f,null,{default:y(()=>[l(p),l(r),l(n)]),_:1})]),_:1},8,["if-access"])}}};export{pt as default};
