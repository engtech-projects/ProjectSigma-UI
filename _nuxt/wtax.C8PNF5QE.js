import{_ as k}from"./LayoutBoards.vue.1keADq5t.js";import{ab as Z,l as q,O as J,_ as F,s as W,B as L,r as P,o as f,h as $,w as E,a as e,g as V,x as l,u as t,c as S,F as C,i as I,t as x,D as H,A as c,G as U,y as M,p as O,e as D,b as w}from"./entry.R6V7NTxy.js";import{h as T}from"./CustomFetch.BRBLzGci.js";import{_ as K}from"./editBoards.vue.DJ7sTR7u.js";import{_ as X}from"./PsTable.CTJad9K5.js";import{_ as ee}from"./CustomPagination.CR9ildFS.js";import{_ as te}from"./AcessContainer.DJcSsti6.js";import{u as se}from"./vue.f36acd1f.Dv_A-myg.js";import{u as ae,A as oe}from"./Accessibilities.uaboihcy.js";import"./loader.C2wIXBoB.js";import"./Icon.DcF_NU9d.js";import"./index.T-zbMaZc.js";import"./nuxt-link.drPfi767.js";import"./Utilities.Cbr1Z9cn.js";import"./users.D5_vMoUK.js";const{token:R}=Z(),A=J(),ne="Daily",ie="Weekly",le="Semi-Monthly",re="Monthly",de=[ne,ie,le,re],B=q("withholdings",{state:()=>({isEdit:!1,withholding:{id:null,range_from:null,range_to:null,tax_base:null,tax_amount:null,tax_percent_over_base:null,term:""},list:[],pagination:{},getParams:{},errorMessage:"",successMessage:""}),actions:{async getWithholding(){const{data:i,error:o}=await T("/api/witholdingtax",{baseURL:A.public.HRMS_API_URL,method:"GET",headers:{Authorization:R.value+"",Accept:"application/json"},params:this.getParams,onResponse:({response:s})=>{this.list=s._data.data.data,this.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last}}},"$JMim2VUVSB");if(i)return i;if(o)return o},async addWithholding(){this.successMessage="",this.errorMessage="",await T("/api/witholdingtax",{baseURL:A.public.HRMS_API_URL,method:"POST",headers:{Authorization:R.value+"",Accept:"application/json"},body:this.withholding,watch:!1,onResponse:({response:i})=>{i.ok?(this.getWithholding(),this.reset(),this.successMessage=i._data.message):this.errorMessage=i._data.message}},"$FemQOR98mI")},clearMessages(){this.errorMessage="",this.successMessage=""},async editWithholdings(){this.successMessage="",this.errorMessage="";const{data:i,error:o}=await T("/api/witholdingtax/"+this.withholding.id,{baseURL:A.public.HRMS_API_URL,method:"PATCH",headers:{Authorization:R.value+"",Accept:"application/json"},body:this.withholding,watch:!1,onResponse:({response:s})=>{this.successMessage=s._data.message}},"$7gdDWZaD9B");if(i.value)return this.getWithholding(),this.reset(),this.successMessage=i.value.message,i;if(o.value)return this.errorMessage=o.value.data.message,o},async deleteWithholding(i){const{data:o,error:s}=await T("/api/witholdingtax/"+i,{baseURL:A.public.HRMS_API_URL,method:"DELETE",headers:{Authorization:R.value+"",Accept:"application/json"},watch:!1,onResponse:({response:r})=>{this.successMessage=r._data.message}},"$7Zwc0HQs7P");if(o.value)return this.getWithholding(),this.successMessage=o.value.message,o;if(s.value)return this.errorMessage=s.value.data.message,s},reset(){this.withholding={id:null,range_from:null,range_to:null,tax_base:null,tax_amount:null,tax_percent_over_base:null,term:""},this.isEdit=!1,this.successMessage="",this.errorMessage=""}}}),_=i=>(O("data-v-0ee11962"),i=i(),D(),i),ce={class:"text-gray-500 mt-2"},ue=["onSubmit"],me=_(()=>e("label",{class:"text-sm"},"Create Withholding Record",-1)),_e={class:"grid grid-rows-1 p-px"},ge=_(()=>e("label",{for:"wtaxTerm",class:"text-sm italic"},"Term",-1)),pe=_(()=>e("option",{class:"italic font-semibold",value:"",disabled:"",selected:""}," Choose Term ",-1)),he=["value"],fe={class:"grid grid-cols-2 gap-2"},xe=_(()=>e("label",{for:"salaryRangeFrom",class:"text-sm italic"},"Salary Range From",-1)),be=_(()=>e("label",{for:"salaryRangeTo",class:"text-sm italic"},"Salary Range From",-1)),ye=_(()=>e("label",{for:"taxBase",class:"text-sm italic"},"Tax Base",-1)),ve=_(()=>e("label",{for:"taxAmount",class:"text-sm italic"},"Tax Amount",-1)),we=_(()=>e("label",{for:"taxPerOverBase",class:"text-sm italic"},"Tax Percent Over Base",-1)),Me=_(()=>e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"flex-1 text-white p-2 rounded bg-teal-600 content-center mt-5"}," Add Withholding ")],-1)),Te={__name:"WtaxForm",setup(i){const o=B(),{withholding:s,errorMessage:r,successMessage:p}=W(o),u=L(),d=P(!1),h=async()=>{try{d.value=!0,await o.addWithholding(),o.errorMessage!==""?u.add({type:"error",text:o.errorMessage}):u.add({type:"success",text:o.successMessage})}catch{u.add({type:"error",text:o.errorMessage})}finally{o.clearMessages(),d.value=!1}};return(m,n)=>{const b=k;return f(),$(b,{title:"Withholding Tax",loading:t(d)},{default:E(()=>[e("div",ce,[e("form",{onSubmit:V(h,["prevent"])},[me,e("div",_e,[ge,l(e("select",{id:"wtaxTerm","onUpdate:modelValue":n[0]||(n[0]=a=>t(s).term=a),class:"bg-slate-100 border border-slate-300 rounded py-1.5 pl-3 cursor-pointer focus:outline focus:outline-color1 focus:bg-white"},[pe,(f(!0),S(C,null,I(t(de),(a,v)=>(f(),S("option",{key:v,value:a},x(a),9,he))),128))],512),[[H,t(s).term]])]),e("div",fe,[e("div",null,[xe,l(e("input",{id:"salaryRangeFrom","onUpdate:modelValue":n[1]||(n[1]=a=>t(s).range_from=a),type:"number",step:".01",min:"0",class:"w-full rounded-lg"},null,512),[[c,t(s).range_from]])]),e("div",null,[be,l(e("input",{id:"salaryRangeTo","onUpdate:modelValue":n[2]||(n[2]=a=>t(s).range_to=a),type:"number",step:".01",min:"0",class:"w-full rounded-lg"},null,512),[[c,t(s).range_to]])]),e("div",null,[ye,l(e("input",{id:"taxBase","onUpdate:modelValue":n[3]||(n[3]=a=>t(s).tax_base=a),type:"number",step:".01",min:"0",class:"w-full rounded-lg"},null,512),[[c,t(s).tax_base]])]),e("div",null,[ve,l(e("input",{id:"taxAmount","onUpdate:modelValue":n[4]||(n[4]=a=>t(s).tax_amount=a),type:"number",step:".01",min:"0",class:"w-full rounded-lg"},null,512),[[c,t(s).tax_amount]])])]),e("div",null,[we,l(e("input",{id:"taxPerOverBase","onUpdate:modelValue":n[5]||(n[5]=a=>t(s).tax_percent_over_base=a),type:"number",step:".01",min:"0",class:"w-full rounded-lg"},null,512),[[c,t(s).tax_percent_over_base]])]),Me],40,ue),e("p",{hidden:"",class:U(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!t(r)}])},x(t(r)),3),l(e("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic"},x(t(p)),513),[[M,t(p)]])])]),_:1},8,["loading"])}}},Re=F(Te,[["__scopeId","data-v-0ee11962"]]),g=i=>(O("data-v-f1cf5498"),i=i(),D(),i),Ae={class:"text-gray-500 mt-2"},Se=["onSubmit"],We=g(()=>e("label",{class:"text-sm"},"Edit Withholding Record",-1)),$e={class:"grid grid-rows-1 p-px"},Ee=g(()=>e("label",{for:"wtaxTerm",class:"text-sm italic"},"Term",-1)),Be=g(()=>e("option",{class:"italic font-semibold",value:"",disabled:"",selected:""}," Choose Term ",-1)),Le=["value"],Pe={class:"grid grid-cols-2 gap-2"},Ue=g(()=>e("label",{for:"salaryRangeFrom",class:"text-sm italic"},"Salary Range From",-1)),ke=g(()=>e("label",{for:"salaryRangeTo",class:"text-sm italic"},"Salary Range From",-1)),Fe=g(()=>e("label",{for:"taxBase",class:"text-sm italic"},"Tax Base",-1)),Ve=g(()=>e("label",{for:"taxAmount",class:"text-sm italic"},"Tax Amount",-1)),Ce=g(()=>e("label",{for:"taxPerOverBase",class:"text-sm italic"},"Tax Percent Over Base",-1)),Ie={class:"flex justify-end gap-4"},He=g(()=>e("button",{type:"submit",class:"flex-1 text-white p-2 rounded bg-teal-600 content-center mt-5"}," Save ",-1)),Oe={__name:"EditForm",setup(i){const o=B(),{withholding:s,errorMessage:r,successMessage:p}=W(o),u=L(),d=P(!1),h=async()=>{try{d.value=!0,await o.editWithholdings(),u.add({type:"success",text:o.successMessage})}finally{d.value=!1,o.clearMessages()}};return(m,n)=>{const b=K;return f(),$(b,{title:"Edit Withholding Tax",loading:t(d)},{default:E(()=>[e("div",Ae,[e("form",{onSubmit:V(h,["prevent"])},[We,e("div",$e,[Ee,l(e("select",{id:"wtaxTerm","onUpdate:modelValue":n[0]||(n[0]=a=>t(s).term=a),class:"bg-slate-100 border border-slate-300 rounded py-1.5 pl-3 cursor-pointer focus:outline focus:outline-color1 focus:bg-white",required:"",disabled:""},[Be,(f(!0),S(C,null,I(m.TERM,(a,v)=>(f(),S("option",{key:v,value:a},x(a),9,Le))),128))],512),[[H,t(s).term]])]),e("div",Pe,[e("div",null,[Ue,l(e("input",{id:"salaryRangeFrom","onUpdate:modelValue":n[1]||(n[1]=a=>t(s).range_from=a),type:"number",step:".01",min:"0",class:"w-full rounded-lg"},null,512),[[c,t(s).range_from]])]),e("div",null,[ke,l(e("input",{id:"salaryRangeTo","onUpdate:modelValue":n[2]||(n[2]=a=>t(s).range_to=a),type:"number",step:".01",min:"0",class:"w-full rounded-lg"},null,512),[[c,t(s).range_to]])]),e("div",null,[Fe,l(e("input",{id:"taxBase","onUpdate:modelValue":n[3]||(n[3]=a=>t(s).tax_base=a),type:"number",step:".01",min:"0",class:"w-full rounded-lg"},null,512),[[c,t(s).tax_base]])]),e("div",null,[Ve,l(e("input",{id:"taxAmount","onUpdate:modelValue":n[4]||(n[4]=a=>t(s).tax_amount=a),type:"number",step:".01",min:"0",class:"w-full rounded-lg"},null,512),[[c,t(s).tax_amount]])])]),e("div",null,[Ce,l(e("input",{id:"taxPerOverBase","onUpdate:modelValue":n[5]||(n[5]=a=>t(s).tax_percent_over_base=a),type:"number",step:".01",min:"0",class:"w-full rounded-lg"},null,512),[[c,t(s).tax_percent_over_base]])]),e("div",Ie,[He,e("button",{type:"button",class:"flex-1 text-white p-2 rounded bg-gray-700 content-center mt-5 hover:bg-gray-500",onClick:n[6]||(n[6]=(...a)=>m.cancelEdit&&m.cancelEdit(...a))}," Cancel ")])],40,Se),e("p",{hidden:"",class:U(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!t(r)}])},x(t(r)),3),l(e("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic"},x(t(p)),513),[[M,t(p)]])])]),_:1},8,["loading"])}}},De=F(Oe,[["__scopeId","data-v-f1cf5498"]]),je={class:"pb-2 text-gray-500"},ze={class:"flex justify-center mx-auto"},Ne={__name:"WtaxTable",setup(i){const o=B(),{list:s,isEdit:r,withholding:p,getParams:u,pagination:d,errorMessage:h,successMessage:m}=W(o),n=L(),b=P(!1),a=y=>{r.value=!0,p.value=y},v=async y=>{try{b.value=!0,await o.deleteWithholding(y.id),n.add({type:"success",text:o.successMessage})}finally{b.value=!1}},j=y=>{u.value.page=y.page??""},z=[{name:"Term",id:"term"},{name:"Salary Range From",id:"range_from"},{name:"Salary Range To",id:"range_to"},{name:"Tax Base",id:"tax_base"},{name:"Tax Amount",id:"tax_amount"},{name:"Tax Percent Over Base",id:"tax_percent_over_base"}],N={edit:!0,delete:!0};return(y,Ge)=>{const Y=X,G=ee,Q=k;return f(),$(Q,{title:"Withholding Table",class:"w-full",loading:t(b)},{default:E(()=>[e("div",je,[w(Y,{"header-columns":z,datas:t(s),actions:N,onEditRow:a,onDeleteRow:v},null,8,["datas"])]),e("div",ze,[w(G,{links:t(d),onChangeParams:j},null,8,["links"])]),e("p",{hidden:"",class:U(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!t(h)}])},x(t(h)),3),l(e("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic"},x(t(m)),513),[[M,t(m)]])]),_:1},8,["loading"])}}},Ye={class:"flex flex-col mt-10 md:mt-0 md:flex-row gap-4"},dt={__name:"wtax",setup(i){const o=B(),{isEdit:s}=W(o);return o.getWithholding(),se({title:"Withholding Tax"}),(r,p)=>{const u=Re,d=De,h=Ne,m=te;return f(),$(m,{"if-access":("useCheckAccessibility"in r?r.useCheckAccessibility:t(ae))([("AccessibilityTypes"in r?r.AccessibilityTypes:t(oe)).hrms_setup_with_holding_tax])},{default:E(()=>[e("div",Ye,[l(w(u,null,null,512),[[M,!t(s)]]),l(w(d,null,null,512),[[M,t(s)]]),w(h)])]),_:1},8,["if-access"])}}};export{dt as default};
