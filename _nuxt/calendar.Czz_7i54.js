import M from"./Icon.CrHlyQOo.js";import{_ as R}from"./LayoutBoards.vue.D_rbqYxd.js";import{_ as D}from"./ModalContainer.C773N-tg.js";import{c as h,b as E}from"./CustomFetch.ggXvTdIz.js";import{F as O,i as T,a as A,b as C}from"./index.cqhIv-fy.js";import{_ as U,k as S,o as i,c as l,b as p,w as f,a as e,g as V,x as r,A as a,D as g,M as _,j as b,d as u,t as c,F as H,f as N,h as F,u as x}from"./entry.32UGFqj-.js";import{_ as I}from"./AcessContainer.Dum7aOuo.js";import{u as P}from"./vue.f36acd1f.Ds2AlAv6.js";import{u as Y,A as W}from"./Accessibilities.xGffDRXj.js";import"./index.T-zbMaZc.js";import"./loader.BQ9QddgL.js";import"./users.G4iuGzk0.js";const G={components:{FullCalendar:O},data(){return{showModal:!1,calendarApi:null,eventsList:[],selectedEventId:null,toEditEvent:{},isEdit:!1,event:{title:"",event_type:null,repetition_type:null,with_pay:!1,with_work:!1,start_date:null,end_date:null,description:"",attendance_date:null},newEvent:{title:"",eventType:"",description:""},errorMessage:"",successMessage:"",isLoading:!1}},computed:{calendarOptions(){return{plugins:[T,A,C],headerToolbar:{left:"prev,next today",center:"title"},initialView:"dayGridMonth",weekends:!0,dayGridMonth:!0,nowIndicator:!0,editable:!0,selectable:!0,events:[],eventClick:n=>{this.selectedEventId=n.event.id,this.showModal=!0},dateClick:n=>{this.event.start_date=n.dateStr,this.event.end_date=n.dateStr},select:n=>{this.event.start_date=n.startStr,this.event.end_date=n.endStr}}},selectEvent(){let n={};return this.selectedEventId&&this.eventsList.forEach(t=>{parseInt(t.id)===parseInt(this.selectedEventId)&&(t.with_work?t.with_work=!0:t.with_work=!1,t.with_pay?t.with_pay=!0:t.with_pay=!1,n=t)}),n}},watch:{successMessage(){this.successMessage&&this.$snackbar.add({type:"success",text:this.successMessage})},errorMessage(){this.errorMessage&&this.$snackbar.add({type:"error",text:this.errorMessage})}},mounted(){this.calendarApi=this.$refs.fCalendar.getApi(),this.getEventsList()},methods:{setEdit(){this.toEditEvent=JSON.parse(JSON.stringify(this.selectEvent)),this.isEdit=!0},async getEventsList(){await h("/api/events",{method:"GET",onResponse:({response:n})=>{if(n.ok)this.eventsList=n._data.data,this.loadEvents(this.eventsList);else throw this.errorMessage=n._data.message,new Error(n._data.message)}})},async createEvent(){this.isLoading=!0,this.successMessage="",this.errorMessage="",await h("/api/events",{method:"POST",body:this.event,watch:!1,onResponse:({response:n})=>{this.isLoading=!1,n.ok?(this.clearForm(),this.getEventsList(),this.successMessage=n._data.message):this.errorMessage=n._data.message}})},async editEvent(){this.isLoading=!0,this.successMessage="",this.errorMessage="",await E("/api/events/"+this.toEditEvent.id,{method:"PUT",body:this.toEditEvent,onResponse:({response:n})=>{this.isLoading=!1,n.ok?(this.successMessage=n._data.message,this.clearForm(),this.getEventsList(),this.isEdit=!1,this.showModal=!1):this.errorMessage=n._data.message}})},async deleteEvent(){this.isLoading=!0,this.successMessage="",this.errorMessage="",await E("/api/events/"+this.selectedEventId,{method:"DELETE",body:this.toEditEvent,onResponse:({response:n})=>{this.isLoading=!1,n.ok?(this.successMessage=n._data.message,this.getEventsList(),this.isEdit=!1,this.showModal=!1):this.errorMessage=n._data.message}})},removeEvents(){this.calendarApi.getEvents().forEach(n=>n.remove())},loadEvents(n){this.removeEvents(),n.forEach(t=>{this.addEvent(t)})},addEvent(n){const t={id:n.id,title:n.title,start:n.start_date,end:n.end_date};this.calendarApi.addEvent(t)},clearForm(){this.event={title:"",event_type:null,repetition_type:null,with_pay:!1,with_work:!1,start_date:null,end_date:null,description:"",attendance_date:null}},removeEvent(n){const t=this.calendarOptions.initialEvents.findIndex(v=>v.title===n.event.title);t!==-1&&this.calendarOptions.initialEvents.splice(t,1)},eventClick(n){const t=prompt("Enter a new title for the event:",n.event.title);t&&n.event.setProp("title",t)}}},q={class:"mt-10 md:mt-0 md:flex gap-2"},B=e("label",{for:"eventTitle"},"Event Title",-1),j=e("label",{for:"eventTypr"},"Event Type",-1),J=e("option",{value:"Company Event"}," Company Event ",-1),K=e("option",{value:"Special Holiday"}," Special Holiday ",-1),z=e("option",{value:"Regular Holiday"}," Regular Holiday ",-1),Q=[J,K,z],X=e("label",{for:"repetition_type"},"Repetition Type",-1),Z=e("option",{value:"One Day"}," One Day ",-1),$=e("option",{value:"Long Event"}," Long Event ",-1),ee=[Z,$],te={class:"flex flex-col rounded-lg p-4 bg-slate-50"},se={class:"flex gap-2 items-center"},oe=e("label",{for:"wPay",class:"text-sm"},"With Pay",-1),ne=e("br",null,null,-1),ie={class:"flex gap-2 items-center"},le=e("label",{for:"wWork",class:"text-sm"},"With Work",-1),de=e("small",{class:"text-red-600 text-xs"},[u(" *FOR REGULAR EMPLOYEES ONLY."),e("br"),u(' NON-REGULAR EMPLOYEES ARE DEFAULT TO "WITH WORK" ')],-1),re=e("label",{for:"startDate"},"Start Date",-1),ae=e("label",{for:"endDate"},"End Date",-1),ce=e("label",{for:"description"},"Description",-1),ue={key:0,class:"text-red-600"},pe=e("label",{for:"attendanceDateCreate"},"Attendance Date",-1),ge=e("small",{class:"text-red-600 text-xs"},"*FOR REGULAR HOLIDAY - NON-REGULAR EMPLOYEES ONLY",-1),_e=["required"],ve={class:"flex justify-end"},fe={class:"flex-1 text-white p-2 rounded bg-cyan-800 content-center"},ye={class:"p-2 bg-white border shadow-md rounded-lg w-full md:w-3/4 mb-5"},he={class:"flex flex-col gap-4 w-full"},Ee={class:"flex flex-col gap"},be=e("label",{for:"eventTitleEdit",class:"text-sm text-slate-600 px-2"}," Event Title ",-1),xe={key:0,class:"px-2 py-1 rounded-sm bg-slate-200 text-xl"},me={class:"flex gap-4"},ke={class:"flex flex-col gap-1 flex-1"},we=e("label",{for:"startDateEdit",class:"text-sm text-slate-600 px-2"}," Start Date ",-1),Le={key:0,class:"px-2 py-1 rounded-sm bg-slate-200 text-xl"},Me={class:"flex flex-col gap-1 flex-1"},Re=e("label",{for:"endDateEdit",class:"text-sm text-slate-600 px-2"}," End Date ",-1),De={key:0,class:"px-2 py-1 rounded-sm bg-slate-200 text-xl"},Oe={class:"flex gap-4"},Te={class:"flex flex-col gap-1 flex-1"},Ae=e("label",{for:"eventTypeEdit",class:"text-sm text-slate-600 px-2"}," Event Type ",-1),Ce={key:0,class:"px-2 py-1 rounded-sm bg-slate-200 text-xl"},Ue=e("option",{value:"Company Event"}," Company Event ",-1),Se=e("option",{value:"Special Holiday"}," Special Holiday ",-1),Ve=e("option",{value:"Regular Holiday"}," Regular Holiday ",-1),He=[Ue,Se,Ve],Ne={class:"flex flex-col gap-1 flex-1"},Fe=e("label",{for:"repititionTypeEdit",class:"text-sm text-slate-600 px-2"}," Repition Type ",-1),Ie={key:0,class:"px-2 py-1 rounded-sm bg-slate-200 text-xl"},Pe=e("option",{value:"One Day"}," One Day ",-1),Ye=e("option",{value:"Long Event"}," Long Event ",-1),We=[Pe,Ye],Ge={class:"flex gap-4"},qe={class:"flex flex-col gap-1 flex-1"},Be=e("label",{for:"withWorkEdit",class:"text-sm text-slate-600 px-2"}," With Work ",-1),je={key:0,class:"px-2 py-1 rounded-sm bg-slate-200 text-xl"},Je=e("small",{class:"text-red-600 text-xs"},[u(" *FOR REGULAR EMPLOYEES ONLY."),e("br"),u(' NON-REGULAR EMPLOYEES ARE DEFAULT TO "WITH WORK" ')],-1),Ke={class:"flex flex-col gap-1 flex-1"},ze=e("label",{for:"withPayEdit",class:"text-sm text-slate-600 px-2"}," WITH PAY ",-1),Qe={key:0,class:"px-2 py-1 rounded-sm bg-slate-200 text-xl"},Xe={class:"flex gap-4"},Ze={class:"flex flex-col gap-1 flex-1"},$e=e("label",{for:"descriptionEdit",class:"text-sm text-slate-600 px-2"}," Description ",-1),et={key:0,class:"px-2 py-1 rounded-sm bg-slate-200 text-xl"},tt={class:"flex flex-col gap-1 flex-1"},st={for:"attendanceDateEdit",class:"text-sm text-slate-600 px-2"},ot={key:0,class:"text-red-600"},nt=e("small",{class:"text-red-600 text-xs"},"*FOR REGULAR HOLIDAY - NON-REGULAR EMPLOYEES ONLY",-1),it={key:0,class:"px-2 py-1 rounded-sm bg-slate-200 text-xl"},lt={key:0,class:"flex justify-end gap-2 pt-8"},dt={key:1,class:"flex justify-end gap-2 pt-8"};function rt(n,t,v,y,s,d){const m=M,k=R,w=S("FullCalendar"),L=D;return i(),l("div",q,[p(k,{title:"Add New Event",loading:s.isLoading,class:"w-full md:w-1/3"},{default:f(()=>[e("form",{action:"",class:"space-y-2 mt-4 p-2",onSubmit:t[9]||(t[9]=V((...o)=>d.createEvent&&d.createEvent(...o),["prevent"]))},[e("div",null,[B,r(e("input",{id:"eventTitle","onUpdate:modelValue":t[0]||(t[0]=o=>s.event.title=o),type:"text",class:"w-full rounded",required:""},null,512),[[a,s.event.title]])]),e("div",null,[j,r(e("select",{id:"eventTypr","onUpdate:modelValue":t[1]||(t[1]=o=>s.event.event_type=o),name:"",class:"w-full rounded",required:""},Q,512),[[g,s.event.event_type]])]),e("div",null,[X,r(e("select",{id:"repetition_type","onUpdate:modelValue":t[2]||(t[2]=o=>s.event.repetition_type=o),name:"",class:"w-full rounded",required:""},ee,512),[[g,s.event.repetition_type]])]),e("div",te,[e("div",se,[r(e("input",{id:"wPay","onUpdate:modelValue":t[3]||(t[3]=o=>s.event.with_pay=o),type:"checkbox",name:""},null,512),[[_,s.event.with_pay]]),oe]),ne,e("div",ie,[r(e("input",{id:"wWork","onUpdate:modelValue":t[4]||(t[4]=o=>s.event.with_work=o),type:"checkbox",name:""},null,512),[[_,s.event.with_work]]),le]),de]),e("div",null,[re,r(e("input",{id:"startDate","onUpdate:modelValue":t[5]||(t[5]=o=>s.event.start_date=o),type:"date",class:"w-full rounded",disabled:"true"},null,512),[[a,s.event.start_date]])]),e("div",null,[ae,r(e("input",{id:"endDate","onUpdate:modelValue":t[6]||(t[6]=o=>s.event.end_date=o),type:"date",class:"w-full rounded",disabled:""},null,512),[[a,s.event.end_date]])]),e("div",null,[ce,r(e("textarea",{id:"description","onUpdate:modelValue":t[7]||(t[7]=o=>s.event.description=o),type:"text",class:"w-full rounded",placeholder:"Event Description"},null,512),[[a,s.event.description]])]),e("div",null,[s.event.event_type==="Regular Holiday"?(i(),l("span",ue,"*")):b("",!0),pe,ge,r(e("input",{id:"attendanceDateCreate","onUpdate:modelValue":t[8]||(t[8]=o=>s.event.attendance_date=o),type:"date",class:"w-full rounded",required:s.event.event_type==="Regular Holiday"},null,8,_e),[[a,s.event.attendance_date]])]),e("div",ve,[e("button",fe,[p(m,{name:"material-symbols-light:event",class:"mr-2"}),u("Save Event ")])])],32)]),_:1},8,["loading"]),e("div",ye,[p(w,{ref:"fCalendar",options:d.calendarOptions,class:"mt-10"},null,8,["options"])]),p(L,{title:"Event Details",loading:s.isLoading,local:!0,show:s.showModal,onHide:t[23]||(t[23]=o=>s.showModal=!1)},{default:f(()=>[e("div",he,[e("div",Ee,[be,s.isEdit?r((i(),l("input",{key:1,id:"eventTitleEdit","onUpdate:modelValue":t[10]||(t[10]=o=>s.toEditEvent.title=o),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""},null,512)),[[a,s.toEditEvent.title]]):(i(),l("span",xe,c(d.selectEvent.title),1))]),e("div",me,[e("div",ke,[we,s.isEdit?r((i(),l("input",{key:1,id:"startDateEdit","onUpdate:modelValue":t[11]||(t[11]=o=>s.toEditEvent.start_date=o),type:"date",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""},null,512)),[[a,s.toEditEvent.start_date]]):(i(),l("span",Le,c(d.selectEvent.start_date),1))]),e("div",Me,[Re,s.isEdit?r((i(),l("input",{key:1,id:"endDateEdit","onUpdate:modelValue":t[12]||(t[12]=o=>s.toEditEvent.end_date=o),type:"date",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""},null,512)),[[a,s.toEditEvent.end_date]]):(i(),l("span",De,c(d.selectEvent.end_date),1))])]),e("div",Oe,[e("div",Te,[Ae,s.isEdit?r((i(),l("select",{key:1,id:"eventTypeEdit","onUpdate:modelValue":t[13]||(t[13]=o=>s.toEditEvent.event_type=o),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},He,512)),[[g,s.toEditEvent.event_type]]):(i(),l("span",Ce,c(d.selectEvent.event_type),1))]),e("div",Ne,[Fe,s.isEdit?r((i(),l("select",{key:1,id:"repititionTypeEdit","onUpdate:modelValue":t[14]||(t[14]=o=>s.toEditEvent.repetition_type=o),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},We,512)),[[g,s.toEditEvent.repetition_type]]):(i(),l("span",Ie,c(d.selectEvent.repetition_type),1))])]),e("div",Ge,[e("div",qe,[Be,s.isEdit?(i(),l(H,{key:1},[r(e("input",{id:"withWorkEdit","onUpdate:modelValue":t[15]||(t[15]=o=>s.toEditEvent.with_work=o),type:"checkbox",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-sm focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[_,s.toEditEvent.with_work]]),Je],64)):(i(),l("span",je,c(d.selectEvent.with_work?"Yes":"No"),1))]),e("div",Ke,[ze,s.isEdit?r((i(),l("input",{key:1,id:"withPayEdit","onUpdate:modelValue":t[16]||(t[16]=o=>s.toEditEvent.with_pay=o),type:"checkbox",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-sm focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512)),[[_,s.toEditEvent.with_pay]]):(i(),l("span",Qe,c(d.selectEvent.with_pay?"Yes":"No"),1))])]),e("div",Xe,[e("div",Ze,[$e,s.isEdit?r((i(),l("textarea",{key:1,id:"descriptionEdit","onUpdate:modelValue":t[17]||(t[17]=o=>s.toEditEvent.description=o),type:"text",class:"w-full rounded",placeholder:"Event Description"},null,512)),[[a,s.toEditEvent.description]]):(i(),l("span",et,c(d.selectEvent.description),1))]),e("div",tt,[e("label",st,[s.toEditEvent.event_type==="Regular Holiday"?(i(),l("span",ot,"*")):b("",!0),u(" Attendance Date "),nt]),s.isEdit?r((i(),l("input",{key:1,id:"attendanceDateEdit","onUpdate:modelValue":t[18]||(t[18]=o=>s.toEditEvent.attendance_date=o),type:"date",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""},null,512)),[[a,s.toEditEvent.attendance_date]]):(i(),l("span",it,c(d.selectEvent.attendance_date??"-"),1))])]),s.isEdit?(i(),l("div",dt,[e("button",{type:"submit",class:"text-white bg-green-500 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800",onClick:t[21]||(t[21]=(...o)=>d.editEvent&&d.editEvent(...o))}," Save "),e("button",{type:"submit",class:"text-white bg-red-500 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800",onClick:t[22]||(t[22]=o=>s.isEdit=!1)}," Cancel ")])):(i(),l("div",lt,[e("button",{type:"submit",class:"text-white bg-green-500 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800",onClick:t[19]||(t[19]=(...o)=>d.setEdit&&d.setEdit(...o))}," Edit "),e("button",{type:"submit",class:"text-white bg-red-500 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800",onClick:t[20]||(t[20]=(...o)=>d.deleteEvent&&d.deleteEvent(...o))}," Delete ")]))])]),_:1},8,["loading","show"])])}const at=U(G,[["render",rt]]),ct={class:"w-full"},kt=N({__name:"calendar",setup(n){return P({title:"Calendar",meta:[{name:"description",content:""}]}),(t,v)=>{const y=at,s=I;return i(),F(s,{"if-access":("useCheckAccessibility"in t?t.useCheckAccessibility:x(Y))([("AccessibilityTypes"in t?t.AccessibilityTypes:x(W)).hrms_event_calendar])},{default:f(()=>[e("div",ct,[p(y)])]),_:1},8,["if-access"])}}});export{kt as default};
