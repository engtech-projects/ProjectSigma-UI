import{_ as j}from"./Journal-accounts.vue.BTyziT4t.js";import{_ as B}from"./LayoutBoards.vue.1keADq5t.js";import{l as Z,_ as U,s as C,B as F,r as M,o as g,h as k,w as $,a as s,g as G,x as p,u as t,A as L,b as x,v as O,c as S,F as z,i as J,t as b,D as I,G as N,y as A,p as q,e as H,C as ee,j as te}from"./entry.R6V7NTxy.js";import{u as D}from"./Utilities.Cbr1Z9cn.js";import{u as T}from"./CustomFetch.BRBLzGci.js";import{_ as se}from"./editBoards.vue.DJ7sTR7u.js";import{_ as ae}from"./PsTextInput.vue.DFQbUHfC.js";import{_ as oe}from"./PsTable.CTJad9K5.js";import{_ as ne}from"./CustomPagination.CR9ildFS.js";import{_ as re}from"./AcessContainer.DJcSsti6.js";import{u as ie}from"./vue.f36acd1f.Dv_A-myg.js";import{u as ce,A as le}from"./Accessibilities.uaboihcy.js";import{u as de}from"./account.BEeYOjpy.js";import"./PsSelectSearch.vue.CrY1IpH8.js";import"./Icon.DcF_NU9d.js";import"./index.T-zbMaZc.js";import"./enum.Bd1Z-unS.js";import"./loader.C2wIXBoB.js";import"./id.Dwf9xs1O.js";import"./client-only.QuN6N-R_.js";import"./nuxt-link.drPfi767.js";import"./users.D5_vMoUK.js";const P=Z("termsStore",{state:()=>({term:{id:null,name:null,account_id:null,debit_credit:null,location:null,description:null},balanceType:[],list:[],pagination:{},getParams:{},errorMessage:"",successMessage:"",isLoading:!1,isEdit:!1}),actions:{async getTerms(){this.isLoading=!0;const{data:o,error:e}=await T("/api/terms",{method:"GET",params:this.getParams,onResponse:({response:a})=>{this.isLoading=!1,this.list=a._data.data.data,this.pagination={first_page:a._data.data.links.first,pages:a._data.data.meta.links,last_page:a._data.data.links.last}}});if(o)return o;if(e)return e},async showTerm(o){const{data:e,error:a}=await T("/api/account-group/"+o,{method:"GET",params:this.getParams,onResponse:({response:l})=>{this.term=l._data}});if(e)return e;if(a)return a},async createTerm(){this.successMessage="",this.errorMessage="",await T("/api/terms",{method:"POST",body:this.term,watch:!1,onResponse:({response:o})=>{o.ok?(this.getTerms(),this.successMessage="Term successfully created."):this.errorMessage=o._data.message}})},async editTerm(){this.successMessage="",this.errorMessage="";const{data:o,error:e}=await T("/api/terms/"+this.term.id,{method:"PATCH",body:this.term,watch:!1});if(o.value)return this.getTerms(),this.successMessage="Term successfully updated",o;if(e.value)return this.errorMessage=e.value.data.message,e},async deleteTerm(o){this.isLoading=!0;const{data:e,error:a}=await T("/api/terms/"+o,{method:"DELETE",body:this.term,watch:!1,onResponse:({response:l})=>{this.isLoading=!1,this.getTerms(),l._data.success?this.successMessage=l._data.message:this.errorMessage=l._data.message}});if(e.value)return this.getTerms(),this.successMessage=e.value.message,e;if(a.value)return this.errorMessage="Something went wrong",a},async getBalanceType(){this.isLoading=!0;const{data:o,error:e}=await T("/api/balance-type",{method:"GET",params:this.getParams,onResponse:({response:a})=>{this.isLoading=!1,this.balanceType=a._data.balance_type,this.pagination={first_page:a._data.links.first,pages:a._data.meta.links,last_page:a._data.links.last}}});if(o)return o;if(e)return e},clearMessages(){this.errorMessage="",this.successMessage=""},reset(){this.term={id:null,name:null,debit_credit:null,account_id:null,description:null}}}}),h=o=>(q("data-v-3de700aa"),o=o(),H(),o),ue={class:"text-gray-500"},me=["onSubmit"],pe={class:"flex flex-col gap-2"},_e=h(()=>s("label",{for:"term_name",class:"text-xs italic"},"Term Name",-1)),fe=h(()=>s("label",{for:"term_name",class:"text-xs italic"},"Account",-1)),ge=h(()=>s("label",{for:"term_name",class:"text-xs italic"},"Debit/Credit",-1)),he=["value"],ye=h(()=>s("label",{for:"term_name",class:"text-xs italic"},"Location",-1)),xe=h(()=>s("option",{value:""}," - Select - ",-1)),be=h(()=>s("option",{value:"OFFICE"}," DEPARTMENT / OFFICE ",-1)),ve=h(()=>s("option",{value:"FIELD"}," PROJECTS / FIELD ",-1)),Te=[xe,be,ve],we=h(()=>s("label",{for:"description",class:"text-xs italic"},"Description",-1)),Me=h(()=>s("div",{class:"flex justify-end"},[s("button",{type:"submit",class:"flex-1 text-white p-2 rounded bg-teal-600 content-center mt-5"}," Add Term ")],-1)),Se={__name:"TermsCreate",setup(o){const e=P(),{errorMessage:a,successMessage:l}=C(e),i=F(),f=M(!1),u=M({}),y=async()=>{try{f.value=!0,e.term.name=v(e.term.name),await e.createTerm(),e.errorMessage!==""?i.add({type:"error",text:e.errorMessage}):(e.reset(),i.add({type:"success",text:e.successMessage}))}catch{a.value=a,i.add({type:"error",text:e.errorMessage})}finally{f.value=!1,e.clearMessages(),u.value={}}},v=_=>_.toUpperCase().replace(/\s+/g,"_");return(_,n)=>{const d=j,w=B;return g(),k(w,{title:"Accounting Particular Terms",loading:t(f)},{default:$(()=>[s("div",ue,[s("form",{onSubmit:G(y,["prevent"])},[s("div",pe,[s("div",null,[_e,p(s("input",{id:"termName","onUpdate:modelValue":n[0]||(n[0]=r=>t(e).term.name=r),type:"text",class:"w-full rounded-lg",required:""},null,512),[[L,t(e).term.name]])]),s("div",null,[fe,x(d,{"journal-account-info":t(u),"onUpdate:journalAccountInfo":n[1]||(n[1]=r=>O(u)?u.value=r:null),"account-id":t(e).term.account_id,"onUpdate:accountId":n[2]||(n[2]=r=>t(e).term.account_id=r),class:"w-full min-w-[300px]"},null,8,["journal-account-info","account-id"])]),s("div",null,[ge,p(s("select",{"onUpdate:modelValue":n[3]||(n[3]=r=>t(e).term.debit_credit=r),class:"w-full rounded-lg"},[(g(!0),S(z,null,J(t(e).balanceType,r=>(g(),S("option",{key:r,value:r},b(("upperFirst"in _?_.upperFirst:t(D))(r)),9,he))),128))],512),[[I,t(e).term.debit_credit]])]),s("div",null,[ye,p(s("select",{"onUpdate:modelValue":n[4]||(n[4]=r=>t(e).term.location=r),class:"w-full rounded-lg"},Te,512),[[I,t(e).term.location]])]),s("div",null,[we,p(s("textarea",{id:"description","onUpdate:modelValue":n[5]||(n[5]=r=>t(e).term.description=r),type:"text",class:"w-full rounded-lg resize-none h-18"},null,512),[[L,t(e).term.description]])])]),Me],40,me),s("p",{hidden:"",class:N(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!t(a)}])},b(t(a)),3),p(s("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic transition-opacity delay-1000"},b(t(l)),513),[[A,t(l)]])])]),_:1},8,["loading"])}}},Ae=U(Se,[["__scopeId","data-v-3de700aa"]]),E=o=>(q("data-v-9fd783cf"),o=o(),H(),o),Ee={class:"text-gray-500"},Le=["onSubmit"],Ce={class:"flex flex-col gap-2"},ke=E(()=>s("label",{for:"term_name",class:"text-xs italic"},"Term Name",-1)),$e=E(()=>s("label",{for:"term_name",class:"text-xs italic"},"Account",-1)),Pe=E(()=>s("label",{for:"term_name",class:"text-xs italic"},"Debit/Credit",-1)),Ie=["value"],Ue=E(()=>s("label",{for:"description",class:"text-xs italic"},"Description",-1)),Fe=E(()=>s("button",{type:"submit",class:"flex-1 text-white p-2 rounded bg-teal-600 content-center mt-5 hover:bg-teal-500"}," Save ",-1)),Ne={__name:"TermsEdit",setup(o){const e=P(),{errorMessage:a,successMessage:l}=C(e),i=M({}),f=F(),u=M(!1),y=async()=>{try{u.value=!0,e.term.name=v(e.term.name),await e.editTerm(),e.errorMessage!==""?f.add({type:"error",text:e.errorMessage}):(e.reset(),f.add({type:"success",text:e.successMessage}))}catch{a.value=a,f.add({type:"error",text:e.errorMessage})}finally{u.value=!1,e.clearMessages(),i.value={}}},v=n=>n.toUpperCase().replace(/\s+/g,"_"),_=()=>{e.isEdit=!1,e.reset()};return(n,d)=>{const w=j,r=se;return g(),k(r,{title:"Edit Term",loading:t(u)},{default:$(()=>[s("div",Ee,[s("form",{onSubmit:G(y,["prevent"])},[s("div",Ce,[s("div",null,[ke,p(s("input",{id:"termName","onUpdate:modelValue":d[0]||(d[0]=c=>t(e).term.name=c),type:"text",class:"w-full rounded-lg",required:""},null,512),[[L,t(e).term.name]])]),s("div",null,[$e,x(w,{"journal-account-info":t(i),"onUpdate:journalAccountInfo":d[1]||(d[1]=c=>O(i)?i.value=c:null),"account-id":t(e).term.account_id,"onUpdate:accountId":d[2]||(d[2]=c=>t(e).term.account_id=c),class:"w-full min-w-[300px]"},null,8,["journal-account-info","account-id"])]),s("div",null,[Pe,p(s("select",{"onUpdate:modelValue":d[3]||(d[3]=c=>t(e).term.debit_credit=c),class:"w-full rounded-lg"},[(g(!0),S(z,null,J(t(e).balanceType,c=>(g(),S("option",{key:c,value:c},b(("upperFirst"in n?n.upperFirst:t(D))(c)),9,Ie))),128))],512),[[I,t(e).term.debit_credit]])]),s("div",null,[Ue,p(s("textarea",{id:"description","onUpdate:modelValue":d[4]||(d[4]=c=>t(e).term.description=c),type:"text",class:"w-full rounded-lg resize-none h-18"},null,512),[[L,t(e).term.description]])])]),s("div",{class:"flex justify-end gap-2"},[Fe,s("button",{type:"button",class:"flex-1 text-white p-2 rounded bg-gray-700 content-center mt-5 hover:bg-gray-500",onClick:_}," Cancel ")])],40,Le),s("p",{hidden:"",class:N(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!t(a)}])},b(t(a)),3),p(s("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic transition-opacity delay-1000"},b(t(l)),513),[[A,t(l)]])])]),_:1},8,["loading"])}}},De=U(Ne,[["__scopeId","data-v-9fd783cf"]]),Ve={class:"w-1/2 flex px-4"},Re={class:"pb-2 text-gray-500"},je={key:0,class:"flex justify-center mx-auto"},Be={__name:"TermsList",setup(o){const e=P(),{list:a,isEdit:l,getParams:i,pagination:f,errorMessage:u,successMessage:y}=C(e),v=m=>{l.value=!0,e.term=m},_=async m=>{try{V.value=!0,await e.deleteTerm(m.id),c.add({type:"success",text:e.successMessage})}finally{V.value=!1}},n=m=>{i.value.page=m.page??"",e.getTerms()},d=[{name:"Name",id:"name",style:"text-left"},{name:"Account",id:"account_name",style:"text-left"},{name:"Location",id:"location",style:"text-left"},{name:"Entry Type",id:"debit_credit",style:"text-left"}],w={edit:!0,delete:!0},r=ee(()=>a.value.map(m=>({...m,debit_credit:m.debit_credit?D(m.debit_credit):null,account_name:m.account?m.account.account_number+" - "+m.account.account_name:null}))),c=F(),V=M(!1);return(m,R)=>{const K=ae,Q=oe,W=ne,X=B;return g(),k(X,{title:"Terms List",class:"w-full",loading:t(e).isLoading},{default:$(()=>[s("div",Ve,[x(K,{modelValue:t(e).getParams.key,"onUpdate:modelValue":R[0]||(R[0]=Y=>t(e).getParams.key=Y),title:"Search Terms Name",class:"w-full"},null,8,["modelValue"])]),s("div",Re,[x(Q,{"header-columns":d,datas:t(r),actions:w,onEditRow:v,onDeleteRow:_},null,8,["datas"])]),t(a).length?(g(),S("div",je,[x(W,{links:t(f),onChangeParams:n},null,8,["links"])])):te("",!0),s("p",{hidden:"",class:N(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!t(u)}])},b(t(u)),3),p(s("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic"},b(t(y)),513),[[A,t(y)]])]),_:1},8,["loading"])}}},Ge={class:"flex flex-col md:flex-row gap-4"},Oe={__name:"index",setup(o){const e=P(),{isEdit:a}=C(e);return e.getTerms(),e.getBalanceType(),de().getAccounts(),ie({title:"Terms"}),(i,f)=>{const u=Ae,y=De,v=Be,_=re;return g(),k(_,{"if-access":("useCheckAccessibility"in i?i.useCheckAccessibility:t(ce))([("AccessibilityTypes"in i?i.AccessibilityTypes:t(le)).ACCOUNTING_SETUP_TERMS])},{default:$(()=>[s("div",Ge,[p(x(u,{class:"flex-1"},null,512),[[A,!t(a)]]),p(x(y,{class:"flex-1"},null,512),[[A,t(a)]]),x(v,{class:"flex-2"})])]),_:1},8,["if-access"])}}},mt=U(Oe,[["__scopeId","data-v-26dacbae"]]);export{mt as default};
