import{_ as P}from"./PsEmailInput.Dl54OfUC.js";import{_ as D}from"./PsTextInput.vue.C7eOWbog.js";import{_ as T}from"./PsPasswordInput.Buifil6y.js";import{f as F,s as w,r as S,B as M,o as y,c as _,a as t,g as x,b as g,u as o,v as k,L as q,n as J,q as O,C as E,x as h,M as z,t as C,F as A,y as $,d as W,G,i as R,h as v,l as K,w as Q,P as L,j as I}from"./entry.32UGFqj-.js";import{_ as H}from"./evenpar.CfYVxA5n.js";import{u as V}from"./employeeSearch.AgeAeP2j.js";import{u as U}from"./users.G4iuGzk0.js";import{_ as j}from"./PsSelectSearch.vue.CT-F0Leg.js";import X from"./Icon.CrHlyQOo.js";import{b as Y}from"./CustomFetch.ggXvTdIz.js";import{_ as Z}from"./AcessContainer.Dum7aOuo.js";import{u as ee}from"./vue.f36acd1f.Ds2AlAv6.js";import{u as te,A as se}from"./Accessibilities.xGffDRXj.js";import"./id.WqrvI90c.js";import"./client-only.CuVny2dr.js";import"./index.T-zbMaZc.js";const ae={class:"bg-gray-50 dark:bg-gray-900 mb-4"},oe={class:"flex flex-col items-center justify-center mx-auto lg:py-0"},re={class:"w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700 border-t-4 border-teal-400"},le={class:"p-6 space-y-4 md:space-y-6 sm:p-8"},ie=t("img",{class:"w-20 h-20 mx-auto rounded-xl",src:H,alt:"logo"},null,-1),ne=t("div",{class:"border-b w-full h-[14px] text-center p-3 mt-2 mb-7"},[t("span",{class:"text-md bg-white text-black px-3 italic"}," User Account Setup ")],-1),ce=["onSubmit"],de=t("button",{type:"submit",class:"w-full text-white bg-cyan-600 hover:bg-secondary-base focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"}," Register ",-1),ue=F({__name:"CreateUser",setup(u){const m=V(),l=U(),{createData:s}=w(l),{employeesWithoutAccount:c}=w(m),i=S({}),n=M(),r=async()=>{s.value.params.employee_id=i.value.id;try{await l.createEmployeeAccount(),n.add({type:"success",text:s.value.successMessage})}catch(a){n.add({type:"error",text:a||"something went wrong."})}finally{l.$reset(),i.value={}}};return(a,e)=>{const p=P,f=D,b=T;return y(),_("section",ae,[t("div",oe,[t("div",re,[t("div",le,[ie,ne,t("form",{class:"space-y-4 md:space-y-6",action:"#",onSubmit:x(r,["prevent"])},[g(j,{result:o(i),"onUpdate:result":e[0]||(e[0]=d=>k(i)?i.value=d:null),"search-input":o(c).params.key,"onUpdate:searchInput":e[1]||(e[1]=d=>o(c).params.key=d),"search-list":o(c).list,loading:o(c).isLoading,title:"fullname_last"},null,8,["result","search-input","search-list","loading"]),g(p,{modelValue:o(s).params.email,"onUpdate:modelValue":e[2]||(e[2]=d=>o(s).params.email=d),title:"Email",name:"email",placeholder:"JohnDoe@gmail.com"},null,8,["modelValue"]),g(f,{modelValue:o(s).params.name,"onUpdate:modelValue":e[3]||(e[3]=d=>o(s).params.name=d),title:"Username",name:"username",placeholder:"JohnDoe"},null,8,["modelValue"]),g(b,{modelValue:o(s).params.password,"onUpdate:modelValue":e[4]||(e[4]=d=>o(s).params.password=d),title:"Password",name:"password",placeholder:"••••••••"},null,8,["modelValue"]),de],40,ce)])])])])}}}),me={class:"bg-gray-50 dark:bg-gray-900 mb-4"},pe={class:"flex flex-col items-center justify-center mx-auto lg:py-0"},fe={class:"w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700 border-t-4 border-teal-400"},ye={class:"p-6 space-y-4 md:space-y-6 sm:p-8"},be=t("img",{class:"w-20 h-20 mx-auto rounded-xl",src:H,alt:"logo"},null,-1),ge=t("div",{class:"border-b w-full h-[14px] text-center p-3 mt-2 mb-7"},[t("span",{class:"text-md bg-white text-black px-3 italic"}," User Account Update ")],-1),_e=["onSubmit"],he=t("button",{type:"submit",class:"w-full text-white bg-cyan-600 hover:bg-secondary-base focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"}," Update ",-1),xe=F({__name:"EditUser",setup(u){const m=V(),l=U(),{editData:s}=w(l),{employeesWithAccount:c}=w(m),i=S({}),n=M();q(i,()=>{i.value.id&&l.getEmployeeAccount(i.value.id)});const r=async()=>{s.value.params.employee_id=i.value.id;try{await l.editEmployeeAccount(i.value.id),n.add({type:"success",text:s.value.successMessage})}catch(a){n.add({type:"error",text:a||"something went wrong."})}finally{l.$reset(),i.value={}}};return(a,e)=>{const p=P,f=D,b=T;return y(),_("section",me,[t("div",pe,[t("div",fe,[t("div",ye,[be,ge,t("form",{class:"space-y-4 md:space-y-6",action:"#",onSubmit:x(r,["prevent"])},[g(j,{result:o(i),"onUpdate:result":e[0]||(e[0]=d=>k(i)?i.value=d:null),"search-input":o(c).params.key,"onUpdate:searchInput":e[1]||(e[1]=d=>o(c).params.key=d),"search-list":o(c).list,loading:o(c).isLoading,title:"fullname_last"},null,8,["result","search-input","search-list","loading"]),g(p,{modelValue:o(s).params.email,"onUpdate:modelValue":e[2]||(e[2]=d=>o(s).params.email=d),title:"Email",name:"email",placeholder:"JohnDoe@gmail.com"},null,8,["modelValue"]),g(f,{modelValue:o(s).params.name,"onUpdate:modelValue":e[3]||(e[3]=d=>o(s).params.name=d),title:"Username",name:"username",placeholder:"JohnDoe"},null,8,["modelValue"]),g(b,{modelValue:o(s).params.password,"onUpdate:modelValue":e[4]||(e[4]=d=>o(s).params.password=d),title:"Password",name:"password",placeholder:"••••••••",required:!1},null,8,["modelValue"]),he],40,_e)])])])])}}}),ve={class:"bg-gray-50 dark:bg-gray-900"},we={key:0,class:"flex items-center p-1"},ke={class:"grid grid-cols-1 space-y-1 rounded hover:bg-gray-100 dark:hover:bg-gray-600"},Ue={class:"relative inline-flex items-center w-full cursor-pointer"},$e=["value"],Ae=t("div",{class:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-teal-300 dark:peer-focus:ring-teal-800 rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full rtl:peer-checked:after:translate-x-[-100%] peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-500 peer-checked:bg-teal-600"},null,-1),Se={class:"items-center text-sm font-medium text-gray-900 dark:text-gray-300 italic"},Ve={class:"pl-4"},B={__name:"SelectorCheckbox",props:J({accessibilities:{type:null,required:!0},title:{type:String,default:""},isFirstLevel:{type:Boolean,default:!1}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(u){const m=u,l=O(u,"modelValue"),s=E(()=>{const r=[];function a(e){const p=Object.keys(e);p.includes("accessibilities_name")?r.push(e):p.forEach(f=>{a(e[f])})}return a(m.accessibilities),r}),c=()=>{const r=new Set([...l.value,...s.value.map(a=>a.id)]);l.value=[...r]},i=()=>{const r=new Set(l.value),a=new Set(s.value.map(p=>p.id)),e=r.difference(a);l.value=[...e]},n=E(()=>{const r=new Set(l.value),a=new Set(s.value.map(p=>p.id)),e=r.intersection(a);return r.isSupersetOf(a)&&e.size>0?1:e.isSubsetOf(a)&&e.size>0?0:-1});return(r,a)=>{const e=X,p=B;return y(),_("section",ve,[u.accessibilities.accessibilities_name?(y(),_("div",we,[t("div",ke,[t("label",Ue,[h(t("input",{"onUpdate:modelValue":a[0]||(a[0]=f=>l.value=f),type:"checkbox",value:u.accessibilities.id,class:"sr-only peer"},null,8,$e),[[z,l.value]]),Ae])]),t("span",Se,C(u.title.toUpperCase()),1)])):(y(),_(A,{key:1},[t("label",{for:"default-checkbox",class:G(["p-1 font-medium",u.isFirstLevel?"text-md text-green-400 dark:text-green-300":"text-sm"])},[h(t("button",{class:"my-auto",onClick:a[1]||(a[1]=x(f=>c(),["prevent"]))},[g(e,{name:"ic:baseline-check-box-outline-blank",class:"text-xl"})],512),[[$,o(n)===-1]]),h(t("button",{class:"my-auto",onClick:a[2]||(a[2]=x(f=>c(),["prevent"]))},[g(e,{name:"ic:baseline-indeterminate-check-box",class:"text-xl"})],512),[[$,o(n)===0]]),h(t("button",{class:"my-auto",onClick:a[3]||(a[3]=x(f=>i(),["prevent"]))},[g(e,{name:"ic:baseline-check-box",class:"text-xl"})],512),[[$,o(n)===1]]),W(" "+C(u.title.toUpperCase()),1)],2),t("div",Ve,[(y(!0),_(A,null,R(u.accessibilities,(f,b)=>(y(),v(p,{key:"MainAccessibility"+b,modelValue:l.value,"onUpdate:modelValue":a[4]||(a[4]=d=>l.value=d),accessibilities:f,"is-first-level":!1,title:b},null,8,["modelValue","accessibilities","title"]))),128))])],64))])}}},N=K("accessibilitiesStore",{state:()=>({access_list:[]}),getters:{formattedAccessibilities(u){const m={};return u.access_list.length<=0||u.access_list.forEach(function(l){const s=l.accessibilities_name.split(":"),c=s[0],i=s[1].split("_");m[c]||(m[c]={});let n=m[c];i.forEach(function(r,a){n[r]||(n[r]={}),i.length-1===a&&(n[r]={...l,...n[r]}),n=n[r]})}),m}},actions:{async getListIfEmpty(){if(this.access_list.length<=0)return await this.getUserEmployees()},async getUserEmployees(){await Y("/api/accessibilities",{method:"GET",onResponse:({response:u})=>{if(u.ok)return this.access_list=u._data.data,u._data;throw new Error(u._data.message)}})}}}),Ee={class:"bg-gray-50 dark:bg-gray-900"},Ce={class:"flex flex-col items-center justify-center mx-auto lg:py-0"},Le={class:"w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700 border-t-4 border-teal-400"},Ie={class:"p-6 space-y-4 md:space-y-6 sm:p-8"},Pe=t("div",{class:"border-b w-full h-[14px] text-center mb-2"},[t("span",{class:"text-md bg-white text-black px-3 italic"}," User Accessibility ")],-1),De={class:"grid justify-between overflow-auto h-96"},Te={__name:"UserAccessibilities",setup(u){const m=N(),l=U(),{editData:s}=w(l);return(c,i)=>{const n=B;return y(),_("section",Ee,[t("div",Ce,[t("div",Le,[t("div",Ie,[Pe,t("div",De,[(y(!0),_(A,null,R(o(m).formattedAccessibilities,(r,a)=>(y(),v(n,{key:"MainAccessibility"+a,modelValue:o(s).params.accessibilities,"onUpdate:modelValue":i[0]||(i[0]=e=>o(s).params.accessibilities=e),accessibilities:r,"is-first-level":!0,title:a},null,8,["modelValue","accessibilities","title"]))),128))])])])])])}}},Fe={class:"w-full"},Me={class:"md:flex gap-2 space-x-2 p-2"},Re=t("label",{for:"newhire",class:"mr-4 text-xs text-gray-900 dark:text-gray-300"},"CREATE USER",-1),He=t("label",{for:"termination",class:"mr-4 text-xs text-gray-900 dark:text-gray-300"},"EDIT USER",-1),je={class:"md:grid grid-cols-2 gap-2"},at={__name:"useraccounts",setup(u){const m=N(),l=U(),s=S("create");m.getListIfEmpty();const c=V();c.searchEmployeesNoAccount();const i=()=>{s.value==="create"&&(l.isEdit=!1,c.searchEmployeesNoAccount()),s.value==="update"&&(l.isEdit=!0,c.searchEmployeesWithAccount())};return ee({title:"User Accounts",meta:[{name:"description",content:"User Accounts Creation Page"}]}),(n,r)=>{const a=ue,e=xe,p=Te,f=Z;return y(),v(f,{"if-access":("useCheckAccessibility"in n?n.useCheckAccessibility:o(te))([("AccessibilityTypes"in n?n.AccessibilityTypes:o(se)).hrms_setup_user_account])},{default:Q(()=>[t("div",Fe,[t("div",Me,[h(t("input",{id:"newhire","onUpdate:modelValue":r[0]||(r[0]=b=>k(s)?s.value=b:null),class:"",type:"radio",value:"create",onChange:r[1]||(r[1]=b=>i())},null,544),[[L,o(s)]]),Re,h(t("input",{id:"termination","onUpdate:modelValue":r[2]||(r[2]=b=>k(s)?s.value=b:null),class:"",type:"radio",value:"update",onChange:r[3]||(r[3]=b=>i())},null,544),[[L,o(s)]]),He]),t("div",je,[o(s)==="create"?(y(),v(a,{key:0,class:"w-full"})):I("",!0),o(s)==="update"?(y(),v(e,{key:1,class:"w-full"})):I("",!0),g(p,{class:"w-full"})])])]),_:1},8,["if-access"])}}};export{at as default};
