import{u as e}from"./CustomFetch.ggXvTdIz.js";import{l as i}from"./entry.32UGFqj-.js";const l=i("useWithholdingTaxStore",{state:()=>({withholdingTax:{id:null,account:{},wtax_name:null,account_id:null,vat_type:null,wtax_percentage:null},withHoldingTaxSelectList:[],list:[],chart:[],pagination:{},getParams:{},errorMessage:"",successMessage:"",isLoading:{list:!1,chart:!1,show:!1,edit:!1,delete:!1},isEdit:!1}),actions:{async getAllWithholdingTaxes(){const{data:a,error:s}=await e("/api/get-all-withholding-tax",{method:"GET",params:this.getParams,watch:!1,onResponse:({response:t})=>{this.withHoldingTaxSelectList=t._data.data}});if(a)return a;if(s)return s},async getWithholdingTaxes(){this.isLoading.list=!0;const{data:a,error:s}=await e("/api/withholding-tax",{method:"GET",params:this.getParams,onResponse:({response:t})=>{this.isLoading.list=!1,this.list=t._data.data,this.pagination={first_page:t._data.first_page_url,pages:t._data.links,last_page:t._data.last_page_url}}});if(a)return a;if(s)return s},async getChart(){this.isLoading.chart=!0;const{data:a,error:s}=await e("/api/chart-of-accounts",{method:"GET",params:this.getParams,watch:!1,onResponse:({response:t})=>{this.isLoading.chart=!1,this.chart=t._data.data}});if(a)return a;if(s)return s},async createWithholdingTax(){this.successMessage="",this.errorMessage="",await e("/api/withholding-tax",{method:"POST",body:this.withholdingTax,watch:!1,onResponse:({response:a})=>{a.ok?(this.getWithholdingTaxes(),this.reset(),this.successMessage=a._data.message):this.errorMessage=a._data.message}})},async editWithholdingTax(){this.successMessage="",this.errorMessage="";const{data:a,error:s}=await e("/api/withholding-tax/"+this.withholdingTax.id,{method:"PUT",body:this.withholdingTax,watch:!1});if(a.value)return this.getWithholdingTaxes(),this.successMessage=a.value.message,a;if(s.value)return this.errorMessage=s.value.data.message,s},async deleteWithholdingTax(a){this.successMessage="",this.errorMessage="";const{data:s,error:t}=await e("/api/withholding-tax/"+a,{method:"DELETE",body:this.withholdingTax,watch:!1});if(s.value)return this.getWithholdingTaxes(),this.successMessage=s.value.message,s;if(t.value)return this.errorMessage=t.value.data.message,t},clearMessages(){this.errorMessage="",this.successMessage=""},reset(){this.withholdingTax={id:null,account:{},wtax_name:null,account_id:null,vat_type:null,wtax_percentage:null},this.successMessage="",this.errorMessage=""}}});export{l as u};
