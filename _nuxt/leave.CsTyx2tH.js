import{u as V,E as le,a as ne,b as ie,_ as D,c as re}from"./notifications.wsmzCy68.js";import{_ as de,a as me,b as ue}from"./MainContainer.B9hIGMIe.js";import{_ as pe}from"./search-bar.vue.DBblr2nn.js";import{_ as ce}from"./DepartmentProjectSelector.CDYdLlti.js";import{_ as _e}from"./PsTextInput.vue.DFQbUHfC.js";import{_ as I}from"./PsDateInput.vue.DLxIFRYj.js";import{_ as fe}from"./PsNumberInput.vue.d-XJnO9O.js";import{_ as ye}from"./ApprovalsList.GUTJciN1.js";import{o as y,c as M,F as S,i as X,h as x,u as e,_ as ge,m as Z,B as be,r as T,s as U,C as ve,w as A,a as t,g as he,b as s,t as J,x as F,P as Y,p as Ae,e as we,K as B,L as j,v as $,ax as q,j as R}from"./entry.R6V7NTxy.js";import{_ as H}from"./PsTable.CTJad9K5.js";import{_ as O}from"./LayoutBoards.vue.1keADq5t.js";import{u as Le}from"./employee.tVj1qUbX.js";import{u as Ee}from"./approvals.Db95ZdMZ.js";import{_ as W}from"./SearchEmployeeSelector.vue.CmWr4DqB.js";import{_ as G}from"./CustomPagination.CR9ildFS.js";import{u as z}from"./index.Cobg6QK2.js";import{_ as Te}from"./AcessContainer.DJcSsti6.js";import{u as ke}from"./vue.f36acd1f.Dv_A-myg.js";import{u as C,A as P}from"./Accessibilities.uaboihcy.js";import"./RequestDetails.D4unJv3K.js";import"./ListView.DgUPeMcI.js";import"./Icon.DcF_NU9d.js";import"./index.T-zbMaZc.js";import"./ApprovalDenyButton.B1ShEyLo.js";import"./PsHoverButton.Dp5LwncM.js";import"./id.Dwf9xs1O.js";import"./client-only.QuN6N-R_.js";import"./PsModal.DW9SixU3.js";import"./loader.C2wIXBoB.js";import"./CustomFetch.BRBLzGci.js";import"./PsSelectSearch.vue.CrY1IpH8.js";import"./employeeSearch.CBgiOO3V.js";import"./DepartmentSelector.vue.Cl6IMdR7.js";import"./enum.D7iLG1Bk.js";import"./ProjectSelector.vue.DM9e2bZy.js";import"./UserEmployeeSelector.vue.DiXko0wz.js";import"./nuxt-link.drPfi767.js";import"./Utilities.Cbr1Z9cn.js";import"./users.D5_vMoUK.js";const xe={class:"w-full"},Me={__name:"leaveApproval",setup(w){const d=V();return(o,f)=>{const u=ye;return y(),M("div",xe,[(y(!0),M(S,null,X(e(d).payload.approvals,(a,_)=>(y(),x(u,{key:_,modelValue:e(d).payload.approvals[_],"onUpdate:modelValue":l=>e(d).payload.approvals[_]=l},null,8,["modelValue","onUpdate:modelValue"]))),128))])}}},k=w=>(Ae("data-v-c81ab478"),w=w(),we(),w),Ve=["onSubmit"],Ce={class:"w-full p-2"},Pe={class:"mt-5 grid gap-6 mb-6 md:grid-cols-2"},Se={class:"mb-6"},qe=k(()=>t("label",{for:"employee",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Name",-1)),Re={class:"mb-6"},De=k(()=>t("label",{for:"department",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Position",-1)),Ie={class:"grid gap-6 mb-6 md:grid-cols-2"},Ue=k(()=>t("div",{class:"mb-6"},[t("label",{for:"date_filed",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Date Filed"),t("input",{id:"date_filed",type:"date",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""})],-1)),$e={class:"w-full"},He={class:"w-full"},Oe=k(()=>t("label",{for:"",class:"text-xl font-semibold text-gray-900"},"LEAVE AVAILMENT",-1)),Ne={class:"flex gap-5"},Fe=["id","value"],Ye=["for"],Be={class:"mt-4 mb-2"},je={class:"mt-4 grid gap-3 mb-4 md:grid-cols-3"},We={class:"mb-2"},Ge={class:"flex gap-4"},ze={class:"mb-6"},Ke=["value"],Qe=k(()=>t("label",{for:"emp_with_pay",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"WITH PAY",-1)),Je={class:"mb-6"},Xe=["value"],Ze=k(()=>t("label",{for:"emp_without_pay",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"WITHOUT PAY",-1)),ea={class:"w-full p-2"},aa={class:"w-full"},ta=k(()=>t("label",{for:"",class:"text-xl font-semibold text-gray-900"},"EMPLOYEE'S LEAVE RECORD (HRD use only)",-1)),oa=k(()=>t("div",{class:"max-w-full flex flex-row-reverse mt-5"},[t("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"}," Add ")],-1)),sa={__name:"LeaveForm",async setup(w){let d,o;const f=Le(),u=Ee(),a=V();a.payload.approvals=([d,o]=Z(()=>u.getApprovalByName(le)),d=await d,o(),d);const _=be(),l=T(!1),{information:g}=U(f),L=[{name:"Leave Type",id:"leave_name"},{name:"Amount of Leaves",id:"credits"},{name:"USED",id:"used"},{name:"BALANCE",id:"balance"}],r=async c=>{a.payload.employee_id=c.id,await f.getLeaveCredits(c.id)},i=ve(()=>{if(a.payload.date_of_absence_to&&a.payload.date_of_absence_from){a.payload.number_of_days=1;const c=new Date(a.payload.date_of_absence_from),n=new Date(a.payload.date_of_absence_to),v=c.setMinutes(c.getMinutes()-c.getTimezoneOffset()),h=n.setMinutes(n.getMinutes()-n.getTimezoneOffset());a.payload.number_of_days=(h-v)/(24*60*60*1e3)+1}}),b=async()=>{try{l.value=!0,await a.createRequest(),a.successMessage&&_.add({type:"success",text:a.successMessage})}catch(c){_.add({type:"error",text:c||"something went wrong."})}finally{a.clearMessages(),l.value=!1,a.allLeaves(),a.allApprovals(),a.myRequest()}};return(c,n)=>{const v=pe,h=ce,E=_e,m=I,ee=fe,ae=Me,te=H,oe=O;return y(),x(oe,{title:"Leave Application Form",class:"edit-item w-full max-w-full",loading:e(l)},{default:A(()=>{var K,Q;return[t("form",{onSubmit:he(b,["prevent"])},[t("div",Ce,[t("div",Pe,[t("div",Se,[qe,s(v,{onSearchChanged:r})]),t("div",Re,[De,t("p",null,J(((Q=(K=e(g).current_employment)==null?void 0:K.position)==null?void 0:Q.name)??"No Position"),1)])]),t("div",Ie,[s(h,{"select-type":e(a).payload.charging,"onUpdate:selectType":n[0]||(n[0]=p=>e(a).payload.charging=p),"department-id":e(a).payload.department_id,"onUpdate:departmentId":n[1]||(n[1]=p=>e(a).payload.department_id=p),"project-id":e(a).payload.project_id,"onUpdate:projectId":n[2]||(n[2]=p=>e(a).payload.project_id=p),title:"Charging"},null,8,["select-type","department-id","project-id"]),Ue]),t("div",$e,[t("div",He,[Oe,t("div",Ne,[(y(!0),M(S,null,X(e(g).leaveCredits,(p,N)=>(y(),M("div",{key:N},[F(t("input",{id:"leaveType"+N,"onUpdate:modelValue":n[3]||(n[3]=se=>e(a).payload.leave_id=se),value:p.id,type:"radio",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,Fe),[[Y,e(a).payload.leave_id]]),t("label",{for:"leaveType"+N,class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},J(p.leave_name),9,Ye)]))),128))]),t("div",Be,[s(E,{modelValue:e(a).payload.reason_for_absence,"onUpdate:modelValue":n[4]||(n[4]=p=>e(a).payload.reason_for_absence=p),title:"REASONS/REMARKS",placeholder:"remarks"},null,8,["modelValue"])]),t("div",je,[t("div",We,[s(m,{modelValue:e(a).payload.date_of_absence_from,"onUpdate:modelValue":n[5]||(n[5]=p=>e(a).payload.date_of_absence_from=p),title:"Days from",onChange:e(i)},null,8,["modelValue","onChange"])]),t("div",null,[s(m,{modelValue:e(a).payload.date_of_absence_to,"onUpdate:modelValue":n[6]||(n[6]=p=>e(a).payload.date_of_absence_to=p),title:"Days to",onChange:e(i)},null,8,["modelValue","onChange"])]),t("div",null,[s(ee,{modelValue:e(a).payload.number_of_days,"onUpdate:modelValue":n[7]||(n[7]=p=>e(a).payload.number_of_days=p),title:"No. of Days:"},null,8,["modelValue"])])]),t("div",Ge,[t("div",ze,[F(t("input",{id:"emp_with_pay","onUpdate:modelValue":n[8]||(n[8]=p=>e(a).payload.with_pay=p),value:e(ne),type:"radio",name:"emp_with_pay",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,Ke),[[Y,e(a).payload.with_pay]]),Qe]),t("div",Je,[F(t("input",{id:"emp_without_pay","onUpdate:modelValue":n[9]||(n[9]=p=>e(a).payload.with_pay=p),value:e(ie),type:"radio",name:"emp_without_pay",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,Xe),[[Y,e(a).payload.with_pay]]),Ze])])]),t("div",ea,[s(ae)]),t("div",aa,[ta,s(te,{"header-columns":L,datas:e(g).leaveCredits??[],actions:{}},null,8,["datas"])])]),oa])],40,Ve)]}),_:1},8,["loading"])}}},la=ge(sa,[["__scopeId","data-v-c81ab478"]]),na={class:"flex gap-2"},ia={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},ra={class:"flex justify-center mx-auto"},da={__name:"AllList",setup(w){const d=V(),{allList:o}=U(d),f=T(null),u=T(!1),a=z(()=>{d.allLeaves()},500);B(()=>{o.value.isLoaded||a()});const _=r=>{f.value=r,u.value=!0},l=r=>{o.value.params.page=r.page??""},g=[{name:"EMPLOYEE NAME",id:"employee.fullname_last"},{name:"LEAVE AVAILMENT",id:"leave"},{name:"DATE FROM ",id:"date_of_absence_from"},{name:"DATE TO ",id:"date_of_absence_to"},{name:"REASONS",id:"reason_for_absence"},{name:"WITH PAY",id:"with_pay"},{name:"LEAVE STATUS",id:"request_status"}],L={showTable:!0};return j(()=>({...o.value.params}),(r,i)=>{r.page===i.page&&(o.value.params.page=1),a()},{deep:!0}),(r,i)=>{const b=W,c=I,n=H,v=G,h=O,E=D;return y(),M(S,null,[s(h,{class:"w-full",loading:e(o).isLoading},{default:A(()=>[t("div",na,[s(b,{modelValue:e(o).params.employee_id,"onUpdate:modelValue":i[0]||(i[0]=m=>e(o).params.employee_id=m),class:"w-full"},null,8,["modelValue"]),s(c,{modelValue:e(o).params.date_filter,"onUpdate:modelValue":i[1]||(i[1]=m=>e(o).params.date_filter=m),class:"w-full",title:"Date Filter"},null,8,["modelValue"])]),t("div",ia,[s(n,{"header-columns":g,actions:L,datas:e(o).list,onShowTable:_},null,8,["datas"]),t("div",ra,[s(v,{links:e(o).pagination,onChangeParams:l},null,8,["links"])])])]),_:1},8,["loading"]),s(E,{showModal:e(u),"onUpdate:showModal":i[2]||(i[2]=m=>$(u)?u.value=m:null),data:e(f)},null,8,["showModal","data"])],64)}}},ma={class:"flex gap-2"},ua={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},pa={class:"flex justify-center mx-auto"},ca={__name:"MyRequests",setup(w){const d=V(),{myRequestList:o}=U(d),f=T(null),u=T(!1),a=z(()=>{d.myRequest()},500);B(()=>{o.value.isLoaded||a()});const _=r=>{f.value=r,u.value=!0},l=r=>{o.value.params.page=r.page??""},g=[{name:"EMPLOYEE NAME",id:"employee.fullname_last"},{name:"LEAVE AVAILMENT",id:"leave"},{name:"DATE FROM ",id:"date_of_absence_from"},{name:"DATE TO ",id:"date_of_absence_to"},{name:"REASONS",id:"reason_for_absence"},{name:"WITH PAY",id:"with_pay"},{name:"LEAVE STATUS",id:"request_status"}],L={showTable:!0};return j(()=>({...o.value.params}),(r,i)=>{r.page===i.page&&(o.value.params.page=1),a()},{deep:!0}),(r,i)=>{const b=W,c=I,n=H,v=G,h=O,E=D;return y(),M(S,null,[s(h,{class:"w-full",loading:e(o).isLoading},{default:A(()=>[t("div",ma,[s(b,{modelValue:e(o).params.employee_id,"onUpdate:modelValue":i[0]||(i[0]=m=>e(o).params.employee_id=m),class:"w-full"},null,8,["modelValue"]),s(c,{modelValue:e(o).params.date_filter,"onUpdate:modelValue":i[1]||(i[1]=m=>e(o).params.date_filter=m),class:"w-full",title:"Date Filter"},null,8,["modelValue"])]),t("div",ua,[s(n,{"header-columns":g,actions:L,datas:e(o).list,onShowTable:_},null,8,["datas"]),t("div",pa,[s(v,{links:e(o).pagination,onChangeParams:l},null,8,["links"])])])]),_:1},8,["loading"]),s(E,{showModal:e(u),"onUpdate:showModal":i[2]||(i[2]=m=>$(u)?u.value=m:null),data:e(f)},null,8,["showModal","data"])],64)}}},_a={class:"flex gap-2"},fa={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},ya={class:"flex justify-center mx-auto"},ga={__name:"approvalList",setup(w){const d=V(),{approvalList:o}=U(d),f=T(null),u=T(!1),a=z(()=>{d.allApprovals()},500);B(()=>{o.value.isLoaded||a()});const _=r=>{f.value=r,u.value=!0},l=r=>{o.value.params.page=r.page??""},g=[{name:"EMPLOYEE NAME",id:"employee.fullname_last"},{name:"LEAVE AVAILMENT",id:"leave"},{name:"DATE FROM ",id:"date_of_absence_from"},{name:"DATE TO ",id:"date_of_absence_to"},{name:"REASONS",id:"reason_for_absence"},{name:"WITH PAY",id:"with_pay"},{name:"LEAVE STATUS",id:"request_status"}],L={showTable:!0};return j(()=>({...o.value.params}),(r,i)=>{r.page===i.page&&(o.value.params.page=1),a()},{deep:!0}),(r,i)=>{const b=W,c=I,n=H,v=G,h=O,E=D;return y(),M(S,null,[s(h,{class:"w-full",loading:e(o).isLoading},{default:A(()=>[t("div",_a,[s(b,{modelValue:e(o).params.employee_id,"onUpdate:modelValue":i[0]||(i[0]=m=>e(o).params.employee_id=m),class:"w-full"},null,8,["modelValue"]),s(c,{modelValue:e(o).params.date_filter,"onUpdate:modelValue":i[1]||(i[1]=m=>e(o).params.date_filter=m),class:"w-full",title:"Date Filter"},null,8,["modelValue"])]),t("div",fa,[s(n,{"header-columns":g,actions:L,datas:e(o).list,onShowTable:_},null,8,["datas"]),t("div",ya,[s(v,{links:e(o).pagination,onChangeParams:l},null,8,["links"])])])]),_:1},8,["loading"]),s(E,{showModal:e(u),"onUpdate:showModal":i[2]||(i[2]=m=>$(u)?u.value=m:null),data:e(f)},null,8,["showModal","data"])],64)}}},ot={__name:"leave",async setup(w){let d,o;const f=re(),u=V(),a=T(!1),_=T(null);if(q().query.id){const l=([d,o]=Z(()=>u.getOne(q().query.id)),d=await d,o(),d);_.value=l.data,a.value=!0,(q().query.type||"")!=="Approve"&&f.setSingleNotifAsRead(q().query.notifId)}return ke({title:"Leave",meta:[{name:"description",content:""}]}),(l,g)=>{const L=D,r=de,i=la,b=me,c=da,n=ca,v=ga,h=ue,E=Te;return y(),x(E,{"if-access":("useCheckAccessibility"in l?l.useCheckAccessibility:e(C))([("AccessibilityTypes"in l?l.AccessibilityTypes:e(P)).hrms_lnotnto_leave_group])},{default:A(()=>[s(L,{showModal:e(a),"onUpdate:showModal":g[0]||(g[0]=m=>$(a)?a.value=m:null),data:e(_)},null,8,["showModal","data"]),s(h,null,{"tab-titles":A(()=>[("useCheckAccessibility"in l?l.useCheckAccessibility:e(C))([("AccessibilityTypes"in l?l.AccessibilityTypes:e(P)).hrms_lnotnto_leave_form])?(y(),x(r,{key:0,"target-id":"leaverequest-form",title:"Request Form"})):R("",!0),("useCheckAccessibility"in l?l.useCheckAccessibility:e(C))([("AccessibilityTypes"in l?l.AccessibilityTypes:e(P)).hrms_lnotnto_leave_list])?(y(),x(r,{key:1,"target-id":"leaverequest-all-list",title:"All List"})):R("",!0),("useCheckAccessibility"in l?l.useCheckAccessibility:e(C))([("AccessibilityTypes"in l?l.AccessibilityTypes:e(P)).hrms_lnotnto_leave_form])?(y(),x(r,{key:2,"target-id":"leaverequest-my-request",title:"My Request"})):R("",!0),("useCheckAccessibility"in l?l.useCheckAccessibility:e(C))([("AccessibilityTypes"in l?l.AccessibilityTypes:e(P)).hrms_lnotnto_leave_my_approvals])?(y(),x(r,{key:3,"target-id":"leaverequest-my-approvals",title:"My Approvals"})):R("",!0)]),"tab-containers":A(()=>[s(b,{id:"leaverequest-form"},{default:A(()=>[s(i)]),_:1}),s(b,{id:"leaverequest-all-list"},{default:A(()=>[s(c)]),_:1}),s(b,{id:"leaverequest-my-request"},{default:A(()=>[s(n)]),_:1}),s(b,{id:"leaverequest-my-approvals"},{default:A(()=>[s(v)]),_:1})]),_:1})]),_:1},8,["if-access"])}}};export{ot as default};
