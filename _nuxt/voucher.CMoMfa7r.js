import{u as e,a as t}from"./CustomFetch.BRBLzGci.js";import{l as i}from"./entry.R6V7NTxy.js";const d=i("voucherStore",{state:()=>({voucherDisbursement:{isLoading:!1,isLoaded:!1,stakeholder_id:null,voucher_no:null,particulars:"",net_amount:0,amount_in_words:null,date_encoded:null,voucher_date:null,check_no:null,details:[],reference_no:null,approvals:[],errorMessage:"",successMessage:""},voucherCash:{isLoading:!1,isLoaded:!1,stakeholder_id:null,book_id:null,voucher_no:"",particulars:"",net_amount:0,amount_in_words:null,date_encoded:null,voucher_date:null,created_by:1,check_no:null,details:[],form:{},form_type:null,reference_no:null,status:"pending",form_id:null,approvals:[],errorMessage:"",successMessage:""},cashReceivedForm:{voucher_id:null,received_by:null,receipt_no:null,date_received:null},cashClearingVoucher:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""},cashClearedVoucher:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""},allCashVouchers:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""},myCashVouchers:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""},myCashApprovals:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""},allDisbursementVouchers:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""},myDisbursementVouchers:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""},myDisbursementApprovals:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""},errorMessage:"",successMessage:"",isEdit:!1,remarks:""}),getters:{},actions:{async getClearingVouchers(){this.cashClearingVoucher.isLoaded=!0,await e("/api/vouchers/cash/get-clearing-vouchers",{method:"GET",params:this.cashClearingVoucher.params,onRequest:()=>{this.cashClearingVoucher.isLoading=!0},onResponse:({response:s})=>{this.cashClearingVoucher.isLoading=!1,s.ok&&(this.cashClearingVoucher.list=s._data.data.data,this.cashClearingVoucher.pagination={first_page:s._data.data.links.first,pages:s._data.data.meta.links,last_page:s._data.data.links.last})}})},async getClearedVouchers(){this.cashClearedVoucher.isLoaded=!0,await e("/api/vouchers/cash/get-cleared-vouchers",{method:"GET",params:this.cashClearedVoucher.params,onRequest:()=>{this.cashClearedVoucher.isLoading=!0},onResponse:({response:s})=>{this.cashClearedVoucher.isLoading=!1,s.ok&&(this.cashClearedVoucher.list=s._data.data.data,this.cashClearedVoucher.pagination={first_page:s._data.data.links.first,pages:s._data.data.meta.links,last_page:s._data.data.links.last})}})},async getAllCashVouchers(){this.allCashVouchers.isLoaded=!0,await e("/api/vouchers/cash/all-list",{method:"GET",params:this.allCashVouchers.params,onRequest:()=>{this.allCashVouchers.isLoading=!0},onResponse:({response:s})=>{this.allCashVouchers.isLoading=!1,s.ok&&(this.allCashVouchers.list=s._data.data.data,this.allCashVouchers.pagination={first_page:s._data.data.links.first,pages:s._data.data.meta.links,last_page:s._data.data.links.last})}})},async getMyCashVouchers(){this.myCashVouchers.isLoaded=!0,await e("/api/vouchers/cash/my-requests",{method:"GET",params:this.myCashVouchers.params,onRequest:()=>{this.myCashVouchers.isLoading=!0},onResponse:({response:s})=>{this.myCashVouchers.isLoading=!1,s.ok&&(this.myCashVouchers.list=s._data.data.data,this.myCashVouchers.pagination={first_page:s._data.data.links.first,pages:s._data.data.meta.links,last_page:s._data.data.links.last})}})},async getMyCashApprovals(){this.myCashApprovals.isLoaded=!0,await e("/api/vouchers/cash/my-approvals",{method:"GET",params:this.myCashApprovals.params,onRequest:()=>{this.myCashApprovals.isLoading=!0},onResponse:({response:s})=>{this.myCashApprovals.isLoading=!1,s.ok&&(this.myCashApprovals.list=s._data.data.data,this.myCashApprovals.pagination={first_page:s._data.data.links.first,pages:s._data.data.meta.links,last_page:s._data.data.links.last})}})},async getAllDisbursementVouchers(){this.allDisbursementVouchers.isLoaded=!0,await e("/api/vouchers/disbursement/all-list",{method:"GET",params:this.allDisbursementVouchers.params,onRequest:()=>{this.allDisbursementVouchers.isLoading=!0},onResponse:({response:s})=>{this.allDisbursementVouchers.isLoading=!1,s.ok&&(this.allDisbursementVouchers.list=s._data.data.data,this.allDisbursementVouchers.pagination={first_page:s._data.data.links.first,pages:s._data.data.meta.links,last_page:s._data.data.links.last})}})},async getMyDisbursementVouchers(){this.myDisbursementVouchers.isLoaded=!0,await e("/api/vouchers/disbursement/my-requests",{method:"GET",params:this.myDisbursementVouchers.params,onRequest:()=>{this.myDisbursementVouchers.isLoading=!0},onResponse:({response:s})=>{this.myDisbursementVouchers.isLoading=!1,s.ok&&(this.myDisbursementVouchers.list=s._data.data.data,this.myDisbursementVouchers.pagination={first_page:s._data.data.links.first,pages:s._data.data.meta.links,last_page:s._data.data.links.last})}})},async getMyDisbursementApprovals(){this.myDisbursementApprovals.isLoaded=!0,await e("/api/vouchers/disbursement/my-approvals",{method:"GET",params:this.myDisbursementApprovals.params,onRequest:()=>{this.myDisbursementApprovals.isLoading=!0},onResponse:({response:s})=>{this.myDisbursementApprovals.isLoading=!1,s.ok&&(this.myDisbursementApprovals.list=s._data.data.data,this.myDisbursementApprovals.pagination={first_page:s._data.data.links.first,pages:s._data.data.meta.links,last_page:s._data.data.links.last})}})},async addVoucherDisbursement(){await t("/api/vouchers/disbursement/create-voucher",{method:"POST",body:this.voucherDisbursement,watch:!1,onRequest:()=>{this.voucherDisbursement.isLoading=!0},onResponseError:({response:s})=>{throw this.voucherDisbursement.errorMessage=s._data.message,new Error(s._data.message)},onResponse:({response:s})=>{if(this.voucherDisbursement.isLoading=!1,s.ok)this.reloadResourcesDisbursement(),this.voucherDisbursement.successMessage=s._data.message;else throw this.voucherDisbursement.errorMessage=s._data.message,new Error(s._data.message)}})},async addVoucherCash(){await t("/api/vouchers/cash/create-voucher",{method:"POST",body:this.voucherCash,watch:!1,onRequest:()=>{this.voucherCash.isLoading=!0},onResponseError:({response:s})=>{throw this.voucherCash.errorMessage=s._data.message,new Error(s._data.message)},onResponse:({response:s})=>{if(this.voucherCash.isLoading=!1,s.ok)this.reloadResourcesCash(),this.voucherCash.successMessage=s._data.message;else throw this.voucherCash.errorMessage=s._data.message,new Error(s._data.message)}})},async generateDisbursementVoucherNo(){await e("/api/vouchers/disbursement/generate-number",{method:"GET",onResponse:({response:s})=>{s.ok&&(this.voucherDisbursement.voucher_no=s._data.data)}})},async generateCashVoucherNo(){await e("/api/vouchers/cash/generate-number",{method:"GET",onResponse:({response:s})=>{s.ok&&(this.voucherCash.voucher_no=s._data.data)}})},reloadResourcesCash(){const s=this.voucherCash.approvals,a=[];this.allCashVouchers.isLoaded&&a.push(this.getAllCashVouchers),this.myCashVouchers.isLoaded&&a.push(this.getMyCashVouchers),this.myCashApprovals.isLoaded&&a.push(this.getMyCashApprovals),this.$reset(),this.voucherCash.approvals=s,a.forEach(r=>{r()})},reloadResourcesDisbursement(){const s=this.voucherDisbursement.approvals,a=[];this.myDisbursementApprovals.isLoaded&&a.push(this.getMyDisbursementApprovals),this.allDisbursementVouchers.isLoaded&&a.push(this.getAllDisbursementVouchers),this.myDisbursementVouchers.isLoaded&&a.push(this.getMyDisbursementVouchers),this.$reset(),this.voucherDisbursement.approvals=s,a.forEach(r=>{r()})},async approveCashVoucher(s){this.successMessage="",this.errorMessage="",await t("/api/approvals/approve/ACCOUNTING_CASH_REQUEST/"+s,{method:"POST",onResponseError:({response:a})=>{throw this.errorMessage=a._data.message,new Error(a._data.message)},onResponse:({response:a})=>{if(a.ok)return this.reloadResourcesCash(),this.successMessage=a._data.message,a._data;throw this.errorMessage=a._data.message,new Error(a._data.message)}})},async denyCashVoucher(s){this.successMessage="",this.errorMessage="",await t("/api/approvals/disapprove/ACCOUNTING_CASH_REQUEST/"+s,{method:"POST",body:{remarks:this.remarks},onResponseError:({response:a})=>{throw this.errorMessage=a._data.message,new Error(a._data.message)},onResponse:({response:a})=>{if(a.ok)return this.reloadResourcesCash(),this.successMessage=a._data.message,a._data;throw this.errorMessage=a._data.message,new Error(a._data.message)}})},async approveDisbursementVoucher(s){this.successMessage="",this.errorMessage="",await t("/api/approvals/approve/ACCOUNTING_DISBURSEMENT_REQUEST/"+s,{method:"POST",onResponseError:({response:a})=>{throw this.errorMessage=a._data.message,new Error(a._data.message)},onResponse:({response:a})=>{if(a.ok)return this.reloadResourcesDisbursement(),this.successMessage=a._data.message,a._data;throw this.errorMessage=a._data.message,new Error(a._data.message)}})},async denyDisbursementVoucher(s){this.successMessage="",this.errorMessage="",await t("/api/approvals/disapprove/ACCOUNTING_DISBURSEMENT_REQUEST/"+s,{method:"POST",body:{remarks:this.remarks},onResponseError:({response:a})=>{throw this.errorMessage=a._data.message,new Error(a._data.message)},onResponse:({response:a})=>{if(a.ok)return this.successMessage=a._data.message,this.reloadResourcesDisbursement(),a._data;throw this.errorMessage=a._data.message,new Error(a._data.message)}})},async cashReceived(){this.successMessage="",this.errorMessage="",await t("/api/vouchers/cash/received",{method:"POST",body:this.cashReceivedForm,onResponseError:({response:s})=>{throw this.errorMessage=s._data.message,new Error(s._data.message)},onResponse:({response:s})=>{if(s.ok)return this.successMessage=s._data.message,s._data;throw this.errorMessage=s._data.message,new Error(s._data.message)}})}}});export{d as u};
