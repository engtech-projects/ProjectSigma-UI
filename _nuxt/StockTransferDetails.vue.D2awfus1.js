import T from"./Icon.DcF_NU9d.js";import{_ as B}from"./AcceptRejectButton.BK4bgbmc.js";import{_ as L}from"./LoadingContainer.vue.Bz3WIh4M.js";import{_ as S}from"./LayoutPrint.Dr_MMYe1.js";import{f as $,r as Q,B as U,s as I,C as N,o as i,c as l,a as e,b as p,w as x,t as a,j as g,u as f,F as b,i as k,v as w,G as z}from"./entry.R6V7NTxy.js";import{u as F}from"./stocktransfer.B8gsqVQx.js";const G={class:"h-full w-full bg-white border border-gray-200 rounded-lg shadow-md sm:p-6 md:p-2 dark:bg-gray-800 dark:border-gray-700"},V={class:"flex flex-col gap-2 w-full p-4"},W={id:"headline mb-4 "},E={class:"basis-[10%] grow-1 shrink-0 flex items-center justify-center rounded-t mb-4 mt-4"},O={key:0,class:"pl-4 text-xl font-semibold text-gray-900 p-4"},P={class:"flex justify-between mb-4"},H={class:"w-1/2"},J={class:"flex justify-start p-2"},K={class:"grid grid-cols-2"},X=e("p",{class:"text-md font-bold"}," Date: ",-1),Y={class:"text-md underline indent-2"},Z=e("p",{class:"text-md font-bold"}," From: ",-1),ee={class:"text-md underline indent-2"},te=e("p",{class:"text-md font-bold"}," To: ",-1),se={class:"text-md underline indent-2"},re={class:"w-1/2 text-left"},oe={class:"flex justify-around p-2"},ae={class:"grid grid-cols-2"},de=e("p",{class:"text-md font-bold"}," Reference Number: ",-1),ce={class:"text-md font-bold underline indent-2"},ne={id:"itemDetails"},ie={id:"content",class:"overflow-auto"},le={class:"table-auto w-full border-collapse"},ue={class:"bg-[#dbe5f1]"},me={class:"border px-2 py-1 text-center"},pe={class:"border px-2 py-1 text-center"},_e={class:"border px-2 py-1 text-center"},fe={class:"border px-2 py-1 text-center"},ye={class:"border px-2 py-1 text-center"},he={key:0,class:"flex justify-center relative group"},xe=e("div",{role:"tooltip",class:"absolute bottom-full mb-2 hidden group-hover:block z-10 w-32 px-2 py-1 text-xs text-white bg-gray-700 rounded-lg shadow-md"}," Rejected ",-1),ge={key:1,class:"flex justify-center relative group"},be=e("div",{role:"tooltip",class:"absolute bottom-full mb-2 hidden group-hover:block z-10 w-32 px-2 py-1 text-xs text-white bg-gray-700 rounded-lg shadow-md"}," Accepted ",-1),ke={class:"border px-2 py-1 text-center"},De=$({__name:"StockTransferDetails",props:{title:{type:String,required:!0},headerColumns:{type:Array,required:!0},data:{type:Array,required:!0}},setup(c){const _=c,v={id:1,date:"2025-04-10",from_section:"Warehouse A",to_section:"Warehouse B",reference_no:"ST-2025-0001",items:[{id:1,item_id:"Laptop Computer",qty:5,accepted_qty:5,unit:"Units",condition:"Good",status:"Accepted",remarks:"All items in good condition"},{id:2,item_profile:"Office Chair",qty:10,accepted_qty:8,unit:"Units",condition:"Good",status:"Damaged",remarks:"2 units with minor damage"}]},y=Q(!1),t=F(),o=U(),{stockTransfer:q,remarks:m}=I(t),j=N(()=>_.data||v),A=async({requestId:n,remarks:s})=>{try{await t.acceptAllItem(n,{remarks:s}),t.errorMessage!==""?o.add({type:"error",text:t.errorMessage}):(o.add({type:"success",text:t.successMessage}),t.$reset(),t.fetchTransferDetails(_.data.id),y.value=!0)}catch(d){o.add({type:"error",text:d||"something went wrong."})}},R=async({requestId:n,acceptedQty:s,remarks:d})=>{if(d===""){o.add({type:"error",text:"Quantity & Remarks are required."});return}try{await t.acceptQtyRemarks(n,{accepted_qty:s,remarks:d}),t.errorMessage!==""?o.add({type:"error",text:t.errorMessage}):(o.add({type:"success",text:t.successMessage}),t.$reset(),await t.fetchTransferDetails(_.data.id),y.value=!0)}catch(h){o.add({type:"error",text:h||"something went wrong."})}},D=async({requestId:n,remarks:s})=>{if(s.trim()===""){o.add({type:"error",text:"Remarks are required."});return}try{await t.rejectItem(n,{remarks:s.trim()}),t.errorMessage!==""?o.add({type:"error",text:t.errorMessage}):(o.add({type:"success",text:t.successMessage}),t.$reset(),await t.fetchTransferDetails(_.data.id),y.value=!0)}catch(d){o.add({type:"error",text:d||"something went wrong."})}};return(n,s)=>{const d=T,h=B,C=L,M=S;return i(),l("div",G,[e("div",V,[p(M,null,{default:x(()=>[e("div",W,[e("div",E,[c.title?(i(),l("h3",O,a(c.title),1)):g("",!0)]),e("div",P,[e("div",H,[e("div",J,[e("div",K,[X,e("p",Y,a(c.data.date),1),Z,e("p",ee,a(c.data.from_section),1),te,e("p",se,a(c.data.to_section),1)])])]),e("div",re,[e("div",oe,[e("div",ae,[de,e("p",ce,a(c.data.reference_no),1)])])])])]),p(C,{class:"w-full",loading:f(q).isLoading},{default:x(()=>[e("div",ne,[e("div",ie,[e("table",le,[e("thead",null,[e("tr",ue,[(i(!0),l(b,null,k(c.headerColumns,(r,u)=>(i(),l("th",{key:u,scope:"col",class:"p-2 border-b text-sm"},a(r.name),1))),128))])]),e("tbody",null,[(i(!0),l(b,null,k(f(j).items,r=>(i(),l("tr",{key:r.id,class:"bg-white border-b"},[e("td",me,a(r.item_id),1),e("td",pe,a(r.qty),1),e("td",_e,a(r.unit),1),e("td",fe,a(r.condition),1),e("td",ye,[r.remarks==="Rejected"?(i(),l("div",he,[p(d,{name:"mdi:close-circle",class:"h-8 w-8 text-red-700"}),xe])):r.remarks==="Accepted"?(i(),l("div",ge,[p(d,{name:"mdi:check-circle",class:"h-8 w-8 text-green-700"}),be])):g("",!0)]),e("td",ke,[p(h,{"accept-remarks":f(m),"onUpdate:acceptRemarks":s[0]||(s[0]=u=>w(m)?m.value=u:null),"reject-remarks":f(m),"onUpdate:rejectRemarks":s[1]||(s[1]=u=>w(m)?m.value=u:null),"accepted-qty":n.acceptedQty,"onUpdate:acceptedQty":s[2]||(s[2]=u=>n.acceptedQty=u),"max-quantity":r.qty,"request-id":r.id,disabled:!!r.remarks,class:z({"opacity-60 cursor-not-allowed pointer-events-none":!!r.remarks}),onAcceptAll:A,onAccept:R,onReject:D},null,8,["accept-remarks","reject-remarks","accepted-qty","max-quantity","request-id","disabled","class"])])]))),128))])])])])]),_:1},8,["loading"])]),_:1})])])}}});export{De as _};
