import{_ as U}from"./CloseBackOrPrevpage.vue.Dwu9d4qF.js";import{_ as O}from"./IsoHeader.vue.CeUOAvDJ.js";import{_ as j}from"./PsFormLabel.vue.MbD1f9hE.js";import{f as A}from"./Utilities.Cbr1Z9cn.js";import{o as s,c as o,a as e,F as b,i as x,t as a,u as c,f as D,B,s as P,b as y,j as k,h as v,v as F,E as M,aF as V,r as H,m as J,w}from"./entry.R6V7NTxy.js";import{_ as I}from"./ListView.DgUPeMcI.js";import{_ as Y}from"./ApprovalDenyButton.B1ShEyLo.js";import{a as z,u as G,A as K}from"./Accessibilities.uaboihcy.js";import{u as q}from"./canvassSummary.CSdjxGSl.js";import{_ as Q}from"./LayoutBoards.vue.1keADq5t.js";import{_ as W}from"./LayoutPrintAdvanced.shu-O4kB.js";import{_ as X}from"./AcessContainer.DJcSsti6.js";import{u as Z}from"./vue.f36acd1f.Dv_A-myg.js";import"./evenpar.D2HxGWpc.js";import"./id.Dwf9xs1O.js";import"./client-only.QuN6N-R_.js";import"./Icon.DcF_NU9d.js";import"./index.T-zbMaZc.js";import"./users.D5_vMoUK.js";import"./CustomFetch.BRBLzGci.js";import"./loader.C2wIXBoB.js";const ee=e("div",{class:"flex w-full"},null,-1),te={class:"flex w-full h-full bg-gray-50"},se={class:"w-full lg:w-1/2 border-r bg-white overflow-hidden"},re={class:"overflow-hidden max-h-96 lg:max-h-full"},ae={class:"min-w-full table-auto text-xs sm:text-sm text-gray-800"},oe=e("thead",{class:"sticky top-0 z-10 bg-white"},[e("tr",{class:"h-20"},[e("th",{colspan:"5",class:"text-center text-lg font-bold border border-gray-700 border-r uppercase"},[e("div",{class:"flex items-center justify-center"},[e("div",{class:"text-center leading-tight"}," requested items(s) / services ")])])]),e("tr",{class:"font-semibold uppercase border border-gray-700"},[e("th",{class:"border-r border-gray-700 text-wrap w-12 text-xs"}," item no. "),e("th",{class:"border-r border-gray-700 text-xs"}," item description "),e("th",{class:"border-r border-gray-700 text-xs"}," specification "),e("th",{class:"border-r border-gray-700 w-10 text-xs"}," qty "),e("th",{class:"border-r border-gray-700 text-wrap w-12 p-1 text-xs"}," unit of measurement ")])],-1),ne={class:"border border-gray-700 p-1 text-center font-medium text-gray-600"},ie={class:"border border-gray-700 p-1 font-medium text-center"},le=["title"],de={class:"border border-gray-700 px-1 sm:px-3 py-2 sm:py-3 text-center text-gray-600 hidden md:table-cell"},ce=["title"],me={class:"border border-gray-700 px-1 sm:px-3 py-2 sm:py-3 text-center font-semibold text-gray-600"},ue={class:"border border-gray-700 px-1 sm:px-3 py-2 sm:py-3 text-center text-gray-600"},_e=["title"],pe=e("tr",null,[e("th",{colspan:"5",class:"border border-gray-700 text-center text-lg font-bold uppercase p-3"}," total amount ")],-1),ye={class:"w-1/2 overflow-auto bg-white"},fe={class:"min-w-full table-fixed text-xs sm:text-sm text-gray-800"},be={class:"sticky top-0 bg-white"},he={class:"h-20"},ve={colspan:"3",class:"text-center font-bold border border-gray-700 uppercase"},xe={class:"flex items-center justify-center"},ge={class:"text-center leading-tight"},we=e("tr",{class:"font-semibold uppercase border border-gray-700 h-10"},[e("th",{class:"border-r border-gray-700 text-xs"}," Unit Price "),e("th",{class:"border-r border-gray-700 text-xs"}," Total "),e("th",{class:"border-r border-gray-700 text-xs"}," Remarks ")],-1),ke={class:"border border-gray-700 text-center font-medium"},Ce={class:"border border-gray-700 text-center font-semibold"},$e={class:"border border-gray-700 text-center"},Te={class:"w-full h-full flex items-center justify-center overflow-auto text-xs text-gray-600"},Se={class:"h-12"},Re={colspan:"3",class:"border border-gray-700 p-1 text-center font-bold text-lg"},L={__name:"ItemTable",props:{data:{type:Object,required:!0}},setup(u){const t=u;return(n,g)=>(s(),o(b,null,[ee,e("div",te,[e("div",se,[e("div",re,[e("table",ae,[oe,e("tbody",null,[(s(!0),o(b,null,x(t.data.items,(r,i)=>(s(),o("tr",{key:"item-"+i,class:"border border-gray-700 hover:bg-gray-25 cursor-pointer"},[e("td",ne,a(i+1),1),e("td",ie,[e("div",{class:"truncate",title:r.item_description},a(r.item_description),9,le)]),e("td",de,[e("div",{class:"truncate",title:r.specification},a(r.specification||"-"),9,ce)]),e("td",me,a(r.quantity||"-"),1),e("td",ue,[e("div",{class:"truncate",title:r.unit},a(r.unit||"-"),9,_e)])]))),128)),pe])])])]),e("div",ye,[e("table",fe,[e("thead",be,[e("tr",he,[e("th",ve,[e("div",xe,[e("div",ge,[e("div",null,a(t.data.supplier.company_name),1),e("div",null,a(t.data.supplier.company_address),1),e("div",null,a(t.data.supplier.contact_person_name),1),e("div",null,a(t.data.supplier.contact_person_number),1)])])])]),we]),e("tbody",null,[(s(!0),o(b,null,x(t.data.items,(r,i)=>(s(),o("tr",{key:"row-"+i,class:"border-b border-gray-700 hover:bg-gray-25 h-12"},[e("td",ke," ₱"+a(("formatToCurrency"in n?n.formatToCurrency:c(A))(r.unit_price)),1),e("td",Ce," ₱"+a(("formatToCurrency"in n?n.formatToCurrency:c(A))(r.total_amount)),1),e("td",$e,[e("div",Te,a(r.remarks||"-"),1)])]))),128)),e("tr",Se,[e("td",Re," ₱"+a(("formatToCurrency"in n?n.formatToCurrency:c(A))(t.data.grand_total_amount)),1)])])])])])],64))}},Ae={class:"text-gray-900 p-2"},Ee={class:"flex flex-col gap-4 pt-4 w-full"},Ne={key:0,class:"basis-[10%] grow-1 shrink-0 flex items-center justify-center rounded-t mb-4"},Oe={class:"pl-4 text-2xl font-bold text-gray-900 p-4 uppercase"},je={class:"flex flex-col gap-4 mb-5"},De={class:"flex flex-row justify-between gap-4"},Pe={class:"w-full flex flex-col"},Ie={class:"w-full flex flex-col"},qe={class:"border border-t-0 border-gray-700 shadow-sm uppercase text-black bg-white"},Le={class:"w-1/2 px-4 py-4 font-medium border-r border-gray-700 flex items-center justify-center"},Ue={class:"w-1/4 px-4 py-4 flex items-center text-black font-semibold"},Be={class:"flex h-[100px]"},Fe=e("div",{class:"w-1/2 px-4 py-4 font-medium border-r border-gray-700 flex items-center justify-center"}," Remarks ",-1),Me={class:"w-1/2 px-4 py-4 font-semibold"},Ve={id:"approvals",class:"w-full mb-6"},He={id:"footer",class:"pb-4"},Je={key:0,class:"flex flex-col sm:flex-row gap-2 justify-end"},Ye=D({__name:"SystemDetailsLayout",props:{title:{type:String,required:!0},data:{type:Object,required:!0}},setup(u){const t=u,n=q(),g=B(),{remarks:r}=P(n),i=async(p,l)=>{try{p==="approve"?await n.approveApprovalForm(l):await n.denyApprovalForm(l),g.add({type:"success",text:n.successMessage}),n.$reset(),M({path:"/inventory/procurement/canvass-summary"})}catch(d){g.add({type:"error",text:(d==null?void 0:d.message)||"Something went wrong."})}};return(p,l)=>{var $,T,S,E,N;const d=O,f=j,m=L,R=I,C=Y;return s(),o("div",Ae,[e("div",Ee,[y(d,{page:{currentPage:1,totalPages:1}}),u.title?(s(),o("div",Ne,[e("h3",Oe,a(u.title),1)])):k("",!0),e("div",je,[e("div",De,[e("div",Pe,[(s(!0),o(b,null,x({DATE:t.data.date,"PROJECT CODE":t.data.project_code,"CONSO/RS REFERENCE NUMBER":t.data.reference_number},(_,h)=>(s(),v(f,{key:h,title:h,value:_},null,8,["title","value"]))),128))]),e("div",Ie,[(s(!0),o(b,null,x({"CS NUMBER":t.data.cs_number},(_,h)=>(s(),v(f,{key:h,title:h,value:_},null,8,["title","value"]))),128))])]),e("div",null,[y(m,{data:t.data},null,8,["data"]),e("div",qe,[(s(!0),o(b,null,x({"Terms and Conditions":t.data.terms_of_payment,Availability:t.data.availability,"Delivery Terms":t.data.delivery_terms},(_,h)=>(s(),o("div",{key:h,class:"flex h-[60px] border-b border-gray-700 last:border-b-0"},[e("div",Le,a(h),1),e("div",Ue,a(_||"-"),1)]))),128)),e("div",Be,[Fe,e("div",Me,a(t.data.remarks||"No remarks"),1)])])]),e("div",Ve,[y(R,{approvals:($=t.data)==null?void 0:$.approvals},null,8,["approvals"])]),e("div",He,[(T=t.data)!=null&&T.next_approval&&("useCheckIsCurrentUser"in p?p.useCheckIsCurrentUser:c(z))((E=(S=t.data)==null?void 0:S.next_approval)==null?void 0:E.user_id)?(s(),o("div",Je,[y(C,{"deny-remarks":c(r),"onUpdate:denyRemarks":l[0]||(l[0]=_=>F(r)?r.value=_:null),"request-id":(N=t.data)==null?void 0:N.id,onApprove:l[1]||(l[1]=_=>i("approve",_)),onDeny:l[2]||(l[2]=_=>i("deny",_))},null,8,["deny-remarks","request-id"])])):k("",!0)])])])])}}}),ze={class:"text-gray-900 p-2"},Ge={class:"flex flex-col gap-4 pt-4 w-full"},Ke={key:0,class:"basis-[10%] grow-1 shrink-0 flex items-center justify-center rounded-t mb-4"},Qe={class:"pl-4 text-2xl font-bold text-gray-900 p-4 uppercase"},We={class:"flex flex-col gap-4 mb-5"},Xe={class:"flex flex-row justify-between gap-4"},Ze={class:"w-full flex flex-col"},et={class:"w-full flex flex-col"},tt={class:"border border-t-0 border-gray-700 shadow-sm uppercase text-black bg-white"},st={class:"w-1/2 px-4 py-4 font-medium border-r border-gray-700 flex items-center justify-center"},rt={class:"w-1/4 px-4 py-4 flex items-center text-black font-semibold"},at={class:"flex h-[100px]"},ot=e("div",{class:"w-1/2 px-4 py-4 font-medium border-r border-gray-700 flex items-center justify-center"}," Remarks ",-1),nt={class:"w-1/2 px-4 py-4 font-semibold"},it={id:"approvals",class:"w-full mt-4"},lt=D({__name:"PrintDetailsLayout",props:{title:{type:String,required:!0},data:{type:Object,required:!0}},setup(u){const t=u;return(n,g)=>{var d;const r=O,i=j,p=L,l=I;return s(),o("div",ze,[e("div",Ge,[y(r,{page:{currentPage:1,totalPages:1}}),u.title?(s(),o("div",Ke,[e("h3",Qe,a(u.title),1)])):k("",!0),e("div",We,[e("div",Xe,[e("div",Ze,[(s(!0),o(b,null,x({DATE:t.data.date,"PROJECT CODE":t.data.project_code,"CONSO/RS REFERENCE NUMBER":t.data.reference_number},(f,m)=>(s(),v(i,{key:m,title:m,value:f},null,8,["title","value"]))),128))]),e("div",et,[(s(!0),o(b,null,x({"CS NUMBER":t.data.cs_number},(f,m)=>(s(),v(i,{key:m,title:m,value:f},null,8,["title","value"]))),128))])]),e("div",null,[y(p,{data:t.data},null,8,["data"]),e("div",tt,[(s(!0),o(b,null,x({"Terms and Conditions":t.data.terms_of_payment,Availability:t.data.availability,"Delivery Terms":t.data.delivery_terms},(f,m)=>(s(),o("div",{key:m,class:"flex h-[60px] border-b border-gray-700 last:border-b-0"},[e("div",st,a(m),1),e("div",rt,a(f||"-"),1)]))),128)),e("div",at,[ot,e("div",nt,a(t.data.remarks||"No remarks"),1)])])])]),e("div",it,[y(l,{approvals:(d=u.data)==null?void 0:d.approvals,"signature-view":!0},null,8,["approvals"])])])])}}}),dt={key:1,class:"grid grid-cols-1 gap-4"},ct=e("h2",null," 404 NOT FOUND",-1),mt=[ct],jt={__name:"request-details",async setup(u){let t,n;const g=q(),{canvassSummary:r}=P(g),i=V(),p=H(!1);i.query.key?(p.value=!0,[t,n]=J(()=>g.getOne(i.query.key)),await t,n()):p.value=!1;const l=[{name:"Item Description",id:"item_id"},{name:"Specification",id:"specification"},{name:"Quantity",id:"qty"},{name:"UOM",id:"unit"},{name:"Preferred Brand",id:"preferred_brand"},{name:"Actual Brand",id:"actual_brand"},{name:"Unit Price",id:"unit_price"},{name:"Remarks During Canvass",id:"remarks"}];return Z({title:"Canvass Summary"}),(d,f)=>{const m=U,R=Ye,C=Q,$=lt,T=W,S=X;return s(),v(S,{"if-access":("useCheckAccessibility"in d?d.useCheckAccessibility:c(G))([("AccessibilityTypes"in d?d.AccessibilityTypes:c(K)).INVENTORY_PROCUREMENT_CANVASSSUMMARY_GROUP])},{default:w(()=>[y(C,{title:"Canvass Summary",class:"w-full",loading:c(r).isLoading},{"header-options":w(()=>[y(m,{"prev-page":"/inventory/procurement/canvass-summary"})]),default:w(()=>[c(p)?(s(),v(T,{key:0},{"system-layout":w(()=>[y(C,null,{default:w(()=>[c(r).details?(s(),v(R,{key:0,title:"Canvass Summary",data:c(r).details},null,8,["data"])):k("",!0)]),_:1})]),"print-layout":w(()=>[c(r).details?(s(),v($,{key:0,title:"Canvass Summary",data:c(r).details,"header-columns":l},null,8,["data"])):k("",!0)]),_:1})):(s(),o("div",dt,mt))]),_:1},8,["loading"])]),_:1},8,["if-access"])}}};export{jt as default};
