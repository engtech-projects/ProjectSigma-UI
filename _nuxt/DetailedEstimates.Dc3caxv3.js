import ce from"./Icon.CrHlyQOo.js";import{_ as ue}from"./LoadScreen.Ckg45_qm.js";import{a as de,u as le,M as X,_ as xe,c as Ce,e as ve,F as $e}from"./FileSaver.min.B12ME4da.js";import{_ as me}from"./ModalContainer.C773N-tg.js";import{f as F,r as I,B as pe,o as a,h as _e,w as ie,a as e,b as w,u as t,g as we,c as l,x as U,A as re,j as k,F as P,i as B,t as r,D as he,s as ye,C as ge,d as H,R as Ee,m as Te,E as De}from"./entry.32UGFqj-.js";import{D as d}from"./enums.DZVv3ml5.js";import{a as _,g as ke}from"./Utilities.DofxnkSu.js";import{u as be}from"./projects.BWwh_Xrk.js";import{_ as Re}from"./LayoutPrintAdvanced.BMLOtvVg.js";import{_ as Ne}from"./PsButton.Cqg1ndZS.js";const Me={class:"flex flex-col p-4"},Ae={class:"flex items-center justify-between mb-8"},Se=e("div",{class:"flex items-end gap-2"},[e("h1",{class:"text-3xl uppercase"}," Create Resource ")],-1),Oe=["onSubmit"],Le={key:0,class:"grid grid-cols-2 gap-6 mb-4"},qe={class:"flex flex-col"},Ie={key:0,class:"text-md text-gray-700"},Pe={key:1,class:"text-md text-gray-700"},je={class:"grid grid-cols-2 gap-6 mb-4"},Ue={class:"flex flex-col"},Xe=e("label",{class:"text-md text-gray-700"}," Resource Name ",-1),He=e("option",{value:"",disabled:"",selected:""}," Select Resource Name ",-1),Be=["value"],Fe={class:"flex flex-col"},Ve={key:0,class:"text-md text-gray-700"},ze={key:1,class:"text-md text-gray-700"},Qe={class:"grid grid-cols-2 gap-6 mb-4"},Ge={class:"flex flex-col"},We={key:0,class:"text-md text-gray-700"},Ye={key:1,class:"text-md text-gray-700"},Ke={class:"flex flex-col"},Je=e("label",{class:"text-md text-gray-700"}," Unit ",-1),Ze={key:0,value:"hourly"},et=e("option",{value:"",disabled:"",selected:""}," Select Unit ",-1),tt=["value"],st={class:"flex flex-col mb-4"},ot=e("label",{class:"text-md text-gray-700"}," Description ",-1),nt={class:"flex justify-end"},at={key:0,class:"bg-green-500 hover:bg-green-600 active:bg-green-700 select-none text-white rounded-lg text-sm w-36 h-10",type:"submit"},lt={key:1,class:"bg-green-500 hover:bg-green-600 active:bg-green-700 select-none text-white rounded-lg text-sm w-36 h-10",type:"submit"},rt=F({__name:"ModalsResource",props:{showModal:{type:Boolean,required:!0,default:!1},taskId:{type:Number,required:!0}},emits:["hideModal"],setup(E,{emit:i}){const u=E,C=de(),o=le(),m=I(!1),$=pe(),g=async()=>{try{m.value=!0,o.resource.task_id=u.taskId,o.resource.id?await o.editResource():await o.createResource(),o.errorMessage!==""?$.add({type:"error",text:o.errorMessage}):$.add({type:"success",text:o.successMessage})}catch{$.add({type:"error",text:o.errorMessage})}finally{m.value=!1,C.getTask(u.taskId),i("hideModal")}};return(s,c)=>{const T=ue,N=ce,D=me;return a(),_e(D,{show:E.showModal,local:!0,header:!1,bg:"bg-gray-50",size:"modal-lg",onHide:c[7]||(c[7]=p=>i("hideModal"))},{default:ie(()=>[e("div",Me,[w(T,{"is-loading":t(m)},null,8,["is-loading"]),e("div",Ae,[Se,w(N,{name:"material-symbols:close-rounded",class:"h-6 w-6 text-gray-500 hover:text-gray-800 cursor-pointer",onClick:c[0]||(c[0]=p=>i("hideModal"))})]),e("form",{onSubmit:we(g,["prevent"])},[t(o).resource.resource_type===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).labor||t(o).resource.resource_type===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).equipment?(a(),l("div",Le,[e("div",null,[e("div",qe,[t(o).resource.resource_type===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).labor?(a(),l("label",Ie," Number of Person ")):(a(),l("label",Pe," Number of Equipment ")),U(e("input",{"onUpdate:modelValue":c[1]||(c[1]=p=>t(o).resource.unit_count=p),type:"number",step:"any",class:"border border-gray-300 rounded-md",min:"1",required:""},null,512),[[re,t(o).resource.unit_count]])])])])):k("",!0),e("div",je,[e("div",Ue,[Xe,U(e("select",{"onUpdate:modelValue":c[2]||(c[2]=p=>t(o).resource.resource_type=p),class:"border border-gray-300 rounded-md",disabled:""},[He,(a(!0),l(P,null,B(t(o).resourceNames,(p,M)=>(a(),l("option",{key:M,value:p.value},r(p.label),9,Be))),128))],512),[[he,t(o).resource.resource_type]])]),e("div",null,[e("div",Fe,[t(o).resource.resource_type===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).labor||t(o).resource.resource_type===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).equipment?(a(),l("label",Ve," Hourly Rate ")):(a(),l("label",ze," Unit Price ")),U(e("input",{"onUpdate:modelValue":c[3]||(c[3]=p=>t(o).resource.unit_cost=p),type:"number",step:"any",class:"border border-gray-300 rounded-md",placeholder:"0.00",required:""},null,512),[[re,t(o).resource.unit_cost]])])])]),e("div",Qe,[e("div",Ge,[t(o).resource.resource_type===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).labor||t(o).resource.resource_type===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).equipment?(a(),l("label",We," No. of Hours ")):(a(),l("label",Ye," Quantity ")),U(e("input",{"onUpdate:modelValue":c[4]||(c[4]=p=>t(o).resource.quantity=p),type:"number",step:"any",class:"border border-gray-300 rounded-md",required:""},null,512),[[re,t(o).resource.quantity]])]),e("div",Ke,[Je,U(e("select",{"onUpdate:modelValue":c[5]||(c[5]=p=>t(o).resource.unit=p),class:"border border-gray-300 rounded-md uppercase",required:""},[t(o).resource.resource_type===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).labor||t(o).resource.resource_type===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).equipment?(a(),l("option",Ze," Hourly ")):(a(),l(P,{key:1},[et,(a(!0),l(P,null,B(t(o).units,p=>(a(),l("option",{key:p.name,value:p.symbol},r(p.name+" ("+p.symbol+")"),9,tt))),128))],64))],512),[[he,t(o).resource.unit]])])]),e("div",st,[ot,U(e("textarea",{"onUpdate:modelValue":c[6]||(c[6]=p=>t(o).resource.description=p),class:"border border-gray-300 rounded-md w-full h-56 resize-none",required:""},null,512),[[re,t(o).resource.description]])]),e("div",nt,[t(o).resource.id?(a(),l("button",lt," Update Resource ")):(a(),l("button",at," Create Resource "))])],40,Oe)])]),_:1},8,["show"])}}}),it={class:"flex flex-col border-gray-800 mb-8"},ct={class:"flex flex-col gap-2 border border-black p-2"},dt={class:"grid grid-cols-5"},ut=e("span",{class:"col-span-1 font-semibold"},"Contract ID",-1),pt={class:"col-span-4"},_t=e("b",{class:"mr-2"},":",-1),yt={class:"grid grid-cols-5"},ht=e("span",{class:"col-span-1 font-semibold"},"Contract Name",-1),mt={class:"col-span-4"},gt=e("b",{class:"mr-2"},":",-1),bt={class:"grid grid-cols-5"},ft=e("span",{class:"col-span-1 font-semibold"},"Contract Location",-1),xt={class:"col-span-4"},Ct=e("b",{class:"mr-2"},":",-1),vt=e("div",{class:"flex justify-center py-2 border-2 border-b border-black"},[e("h1",{class:"text-lg font-semibold text-black uppercase text-center"}," Detailed Estimates ")],-1),$t={class:"border border-collapse border-gray-800 w-full"},wt=e("thead",null,[e("tr",null,[e("th",{class:"uppercase py-2 font-normal border-b-0 w-2/12"}," Pay Item No. "),e("th",{class:"uppercase py-2 font-normal border-b-0 w-3/12"}," Description "),e("th",{class:"uppercase py-2 font-normal border-b-0 w-1/12"}," Unit "),e("th",{class:"uppercase py-2 font-normal border-b-0 w-1/12"}," Qty "),e("th",{class:"uppercase py-2 font-normal border-b-0 w-2/12"}," Unit Price "),e("th",{class:"uppercase py-2 font-normal border-b-0 w-3/12"}," Amount ")])],-1),Et={class:"text-center"},Tt={class:"p-2 text-center"},Dt={class:"p-2 text-center"},kt={class:"p-2 text-center"},Rt={class:"p-2 text-center"},Nt={class:"p-2 text-center"},Mt={class:"border-y border-gray-700"},At={colspan:"6",class:"px-2 py-1"},St={class:"flex justify-between"},Ot={class:"font-semibold uppercase"},Lt={key:0,class:"flex gap-1 justify-end"},qt=["onClick"],It={key:0,class:"border-b border-gray-700"},Pt=e("td",null,null,-1),jt=e("td",{class:"uppercase text-xs font-semibold pt-2 text-center"}," Name and Specification ",-1),Ut={key:0,class:"uppercase text-xs font-semibold pt-2 text-center"},Xt={key:1,class:"uppercase text-xs font-semibold pt-2 text-center"},Ht={key:2,class:"uppercase text-xs font-semibold pt-2 text-center"},Bt={key:3,class:"uppercase text-xs font-semibold pt-2 text-center"},Ft={key:4,class:"uppercase text-xs font-semibold pt-2 text-center"},Vt={key:5,class:"uppercase text-xs font-semibold pt-2 text-center"},zt={key:6,class:"uppercase text-xs font-semibold pt-2 text-center"},Qt=e("td",{class:"uppercase text-xs font-semibold pt-2 text-center"}," Amount ",-1),Gt=e("td",{class:"text-center"},null,-1),Wt={class:"p-2 text-center"},Yt={key:0,class:"p-2 text-center"},Kt={key:1,class:"p-2 text-center"},Jt={key:2,class:"p-2 text-center"},Zt={key:3,class:"p-2 text-center"},es={key:4,class:"p-2 text-center"},ts={key:5,class:"p-2 text-center"},ss={class:""},os={class:"flex"},ns={class:"flex items-center justify-center flex-1"},as={class:"flex flex-col p-2 justify-center gap-2"},ls=["onClick"],rs=["onClick"],is={key:1,class:"border-b border-gray-700 text-sm font-bold"},cs={class:"text-right px-2",colspan:"5"},ds={key:0,class:"text-right px-2"},us={key:1,class:"text-right px-2"},ps={key:2,class:"text-right px-2"},_s=e("td",{class:"font-semibold uppercase px-2"}," D. ",-1),ys=e("td",{class:"pX-2 uppercase"}," Direct Cost ",-1),hs=e("td",{class:"pX-2 text-center"},null,-1),ms=e("td",{class:"pX-2 text-center"},null,-1),gs=e("td",{class:"text-right px-2"},null,-1),bs={class:"text-right px-2"},fs=e("td",{class:"font-semibold uppercase px-2"}," E. ",-1),xs=e("td",{class:"pX-2 uppercase"}," O.C.M ",-1),Cs=e("td",{class:"pX-2 text-center"}," 10.00% ",-1),vs=e("td",{class:"pX-2 text-center"},null,-1),$s=e("td",{class:"text-right px-2"}," of D ",-1),ws={class:"text-right px-2"},Es=e("td",{class:"font-semibold uppercase px-2"}," F. ",-1),Ts=e("td",{class:"pX-2 uppercase"}," Contractors Profit ",-1),Ds=e("td",{class:"pX-2 text-center"}," 10.00% ",-1),ks=e("td",{class:"pX-2 text-center"},null,-1),Rs=e("td",{class:"text-right px-2"}," of D ",-1),Ns={class:"text-right px-2"},Ms=e("td",{class:"font-semibold uppercase px-2"}," g. ",-1),As=e("td",{class:"pX-2 uppercase"}," vAT (Where Applicable) ",-1),Ss=e("td",{class:"pX-2 text-center"}," 12.00% ",-1),Os=e("td",{class:"pX-2 text-center"},null,-1),Ls=e("td",{class:"text-right px-2"}," of (D + E + F) ",-1),qs={class:"text-right px-2"},Is=e("td",{class:"font-semibold uppercase px-2"}," H. ",-1),Ps=e("td",{class:"pX-2 uppercase"}," Total Cost ",-1),js=e("td",{class:"pX-2 text-center"},null,-1),Us=e("td",{class:"pX-2 text-center"},null,-1),Xs=e("td",{class:"text-right px-2"}," (D + E + F + G) ",-1),Hs={class:"text-right px-2"},Bs=e("td",{class:"font-semibold uppercase px-2"}," I. ",-1),Fs=e("td",{class:"pX-2 uppercase"}," Unit Cost Per ",-1),Vs={class:"pX-2 text-center"},zs=e("td",{class:"pX-2 text-center"},null,-1),Qs=e("td",{class:"pX-2 text-center"},null,-1),Gs={class:"text-right px-2"},Ws=F({__name:"DetailsTaskSystemView",setup(E){const i=be(),u=le(),C=de(),{task:o}=ye(C),m=I(!1),$=I(!1),g=I(!1),s=n=>{const f=Math.floor(n/26),R=n%26;return String.fromCharCode(65+R)+(f>0?String.fromCharCode(65+f-1):"")},c=n=>o.value.resources.filter(f=>f.resource_name===n),T=n=>{g.value=!0,u.reset(),u.resource.resource_type=n,u.resource.task_id=o.value.id},N=n=>{g.value=!0,u.reset(),u.resource=n,u.resource.resource_type=n.resource_type},D=I(!1),p=pe(),M=async n=>{try{D.value=!0,await u.deleteResource(n),u.errorMessage!==""?p.add({type:"error",text:u.errorMessage}):p.add({type:"success",text:u.successMessage})}catch(f){u.errorMessage=f,p.add({type:"error",text:u.errorMessage})}finally{C.getTask(o.value.id),D.value=!1}},j=ge(()=>{const n=u.resourceNames;return!Array.isArray(n)||n.length===0?[]:n.filter(f=>X.includes(f.label)).sort((f,R)=>X.indexOf(f.label)-X.indexOf(R.label))});return(n,f)=>{var v,q,h,V,z,Q,G,W,Y,K,J,Z,ee,x,te;const R=ue,A=ce,S=xe,O=Ce,L=rt;return a(),l("div",it,[e("div",ct,[e("div",dt,[ut,e("span",pt,[_t,H(" "+r(((q=(v=t(i))==null?void 0:v.information)==null?void 0:q.contract_id)??((h=t(C))==null?void 0:h.task.project_contract_id)),1)])]),e("div",yt,[ht,e("span",mt,[gt,H(" "+r(((z=(V=t(i))==null?void 0:V.information)==null?void 0:z.name)??((Q=t(C))==null?void 0:Q.task.project_name)),1)])]),e("div",bt,[ft,e("span",xt,[Ct,H(" "+r(((W=(G=t(i))==null?void 0:G.information)==null?void 0:W.location)??((Y=t(C))==null?void 0:Y.task.project_location)),1)])])]),vt,e("table",$t,[wt,e("tbody",null,[e("tr",null,[e("td",Et,r(t(o).name),1),e("td",Tt,r(t(o).description),1),e("td",Dt,r(t(o).unit),1),e("td",kt,r(t(o).quantity),1),e("td",Rt,r(t(o).unit_price_with_unit),1),e("td",Nt,r(("accountingCurrency"in n?n.accountingCurrency:t(_))(t(o).amount)),1)])]),w(R,{"is-loading":t(D)},null,8,["is-loading"]),(a(!0),l(P,null,B(t(j),(y,se)=>{var oe,ne,ae;return a(),l("tbody",{key:se},[e("tr",Mt,[e("td",At,[e("div",St,[e("span",Ot,r(s(se))+". "+r(y.label),1),t(i).viewState?k("",!0):(a(),l("div",Lt,[e("button",{class:"bg-green-500 hover:bg-green-600 active:bg-green-700 select-none text-white rounded-lg text-xs px-4 h-6",onClick:b=>T(y.value)}," Add Resource ",8,qt)]))])])]),c(y.label).length>0?(a(),l("tr",It,[Pt,jt,y.value.toLowerCase()===("DetailedEstimatesType"in n?n.DetailedEstimatesType:t(d)).labor?(a(),l("td",Ut," No of Person ")):y.value.toLowerCase()===("DetailedEstimatesType"in n?n.DetailedEstimatesType:t(d)).equipment?(a(),l("td",Xt," No of Equipment ")):(a(),l("td",Ht," Quantity ")),y.value.toLowerCase()===("DetailedEstimatesType"in n?n.DetailedEstimatesType:t(d)).labor||y.value.toLowerCase()===("DetailedEstimatesType"in n?n.DetailedEstimatesType:t(d)).equipment?(a(),l("td",Bt," No. of Hrs. ")):(a(),l("td",Ft," Unit ")),y.value.toLowerCase()===("DetailedEstimatesType"in n?n.DetailedEstimatesType:t(d)).labor||y.value.toLowerCase()===("DetailedEstimatesType"in n?n.DetailedEstimatesType:t(d)).equipment?(a(),l("td",Vt," Hourly Rate ")):(a(),l("td",zt," Unit Cost ")),Qt])):k("",!0),(a(!0),l(P,null,B(c(y.label),b=>(a(),l("tr",{key:b.id},[Gt,e("td",Wt,r(b.description),1),y.value.toLowerCase()===("DetailedEstimatesType"in n?n.DetailedEstimatesType:t(d)).labor||y.value.toLowerCase()===("DetailedEstimatesType"in n?n.DetailedEstimatesType:t(d)).equipment?(a(),l("td",Yt,r(b.unit_count),1)):(a(),l("td",Kt,r(b.quantity),1)),y.value.toLowerCase()===("DetailedEstimatesType"in n?n.DetailedEstimatesType:t(d)).labor||y.value.toLowerCase()===("DetailedEstimatesType"in n?n.DetailedEstimatesType:t(d)).equipment?(a(),l("td",Jt,r(b.quantity),1)):(a(),l("td",Zt,r(b.unit),1)),y.value.toLowerCase()===("DetailedEstimatesType"in n?n.DetailedEstimatesType:t(d)).labor||y.value.toLowerCase()===("DetailedEstimatesType"in n?n.DetailedEstimatesType:t(d)).equipment?(a(),l("td",es,r(b.unit_cost+" / hour"),1)):(a(),l("td",ts,r(b.unit_cost+" / "+b.unit),1)),e("td",ss,[e("div",os,[e("div",ns,r(b.total_cost),1),e("div",as,[e("button",{class:"bg-green-500 hover:bg-green-600 active:bg-green-700 select-none text-white rounded-md text-xs w-6 h-6",onClick:fe=>N(b)},[w(A,{name:"material-symbols:edit",color:"white",class:"rounded h-6 w-6 p-1"})],8,ls),e("button",{class:"bg-red-500 hover:bg-red-600 active:bg-red-700 select-none text-white rounded-md text-xs w-6 h-6",onClick:fe=>M(b.id)},[w(A,{name:"ion:trash",color:"white",class:"rounded h-6 w-6 p-1"})],8,rs)])])])]))),128)),c(y.label).length>0?(a(),l("tr",is,[e("td",cs," Direct "+r(y.label)+" Cost ",1),y.value.toLowerCase()===("DetailedEstimatesType"in n?n.DetailedEstimatesType:t(d)).material?(a(),l("td",ds,r(("accountingCurrency"in n?n.accountingCurrency:t(_))((oe=t(o))==null?void 0:oe.total_materials_amount)),1)):k("",!0),y.value.toLowerCase()===("DetailedEstimatesType"in n?n.DetailedEstimatesType:t(d)).labor?(a(),l("td",us,r(("accountingCurrency"in n?n.accountingCurrency:t(_))((ne=t(o))==null?void 0:ne.total_labor_amount)),1)):k("",!0),y.value.toLowerCase()===("DetailedEstimatesType"in n?n.DetailedEstimatesType:t(d)).equipment?(a(),l("td",ps,r(("accountingCurrency"in n?n.accountingCurrency:t(_))((ae=t(o))==null?void 0:ae.total_equipment_amount)),1)):k("",!0)])):k("",!0)])}),128)),e("tbody",null,[e("tr",null,[_s,ys,hs,ms,gs,e("td",bs,r(("accountingCurrency"in n?n.accountingCurrency:t(_))((K=t(o))==null?void 0:K.direct_cost)),1)]),e("tr",null,[fs,xs,Cs,vs,$s,e("td",ws,r(("accountingCurrency"in n?n.accountingCurrency:t(_))((J=t(o))==null?void 0:J.ocm)),1)]),e("tr",null,[Es,Ts,Ds,ks,Rs,e("td",Ns,r(("accountingCurrency"in n?n.accountingCurrency:t(_))((Z=t(o))==null?void 0:Z.contractors_profit)),1)]),e("tr",null,[Ms,As,Ss,Os,Ls,e("td",qs,r(("accountingCurrency"in n?n.accountingCurrency:t(_))((ee=t(o))==null?void 0:ee.vat)),1)]),e("tr",null,[Is,Ps,js,Us,Xs,e("td",Hs,r(("accountingCurrency"in n?n.accountingCurrency:t(_))((x=t(o))==null?void 0:x.grand_total)),1)]),e("tr",null,[Bs,Fs,e("td",Vs,r(t(o).unit),1),zs,Qs,e("td",Gs,r(("accountingCurrency"in n?n.accountingCurrency:t(_))((te=t(o))==null?void 0:te.unit_cost_per)),1)])])]),w(S,{"show-modal":t(m),onHideModal:f[0]||(f[0]=y=>m.value=!1)},null,8,["show-modal"]),w(O,{"show-modal":t($),onHideModal:f[1]||(f[1]=y=>$.value=!1)},null,8,["show-modal"]),w(L,{"show-modal":t(g),"task-id":t(o).id,onHideModal:f[2]||(f[2]=y=>g.value=!1)},null,8,["show-modal","task-id"])])}}}),Ys={class:"w-full flex flex-col gap-8 text-sm"},Ks=e("div",{class:"w-full flex justify-start"},[e("span",null,"PREPARED BY:")],-1),Js={class:"w-full flex flex-row justify-between"},Zs={class:"flex flex-col gap-1"},eo={class:"font-bold uppercase"},to={class:"flex"},so={class:"flex flex-row items-start gap-4"},oo=e("span",null,"DATE:",-1),no={class:"border-b border-black px-6 text-center inline-block"},ao={__name:"preparedByWithDate",props:{name:{type:String,required:!0,default:"Administrator"},position:{type:String,required:!0,default:"Administrator"},license:{type:String,required:!0,default:"EVENPAR CONSTRUCTION AND DEVELOPMENT CORPORATION"},date:{type:String,required:!0,default:"N/A"}},setup(E){return(i,u)=>(a(),l("div",Ys,[Ks,e("div",Js,[e("div",Zs,[e("span",eo,r(E.name),1),e("span",null,r(E.position),1),e("span",null,r(E.license),1)]),e("div",to,[e("div",so,[oo,e("span",no,r(("fullDate"in i?i.fullDate:t(ke))(new Date(E.date))),1)])])])]))}},lo={class:"bg-white"},ro={class:"flex flex-col gap-2 border border-black p-2"},io={class:"grid grid-cols-5"},co=e("span",{class:"col-span-1 font-semibold"},"Contract ID",-1),uo={class:"col-span-4"},po=e("b",{class:"mr-2"},":",-1),_o={class:"grid grid-cols-5"},yo=e("span",{class:"col-span-1 font-semibold"},"Contract Name",-1),ho={class:"col-span-4"},mo=e("b",{class:"mr-2"},":",-1),go={class:"grid grid-cols-5"},bo=e("span",{class:"col-span-1 font-semibold"},"Contract Location",-1),fo={class:"col-span-4"},xo=e("b",{class:"mr-2"},":",-1),Co={class:"flex flex-col border-gray-800 pb-6"},vo=e("div",{class:"flex justify-center py-2 border-2 border-b border-black"},[e("h1",{class:"text-lg font-semibold text-black uppercase text-center"}," Detailed Estimates ")],-1),$o={class:"border border-collapse border-gray-800 w-full"},wo=e("thead",null,[e("tr",null,[e("th",{class:"uppercase py-2 font-normal border-b-0 w-2/12"}," ITEM NO. "),e("th",{class:"uppercase py-2 font-normal border-b-0 w-3/12"}," ITEM DESCRIPTION "),e("th",{class:"uppercase py-2 font-normal border-b-0 w-1/12"}," QTY "),e("th",{class:"uppercase py-2 font-normal border-b-0 w-1/12"}," UNIT "),e("th",{class:"uppercase py-2 font-normal border-b-0 w-2/12"}),e("th",{class:"uppercase py-2 font-normal border-b-0 w-3/12"})])],-1),Eo={class:"text-center"},To={class:"p-2 text-center"},Do={class:"p-2 text-center"},ko={class:"p-2 text-center"},Ro=e("td",{class:"p-2 text-center"},null,-1),No=e("td",{class:""},null,-1),Mo={class:"border-y border-gray-700"},Ao={colspan:"6",class:"px-2 py-1"},So={class:"flex justify-between"},Oo={class:"font-semibold uppercase"},Lo={key:0,class:"border border-gray-700"},qo=e("td",null,null,-1),Io=e("td",{class:"uppercase text-xs font-semibold pt-2 text-left"}," Name and Specification ",-1),Po={key:0,class:"uppercase text-xs font-semibold pt-2 text-center"},jo={key:1,class:"uppercase text-xs font-semibold pt-2 text-center"},Uo={key:2,class:"uppercase text-xs font-semibold pt-2 text-center"},Xo={key:3,class:"uppercase text-xs font-semibold pt-2 text-center"},Ho={key:4,class:"uppercase text-xs font-semibold pt-2 text-center"},Bo={key:5,class:"uppercase text-xs font-semibold pt-2 text-center"},Fo={key:6,class:"uppercase text-xs font-semibold pt-2 text-center"},Vo=e("td",{class:"uppercase text-xs font-semibold pt-2 text-right pr-4"}," Amount ",-1),zo=e("td",{class:"text-center"},null,-1),Qo={class:"p-2"},Go={key:0,class:"p-2 text-center"},Wo={key:1,class:"p-2 text-center"},Yo={key:2,class:"p-2 text-center"},Ko={key:3,class:"p-2 text-center"},Jo={key:4,class:"p-2 text-center"},Zo={key:5,class:"p-2 text-center"},en={class:"p-2 text-right"},tn={key:1,class:"border-b border-gray-700 text-sm font-bold"},sn={class:"text-right px-2",colspan:"5"},on={key:0,class:"text-right px-2"},nn={key:1,class:"text-right px-2"},an={key:2,class:"text-right px-2"},ln=e("td",{class:"font-semibold uppercase px-2"}," D. ",-1),rn=e("td",{class:"pX-2 uppercase"}," Direct Cost ",-1),cn=e("td",{class:"pX-2 text-center"},null,-1),dn=e("td",{class:"pX-2 text-center"},null,-1),un=e("td",{class:"text-right px-2"},null,-1),pn={class:"text-right px-2"},_n=e("td",{class:"font-semibold uppercase px-2"}," E. ",-1),yn=e("td",{class:"pX-2 uppercase"}," O.C.M ",-1),hn=e("td",{class:"pX-2 text-center"}," 10.00% ",-1),mn=e("td",{class:"pX-2 text-center"},null,-1),gn=e("td",{class:"text-right px-2"}," of D ",-1),bn={class:"text-right px-2"},fn=e("td",{class:"font-semibold uppercase px-2"}," F. ",-1),xn=e("td",{class:"pX-2 uppercase"}," Contractors Profit ",-1),Cn=e("td",{class:"pX-2 text-center"}," 10.00% ",-1),vn=e("td",{class:"pX-2 text-center"},null,-1),$n=e("td",{class:"text-right px-2"}," of D ",-1),wn={class:"text-right px-2"},En=e("td",{class:"font-semibold uppercase px-2"}," g. ",-1),Tn=e("td",{class:"pX-2 uppercase"}," vAT (Where Applicable) ",-1),Dn=e("td",{class:"pX-2 text-center"}," 12.00% ",-1),kn=e("td",{class:"pX-2 text-center"},null,-1),Rn=e("td",{class:"text-right px-2"}," of (D + E + F) ",-1),Nn={class:"text-right px-2"},Mn=e("td",{class:"font-semibold uppercase px-2"}," H. ",-1),An=e("td",{class:"pX-2 uppercase"}," Total Cost ",-1),Sn=e("td",{class:"pX-2 text-center"},null,-1),On=e("td",{class:"pX-2 text-center"},null,-1),Ln=e("td",{class:"text-right px-2"}," (D + E + F + G) ",-1),qn={class:"text-right px-2"},In=e("td",{class:"font-semibold uppercase px-2"}," I. ",-1),Pn=e("td",{class:"pX-2 uppercase"}," Unit Cost Per ",-1),jn={class:"pX-2 text-center"},Un=e("td",{class:"pX-2 text-center"},null,-1),Xn=e("td",{class:"text-right px-2"},null,-1),Hn={class:"text-right px-2"},Bn={class:"flex flex-row items-center justify-between mt-16"},Fn=F({__name:"DetailedEstimates",setup(E){const i=be(),u=le(),C=de(),{task:o}=ye(C),m=s=>{const c=Math.floor(s/26),T=s%26;return String.fromCharCode(65+T)+(c>0?String.fromCharCode(65+c-1):"")},$=s=>o.value.resources.filter(c=>c.resource_name===s),g=ge(()=>{const s=u.resourceNames;return!Array.isArray(s)||s.length===0?[]:s.filter(c=>X.includes(c.label)).sort((c,T)=>X.indexOf(c.label)-X.indexOf(T.label))});return(s,c)=>{var D,p,M,j,n,f,R,A,S,O,L,v,q,h,V,z,Q,G,W,Y,K,J,Z,ee;const T=ue,N=ao;return a(),l("div",lo,[e("div",ro,[e("div",io,[co,e("span",uo,[po,H(" "+r(((p=(D=t(i))==null?void 0:D.information)==null?void 0:p.contract_id)??((j=(M=t(C))==null?void 0:M.task)==null?void 0:j.project_contract_id)),1)])]),e("div",_o,[yo,e("span",ho,[mo,H(" "+r(((f=(n=t(i))==null?void 0:n.information)==null?void 0:f.name)??((A=(R=t(C))==null?void 0:R.task)==null?void 0:A.project_name)),1)])]),e("div",go,[bo,e("span",fo,[xo,H(" "+r(((O=(S=t(i))==null?void 0:S.information)==null?void 0:O.location)??((v=(L=t(C))==null?void 0:L.task)==null?void 0:v.project_location)),1)])])]),e("div",Co,[vo,e("table",$o,[wo,e("tbody",null,[e("tr",null,[e("td",Eo,r(t(o).name),1),e("td",To,r(t(o).description),1),e("td",Do,r(t(o).quantity),1),e("td",ko,r(t(o).unit),1),Ro,No])]),w(T,{"is-loading":s.boardLoading},null,8,["is-loading"]),(a(!0),l(P,null,B(t(g),(x,te)=>{var y,se,oe,ne,ae;return a(),l("tbody",{key:te},[e("tr",Mo,[e("td",Ao,[e("div",So,[e("span",Oo,r(m(te))+". "+r(x.label),1)])])]),((y=$(x.label))==null?void 0:y.length)>0?(a(),l("tr",Lo,[qo,Io,x.label.toLowerCase()===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).labor?(a(),l("td",Po," No of Person ")):x.label.toLowerCase()===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).equipment?(a(),l("td",jo," No of Equipment ")):(a(),l("td",Uo," Quantity ")),x.label.toLowerCase()===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).labor||x.label.toLowerCase()===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).equipment?(a(),l("td",Xo," No. of Hrs. ")):(a(),l("td",Ho," Unit ")),x.label.toLowerCase()===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).labor||x.label.toLowerCase()===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).equipment?(a(),l("td",Bo," Hourly Rate ")):(a(),l("td",Fo," Unit Cost ")),Vo])):k("",!0),(a(!0),l(P,null,B($(x.label),b=>(a(),l("tr",{key:b.id},[zo,e("td",Qo,r(b.description),1),x.label.toLowerCase()===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).labor||x.label.toLowerCase()===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).equipment?(a(),l("td",Go,r(("accountingCurrency"in s?s.accountingCurrency:t(_))(b.unit_count)),1)):(a(),l("td",Wo,r(("accountingCurrency"in s?s.accountingCurrency:t(_))(b.quantity)),1)),x.label.toLowerCase()===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).labor||x.label.toLowerCase()===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).equipment?(a(),l("td",Yo,r(("accountingCurrency"in s?s.accountingCurrency:t(_))(b.quantity)),1)):(a(),l("td",Ko,r(b.unit),1)),x.label.toLowerCase()===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).labor||x.label.toLowerCase()===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).equipment?(a(),l("td",Jo,r(("accountingCurrency"in s?s.accountingCurrency:t(_))(b.unit_cost)+" / hour"),1)):(a(),l("td",Zo,r(("accountingCurrency"in s?s.accountingCurrency:t(_))(b.unit_cost)+" / "+b.unit),1)),e("td",en,r(("accountingCurrency"in s?s.accountingCurrency:t(_))(b.total_cost)),1)]))),128)),((se=$(x.label))==null?void 0:se.length)>0?(a(),l("tr",tn,[e("td",sn," Direct "+r(x.label)+" Cost ",1),x.value.toLowerCase()===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).material?(a(),l("td",on,r(("accountingCurrency"in s?s.accountingCurrency:t(_))((oe=t(o))==null?void 0:oe.total_materials_amount)),1)):k("",!0),x.value.toLowerCase()===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).labor?(a(),l("td",nn,r(("accountingCurrency"in s?s.accountingCurrency:t(_))((ne=t(o))==null?void 0:ne.total_labor_amount)),1)):k("",!0),x.value.toLowerCase()===("DetailedEstimatesType"in s?s.DetailedEstimatesType:t(d)).equipment?(a(),l("td",an,r(("accountingCurrency"in s?s.accountingCurrency:t(_))((ae=t(o))==null?void 0:ae.total_equipment_amount)),1)):k("",!0)])):k("",!0)])}),128)),e("tbody",null,[e("tr",null,[ln,rn,cn,dn,un,e("td",pn,r(("accountingCurrency"in s?s.accountingCurrency:t(_))((q=t(o))==null?void 0:q.direct_cost)),1)]),e("tr",null,[_n,yn,hn,mn,gn,e("td",bn,r(("accountingCurrency"in s?s.accountingCurrency:t(_))((h=t(o))==null?void 0:h.ocm)),1)]),e("tr",null,[fn,xn,Cn,vn,$n,e("td",wn,r(("accountingCurrency"in s?s.accountingCurrency:t(_))((V=t(o))==null?void 0:V.contractors_profit)),1)]),e("tr",null,[En,Tn,Dn,kn,Rn,e("td",Nn,r(("accountingCurrency"in s?s.accountingCurrency:t(_))((z=t(o))==null?void 0:z.vat)),1)]),e("tr",null,[Mn,An,Sn,On,Ln,e("td",qn,r(("accountingCurrency"in s?s.accountingCurrency:t(_))((Q=t(o))==null?void 0:Q.grand_total)),1)]),e("tr",null,[In,Pn,e("td",jn,r(t(o).unit),1),Un,Xn,e("td",Hn,r(("accountingCurrency"in s?s.accountingCurrency:t(_))((G=t(o))==null?void 0:G.unit_cost_per)),1)])])]),e("div",Bn,[w(N,{name:"ANGEL A. ABRAU",position:"Authorized Managing Officer",license:((W=t(i).information)==null?void 0:W.license)??((K=(Y=t(C))==null?void 0:Y.task)==null?void 0:K.project_license),date:((J=t(i).information)==null?void 0:J.created_at)??((ee=(Z=t(C))==null?void 0:Z.task)==null?void 0:ee.project_created_at)},null,8,["license","date"])])])])}}}),Vn=F({__name:"ExcelDetailedEstimates",props:{data:{type:Object,required:!0}},setup(E){const i=E,u=le(),C=g=>{const s=Math.floor(g/26),c=g%26;return String.fromCharCode(65+c)+(s>0?String.fromCharCode(65+s-1):"")};async function o(){var n,f,R,A,S,O,L;const g=new ve.Workbook,s=g.addWorksheet("Detailed Estimates");s.addRow(["Contract ID",i.data.project_contract_id]),s.addRow(["Contract Name",i.data.project_name]),s.addRow(["Contract Location",i.data.project_location]),s.addRow([]),s.addRow(["Detailed Estimates"]),s.mergeCells("A5:E5"),s.getCell("A5").alignment={horizontal:"center"},s.getCell("A5").font={bold:!0},s.getRow(5).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},s.addRow(["ITEM NO.","ITEM DESCRIPTION","QTY","UNIT"]),s.addRow([i.data.name,i.data.description,i.data.quantity,i.data.unit]),s.addRow([]),u.resourceNames.forEach((v,q)=>{s.addRow([C(q)+". "+v.label,"","","",""]).eachCell(h=>{h.border={top:{style:"thin"},bottom:{style:"thin"},left:{style:void 0},right:{style:void 0}},h.font={bold:!0},h.alignment={horizontal:"left"}}),v.label.toLowerCase()==="materials"&&s.addRow(["NAME AND SPECIFICATION","QUANTITY","UNIT","UNIT COST","AMOUNT"]).eachCell(h=>{h.border={top:{style:"thin"},bottom:{style:"thin"},left:{style:void 0},right:{style:void 0}},h.alignment={horizontal:"left"}}),v.label.toLowerCase()==="labor"&&s.addRow(["NAME AND SPECIFICATION","NO OF PERSON","NO. OF HRS.","HOURLY RATE","AMOUNT"]).eachCell(h=>{h.border={top:{style:"thin"},bottom:{style:"thin"},left:{style:void 0},right:{style:void 0}},h.alignment={horizontal:"left"}}),v.label.toLowerCase()==="equipment"&&s.addRow(["NAME AND SPECIFICATION","NO OF EQUIPMENT","NO. OF HRS.","HOURLY RATE","AMOUNT"]).eachCell(h=>{h.border={top:{style:"thin"},bottom:{style:"thin"},left:{style:void 0},right:{style:void 0}},h.alignment={horizontal:"left"}}),$(v.label).forEach(h=>{s.addRow([h.description,h.quantity,h.unit,h.unit_cost,h.total_cost])}),s.addRow(["","","","Direct "+v.label+" Cost",_(m(v.label))]).eachCell(h=>{h.font={bold:!0}}),s.addRow([])});const c=s.addRow(["D. DIRECT COST","","","",_((n=i.data)==null?void 0:n.direct_cost)]);c.eachCell(v=>{v.border={top:{style:"thin"},bottom:{style:void 0},left:{style:void 0},right:{style:void 0}}}),c.getCell(1).border={top:{style:"thin"},bottom:{style:void 0},left:{style:"thin"},right:{style:void 0}},c.getCell(5).border={top:{style:"thin"},bottom:{style:void 0},left:{style:void 0},right:{style:"thin"}};const T=s.addRow(["E. O.C.M.","10.00% of D","","",_(((f=i.data)==null?void 0:f.direct_cost)*.1)]);T.getCell(1).border={top:{style:void 0},bottom:{style:void 0},left:{style:"thin"},right:{style:void 0}},T.getCell(5).border={top:{style:void 0},bottom:{style:void 0},left:{style:void 0},right:{style:"thin"}};const N=s.addRow(["F. CONTRACTORS PROFIT","10.00% of D","","",_(((R=i.data)==null?void 0:R.direct_cost)*.1)]);N.getCell(1).border={top:{style:void 0},bottom:{style:void 0},left:{style:"thin"},right:{style:void 0}},N.getCell(5).border={top:{style:void 0},bottom:{style:void 0},left:{style:void 0},right:{style:"thin"}};const D=s.addRow(["G. VAT (WHERE APPLICABLE)","12.00% of (D+E+F)","","",_(((A=i.data)==null?void 0:A.direct_cost)*.12)]);D.getCell(1).border={top:{style:void 0},bottom:{style:void 0},left:{style:"thin"},right:{style:void 0}},D.getCell(5).border={top:{style:void 0},bottom:{style:void 0},left:{style:void 0},right:{style:"thin"}};const p=s.addRow(["H. TOTAL COST","(D+E+F+G)","","",_(((S=i.data)==null?void 0:S.direct_cost)*1.22)]);p.getCell(1).border={top:{style:void 0},bottom:{style:void 0},left:{style:"thin"},right:{style:void 0}},p.getCell(5).border={top:{style:void 0},bottom:{style:void 0},left:{style:void 0},right:{style:"thin"}};const M=s.addRow(["I. UNIT COST PER","pc","","",_(((O=i.data)==null?void 0:O.direct_cost)/((L=i.data)==null?void 0:L.quantity))]);M.eachCell(v=>{v.border={top:{style:void 0},bottom:{style:"thin"},left:{style:void 0},right:{style:void 0}}}),M.getCell(1).border={top:{style:void 0},bottom:{style:"thin"},left:{style:"thin"},right:{style:void 0}},M.getCell(5).border={top:{style:void 0},bottom:{style:"thin"},left:{style:void 0},right:{style:"thin"}},s.addRow([]),s.addRow(["PREPARED BY:"]),s.addRow([]),s.addRow(["ANGEL A. ABRAU"]).eachCell(v=>{v.font={bold:!0}}),s.addRow(["Authorized Managing Officer"]),s.addRow(["ME3 CONSTRUCTION / EVENPAR CONSTRUCTION AND DEVELOPMENT CORPORATION (JOINT VENTURE)"]),s.addRow([]),s.addRow(["DATE:","August 20, 2025"]),s.columns.forEach(v=>{v.width=25});const j=await g.xlsx.writeBuffer();$e.saveAs(new Blob([j]),"Detailed_Estimates.xlsx")}const m=g=>i.data.resources.filter(s=>s.resource_name===g).reduce((s,c)=>s+(c.total_cost??0),0),$=g=>i.data.resources.filter(s=>s.resource_name===g);return(g,s)=>{const c=Ne;return a(),_e(c,{"button-title":"Export to Excel","button-icon":"mdi:file-excel-outline",onClick:o})}}}),zn={class:"bg-white"},Qn=F({__name:"BillOfQuantitiesTask",setup(E){const i=de(),{task:u}=ye(i);return(C,o)=>{const m=Ws,$=Fn,g=Re,s=Vn;return a(),l("div",zn,[w(g,null,{"system-layout":ie(()=>[w(m)]),"print-layout":ie(()=>[w($,{task:t(u)},null,8,["task"])]),_:1}),w(s,{data:t(u),class:"mt-4"},null,8,["data"])])}}}),Gn={key:0,class:"flex flex-col p-4"},Wn={class:"flex items-start justify-between mb-16"},Yn={class:"flex justify-left gap-4"},Kn=e("div",{class:"flex flex-col items-start gap-2"},[e("h1",{class:"text-3xl uppercase"}," Add Category "),e("h3",{class:"text-gray-400 text-lg"}," Category Creation ")],-1),Jn=e("div",{class:"grid grid-cols-2 gap-6 mb-6"},[e("div",{class:"flex flex-col col-span-2 gap-1"},[e("label",{class:"text-sm text-gray-700"}," Category List "),e("select",{id:"category",name:"category",class:"border border-gray-300 rounded-md"},[e("option",{value:"",disabled:""}," Select Category ")])])],-1),Zn={class:"flex justify-end"},ea={key:1,class:"flex flex-col p-4"},ta=e("div",{class:"flex justify-left gap-4"},[e("div",{class:"flex flex-col mb-16 items-start gap-2"},[e("h1",{class:"text-3xl uppercase"}," Create Category Name "),e("h3",{class:"text-gray-400 text-lg"}," Category Creation ")])],-1),sa=e("div",{class:"grid grid-cols-2 gap-6 mb-6"},[e("div",{class:"flex flex-col col-span-1 gap-1"},[e("label",{class:"text-sm text-gray-700"}," Category Name "),e("input",{type:"text",class:"border border-gray-300 rounded-md",placeholder:"Category Name"})])],-1),oa=e("div",{class:"flex flex-col mb-6"},[e("label",{class:"text-md text-gray-700"}," Description "),e("textarea",{class:"border border-gray-300 rounded-md w-full h-56 resize-none"})],-1),na={class:"flex justify-end gap-3"},aa=F({__name:"ModalsCategory",props:{showModal:{type:Boolean,required:!0,default:!1}},emits:["hideModal"],setup(E,{emit:i}){const u=I(!1),C=()=>{u.value=!1,i("hideModal")};return(o,m)=>{const $=ce,g=me;return a(),_e(g,{show:E.showModal,local:!0,header:!1,bg:"bg-gray-50",size:"modal-lg",onHide:m[4]||(m[4]=s=>i("hideModal"))},{default:ie(()=>[t(u)?(a(),l("div",ea,[ta,sa,oa,e("div",na,[e("button",{class:"bg-gray-500 hover:bg-gray-600 active:bg-gray-700 select-none text-white rounded-lg text-sm w-36 h-10",onClick:m[3]||(m[3]=s=>u.value=!1)}," Cancel "),e("button",{class:"bg-green-500 hover:bg-green-600 active:bg-green-700 select-none text-white rounded-lg text-sm w-36 h-10",onClick:C}," Create Category ")])])):(a(),l("div",Gn,[e("div",Wn,[e("div",Yn,[Kn,e("button",{class:"bg-green-500 hover:bg-green-600 active:bg-green-700 select-none text-white rounded-lg text-sm w-10 h-10",onClick:m[0]||(m[0]=s=>u.value=!0)}," + ")]),w($,{name:"material-symbols:close-rounded",class:"h-6 w-6 text-gray-500 hover:text-gray-800 cursor-pointer",onClick:m[1]||(m[1]=s=>i("hideModal"))})]),Jn,e("div",Zn,[e("button",{class:"bg-green-500 hover:bg-green-600 active:bg-green-700 select-none text-white rounded-lg text-sm w-36 h-10",onClick:m[2]||(m[2]=s=>i("hideModal"))}," Add Category ")])]))]),_:1},8,["show"])}}}),la={class:"flex flex-col p-2 bg-white"},ra={class:"flex items-center mb-4"},ia={class:"flex-1 flex items-center gap-2 text-gray-500 cursor-pointer"},ca=e("span",null," BACK ",-1),xa={__name:"DetailedEstimates",async setup(E){let i,u;const C=Ee(),o=pe(),m=le(),$=I(!1);try{[i,u]=Te(()=>m.getResourceUnits()),await i,u()}catch(s){o.add({type:"error",text:s||"something went wrong."})}const g=()=>{C.options.history.state.back?C.back():De("/project-monitoring/marketing")};return(s,c)=>{const T=ce,N=Qn,D=aa;return a(),l("div",la,[e("div",ra,[e("div",ia,[e("div",{class:"flex items-center border hover:bg-gray-500 hover:text-white gap-1 bg-gray-100 rounded-lg px-4 py-1 cursor-pointer",onClick:g},[w(T,{name:"material-symbols:arrow-back-rounded"}),ca])])]),w(N),w(D,{"show-modal":t($),onHideModal:c[0]||(c[0]=p=>$.value=!1)},null,8,["show-modal"])])}}};export{xa as _};
