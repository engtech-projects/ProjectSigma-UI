import{_ as z}from"./DepartmentSelector.vue.Cl6IMdR7.js";import{p as G}from"./Utilities.Cbr1Z9cn.js";import{f as P,B as F,ab as q,r as n,C as J,L as C,K,o as m,c as h,a as e,j as L,G as Y,b as U,g as Z,x as o,A as x,M as u,u as j,H as Q,p as X,e as ee,d as te,O as ae,_ as se,h as le,w as re}from"./entry.R6V7NTxy.js";import{h as I}from"./CustomFetch.BRBLzGci.js";import{_ as O}from"./loader.C2wIXBoB.js";import{i as de,a as oe,b as ne,F as ie}from"./index.D1WMzuIK.js";import{_ as ue}from"./AcessContainer.DJcSsti6.js";import{u as ce}from"./vue.f36acd1f.Dv_A-myg.js";import{u as fe,A as me}from"./Accessibilities.uaboihcy.js";import"./enum.D7iLG1Bk.js";import"./users.D5_vMoUK.js";const r=g=>(X("data-v-da6f74cf"),g=g(),ee(),g),ge={class:"md:flex gap-4"},pe=r(()=>e("head",null,[e("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"})],-1)),be={class:"w-full md:w-1/2 justify-start border border-teal-100 shadow-md rounded-lg mt-5 relative"},ve={key:0,class:"absolute bg-slate-200/50 rounded-lg w-full h-full flex items-center justify-center z-50"},ye=r(()=>e("img",{class:"flex justify-center w-28 rounded-md",src:O,alt:"logo"},null,-1)),he=[ye],xe={class:"p-4"},_e={class:"group p-2 rounded-lg bg-slate-50",open:""},ke=Q('<summary class="flex cursor-pointer list-none items-center justify-between text-lg font-medium text-gray-900 bg-teal-100 rounded-sm" data-v-da6f74cf><label for="" class="text-lg font-medium p-2" data-v-da6f74cf>Set Schedule</label><div class="text-gray-500" data-v-da6f74cf><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="black" class="block h-5 w-5 transition-all duration-300 group-open:rotate-180 m-2" data-v-da6f74cf><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" data-v-da6f74cf></path></svg></div></summary>',1),we={class:"pb-2 text-black text-md font-medium border border-slate-100 rounded-b-lg p-3"},Te=["onSubmit"],Se=r(()=>e("div",null,[e("div",{class:"border-b w-full h-[14px] text-center p-3 mb-4"},[e("span",{class:"text-sm bg-slate-50 text-black px-10 italic"}," Schedule Time ")])],-1)),Re={class:"flex md:flex justify-center mx-auto"},Ee={class:"p-2 gap-4 items-center"},Ce=r(()=>e("label",{for:"eventTitleIn",class:"block text-xs text-center italic"},"In",-1)),Ie={class:"p-2 gap-4 items-center"},Ue=r(()=>e("label",{for:"eventTitleOut",class:"block text-xs text-center italic"},"Out",-1)),je=r(()=>e("div",null,[e("div",{class:"border-b w-full h-[14px] text-center p-3 mt-4 mb-2"},[e("span",{class:"text-sm bg-gray-50 text-black px-10 italic"}," Schedule Type ")])],-1)),Ae=r(()=>e("div",{class:"mb-4 dark:border-gray-700"},[e("ul",{id:"default-tab",class:"flex flex-wrap justify-center -mb-px text-sm font-medium text-center","data-tabs-toggle":"#default-tab-content",role:"tablist"},[e("li",{class:"mr-2",role:"presentation"},[e("button",{id:"regular-tab",class:"inline-block p-4 border-b-2 rounded-t-lg","data-tabs-target":"#regular",type:"button",role:"tab","aria-controls":"regular","aria-selected":"false"}," Regular ")]),e("li",{class:"mr-2",role:"presentation"},[e("button",{id:"irregular-tab",class:"inline-block p-4 border-b-2 rounded-t-lg hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300","data-tabs-target":"#irregular",type:"button",role:"tab","aria-controls":"irregular","aria-selected":"false"}," Irregular ")])])],-1)),Ve={id:"default-tab-content"},Le={id:"regular",class:"p-1 rounded-lg bg-gray-50 dark:bg-gray-800",role:"tabpanel","aria-labelledby":"regular-tab"},Oe=r(()=>e("div",{class:"border-b w-full h-[14px] text-center p-3 mb-2"},[e("span",{class:"text-sm bg-slate-50 text-black px-10 italic"}," Days ")],-1)),$e={class:"grid grid-cols-3 gap-y-2 md:flex-1 mx-auto justify-center items-center mt-5 md:gap-4 p-2 rounded-md"},De={class:"flex"},Me=r(()=>e("label",{for:"monday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Monday",-1)),Be={class:"flex"},We=r(()=>e("label",{for:"tuesday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Tuesday",-1)),He={class:"flex"},Ne=r(()=>e("label",{for:"wednesday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Wednesday",-1)),ze={class:"flex"},Ge=r(()=>e("label",{for:"thursday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Thursday",-1)),Pe={class:"flex"},Fe=r(()=>e("label",{for:"friday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Friday",-1)),qe={class:"flex"},Je=r(()=>e("label",{for:"saturday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Saturday",-1)),Ke={class:"flex"},Ye=r(()=>e("label",{for:"sunday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Sunday",-1)),Ze=r(()=>e("div",{class:"border-b w-full h-[14px] text-center p-3 mb-2"},null,-1)),Qe={class:"flex md:flex justify-center mx-auto"},Xe={class:"p-2 gap-4 items-center"},et=r(()=>e("label",{for:"dateStart",class:"block text-xs text-center italic"},"Date Start",-1)),tt={class:"p-2 gap-4 items-center"},at=r(()=>e("label",{for:"dateEnd",class:"block text-xs italic ml-3"},[te("Date End "),e("b",{class:"text-orange-500"}," (optional)")],-1)),st={id:"irregular",class:"p-1 rounded-lg bg-gray-50 dark:bg-gray-800",role:"tabpanel","aria-labelledby":"irregular-tab"},lt=r(()=>e("div",{class:"border-b w-full h-[14px] text-center p-3 mb-5"},[e("span",{class:"text-sm bg-slate-50 text-black px-10 italic"}," Schedule Dates ")],-1)),rt={class:"flex justify-end mt-4"},dt={key:0,type:"submit",class:"px-4 py-2 bg-blue-500 text-white rounded-md"},ot={key:1,type:"submit",class:"px-4 py-2 bg-blue-500 text-white rounded-md"},nt={class:"w-full md:w-3/4 justify-start border border-teal-100 shadow-md rounded-lg mt-5"},it={class:"border-t-4 border-teal-400 p-2 rounded-md bg-white relative"},ut={key:0,class:"absolute bg-slate-200/50 rounded-lg w-full h-full flex items-center justify-center z-50"},ct=r(()=>e("img",{class:"flex justify-center w-28 rounded-md",src:O,alt:"logo"},null,-1)),ft=[ct],mt=P({__name:"ScheduleDept",setup(g){const i=G(),T=F(),{token:p}=q(),b=ae(),S=n(null),d=n([!1,!1,!1,!1,!1,!1,!1]),a=n({id:1,groupType:"department",department_id:1,project_id:null,employee_id:null,scheduleType:"Regular",daysOfWeek:[],startTime:"",endTime:"",startRecur:null,endRecur:null}),_=n([]),c=n(""),v=n(""),k=n(!1),R=n(!1),f=n(!1),$=n({plugins:[de,oe,ne],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},initialView:"dayGridMonth",weekends:!0,nowIndicator:!0,editable:!0,selectable:!0,dateClick:s=>{a.value.startRecur=s.dateStr},select:s=>{a.value.scheduleType==="Irregular"||(a.value.startRecur=s.startStr,a.value.endRecur=s.endStr)},eventContent:function(s){const t=s.event.start.toLocaleString([],{hour:"2-digit",minute:"2-digit"}),y=s.event.end.toLocaleString([],{hour:"2-digit",minute:"2-digit"});return{html:`<div class="event-container flex flex-col justify-between items-center p-1 event-container bg-blue-600 text-[10px] overflow-hidden text-white rounded-md">
                        ${t+" - "+y}
                        <div class="flex gap-[5px]">
                            <i class="fa fa-edit text-slate-200 hover:text-white text-[10px] event-edit edit-${s.event.id}" data-event="${s.event.id}"></i>
                            <i class="fa fa-trash text-slate-200 hover:text-white text-[10px] event-trash delete-${s.event.id}" data-event="${s.event.id}"></i>
                        </div>
                    </div>`}}});async function w(){R.value=!0,await I("/api/schedule",{baseURL:b.public.HRMS_API_URL,method:"GET",headers:{Authorization:p.value+"",Accept:"application/json"},watch:!1,onResponse:({response:s})=>{R.value=!1,s.ok?(_.value=[],s._data.data.forEach(t=>{t.groupType==="department"&&_.value.push(t)}),D()):c.value=s._data.message}},"$K249SZeUc3")}function D(){E(),_.value.forEach(s=>{if(s.department_id.toString()===a.value.department_id.toString()){const t=JSON.parse(JSON.stringify(s));s.scheduleType==="Irregular"&&(t.daysOfWeek=null),S.value.addEvent(t)}})}function M(s){d.value=[!1,!1,!1,!1,!1,!1,!1];const t=document.getElementById("regular-tab"),y=document.getElementById("irregular-tab");_.value.forEach(l=>{parseInt(l.id)===parseInt(s)&&(l.daysOfWeek.forEach(N=>{d.value[N]=!0}),l.scheduleType==="Irregular"?y.click():t.click(),a.value=l,f.value=!0)})}async function B(s){await I("/api/schedule/"+s,{baseURL:b.public.HRMS_API_URL,method:"DELETE",headers:{Authorization:p.value+"",Accept:"application/json"},body:a.value,watch:!1,onResponse:({response:t})=>{k.value=!1,t.ok?(E(),v.value=t._data.message,w()):c.value=t._data.message}},"$vYCdRu9ig0")}function E(){S.value.getEvents().forEach(s=>s.remove())}function A(){f.value=!1,d.value=[!1,!1,!1,!1,!1,!1,!1],a.value={id:1,groupType:"department",department_id:1,project_id:null,employee_id:null,scheduleType:"Regular",daysOfWeek:[],startTime:"",endTime:"",startRecur:null,endRecur:null}}async function W(){for(const t in d.value)d.value[t]&&a.value.daysOfWeek.push(t.toString());const s=f.value?"/api/schedule/"+a.value.id:"/api/schedule";a.value.startTime=i.value.formatTime(a.value.startTime),a.value.endTime=i.value.formatTime(a.value.endTime),k.value=!0,a.value.daysOfWeek.length===0?a.value.scheduleType="Irregular":a.value.scheduleType="Regular",a.value.scheduleType==="Irregular"&&(a.value.endRecur=i.value.addOneDay(a.value.startRecur)),await I(s,{baseURL:b.public.HRMS_API_URL,method:f.value?"PUT":"POST",headers:{Authorization:p.value+"",Accept:"application/json"},body:a.value,watch:!1,onResponse:({response:t})=>{k.value=!1,t.ok?(E(),v.value=t._data.message,A(),w()):c.value=t._data.message}},"$ALakJSx1E1")}const H=J(()=>a.value.department_id);C(H,()=>{w()});const V=n();return K(()=>{S.value=V.value.getApi(),document.getElementById("fCalendar").addEventListener("click",t=>{t.target.classList.contains("event-edit")&&M(t.target.dataset.event),t.target.classList.contains("event-trash")&&B(t.target.dataset.event)}),w()}),C(v,s=>{s!==""&&(T.add({type:"success",text:v.value}),v.value="")}),C(c,s=>{s!==""&&(T.add({type:"error",text:c.value}),c.value="")}),(s,t)=>{const y=z;return m(),h("div",ge,[pe,e("div",be,[k.value?(m(),h("div",ve,he)):L("",!0),e("div",{class:Y(["p-4",f.value?"border-t-8 border-green-500 rounded-md":""])},[U(y,{id:"schedule",modelValue:a.value.department_id,"onUpdate:modelValue":t[0]||(t[0]=l=>a.value.department_id=l)},null,8,["modelValue"])],2),e("div",xe,[e("details",_e,[ke,e("div",we,[e("form",{onSubmit:Z(W,["prevent"])},[Se,e("div",Re,[e("div",Ee,[Ce,o(e("input",{id:"eventTitleIn","onUpdate:modelValue":t[1]||(t[1]=l=>a.value.startTime=l),type:"time",class:"w-44 md:w-44 rounded-lg",required:""},null,512),[[x,a.value.startTime]])]),e("div",Ie,[Ue,o(e("input",{id:"eventTitleOut","onUpdate:modelValue":t[2]||(t[2]=l=>a.value.endTime=l),type:"time",class:"w-44 md:w-44 rounded-lg",required:""},null,512),[[x,a.value.endTime]])])]),je,Ae,e("div",Ve,[e("div",Le,[Oe,e("div",$e,[e("div",De,[o(e("input",{id:"monday","onUpdate:modelValue":t[3]||(t[3]=l=>d.value[1]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[u,d.value[1]]]),Me]),e("div",Be,[o(e("input",{id:"tuesday","onUpdate:modelValue":t[4]||(t[4]=l=>d.value[2]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[u,d.value[2]]]),We]),e("div",He,[o(e("input",{id:"wednesday","onUpdate:modelValue":t[5]||(t[5]=l=>d.value[3]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[u,d.value[3]]]),Ne]),e("div",ze,[o(e("input",{id:"thursday","onUpdate:modelValue":t[6]||(t[6]=l=>d.value[4]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[u,d.value[4]]]),Ge]),e("div",Pe,[o(e("input",{id:"friday","onUpdate:modelValue":t[7]||(t[7]=l=>d.value[5]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[u,d.value[5]]]),Fe]),e("div",qe,[o(e("input",{id:"saturday","onUpdate:modelValue":t[8]||(t[8]=l=>d.value[6]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[u,d.value[6]]]),Je]),e("div",Ke,[o(e("input",{id:"sunday","onUpdate:modelValue":t[9]||(t[9]=l=>d.value[0]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[u,d.value[0]]]),Ye])]),Ze,e("div",Qe,[e("div",Xe,[et,o(e("input",{id:"dateStart","onUpdate:modelValue":t[10]||(t[10]=l=>a.value.startRecur=l),type:"date",class:"w-36 md:w-32 rounded-lg",required:""},null,512),[[x,a.value.startRecur]])]),e("div",tt,[at,o(e("input",{id:"dateEnd","onUpdate:modelValue":t[11]||(t[11]=l=>a.value.endRecur=l),type:"date",class:"w-36 md:w-32 rounded-lg"},null,512),[[x,a.value.endRecur]])])])]),e("div",st,[lt,o(e("input",{id:"scheduledDates","onUpdate:modelValue":t[12]||(t[12]=l=>a.value.startRecur=l),type:"date",class:"w-full rounded-lg"},null,512),[[x,a.value.startRecur]])]),e("div",rt,[f.value?(m(),h("button",dt," Update ")):(m(),h("button",ot," Submit ")),e("button",{type:"reset",class:"px-4 py-2 ml-2 bg-gray-300 text-gray-700 rounded-md",onClick:A}," Reset ")])])],40,Te)])])])]),e("div",nt,[e("div",it,[R.value?(m(),h("div",ut,ft)):L("",!0),U(j(ie),{id:"fCalendar",ref_key:"fCalendar",ref:V,options:$.value,class:"mt-10 text-xs flex md:flex md:text-sm"},null,8,["options"])])])])}}}),gt=se(mt,[["__scopeId","data-v-da6f74cf"]]),pt=e("div",{class:"text-2xl font-normal mb-4 mt-10 md:mt-0"}," Department Schedule ",-1),bt=e("hr",null,null,-1),Ct={__name:"department",setup(g){return ce({title:"Department Schedule",meta:[{name:"description",content:""}]}),(i,T)=>{const p=gt,b=ue;return m(),le(b,{"if-access":("useCheckAccessibility"in i?i.useCheckAccessibility:j(fe))([("AccessibilityTypes"in i?i.AccessibilityTypes:j(me)).hrms_schedule_department])},{default:re(()=>[e("div",null,[pt,bt,e("div",null,[U(p)])])]),_:1},8,["if-access"])}}};export{Ct as default};
