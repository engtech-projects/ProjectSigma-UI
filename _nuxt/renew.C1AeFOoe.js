import B from"./Icon.CrHlyQOo.js";import{_ as F}from"./nuxt-link.C5IpI_HT.js";import{u as T,_ as $}from"./ModalContainer.C773N-tg.js";import{r as f,s as z,C as D,K as I,o as s,c as n,u as o,j as w,a as e,x as d,A as m,F as v,i as M,M as J,t as E,b as h,h as K,w as C,d as G,g as V,f as P,ax as Q}from"./entry.32UGFqj-.js";import{c as W}from"./CustomFetch.ggXvTdIz.js";import{_ as X}from"./loader.BQ9QddgL.js";import{u as H}from"./hmo._XXj8zUR.js";import"./index.T-zbMaZc.js";const Y={class:"border-t-8t-5 edit-item w-full max-w-full bg-white rounded-lg shadow dark:bg-gray-800 dark:border-gray-700 p-6 overflow-auto"},Z={key:0,class:"absolute bg-slate-200/50 rounded-lg w-full h-full flex items-center justify-center z-50"},ee=e("img",{class:"flex justify-center w-28 rounded-md",src:X,alt:"logo"},null,-1),te=[ee],re=e("label",{for:"",class:"text-xl font-semibold text-gray-900"},"Renew HMO",-1),oe={class:"mt-5 b-6"},ae=e("label",{for:"hmo-amount",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Total Amount",-1),le=["value"],se={class:"flex gap-4"},de={class:"mt-5 b-6 w-full"},ne=e("label",{for:"hmo-amount",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Employee Amount",-1),ue={class:"mt-5 b-6 w-full"},ie=e("label",{for:"hmo-amount",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Employeer Amount",-1),me={class:"mt-5 b-6"},ce=e("label",{for:"hmo_name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"HMO Name",-1),be={class:"flex gap-4"},ge={class:"mt-5 b-6 flex-1"},fe=e("label",{for:"hmo_start",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"HMO Start",-1),he={class:"mt-5 b-6 flex-1"},pe=e("label",{for:"hmo_end",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"HMO End",-1),_e={class:"mt-5 mb-6"},ye=e("label",{for:"employee",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Employees",-1),xe={class:"flex flex-col p-4 max-h-[300px] overflow-auto"},ke={class:"flex justify-between py-2 border-b border-slate-100"},we={class:"flex gap-2 items-center"},ve=["onUpdate:modelValue"],Me={class:"text-md text-slate-800"},Ee={key:0,class:"flex flex-col gap-1 bg-slate-100 rounded"},Ce={class:"flex gap-2"},Ve={key:1,class:"w-4"},He={class:"text-sm"},Se={class:"flex justify-end gap-4"},Ae=["onSubmit"],Ue=e("label",{for:"firstname",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Firstname",-1),Ne=e("label",{for:"middlename",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Middlename",-1),Re=e("label",{for:"lastname",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Lastname",-1),je={class:"flex justify-end gap-4 mt-4"},qe=e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"}," Add ",-1),Oe={__name:"HmoRenew",setup(S){const g=T(),u=H(),p=f(!1),{hmo:l}=z(u),A=f([]),y=f({}),i=f({firstname:null,middlename:null,lastname:null});async function U(){await W("/api/employee/resource",{onResponse:({response:a})=>{var t;if(a.ok)A.value=(t=a._data)==null?void 0:t.data;else throw new Error(a._data.message)}})}function N(){const a=f([]);return x.value.forEach(t=>{t.checked&&(a.value.push({hmo_id:null,member_type:"employee",employee_id:t.id,member_name:t.first_name+" "+t.family_name,member_belongs_to:null}),t.members.length>0&&t.members.forEach(c=>{a.value.push({hmo_id:null,member_type:"external(addon)",employee_id:null,member_name:c.firstname+" "+c.lastname,member_belongs_to:t.id})}))}),JSON.stringify(a.value)}async function R(){u.hmo.hmo_members=N();try{p.value=!0,await u.createHmo(),u.errorMessage!==""?snackbar.add({type:"error",text:u.errorMessage}):snackbar.add({type:"success",text:u.successMessage})}catch{errorMessage.value=errorMessage,snackbar.add({type:"error",text:u.errorMessage})}finally{p.value=!1}}function j(){y.value.members.push(i.value),g.hideModal(),i.value={firstname:null,middlename:null,lastname:null}}function q(a,t){return a.filter(_=>_!==t)}function O(a){y.value=a,g.showModal()}const x=D(()=>{const a=[];return l.value.hmo_members.forEach(t=>{t.members=[],t.checked=!0,a.push(t)}),a});return I(async()=>{await U()}),(a,t)=>{const c=B,_=F,L=$;return s(),n("div",Y,[o(p)?(s(),n("div",Z,te)):w("",!0),re,e("div",oe,[ae,e("input",{id:"hmoAmount",type:"number",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"0.00",value:o(l).employee_share+o(l).employer_share,disabled:""},null,8,le)]),e("div",se,[e("div",de,[ne,d(e("input",{id:"hmoEmployeeAmount","onUpdate:modelValue":t[0]||(t[0]=r=>o(l).employee_share=r),type:"number",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"0.00"},null,512),[[m,o(l).employee_share]])]),e("div",ue,[ie,d(e("input",{id:"hmoEmployeerAmount","onUpdate:modelValue":t[1]||(t[1]=r=>o(l).employer_share=r),type:"number",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"0.00"},null,512),[[m,o(l).employer_share]])])]),e("div",me,[ce,d(e("input",{id:"hmoName","onUpdate:modelValue":t[2]||(t[2]=r=>o(l).hmo_name=r),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""},null,512),[[m,o(l).hmo_name]])]),e("div",be,[e("div",ge,[fe,d(e("input",{id:"hmoStart","onUpdate:modelValue":t[3]||(t[3]=r=>o(l).hmo_start=r),type:"date",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""},null,512),[[m,o(l).hmo_start]])]),e("div",he,[pe,d(e("input",{id:"hmoEnd","onUpdate:modelValue":t[4]||(t[4]=r=>o(l).hmo_start=r),type:"date",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""},null,512),[[m,o(l).hmo_start]])])]),e("div",_e,[ye,e("div",xe,[(s(!0),n(v,null,M(o(x),r=>(s(),n("div",{key:r.id,class:"flex flex-col"},[e("div",ke,[e("div",we,[d(e("input",{"onUpdate:modelValue":b=>r.checked=b,type:"checkbox"},null,8,ve),[[J,r.checked]]),e("span",Me,E(r.member_name),1)]),h(c,{name:"iconoir:plus",class:"text-2xl text-slate-800 hover:text-blue-500 cursor-pointer",onClick:b=>O(r)},null,8,["onClick"])]),r.members.length>0?(s(),n("div",Ee,[(s(!0),n(v,null,M(r.members,(b,k)=>(s(),n("div",{key:k,class:"flex justify-between items-center hover:bg-slate-200 px-4 py-1 border-b border-white"},[e("div",Ce,[k===0?(s(),K(c,{key:0,name:"iconoir:long-arrow-down-right"})):(s(),n("span",Ve)),e("span",He,E(b.lastname+", "+b.firstname+" "+b.middlename[0].toUpperCase()+"."),1)]),h(c,{name:"iconoir:trash",class:"text-slate-700 hover:text-red-500 cursor-pointer",onClick:Le=>r.members=q(r.members,b)},null,8,["onClick"])]))),128))])):w("",!0)]))),128))])]),e("div",Se,[h(_,{to:"/hrms/hmo",class:"text-white bg-slate-700 hover:bg-slate-800 focus:ring-4 focus:outline-none focus:ring-slate-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-slate-600 dark:hover:bg-slate-700 dark:focus:ring-slate-800"},{default:C(()=>[G(" Cancel ")]),_:1}),e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:R}," Renew ")]),h(L,{size:"modal-sm",title:"Membership Addon"},{default:C(()=>[e("form",{class:"flex flex-col px-4 py-2 gap-2",onSubmit:V(j,["prevent"])},[e("div",null,[Ue,d(e("input",{id:"firstname","onUpdate:modelValue":t[5]||(t[5]=r=>o(i).firstname=r),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""},null,512),[[m,o(i).firstname]])]),e("div",null,[Ne,d(e("input",{id:"middlename","onUpdate:modelValue":t[6]||(t[6]=r=>o(i).middlename=r),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""},null,512),[[m,o(i).middlename]])]),e("div",null,[Re,d(e("input",{id:"lastname","onUpdate:modelValue":t[7]||(t[7]=r=>o(i).lastname=r),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""},null,512),[[m,o(i).lastname]])]),e("div",je,[e("button",{class:"text-white bg-slate-700 hover:bg-slate-800 focus:ring-4 focus:outline-none focus:ring-slate-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-slate-600 dark:hover:bg-slate-700 dark:focus:ring-slate-800",onClick:t[8]||(t[8]=V((...r)=>o(g).hideModal&&o(g).hideModal(...r),["prevent"]))}," Cancel "),qe])],40,Ae)]),_:1})])}}},Ke=P({__name:"renew",setup(S){return H().showHmo(Q().query.hmo_id),(u,p)=>{const l=Oe;return s(),n("div",null,[h(l)])}}});export{Ke as default};
