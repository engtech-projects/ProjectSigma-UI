import{_ as J}from"./SearchProfile.BNYjGg2l.js";import K from"./Icon.DcF_NU9d.js";import{_ as Q}from"./LayoutPrint.Dr_MMYe1.js";import{_ as W}from"./evenpar.D2HxGWpc.js";import{u as B}from"./employee.tVj1qUbX.js";import{f as F,o as t,h as M,w as L,a as e,u as m,c as o,t as i,j as N,F as n,i as $,d as a,p as X,e as Z,_ as V,s as P,B as ee,r as j,L as te,g as oe,x as q,A as U,b as x}from"./entry.R6V7NTxy.js";import{_ as se}from"./nuxt-link.drPfi767.js";import{_ as re}from"./LayoutBoards.vue.1keADq5t.js";import{j as z}from"./Utilities.Cbr1Z9cn.js";import{u as G,A as H}from"./Accessibilities.uaboihcy.js";import{u as ne}from"./dtr.eygpZU6G.js";import{_ as ie}from"./AcessContainer.DJcSsti6.js";import{u as ae}from"./vue.f36acd1f.Dv_A-myg.js";import"./search-bar.vue.DBblr2nn.js";import"./PsSelectSearch.vue.CrY1IpH8.js";import"./employeeSearch.CBgiOO3V.js";import"./CustomFetch.BRBLzGci.js";import"./index.T-zbMaZc.js";import"./id.Dwf9xs1O.js";import"./client-only.QuN6N-R_.js";import"./loader.C2wIXBoB.js";import"./users.D5_vMoUK.js";const _=c=>(X("data-v-9b6eae46"),c=c(),Z(),c),de={id:"table-to-print",class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},le={key:0,class:"text-black pb-2"},ce=_(()=>e("div",{class:"text-center block overflow-hidden"},[e("div",{class:"flex items-center justify-center"},[e("div",{class:"text-lg font-bold mx-auto"},[a(" EVENPAR CONSTRUCTION AND DEVELOPMENT CORPORATION "),e("div",{class:"text-sm text-center indent-4 font-medium"},[e("p",null,"P-1, Poblacion 8, Buenavista, Agusan Del Norte"),e("p",null,"Email add: evenparcorporation@gmail.com"),e("p",null,"DAILY ATTENDANCE/ACCOMPLISHMENT REPORT")])]),e("img",{src:W,alt:"Header Image",class:"w-20 ml-4 justify-end"})])],-1)),me=_(()=>e("br",null,null,-1)),_e={class:"flex justify-between items-center"},pe={class:"text-sm"},ue=_(()=>e("span",{class:"font-bold"},"NAME:",-1)),he={class:"font-bold"},ye=_(()=>e("br",null,null,-1)),fe=_(()=>e("span",{class:"font-bold"},"DESIGNATION:",-1)),be={class:"font-bold"},ve={class:"text-sm"},ge=_(()=>e("span",{class:"font-bold"},"PERIOD COVERED:",-1)),ke={class:"font-bold"},we={class:"table-auto w-full border-collapse"},Ae={class:"bg-gray-900"},Ne=_(()=>e("th",{scope:"col",rowspan:"3",class:"text-white p-2 border-solid border border-zinc-700"}," Date ",-1)),Oe=_(()=>e("th",{scope:"col",rowspan:"3",class:"text-white p-2 border-solid border border-zinc-700"}," DESIGNATION / PROJECT CODE ",-1)),Te=["colspan"],De=["colspan"],Ee=_(()=>e("th",{scope:"col",colspan:"1",rowspan:"2",class:"text-white p-2 border-solid border border-zinc-700"}," Total Hours ",-1)),Ie={scope:"col",colspan:"1",class:"text-white p-2 border-solid border border-zinc-700"},$e={scope:"col",colspan:"1",class:"text-white p-2 border-solid border border-zinc-700"},Re={scope:"col",colspan:"1",class:"text-white p-2 border-solid border border-zinc-700"},xe={scope:"col",colspan:"1",class:"text-white p-2 border-solid border border-zinc-700"},Ce=_(()=>e("th",{scope:"col",colspan:"1",rowspan:"2",class:"text-white p-2 border-solid border border-zinc-700"}," Total Hours ",-1)),Le={class:"border text-center border-b"},Se={class:"p-2"},Me={class:"p-2"},Pe={key:0},je={key:0},qe={key:1},Ue={key:1},ze={key:0},Be={key:1},Fe={class:"TimeIn p-2"},Ge={class:"TimeOut p-2"},He=_(()=>e("td",{class:"p-2"}," N/A ",-1)),Ye=_(()=>e("td",{class:"p-2"}," N/A ",-1)),Je={class:"p-2"},Ke={class:"p-2"},Qe={class:"p-2"},We=_(()=>e("td",{class:"p-2"}," N/A ",-1)),Xe=_(()=>e("td",{class:"p-2"}," N/A ",-1)),Ze={class:"p-2"},Ve=F({__name:"AttendanceTable",props:{headerColumns:{type:Array,required:!0},datas:{type:Array,required:!0},schedule:{type:Array,required:!0},overtime:{type:Array,required:!0},actions:{type:Object,required:!0},period:{type:Object,required:!0}},setup(c){const h=B(),p=[],w=(b,v)=>!p.includes(b)&&!v?(p.push(b),b):(v&&p.splice(0,p.length),null),R=(b,v)=>{const O=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],y=new Date(b),A=new Date(v);if(isNaN(y.getTime())||isNaN(A.getTime()))return"-";const T=y.getDate(),r=O[y.getMonth()],f=A.getDate(),s=O[A.getMonth()],g=A.getFullYear();return r===s?`${r} ${T}-${f}, ${g}`:`${r} ${T}-${s} ${f}, ${g}`};return(b,v)=>{const O=Q;return t(),M(O,null,{default:L(()=>{var y,A,T;return[e("div",de,[m(h).fullname&&((T=(A=(y=m(h).information)==null?void 0:y.current_employment)==null?void 0:A.position)!=null&&T.name)&&c.period?(t(),o("div",le,[ce,me,e("div",_e,[e("div",null,[e("p",pe,[ue,e("span",he,i(m(h).fullname),1),ye,fe,e("span",be,i(m(h).information.current_employment.position.name),1)])]),e("div",null,[e("p",ve,[ge,e("span",ke,i(R(c.period.from,c.period.to)),1)])])])])):N("",!0),e("table",we,[e("thead",Ae,[e("tr",null,[Ne,Oe,e("th",{scope:"col",colspan:c.schedule.length*2+1,class:"text-white p-2 border-solid border border-zinc-700"}," Regular Time ",8,Te),e("th",{scope:"col",colspan:c.overtime.length*2+1,rowspan:"2",class:"text-white p-2 border-solid border border-zinc-700"}," Overtime ",8,De)]),e("tr",null,[(t(!0),o(n,null,$(c.schedule,r=>(t(),o("th",{key:"schedampm"+r,id:"schedampmAM",scope:"col",colspan:"2",class:"text-white p-2 border-solid border border-zinc-700"},i(r.start_time_human.split(" ")[1]),1))),128)),Ee]),e("tr",null,[(t(!0),o(n,null,$(c.schedule,(r,f)=>(t(),o(n,{key:"sched"+f},[e("th",Ie," IN "+i(r.start_time_human),1),e("th",$e," OUT "+i(r.end_time_human),1)],64))),128)),(t(!0),o(n,null,$(c.overtime,(r,f)=>(t(),o(n,{key:"overtime"+f},[e("th",Re," IN "+i(r.start_time_human),1),e("th",xe," OUT "+i(r.end_time_human),1)],64))),128)),Ce])]),e("tbody",null,[c.datas.dtr?(t(!0),o(n,{key:0},$(c.datas.dtr,(r,f)=>(t(),o(n,{key:f},[e("tr",Le,[e("td",Se,i(f),1),e("td",Me,[(t(!0),o(n,null,$(r.schedules_attendances,s=>(t(),o(n,{key:"sched-data-"+s},[s.applied_ins!=null?(t(),o("div",Pe,[s.applied_ins.project!=null?(t(),o("div",je,i(w(s.applied_ins.project.project_code,!1)),1)):s.applied_ins.department!=null?(t(),o("div",qe,i(w(s.applied_ins.department.department_name,!1)),1)):N("",!0)])):N("",!0),s.applied_outs!=null?(t(),o("div",Ue,[s.applied_outs.project!=null?(t(),o("div",ze,i(w(s.applied_outs.project.project_code,!1)),1)):s.applied_outs.department!=null?(t(),o("div",Be,i(w(s.applied_outs.department.department_name,!1)),1)):N("",!0)])):N("",!0)],64))),128))]),(t(!0),o(n,null,$(c.schedule,s=>{var g,D,E,I,u,k,d,C;return t(),o(n,{key:"sched-data-"+s},[r.schedules_attendances.find(l=>l.id===s.id)?(t(),o(n,{key:0},[e("td",Fe,[r.events.length>0?(t(),o(n,{key:0},[a(i(r.events[0].event_type)+" ",1),((g=r.schedules_attendances.find(l=>l.id===s.id))==null?void 0:g.applied_ins)!=null?(t(),o(n,{key:0},[a(" ("+i((D=r.schedules_attendances.find(l=>l.id===s.id))==null?void 0:D.applied_ins.time_human)+") ",1)],64)):N("",!0)],64)):(t(),o(n,{key:1},[((E=r.schedules_attendances.find(l=>l.id===s.id))==null?void 0:E.applied_ins)!=null?(t(),o(n,{key:0},[a(i((I=r.schedules_attendances.find(l=>l.id===s.id))==null?void 0:I.applied_ins.time_human),1)],64)):r.metadata.total.reg_hrs>0?(t(),o(n,{key:1},[r.travel_order.length>0?(t(),o(n,{key:0},[a(" ON TRAVEL ORDER ")],64)):r.leave.length>0?(t(),o(n,{key:1},[a(" ON LEAVE ")],64)):(t(),o(n,{key:2},[a(" NO LOG ")],64))],64)):r.events.length>0?(t(),o(n,{key:2},[],64)):(t(),o(n,{key:3},[a(" ABSENT ")],64))],64))]),e("td",Ge,[r.events.length>0?(t(),o(n,{key:0},[a(i(r.events[0].event_type)+" ",1),((u=r.schedules_attendances.find(l=>l.id===s.id))==null?void 0:u.applied_outs)!=null?(t(),o(n,{key:0},[a(" ("+i((k=r.schedules_attendances.find(l=>l.id===s.id))==null?void 0:k.applied_outs.time_human)+") ",1)],64)):N("",!0)],64)):(t(),o(n,{key:1},[((d=r.schedules_attendances.find(l=>l.id===s.id))==null?void 0:d.applied_outs)!=null?(t(),o(n,{key:0},[a(i((C=r.schedules_attendances.find(l=>l.id===s.id))==null?void 0:C.applied_outs.time_human),1)],64)):r.metadata.total.reg_hrs>0?(t(),o(n,{key:1},[r.travel_order.length>0?(t(),o(n,{key:0},[a(" ON TRAVEL ORDER ")],64)):r.leave.length>0?(t(),o(n,{key:1},[a(" ON LEAVE ")],64)):(t(),o(n,{key:2},[a(" NO LOG ")],64))],64)):(t(),o(n,{key:2},[a(" ABSENT ")],64))],64))])],64)):(t(),o(n,{key:1},[He,Ye],64))],64)}),128)),e("td",Je,i(r.metadata.total.reg_hrs),1),(t(!0),o(n,null,$(c.overtime,s=>{var g,D,E,I,u,k;return t(),o(n,{key:"overtime-data-"+s},[r.overtime.find(d=>d.overtime_start_time===s.overtime_start_time&&d.overtime_end_time===s.overtime_end_time)?(t(),o(n,{key:0},[e("td",Ke,[((g=r.overtime.find(d=>d.overtime_start_time===s.overtime_start_time&&d.overtime_end_time===s.overtime_end_time))==null?void 0:g.applied_in)!=null?(t(),o(n,{key:0},[a(i(((E=(D=r.overtime.find(d=>d.overtime_start_time===s.overtime_start_time&&d.overtime_end_time===s.overtime_end_time))==null?void 0:D.applied_in)==null?void 0:E.time_human)??"NO LOG"),1)],64)):r.travel_order.length>0?(t(),o(n,{key:1},[a(" ON TRAVEL ORDER ")],64)):(t(),o(n,{key:2},[a(" NO LOG ")],64))]),e("td",Qe,[((I=r.overtime.find(d=>d.overtime_start_time===s.overtime_start_time&&d.overtime_end_time===s.overtime_end_time))==null?void 0:I.applied_out)!=null?(t(),o(n,{key:0},[a(i(((k=(u=r.overtime.find(d=>d.overtime_start_time===s.overtime_start_time&&d.overtime_end_time===s.overtime_end_time))==null?void 0:u.applied_out)==null?void 0:k.time_human)??"NO LOG"),1)],64)):r.travel_order.length>0?(t(),o(n,{key:1},[a(" ON TRAVEL ORDER ")],64)):(t(),o(n,{key:2},[a(" NO LOG ")],64))])],64)):(t(),o(n,{key:1},[We,Xe],64))],64)}),128)),e("td",Ze,i(r.metadata.total.overtime),1)]),a(" "+i(w("",!0)),1)],64))),128)):N("",!0)])])])]}),_:1})}}}),et=V(Ve,[["__scopeId","data-v-9b6eae46"]]),tt={class:"flex w-full mb-4"},ot={class:"div"},st=["onSubmit"],rt={class:"div"},nt=e("label",{for:"date_requested",class:"block text-sm font-medium text-gray-900 dark:text-white"},"Date From:",-1),it={class:"div"},at=e("label",{for:"date_required",class:"block text-sm font-medium text-gray-900 dark:text-white"},"Date To:",-1),dt={class:"div flex items-end"},lt={type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 font-medium text-sm px-2.5 py-2 text-center rounded-lg"},ct={key:0},mt={__name:"InOut",setup(c){const h=B(),p=ne(),{employeeIsSearched:w,information:R}=P(h),{employee_dtr:b}=P(p),v=ee(),O=j(!1),y=new Date,A=y.getFullYear(),T=y.getMonth(),r=new Date(A,T,1),f=new Date(y.getFullYear(),y.getMonth()+1,0),s=j({from:z(r),to:z(f),data:[],keys:[]}),g=()=>{showInformationModal.value=!0};te(R,()=>{p.$reset()});const D=async()=>{O.value=!0;try{s.value.from>s.value.to?v.add({type:"warning",text:"Date From should be less than Date To."}):s.value.from<=s.value.to&&(w.value?(await p.getEmployeeDTR(R.value.id,s.value.from,s.value.to),v.add({type:"success",text:p.successMessage})):v.add({type:"warning",text:"Please select a Employee."}))}catch(u){v.add({type:"error",text:u})}finally{O.value=!1}},E={showTable:!0},I=[{name:"Date",id:"date"},{name:"Designation / Project Code ",id:"email"},{name:"IN.",id:"mobile_number"},{name:"OUT",id:"company"},{name:"IN",id:"stakeholder_type"},{name:"OUT",id:"stakeholder_type"},{name:"IN",id:"stakeholder_type"},{name:"OUT",id:"stakeholder_type"}];return(u,k)=>{const d=K,C=et,l=se,Y=re;return t(),M(Y,{loading:m(O)},{default:L(()=>[e("div",tt,[e("div",ot,[e("form",{class:"w-full grid grid-cols-2 gap-4 md:grid-cols-3 p-2",onSubmit:oe(D,["prevent"])},[e("div",rt,[nt,q(e("input",{id:"date_requested","onUpdate:modelValue":k[0]||(k[0]=S=>m(s).from=S),type:"date",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[U,m(s).from]])]),e("div",it,[at,q(e("input",{id:"date_required","onUpdate:modelValue":k[1]||(k[1]=S=>m(s).to=S),type:"date",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[U,m(s).to]])]),e("div",dt,[e("button",lt,[x(d,{name:"ion:search",color:"white",class:"rounded h-7 w-8 p-1"})])])],40,st)])]),e("div",null,[x(C,{"header-columns":I,actions:E,schedule:m(p).dtrUniqueSchedules,overtime:m(p).dtrUniqueOvertime,datas:m(b),period:m(s),onShowTable:g},null,8,["schedule","overtime","datas","period"])]),("useCheckAccessibility"in u?u.useCheckAccessibility:m(G))([("AccessibilityTypes"in u?u.AccessibilityTypes:m(H)).admin])?(t(),o("p",ct,[a(" This is an old Version. "),x(l,{to:"/hrms/attendance/dtr-v2",class:"text-blue-500 mouse-pointer"},{default:L(()=>[a(" Use Version 2 ")]),_:1})])):N("",!0)]),_:1},8,["loading"])}}},_t={class:"mt-10 md:mt-0 md:flex gap-2"},pt={class:"w-full md:w-1/3"},Mt=F({__name:"dtr",setup(c){return ae({title:"Daily Time Record V1",meta:[{name:"description",content:""}]}),(h,p)=>{const w=J,R=mt,b=ie;return t(),M(b,{"if-access":("useCheckAccessibility"in h?h.useCheckAccessibility:m(G))([("AccessibilityTypes"in h?h.AccessibilityTypes:m(H)).admin])},{default:L(()=>[e("div",_t,[e("div",pt,[x(w)]),x(R)])]),_:1},8,["if-access"])}}});export{Mt as default};
