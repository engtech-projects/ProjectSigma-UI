import{c as t,b as i}from"./CustomFetch.ggXvTdIz.js";import{l as r}from"./entry.32UGFqj-.js";const n="Student Trainee",l="Project Hire",d="Contractual",p="Regular",q=[n,l,d,p],L="Open",M="Pending",A="Hired",g="New/Addition",h="Replacement",y=[g,h],u="Single",m="Married",_="No Preference",v=[u,m,_],c="Male",f="Female",w="No Preference",T=[c,f,w],k=r("manpowers",{state:()=>({createData:{isLoading:!1,errorMessage:"",successMessage:"",params:{}},isEdit:!1,isDetail:!1,manpower:{id:null,requesting_department:null,date_requested:"",date_required:"",position_id:null,employment_type:"",brief_description:"",job_description_attachment:"",nature_of_request:"",age_range:"",status:"",fill_status:"",gender:"",educational_requirement:"",preferred_qualifications:"",approvals:[],remarks:"",request_status:"",charged_to:null,breakdown_details:"",job_applicants:[],isLoading:!1},positionDetails:{id:null,requesting_department:null,date_requested:"",date_required:"",position_id:null,employment_type:"",brief_description:"",job_description_attachment:"",nature_of_request:"",age_range:"",status:"",fill_status:"",gender:"",educational_requirement:"",preferred_qualifications:"",approvals:[],remarks:"",request_status:"",charged_to:null,breakdown_details:"",job_applicants:[],isLoading:!1},allJobApplicants:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{}},applicantDetails:[],pagination:{},getParams:{},errorMessage:"",successMessage:"",remarks:"",openPositions:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{}},onHoldPositions:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{}},approvedPositions:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{}},allRequests:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{}},myApprovals:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{}},myRequests:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{}},forHiringRequests:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{}},storeApplicantRequests:{isLoading:!1,isLoaded:!1,list:[],params:{},form:{manpowerrequests_id:null,data:[]},pagination:{}}}),getters:{getAddedApplicants(s){return s.allJobApplicants.list.filter(a=>a.isCheck)}},actions:{async storeApplicants(s){this.storeApplicantRequests.form.data=s,await t("/api/manpower/save-applicant",{method:"POST",body:this.storeApplicantRequests.form,onRequest:()=>{this.storeApplicantRequests.isLoading=!0},onResponseError:({response:a})=>{throw this.storeApplicantRequests.isLoading=!1,this.errorMessage=a._data.message,new Error(a._data.message)},onResponse:({response:a})=>{this.storeApplicantRequests.isLoading=!1,a.ok?(this.getOne(this.storeApplicantRequests.form.manpowerrequests_id),this.reloadResources(),this.successMessage=a._data.message):this.errorMessage=a._data.message}})},async getOne(s){return await i("/api/manpower/resource/"+s,{method:"GET",onResponse:({response:a})=>{if(a.ok)return a._data.data;throw new Error(a._data.message)}})},async getOnePosition(s){return await i("/api/manpower/resource/"+s,{method:"GET",onRequest:()=>{this.positionDetails.isLoading=!0},onResponseError:({response:a})=>{throw this.positionDetails.isLoading=!1,this.errorMessage=a._data.message,new Error(a._data.message)},onResponse:({response:a})=>{this.positionDetails.isLoading=!1,a.ok?(this.positionDetails=a._data.data,this.positionDetails.job_applicants=this.positionDetails.job_applicants.map(e=>({...e,pivot:{...e.pivot,processing_checklist:JSON.parse(e.pivot.processing_checklist)}})),this.successMessage=a._data.message):this.errorMessage=a._data.message}})},async getAllAvailableApplicant(){this.allJobApplicants.isLoaded=!0,await t("/api/job-applicants/hiring/available",{method:"GET",params:this.allJobApplicants.params,onRequest:()=>{this.allJobApplicants.isLoading=!0},onResponse:({response:s})=>{if(this.allJobApplicants.isLoading=!1,s.ok)this.allJobApplicants.list=s._data.data;else throw this.errorMessage=s._data.message,new Error(s._data.message)}})},async getApprovedPositions(){this.approvedPositions.isLoaded=!0,await t("/api/manpower/get-approved-positions",{method:"GET",params:this.approvedPositions.params,watch:!1,onRequest:()=>{this.approvedPositions.isLoading=!0},onResponse:({response:s})=>{if(this.approvedPositions.isLoading=!1,s.ok)this.approvedPositions.list=s._data.data,this.approvedPositions.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last};else throw this.errorMessage=s._data.message,new Error(s._data.message)}})},async getOpenPositions(){this.openPositions.isLoaded=!0,await t("/api/manpower/get-open-positions",{method:"GET",params:this.openPositions.params,watch:!1,onRequest:()=>{this.openPositions.isLoading=!0},onResponse:({response:s})=>{if(this.openPositions.isLoading=!1,s.ok)this.openPositions.list=s._data.data,this.openPositions.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last};else throw this.errorMessage=s._data.message,new Error(s._data.message)}})},async getAllRequests(){this.allRequests.isLoaded=!0,await t("/api/manpower/resource",{method:"GET",params:this.allRequests.params,watch:!1,onRequest:()=>{this.allRequests.isLoading=!0},onResponse:({response:s})=>{if(this.allRequests.isLoading=!1,s.ok)this.allRequests.list=s._data.data,this.allRequests.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last};else throw this.errorMessage=s._data.message,new Error(s._data.message)}})},async getMyRequests(){this.myRequests.isLoaded=!0,await t("/api/manpower/my-requests",{method:"GET",params:this.myRequests.params,watch:!1,onRequest:()=>{this.myRequests.isLoading=!0},onResponse:({response:s})=>{if(this.myRequests.isLoading=!1,s.ok)this.myRequests.list=s._data.data,this.myRequests.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last};else throw this.errorMessage=s._data.message,new Error(s._data.message)}})},async getMyApprovals(){this.myApprovals.isLoaded=!0,await t("/api/manpower/my-approvals",{method:"GET",params:this.myApprovals.params,watch:!1,onRequest:()=>{this.myApprovals.isLoading=!0},onResponse:({response:s})=>{if(this.myApprovals.isLoading=!1,s.ok)this.myApprovals.list=s._data.data,this.myApprovals.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last};else throw this.errorMessage=s._data.message,new Error(s._data.message)}})},async getManpowerHiringRequests(){this.forHiringRequests.isLoaded=!0,await t("/api/manpower/for-hiring",{method:"GET",params:this.forHiringRequests.params,watch:!1,onRequest:()=>{this.forHiringRequests.isLoading=!0},onResponse:({response:s})=>{if(this.forHiringRequests.isLoading=!1,s.ok)this.forHiringRequests.list=s._data.data,this.forHiringRequests.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last};else throw this.errorMessage=s._data.message,new Error(s._data.message)}})},async createManpower(){if(this.createData.isLoading)return;this.successMessage="",this.errorMessage="";const s=new FormData;s.set("requesting_department",this.manpower.requesting_department??""),s.set("date_requested",this.manpower.date_requested),s.set("date_required",this.manpower.date_required),s.set("position_id",this.manpower.position_id??""),s.set("employment_type",this.manpower.employment_type),s.set("brief_description",this.manpower.brief_description),s.set("job_description_attachment",this.manpower.job_description_attachment),s.set("nature_of_request",this.manpower.nature_of_request),s.set("age_range",this.manpower.age_range),s.set("status",this.manpower.status),s.set("gender",this.manpower.gender),s.set("educational_requirement",this.manpower.educational_requirement),s.set("preferred_qualifications",this.manpower.preferred_qualifications),s.set("approvals",JSON.stringify(this.manpower.approvals)),s.set("remarks",this.manpower.remarks),s.set("request_status",this.manpower.request_status),s.set("charged_to",this.manpower.charged_to??""),s.set("breakdown_details",this.manpower.breakdown_details),await t("/api/manpower/resource",{method:"POST",body:s,onRequest:()=>{this.createData.isLoading=!0},onResponseError:({response:a})=>{throw this.createData.isLoading=!1,this.errorMessage=a._data.message,new Error(a._data.message)},onResponse:({response:a})=>{this.createData.isLoading=!1,a.ok?(this.reloadResources(),this.successMessage=a._data.message):this.errorMessage=a._data.message}})},clearMessages(){this.errorMessage="",this.successMessage=""},async editManpower(){this.successMessage="",this.errorMessage="";const{data:s,error:a}=await i("/api/manpower/resource/"+this.manpower.id,{method:"PATCH",body:this.manpower,watch:!1});if(s.value)return this.reloadResources(),this.successMessage=s.value.message,s;if(a.value)throw this.errorMessage=a.value.data.message,new Error(this.errorMessage)},async approveApprovalForm(s){this.successMessage="",this.errorMessage="",await i("/api/approvals/approve/ManpowerRequest/"+s,{method:"POST",onResponseError:({response:a})=>{throw this.errorMessage=a._data.message,new Error(a._data.message)},onResponse:({response:a})=>{if(a.ok)return this.reloadResources(),this.successMessage=a._data.message,a._data;throw this.errorMessage=a._data.message,new Error(a._data.message)}})},async denyApprovalForm(s){this.successMessage="",this.errorMessage="";const a=new FormData;a.append("id",s),a.append("remarks",this.remarks),await i("/api/approvals/disapprove/ManpowerRequest/"+s,{method:"POST",body:a,onResponseError:({response:e})=>{throw this.errorMessage=e._data.message,new Error(e._data.message)},onResponse:({response:e})=>{if(e.ok)return this.reloadResources(),this.successMessage=e._data.message,e._data}})},async deleteManpower(s){const{data:a,error:e}=await i("/api/manpower/resource/"+s,{method:"DELETE",watch:!1,onResponse:({response:o})=>{this.successMessage=o._data.message}});if(a.value)return this.reloadResources(),this.successMessage=a.value.message,a;if(e.value)return this.errorMessage=e.value.data.message,e},reloadResources(){const s=this.manpower.approvals,a=[];this.allRequests.isLoaded&&a.push(this.getAllRequests),this.myRequests.isLoaded&&a.push(this.getMyRequests),this.myApprovals.isLoaded&&a.push(this.getMyApprovals),this.forHiringRequests.isLoaded&&a.push(this.getManpowerHiringRequests),this.openPositions.isLoaded&&a.push(this.getOpenPositions),this.allJobApplicants.isLoaded&&a.push(this.getAllAvailableApplicant),this.$reset(),this.manpower.approvals=s,a.forEach(e=>{e()})}}});export{q as E,M as F,T as G,A as H,y as N,v as S,L as a,k as u};
