import{_ as I}from"./DepartmentProjectSelector.CDYdLlti.js";import M from"./Icon.DcF_NU9d.js";import{_ as N}from"./LayoutBoards.vue.1keADq5t.js";import{_ as R}from"./PsTable.CTJad9K5.js";import{_ as F}from"./CustomPagination.CR9ildFS.js";import{_ as $}from"./AcessContainer.DJcSsti6.js";import{B as S,r as k,m as V,s as Y,al as z,o as u,h as H,w as _,a as t,b as r,u as e,x as J,A as O,c as A,F as q,i as G}from"./entry.R6V7NTxy.js";import{u as K,A as Q}from"./Accessibilities.uaboihcy.js";import{u as W}from"./attendancePortal.DpGy-9h9.js";import"./DepartmentSelector.vue.Cl6IMdR7.js";import"./enum.D7iLG1Bk.js";import"./CustomFetch.BRBLzGci.js";import"./ProjectSelector.vue.DM9e2bZy.js";import"./PsSelectSearch.vue.CrY1IpH8.js";import"./id.Dwf9xs1O.js";import"./client-only.QuN6N-R_.js";import"./index.T-zbMaZc.js";import"./loader.C2wIXBoB.js";import"./nuxt-link.drPfi767.js";import"./Utilities.Cbr1Z9cn.js";import"./users.D5_vMoUK.js";const X={class:"md:flex gap-4 justify-center"},Z={class:"w-full mx-auto"},ee={class:"w-full grid grid-cols-1 gap-4 p-2"},te=t("label",{for:"ipAddress",class:"block text-sm font-medium text-zinc-700 py-2"},"Location Name",-1),se={class:"w-full grid grid-cols-1 gap-4 p-2"},ae=t("label",{for:"ipAddress",class:"block text-sm font-medium text-zinc-700 py-2"},"Assignments",-1),oe={class:"p-2 flex gap-2"},ne={class:"w-full py-2"},re={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},le={class:"flex justify-center mx-auto"},Ee={__name:"portal",async setup(ce){let g,f;const d=S(),p=k(!1),y=k(!1),o=W();[g,f]=V(()=>o.getAttendancePortal()),await g,f();const{attendancePortalParams:a,allAttendancePortals:i}=Y(o),P=[{name:"NAME",id:"name_location"},{name:"PROJECT / DEPARTMENT",id:"name"},{name:"TYPE",id:"type"}],m=new Date;m.setFullYear(m.getFullYear()+1);const c=z("portal_token",{expires:m});if(c.value){const s=c.value;c.value="Resetting",setTimeout(()=>{c.value=s},100)}const w=async s=>{try{y.value=!0,await o.deleteAttendancePortal(s.id),d.add({type:"success",text:o.successMessage}),await o.getAttendancePortal()}finally{y.value=!1}},C=async()=>{p.value=!0;try{await o.saveAttendancePortal(),d.add({type:"success",text:o.successMessage}),await o.getAttendancePortal(),c.value=o.portal_token}catch(s){d.add({type:"error",text:s})}p.value=!1},T={delete:!0},j=s=>{i.value.params.page=s.page??"''"},L=()=>{a.value.assignments.push({assignment_type:""})};return(s,b)=>{const E=I,x=M,h=N,U=R,B=F,D=$;return u(),H(D,{"if-access":("useCheckAccessibility"in s?s.useCheckAccessibility:e(K))([("AccessibilityTypes"in s?s.AccessibilityTypes:e(Q)).hrms_attendance_attendance_portal])},{default:_(()=>[t("div",X,[t("div",Z,[r(h,{class:"rounded-lg p-2",title:"Setup Attendance Portal",loading:e(p)},{default:_(()=>[t("div",ee,[t("div",null,[te,J(t("input",{"onUpdate:modelValue":b[0]||(b[0]=v=>e(a).name_location=v),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:"text"},null,512),[[O,e(a).name_location]])])]),t("div",se,[ae,(u(!0),A(q,null,G(e(a).assignments,(v,n)=>(u(),A("div",{key:n,class:"flex items-center gap-2"},[r(E,{"select-type":e(a).assignments[n].assignment_type,"onUpdate:selectType":l=>e(a).assignments[n].assignment_type=l,"department-id":e(a).assignments[n].department_id,"onUpdate:departmentId":l=>e(a).assignments[n].department_id=l,"project-id":e(a).assignments[n].project_id,"onUpdate:projectId":l=>e(a).assignments[n].project_id=l,title:"",class:"py-2 w-full"},null,8,["select-type","onUpdate:selectType","department-id","onUpdate:departmentId","project-id","onUpdate:projectId"]),r(x,{name:"iconoir:trash",class:"text-2xl text-slate-800 hover:text-blue-500 cursor-pointer",onClick:l=>e(a).assignments.splice(n,1)},null,8,["onClick"])]))),128))]),t("div",oe,[r(x,{name:"iconoir:plus",class:"text-2xl text-slate-800 hover:text-blue-500 cursor-pointer",onClick:L})]),t("div",{class:"flex mt-6 justify-end py-2"},[t("button",{type:"button",class:"md:w-1/3 bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 focus:outline-none focus:bg-green-700",onClick:C}," Setup ")])]),_:1},8,["loading"])]),t("div",ne,[r(h,{title:"Attendance Portal List",class:"w-full",loading:e(i).isLoading},{default:_(()=>[t("div",re,[r(U,{"header-columns":P,actions:T,datas:e(i).list,onDeleteRow:w},null,8,["datas"])]),t("div",le,[r(B,{links:e(i).pagination,onChangeParams:j},null,8,["links"])])]),_:1},8,["loading"])])])]),_:1},8,["if-access"])}}};export{Ee as default};
