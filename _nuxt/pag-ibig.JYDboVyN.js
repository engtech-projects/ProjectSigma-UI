import{_ as T}from"./LayoutBoards.vue.D_rbqYxd.js";import{ab as F,l as z,O as D,_ as G,s as A,B as U,r as k,o as E,h as R,w as P,a as e,g as I,x as r,u as t,A as c,G as V,t as x,y as M,p as N,e as O,aF as Y,b as v}from"./entry.32UGFqj-.js";import{h as C}from"./CustomFetch.ggXvTdIz.js";import{_ as Q}from"./editBoards.vue.DA5g6BdX.js";import{_ as X}from"./PsTable.BPIFONj1.js";import{_ as J}from"./CustomPagination.C91H0oe5.js";import{_ as K}from"./AcessContainer.Dum7aOuo.js";import{u as W}from"./vue.f36acd1f.Ds2AlAv6.js";import{u as Z,A as ee}from"./Accessibilities.xGffDRXj.js";import"./loader.BQ9QddgL.js";import"./Icon.CrHlyQOo.js";import"./index.T-zbMaZc.js";import"./nuxt-link.C5IpI_HT.js";import"./Utilities.DofxnkSu.js";import"./users.G4iuGzk0.js";const{token:w}=F(),S=D(),$=z("pagibigContrib",{state:()=>({isEdit:!1,contribution:{id:null,range_from:null,range_to:null,employee_share_percent:null,employer_share_percent:null,employer_maximum_contribution:null,employee_maximum_contribution:null},list:[],pagination:{},getParams:{},errorMessage:"",successMessage:""}),actions:{async getContribution(){const{data:n,error:o}=await C("/api/pagibig",{baseURL:S.public.HRMS_API_URL,method:"GET",headers:{Authorization:w.value+"",Accept:"application/json"},params:this.getParams,onResponse:({response:s})=>{this.list=s._data.data.data,this.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last}}},"$uiCaoPomro");if(n)return n;if(o)return o},async addContribution(){this.successMessage="",this.errorMessage="",await C("/api/pagibig",{baseURL:S.public.HRMS_API_URL,method:"POST",headers:{Authorization:w.value+"",Accept:"application/json"},body:this.contribution,watch:!1,onResponse:({response:n})=>{n.ok?(this.getContribution(),this.reset(),this.successMessage=n._data.message):this.errorMessage=n._data.message}},"$AYAlRAL5LX")},clearMessages(){this.errorMessage="",this.successMessage=""},async editContribution(){this.successMessage="",this.errorMessage="";const{data:n,error:o}=await C("/api/pagibig/"+this.contribution.id,{baseURL:S.public.HRMS_API_URL,method:"PATCH",headers:{Authorization:w.value+"",Accept:"application/json"},body:this.contribution,watch:!1},"$qQj2athUyE");if(n.value)return this.getContribution(),this.reset(),this.successMessage=n.value.message,n;if(o.value)return this.errorMessage=o.value.data.message,o},async deleteContribution(n){const{data:o,error:s}=await C("/api/pagibig/"+n,{baseURL:S.public.HRMS_API_URL,method:"DELETE",headers:{Authorization:w.value+"",Accept:"application/json"},watch:!1,onResponse:({response:l})=>{this.successMessage=l._data.message}},"$Y5uwtcTqCF");if(o.value)return this.getContribution(),this.successMessage=o.value.message,o;if(s.value)return this.errorMessage=s.value.data.message,s},reset(){this.contribution={id:null,range_from:null,range_to:null,employee_share_percent:null,employer_share_percent:null,employer_maximum_contribution:null,employee_maximum_contribution:null},this.isEdit=!1,this.successMessage="",this.errorMessage=""}}}),h=n=>(N("data-v-5dad1d17"),n=n(),O(),n),te={class:"text-gray-500 p-2"},se=["onSubmit"],oe=h(()=>e("label",{class:"text-sm"},"Add Pag-IBIG Share",-1)),ie={class:"grid grid-cols-2 gap-2"},ae=h(()=>e("label",{for:"pagibig_range_from",class:"text-sm italic"},"Range From",-1)),ne=h(()=>e("label",{for:"pagibig_range_to",class:"text-sm italic"},"Range To",-1)),re={class:"grid grid-cols-2 gap-2"},le=h(()=>e("label",{for:"pagibig_employerShare",class:"text-sm italic"},"Employer Share Percent (%)",-1)),ue=h(()=>e("label",{for:"emprMaxCont",class:"text-sm italic"},"Employer Maximum Contribution",-1)),ce=h(()=>e("label",{for:"pagibig_employeeShare",class:"text-sm italic"},"Employee Share Percent (%)",-1)),me=h(()=>e("label",{for:"empMaxCont",class:"text-sm italic"},"Employee Maximum Contribution",-1)),de=h(()=>e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"flex-1 text-white p-2 rounded bg-teal-600 content-center mt-5"}," Add Contribution ")],-1)),pe={__name:"AddContribution",setup(n){const o=$(),{contribution:s,errorMessage:l,successMessage:p}=A(o),d=U(),m=k(!1),_=async()=>{try{m.value=!0,await o.addContribution(),o.errorMessage!==""?d.add({type:"error",text:o.errorMessage}):d.add({type:"success",text:o.successMessage})}catch{d.add({type:"error",text:o.errorMessage})}finally{o.clearMessages(),m.value=!1}};return(y,a)=>{const g=T;return E(),R(g,{title:"Pag-IBIG",loading:t(m),class:"w-full"},{default:P(()=>[e("div",te,[e("form",{onSubmit:I(_,["prevent"])},[oe,e("div",ie,[e("div",null,[ae,r(e("input",{id:"pagibig_range_from","onUpdate:modelValue":a[0]||(a[0]=i=>t(s).range_from=i),type:"number",class:"w-full rounded-lg",step:".01",min:"0",required:""},null,512),[[c,t(s).range_from]])]),e("div",null,[ne,r(e("input",{id:"pagibig_range_to","onUpdate:modelValue":a[1]||(a[1]=i=>t(s).range_to=i),type:"number",class:"w-full rounded-lg",step:".01",min:"0"},null,512),[[c,t(s).range_to]])])]),e("div",re,[e("div",null,[le,r(e("input",{id:"pagibig_employerShare","onUpdate:modelValue":a[2]||(a[2]=i=>t(s).employer_share_percent=i),type:"number",class:"w-full rounded-lg",step:".01",min:"0",required:""},null,512),[[c,t(s).employer_share_percent]]),ue,r(e("input",{id:"emprMaxCont","onUpdate:modelValue":a[3]||(a[3]=i=>t(s).employer_maximum_contribution=i),type:"number",class:"w-full rounded-lg",step:".01",min:"0",required:""},null,512),[[c,t(s).employer_maximum_contribution]])]),e("div",null,[ce,r(e("input",{id:"pagibig_employeeShare","onUpdate:modelValue":a[4]||(a[4]=i=>t(s).employee_share_percent=i),type:"number",class:"w-full rounded-lg",step:".01",min:"0",required:""},null,512),[[c,t(s).employee_share_percent]]),me,r(e("input",{id:"empMaxCont","onUpdate:modelValue":a[5]||(a[5]=i=>t(s).employee_maximum_contribution=i),type:"number",class:"w-full rounded-lg",step:".01",min:"0",required:""},null,512),[[c,t(s).employee_maximum_contribution]])])]),de],40,se),e("p",{hidden:"",class:V(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!t(l)}])},x(t(l)),3),r(e("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic"},x(t(p)),513),[[M,t(p)]])])]),_:1},8,["loading"])}}},_e=G(pe,[["__scopeId","data-v-5dad1d17"]]),ge={class:"text-gray-500 mt-2"},be=["onSubmit"],he=e("div",{class:"space-y-2"},[e("label",{class:"text-md italic"},"Edit Contribution Range")],-1),ye={class:"grid grid-cols-2 gap-2"},fe=e("label",{for:"rangeFrom",class:"text-sm italic"},"Range From",-1),xe=e("label",{for:"rangeTo",class:"text-sm italic"},"Range To",-1),ve={class:"grid grid-cols-2 gap-2"},Me=e("label",{for:"pagibig_employerShare",class:"text-sm italic"},"Employer Share Percent (%)",-1),Ce=e("label",{for:"emprMaxCont",class:"text-sm italic"},"Employer Maximum Contribution",-1),we=e("label",{for:"pagibig_employeeShare",class:"text-sm italic"},"Employee Share Percent (%)",-1),Se=e("label",{for:"empMaxCont",class:"text-sm italic"},"Employee Maximum Contribution",-1),Ae=e("button",{type:"submit",class:"flex-1 text-white p-2 rounded bg-teal-600 content-center mt-5"}," Save ",-1),Ee={hidden:"",class:"text-red-600 text-center font-semibold"},Re={__name:"editContribution",setup(n){const o=$(),{contribution:s,errorMessage:l,successMessage:p}=A(o),d=U(),m=k(!1),_=()=>{o.reset()},y=async()=>{try{m.value=!0,await o.editContribution(),d.add({type:"success",text:o.successMessage})}catch{d.add({type:"error",text:o.errorMessage||"something went wrong."})}finally{o.clearMessages(),m.value=!1}},a=(g,i)=>{g[i]=Math.abs(g[i])};return(g,i)=>{const L=Q,b=Y("oninput");return E(),R(L,{title:"Edit Contribution",loading:t(m)},{default:P(()=>[e("div",ge,[e("form",{onSubmit:I(y,["prevent"])},[he,e("div",ye,[e("div",null,[fe,r(e("input",{id:"rangeFrom","onUpdate:modelValue":i[0]||(i[0]=u=>t(s).range_from=u),type:"number",class:"w-full rounded-lg",step:".01",min:"0",required:""},null,512),[[c,t(s).range_from],[b,a(t(s),"range_from")]])]),e("div",null,[xe,r(e("input",{id:"rangeTo","onUpdate:modelValue":i[1]||(i[1]=u=>t(s).range_to=u),type:"number",class:"w-full rounded-lg",step:".01",min:"0"},null,512),[[c,t(s).range_to],[b,a(t(s),"range_to")]])])]),e("div",ve,[e("div",null,[Me,r(e("input",{id:"pagibig_employerShare","onUpdate:modelValue":i[2]||(i[2]=u=>t(s).employer_share_percent=u),type:"number",class:"w-full rounded-lg",step:".01",min:"0",required:""},null,512),[[c,t(s).employer_share_percent],[b,a(t(s),"employer_share_percent")]]),Ce,r(e("input",{id:"emprMaxCont","onUpdate:modelValue":i[3]||(i[3]=u=>t(s).employer_maximum_contribution=u),type:"number",class:"w-full rounded-lg",step:".01",min:"0",required:""},null,512),[[c,t(s).employer_maximum_contribution],[b,a(t(s),"employer_maximum_contribution")]])]),e("div",null,[we,r(e("input",{id:"pagibig_employeeShare","onUpdate:modelValue":i[4]||(i[4]=u=>t(s).employee_share_percent=u),type:"number",class:"w-full rounded-lg",step:".01",min:"0",required:""},null,512),[[c,t(s).employee_share_percent],[b,a(t(s),"employee_share_percent")]]),Se,r(e("input",{id:"empMaxCont","onUpdate:modelValue":i[5]||(i[5]=u=>t(s).employee_maximum_contribution=u),type:"number",class:"w-full rounded-lg",step:".01",min:"0"},null,512),[[c,t(s).employee_maximum_contribution],[b,a(t(s),"employee_maximum_contribution")]])])]),e("div",{class:"flex justify-end gap-4"},[Ae,e("button",{type:"button",class:"flex-1 text-white p-2 rounded bg-gray-700 content-center mt-5 hover:bg-gray-500",onClick:_}," Cancel ")])],40,be),e("p",Ee,x(t(l)),1),r(e("p",{hidden:"",class:"text-green-600 text-center font-semibold"},x(t(p)),513),[[M,t(p)]])])]),_:1},8,["loading"])}}},Pe={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},$e={class:"flex justify-center mx-auto p-2"},Le={__name:"ContributionList",setup(n){const o=$(),{list:s,isEdit:l,contribution:p,getParams:d,pagination:m,errorMessage:_,successMessage:y}=A(o),a=U(),g=k(!1),i=f=>{l.value=!0,p.value=f},L=async f=>{try{g.value=!0,await o.deleteContribution(f.id),a.add({type:"success",text:o.successMessage})}finally{g.value=!1}},b=f=>{d.value.page=f.page??""},u=[{name:"Range From",id:"range_from"},{name:"Range To",id:"range_to"},{name:"Employer Share %",id:"employer_share_percent"},{name:"Employer Max Contribution",id:"employer_maximum_contribution"},{name:"Employee Share %",id:"employee_share_percent"},{name:"Employee Max Contribution",id:"employee_maximum_contribution"}],q={edit:!0,delete:!0};return(f,ke)=>{const B=X,H=J,j=T;return E(),R(j,{title:"Contribution List",class:"w-full"},{default:P(()=>[e("div",Pe,[v(B,{"header-columns":u,datas:t(s),actions:q,onEditRow:i,onDeleteRow:L},null,8,["datas"])]),e("div",$e,[v(H,{links:t(m),onChangeParams:b},null,8,["links"])]),e("p",{hidden:"",class:V(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!t(_)}])},x(t(_)),3),r(e("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic"},x(t(y)),513),[[M,t(y)]])]),_:1})}}},Ue={class:"flex flex-col md:flex-row gap-4"},Xe={__name:"pag-ibig",setup(n){const o=$(),{isEdit:s}=A(o);return o.getContribution(),W({title:"Pag-IBIG"}),(l,p)=>{const d=_e,m=Re,_=Le,y=K;return E(),R(y,{"if-access":("useCheckAccessibility"in l?l.useCheckAccessibility:t(Z))([("AccessibilityTypes"in l?l.AccessibilityTypes:t(ee)).hrms_setup_pag_ibig])},{default:P(()=>[e("div",Ue,[r(v(d,null,null,512),[[M,!t(s)]]),r(v(m,null,null,512),[[M,t(s)]]),v(_)])]),_:1},8,["if-access"])}}};export{Xe as default};
