import{_ as it}from"./StatusRibbon.BLB8aOUn.js";import dt from"./Icon.DcF_NU9d.js";import{_ as ut}from"./nuxt-link.drPfi767.js";import{_ as pt}from"./ListView.DgUPeMcI.js";import{_ as _t}from"./ApprovalDenyButton.B1ShEyLo.js";import{u as yt,_ as gt}from"./TransactionFlow.B8FObCfL.js";import{_ as mt}from"./IsoHeader.vue.CeUOAvDJ.js";import{_ as xt}from"./FormSignatory.clwn2CYc.js";import{f as ht,ab as ft,C as f,o as c,c as i,F,i as M,b as y,u as s,j as k,a as t,t as n,p as bt,e as vt,_ as wt,n as Ct,q as kt,r as O,s as $t,B as Dt,L as At,h as st,w as I,d as C,v as Rt,O as Tt}from"./entry.R6V7NTxy.js";import{u as Et,a as Pt}from"./enums.DZVv3ml5.js";import{j as qt,a as g}from"./Utilities.Cbr1Z9cn.js";import{_ as St}from"./LayoutPrint.Dr_MMYe1.js";import{_ as jt}from"./PsModal.DW9SixU3.js";import{a as It}from"./Accessibilities.uaboihcy.js";const m=o=>(bt("data-v-cddcbf4c"),o=o(),vt(),o),Ft={class:"flex flex-col gap-4 h-full p-4"},Mt={key:0,id:"headText",class:"text-2xl text-center font-bold mb-6"},Nt={class:"flex flex-col justify-between border-2 border-gray-800 flex-1 py-6 w-[800px]"},Ot={class:"flex flex-col gap-4 h-full"},Vt={key:0,class:"flex flex-col gap-2 mb-10"},Lt={class:"flex gap-24 !text-xs"},Ut={class:"flex flex-between flex-2 gap-6"},Bt=m(()=>t("div",{class:"flex justify-between flex-1 items-center"},[t("span",{class:"flex-1 font-bold"}," PAYEE "),t("span",null," : ")],-1)),Yt={class:"flex-3 border-b-2 border-gray-700"},Ht={class:"flex flex-between items-end flex-1 gap-6"},Qt=m(()=>t("div",{class:"flex justify-between flex-1"},[t("span",{class:"flex-1 font-bold"}," DATE "),t("span",null," : ")],-1)),Wt={class:"flex-3 border-b-2 border-gray-700"},Gt={class:"flex gap-24"},Jt={class:"flex flex-between flex-2 gap-6 items-end"},zt=m(()=>t("div",{class:"flex justify-between flex-1 items-center"},[t("span",{class:"flex-1 font-bold text-xs"}," DESCRIPTION "),t("span",null," : ")],-1)),Kt={class:"flex-3 border-b-2 border-gray-700"},Xt=m(()=>t("div",{class:"flex flex-between flex-1 gap-6"},null,-1)),Zt={class:"flex flex-col"},te={class:"flex-1 mb-16"},ee={key:0,class:"w-full !text-xs"},se=m(()=>t("thead",null,[t("tr",null,[t("th",{class:"border-2 border-gray-800 text-xs"}," PARTICULARS "),t("th",{class:"border-2 border-gray-800 text-xs w-1/3"}," PROJECT/SECTION CODE "),t("th",{class:"border-2 border-gray-800 text-xs"}," COST "),t("th",{class:"border-2 border-gray-800 text-xs w-24"}," VAT "),t("th",{class:"border-2 border-black border-b-gray-800 text-xs w-24"}," TOTAL ")])],-1)),ae={class:"border px-4 py-1 border-gray-800 text-xs relative"},oe={class:"border px-4 py-1 border-gray-800 text-xs"},ne={class:"border px-4 py-1 border-gray-800 text-xs"},re={class:"border px-4 py-1 border-gray-800 text-xs"},le={class:"border px-4 py-1 border-gray-800 border-y-gray-800 text-xs"},ce=m(()=>t("td",{class:"border px-4 py-1 border-gray-800 text-xs relative"},null,-1)),ie=m(()=>t("td",{class:"border px-4 py-1 border-gray-800 text-xs"},null,-1)),de=m(()=>t("td",{class:"border px-4 py-1 border-gray-800 text-xs"},null,-1)),ue=m(()=>t("td",{class:"border px-4 py-1 border-gray-800 text-xs"},null,-1)),pe=m(()=>t("td",{class:"border px-4 py-1 font-bold border-gray-800 border-y-gray-800 text-xs"},null,-1)),_e=[ce,ie,de,ue,pe],ye={key:0,class:"border-2 border-black"},ge=m(()=>t("td",null,null,-1)),me=m(()=>t("td",{class:"text-center border-2 border-black font-bold py-1"}," TOTAL ",-1)),xe={class:"border-2 border-black font-bold py-1 px-4"},he={class:"border-2 border-black font-bold py-1 px-4"},fe={class:"border-2 border-black font-bold py-1 px-4"},be={key:1,class:"block text-center text-gray-600"},ve={class:"flex justify-around"},we=ht({__name:"PrintView",props:{data:{type:Object,default:null}},setup(o){const p=o,{data:N}=ft(),$=f(()=>{let a=0;return h.value.forEach(l=>{a+=parseFloat(l==null?void 0:l.cost)}),a}),b=f(()=>{const a=[];return p.data.approvals.forEach(l=>{const v={name:l==null?void 0:l.employee_name,title:l==null?void 0:l.employee_position,signature:l==null?void 0:l.employee_signature};a.push(v)}),a}),D=f(()=>{let a=0;return h.value.forEach(l=>{a+=parseFloat(l==null?void 0:l.total_vat_amount)}),a}),h=f(()=>p.data.details),A=f(()=>P(h.value,15));function P(a,l){const v=[];for(let x=0;x<a.length;x+=l)v.push(a.slice(x,x+l));return v}const R=f(()=>h.value.length>15?0:15-h.value.length);return(a,l)=>{const v=mt,x=xt;return c(),i("div",Ft,[(c(!0),i(F,null,M(s(A),(q,w)=>{var S,j;return c(),i("div",{key:w,class:"flex flex-col min-h-[1000px] gap-10 min-w-[800px]"},[y(v,{page:{currentPage:w+1,totalPages:s(A).length},"document-code":("useAccountingDocCodeEnums"in a?a.useAccountingDocCodeEnums:s(Et)).prf},null,8,["page","document-code"]),w===0?(c(),i("h1",Mt," PAYMENT REQUEST FORM ")):k("",!0),t("div",Nt,[t("div",Ot,[w===0?(c(),i("div",Vt,[t("div",Lt,[t("div",Ut,[Bt,t("span",Yt,n(p.data.stakeholder?p.data.stakeholder.name:""),1)]),t("div",Ht,[Qt,t("span",Wt,n(("dateToString"in a?a.dateToString:s(qt))(new Date(p.data.request_date))),1)])]),t("div",Gt,[t("div",Jt,[zt,t("span",Kt,n(p.data.description),1)]),Xt])])):k("",!0),t("div",Zt,[t("div",te,[p.data.details.length>0?(c(),i("table",ee,[se,t("tbody",null,[(c(!0),i(F,null,M(q,(e,r)=>{var d;return c(),i("tr",{key:r,class:"hover:bg-gray-100 cursor-pointer"},[t("td",ae,n(e.particulars),1),t("td",oe,n((d=e.stakeholder)==null?void 0:d.name),1),t("td",ne,n(("accountingCurrency"in a?a.accountingCurrency:s(g))(e.cost)),1),t("td",re,n(("accountingCurrency"in a?a.accountingCurrency:s(g))(e.total_vat_amount)),1),t("td",le,n(("accountingCurrency"in a?a.accountingCurrency:s(g))(e.amount)),1)])}),128)),(c(!0),i(F,null,M(s(R),e=>(c(),i("tr",{key:e,class:"hover:bg-gray-100 cursor-pointer h-6"},_e))),128)),w===s(A).length-1?(c(),i("tr",ye,[ge,me,t("td",xe,n(("accountingCurrency"in a?a.accountingCurrency:s(g))(s($))),1),t("td",he,n(("accountingCurrency"in a?a.accountingCurrency:s(g))(s(D))),1),t("td",fe,n(("accountingCurrency"in a?a.accountingCurrency:s(g))(parseFloat(p.data.total))),1)])):k("",!0)])])):k("",!0),p.data.details.length===0?(c(),i("span",be," No entries yet. ")):k("",!0)])])]),t("div",ve,[y(x,{label:"REQUESTED BY",signatory:{name:p.data.created_by_user,title:""}},null,8,["signatory"]),y(x,{label:"APPROVED BY",signatories:s(b)},null,8,["signatories"]),y(x,{label:"RECEIVED BY",signatory:{name:(j=(S=s(N))==null?void 0:S.employee)==null?void 0:j.fullname_last,title:""}},null,8,["signatory"])])])])}),128))])}}}),Ce=wt(we,[["__scopeId","data-v-cddcbf4c"]]),ke={key:0,class:"flex gap-2 px-4"},$e={class:"w-3/4"},De=t("div",{class:"p-2 py-4 flex gap-2 w-full mb-4"},[t("span",{class:"text-gray-900 text-4xl text-center w-full block flex-1"},"Payment Request")],-1),Ae={class:"grid md:grid-cols-3 gap-2 md:justify-between"},Re={class:"p-2 flex gap-2"},Te=t("span",{class:"text-teal-600 text-light"},"PRF Number: ",-1),Ee={class:"text-gray-900"},Pe={class:"p-2 flex gap-2"},qe=t("span",{class:"text-teal-600 text-light"},"Payee: ",-1),Se={class:"p-2 flex gap-2"},je=t("span",{class:"text-teal-600 text-light"},"Amount: ",-1),Ie={class:"grid md:grid-cols-3 gap-2 md:justify-between"},Fe={class:"p-2 flex gap-2"},Me=t("span",{class:"text-teal-600 text-light"},"Prepared by: ",-1),Ne={class:"p-2 flex gap-2"},Oe=t("span",{class:"text-teal-600 text-light"},"Prepared on: ",-1),Ve={class:"p-2 flex gap-2"},Le=t("span",{class:"text-teal-600 text-light"},"Status: ",-1),Ue={key:0},Be=t("span",{class:"text-teal-600 text-light"},"Withholding Tax Information ",-1),Ye={class:"flex gap-4"},He={class:"grid md:grid-cols-1 gap-2 md:justify-between"},Qe=t("div",{class:"p-2 flex gap-2"},[t("span",{class:"text-teal-600 text-light"},"Description/Remarks: ")],-1),We={class:"p-2 flex gap-2"},Ge={class:"flex justify-end"},Je={class:"p-2 border border-gray-200 rounded-lg"},ze=t("h2",{class:"text-xl text-gray-800 tex-center font-bold p-2"}," Payment Request Details ",-1),Ke={class:"overflow-x-auto"},Xe={class:"min-w-full overflow-hidden overflow-x-auto align-middle shadow sm:rounded-lg"},Ze={class:"min-w-full divide-y border border-gray-200"},ts=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-950 uppercase tracking-wider"}," Particulars "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-950 uppercase tracking-wider"}," Project/Section Code "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-950 uppercase tracking-wider"}," Cost "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-950 uppercase tracking-wider"}," Total Vat "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-950 uppercase tracking-wider"}," Total Amount ")])],-1),es={class:"bg-white divide-y divide-gray-200"},ss={class:"px-6 py-4 whitespace-nowrap"},as={class:"text-sm text-gray-600"},os={class:"px-6 py-4 whitespace-nowrap"},ns={class:"text-sm text-gray-600"},rs={class:"px-6 py-4 whitespace-nowrap"},ls={class:"text-sm text-gray-600"},cs={class:"px-6 py-4 whitespace-nowrap"},is={class:"text-sm text-gray-600"},ds={class:"px-6 py-4 whitespace-nowrap"},us={class:"text-sm text-gray-600"},ps=t("td",{class:"px-6 py-4 whitespace-nowrap",colspan:"2"},[t("div",{class:"text-sm text-gray-600 font-bold"}," TOTAL ")],-1),_s={class:"px-6 py-4 whitespace-nowrap"},ys={class:"text-sm text-gray-600 font-bold"},gs={class:"px-6 py-4 whitespace-nowrap"},ms={class:"text-sm text-gray-600 font-bold"},xs={class:"px-6 py-4 whitespace-nowrap"},hs={class:"text-sm text-gray-600 font-bold"},fs={class:"w-full"},bs={key:1,class:"flex gap-2 p-2 justify-end relative"},vs={class:"w-1/4"},ws={class:"flex gap-2 justify-end w-full p-8"},Ms={__name:"InfoModal",props:Ct({paymentData:{type:Object,required:!1,default:null},fillable:{type:Boolean,required:!1,default:!1}},{showModal:{required:!1,type:Boolean}}),emits:["update:showModal"],setup(o){const p=o,N=Tt(),$=kt(o,"showModal"),b=O(!1),D=yt(),{remarks:h,paymentRequest:A}=$t(D),P=Dt(),R=O(!1),a=()=>{$.value=!1},l=O({pending:"warning",approved:"success",denied:"error"}),v=async e=>{try{R.value=!0,await D.approveApprovalForm(e),P.add({type:"success",text:D.successMessage}),a()}catch(r){P.add({type:"error",text:r||"something went wrong."})}finally{R.value=!1}},x=async e=>{try{R.value=!0,await D.denyApprovalForm(e),P.add({type:"success",text:D.successMessage}),a()}catch(r){P.add({type:"error",text:r||"something went wrong."})}finally{R.value=!1}},q=f(()=>{var r,d;let e=0;return(d=(r=p.paymentData)==null?void 0:r.details)==null||d.forEach(_=>{e+=parseFloat(_==null?void 0:_.cost)}),e}),w=f(()=>{var r,d;let e=0;return(d=(r=p.paymentData)==null?void 0:r.details)==null||d.forEach(_=>{e+=parseFloat(_==null?void 0:_.total_vat_amount)}),e}),S=f(()=>q.value+w.value),j=e=>{const r=A.value.approvals,d={...e};d.stakeholder&&(d.stakeholderInformation=d.stakeholder,delete d.stakeholder),d.details&&(d.details=d.details.map(_=>{const T={..._};return T.stakeholder&&(T.stakeholderInformation=T.stakeholder,delete T.stakeholder),T})),Object.assign(A.value,{request_date:null,...d}),A.value.approvals=r,$.value=!1,document.querySelector("[data-tabs-target='#npoForm']").click()};return At($,e=>{e||(b.value=!1)}),(e,r)=>{const d=it,_=dt,T=ut,at=pt,ot=_t,nt=gt,rt=Ce,lt=St,ct=jt;return c(),st(ct,{"show-modal":$.value,"onUpdate:showModal":r[4]||(r[4]=E=>$.value=E),"is-loading":s(R),title:""},{body:I(()=>{var E,V,L,U,B,Y,H,Q,W,G,J,z,K,X,Z,tt,et;return[y(d,{type:s(l)[(E=o.paymentData)==null?void 0:E.request_status.toLowerCase()],position:"top-left",status:(V=o.paymentData)==null?void 0:V.request_status,class:"z-30"},null,8,["type","status"]),s(b)?(c(),st(lt,{key:1},{default:I(()=>[y(rt,{data:o.paymentData},null,8,["data"])]),_:1})):(c(),i("div",ke,[t("div",$e,[De,t("div",Ae,[t("div",Re,[Te,t("span",Ee,n((L=o.paymentData)==null?void 0:L.prf_no),1)]),t("div",Pe,[qe,C(" "+n((B=(U=o.paymentData)==null?void 0:U.stakeholder)==null?void 0:B.name),1)]),t("div",Se,[je,C(" "+n(("accountingCurrency"in e?e.accountingCurrency:s(g))((Y=o.paymentData)==null?void 0:Y.total)),1)])]),t("div",Ie,[t("div",Fe,[Me,C(" "+n((H=o.paymentData)==null?void 0:H.created_by_user),1)]),t("div",Ne,[Oe,C(" "+n((Q=o.paymentData)==null?void 0:Q.date_filed),1)]),t("div",Ve,[Le,C(" "+n((W=o.paymentData)==null?void 0:W.request_status),1)])]),(G=o.paymentData)!=null&&G.with_holding_tax?(c(),i("div",Ue,[Be,t("div",Ye,[t("div",null," Percentage: "+n((J=o.paymentData)==null?void 0:J.with_holding_tax.wtax_percentage),1),t("div",null," Type: "+n((z=o.paymentData)==null?void 0:z.with_holding_tax.vat_type),1)])])):k("",!0),t("div",He,[Qe,t("div",We,[t("p",null,n((K=o.paymentData)==null?void 0:K.description),1)])]),t("div",Ge,[t("div",null,[y(T,{class:"flex items-center gap-2 p-2 border border-green-600 rounded-lg hover:bg-green-100",to:s(N).public.ACCOUNTING_API_URL+"/document-viewer?id="+((X=o.paymentData)==null?void 0:X.id),target:"_blank"},{default:I(()=>[y(_,{name:"ic:sharp-file-download",color:"green",class:"w-4 h-4"}),C(" View Attachment File ")]),_:1},8,["to"])])]),t("div",Je,[ze,t("div",Ke,[t("div",Xe,[t("table",Ze,[ts,t("tbody",es,[(c(!0),i(F,null,M((Z=o.paymentData)==null?void 0:Z.details,u=>(c(),i("tr",{key:u.id},[t("td",ss,[t("div",as,n(u==null?void 0:u.particulars),1)]),t("td",os,[t("div",ns,n(u==null?void 0:u.stakeholder.name),1)]),t("td",rs,[t("div",ls,n(("accountingCurrency"in e?e.accountingCurrency:s(g))(u==null?void 0:u.cost)),1)]),t("td",cs,[t("div",is,n(("accountingCurrency"in e?e.accountingCurrency:s(g))(u==null?void 0:u.total_vat_amount)),1)]),t("td",ds,[t("div",us,n(("accountingCurrency"in e?e.accountingCurrency:s(g))(u==null?void 0:u.amount)),1)])]))),128)),t("tr",null,[ps,t("td",_s,[t("div",ys,n(("accountingCurrency"in e?e.accountingCurrency:s(g))(s(q))),1)]),t("td",gs,[t("div",ms,n(("accountingCurrency"in e?e.accountingCurrency:s(g))(s(w))),1)]),t("td",xs,[t("div",hs,n(("accountingCurrency"in e?e.accountingCurrency:s(g))(s(S))),1)])])])])])])]),t("div",fs,[y(at,{approvals:(tt=o.paymentData)==null?void 0:tt.approvals},null,8,["approvals"])]),o.paymentData.next_approval&&("useCheckIsCurrentUser"in e?e.useCheckIsCurrentUser:s(It))((et=o.paymentData.next_approval)==null?void 0:et.user_id)?(c(),i("div",bs,[y(ot,{"deny-remarks":s(h),"onUpdate:denyRemarks":r[0]||(r[0]=u=>Rt(h)?h.value=u:null),"request-id":o.paymentData.id,onApprove:v,onDeny:x},null,8,["deny-remarks","request-id"])])):k("",!0)]),t("div",vs,[y(nt,{"transaction-option":"view","transaction-flow-model-list":o.paymentData.transaction_flow,onCloseModal:a},null,8,["transaction-flow-model-list"])])]))]}),footer:I(()=>[t("div",ws,[!s(b)&&o.paymentData.request_status===("AccountingRequestStatus"in e?e.AccountingRequestStatus:s(Pt)).denied?(c(),i("button",{key:0,class:"flex items-center gap-1 justify-center bg-green-600 p-2 hover:bg-green-900 text-white rounded-md w-32 text-sm",onClick:r[1]||(r[1]=E=>j(o.paymentData))}," USE AS NEW REQUEST ")):k("",!0),s(b)?(c(),i("button",{key:2,class:"flex items-center gap-1 justify-center bg-orange-600 p-2 hover:bg-orange-900 text-white rounded-md w-32 text-sm",onClick:r[3]||(r[3]=E=>b.value=!1)},[y(_,{name:"iconoir:printing-page"}),C(" Hide Preview ")])):(c(),i("button",{key:1,class:"flex items-center gap-1 justify-center bg-gray-600 p-2 hover:bg-gray-900 text-white rounded-md w-32 text-sm",onClick:r[2]||(r[2]=E=>b.value=!0)},[y(_,{name:"iconoir:printing-page"}),C(" Print Preview ")]))])]),_:1},8,["show-modal","is-loading"])}}};export{Ms as _};
