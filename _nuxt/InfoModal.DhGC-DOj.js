import{_ as et}from"./StatusRibbon.BLB8aOUn.js";import{_ as Z}from"./ListView.DgUPeMcI.js";import{_ as st}from"./IsoHeader.vue.CeUOAvDJ.js";import{u as ot}from"./enums.DZVv3ml5.js";import{j as Q,c as rt,a as O,f as E}from"./Utilities.Cbr1Z9cn.js";import{f as at,C,o as c,c as d,F as M,i as P,b as _,u as o,j as I,a as t,t as a,p as nt,e as ct,_ as dt,n as lt,q as it,r as q,s as ut,B as pt,L as bt,h as X,w as L,d as w,v as ht}from"./entry.R6V7NTxy.js";import{_ as xt}from"./LayoutPrint.Dr_MMYe1.js";import{_ as _t}from"./ApprovalDenyButton.B1ShEyLo.js";import yt from"./Icon.DcF_NU9d.js";import{_ as gt}from"./PsModal.DW9SixU3.js";import{a as mt}from"./Accessibilities.uaboihcy.js";import{u as ft}from"./voucher.CMoMfa7r.js";const i=s=>(nt("data-v-8a431895"),s=s(),ct(),s),vt={id:"toPrint",class:"flex flex-col gap-2 bg-white left-0 top-0 w-screen max-w-[100%] p-2"},wt={key:0,id:"headText",class:"text-2xl text-center font-bold text-block border-b-2 pb-2 border-black"},Ct={key:1,class:"flex flex-col gap-2 !text-xs"},kt={class:"flex justify-end gap-4 mb-4 my-4 pr-2"},$t=i(()=>t("h3",{class:"font-bold"}," REFERENCE NO. ",-1)),Dt={class:"border-b-2 border-gray-800"},Tt={class:"border-t border-b border-black"},Et=i(()=>t("td",{class:"border-t border-b border-r border-black pl-2 py-1 text-xs bg-blue-300"}," PAYEE : ",-1)),At={class:"border border-black pl-2 py-1 text-xs"},Nt=i(()=>t("td",{class:"border border-black pl-2 py-1 text-xs bg-blue-300"}," ENCODED DATE : ",-1)),It={class:"border-t border-b border-l border-black pl-2 py-1 text-xs"},Rt=i(()=>t("td",{class:"border-t border-b border-r border-black pl-2 py-1 text-xs bg-blue-300"}," PARTICULARS : ",-1)),St={class:"border border-black pl-2 py-1 text-xs max-w-[200px]"},Ot=i(()=>t("td",{class:"border border-black pl-2 py-1 text-xs bg-blue-300"}," ENTRY DATE : ",-1)),Mt={class:"border-t border-b border-l border-black pl-2 py-1 text-xs"},Pt=i(()=>t("td",{class:"border-t border-b border-r border-black pl-2 py-1 text-xs bg-blue-300"}," AMOUNT IN WORDS : ",-1)),Vt={class:"border border-black pl-2 py-1 text-xs"},jt=i(()=>t("td",{class:"border border-black pl-2 py-1 text-xs bg-blue-300"}," NET AMOUNT ",-1)),qt={class:"border-t border-b border-l border-black pl-2 py-1 text-xs"},Lt={class:"flex flex-col gap-4 justify-between flex-1"},Ut={class:"flex flex-col"},Bt=i(()=>t("h2",{class:"text-2xl text-center font-bold my-4 mb-6"}," ACCOUNTING ENTRIES ",-1)),Ft={class:"flex-1"},Ht={key:0,class:"w-full"},Wt=i(()=>t("thead",null,[t("tr",null,[t("th",{class:"border-t border-b border-r border-gray-800 font-normal text-xs"}," ACCOUNT CODE "),t("th",{class:"border border-gray-800 font-normal text-xs w-1/3"}," ACCOUNT NAME "),t("th",{class:"border border-gray-800 font-normal text-xs"}," PROJECT/SECTION CODE "),t("th",{class:"border border-gray-800 font-normal text-xs w-24"}," DEBIT "),t("th",{class:"border-t border-b border-l border-black border-b-gray-800 font-normal text-xs w-24"}," CREDIT ")])],-1)),Yt={class:"border-t border-b border-r px-4 py-1 border-gray-800 text-xs relative"},Gt={class:"border px-4 py-1 border-gray-800 text-xs"},Jt={class:"border px-4 py-1 border-gray-800 text-xs"},zt={class:"border px-4 py-1 border-gray-800 text-xs text-right"},Kt={class:"border-t border-b border-l px-4 py-1 border-gray-800 border-y-gray-800 text-xs text-right"},Qt=i(()=>t("td",{class:"border-t border-b border-r px-4 py-1 border-gray-800 text-xs relative"},null,-1)),Xt=i(()=>t("td",{class:"border px-4 py-1 border-gray-800 text-xs"},null,-1)),Zt=i(()=>t("td",{class:"border px-4 py-1 border-gray-800 text-xs"},null,-1)),te=i(()=>t("td",{class:"border px-4 py-1 border-gray-800 text-xs"},null,-1)),ee=i(()=>t("td",{class:"border-t border-b border-l px-4 py-1 border-gray-800 border-y-gray-800 text-xs"},null,-1)),se=[Qt,Xt,Zt,te,ee],oe={class:"border-none"},re=i(()=>t("td",{colspan:"3",class:"py-2 px-4 text-right pr-24 text-xs"}," TOTAL ",-1)),ae={class:"border-b-2 border-black py-2 px-4 text-xs text-right"},ne={class:"border-b-2 border-black py-2 px-4 text-xs text-right"},ce={key:1,class:"block text-center text-gray-600"},de={key:0,class:"flex justify-around"},le=at({__name:"PrintForm",props:{data:{type:Object,default:null}},setup(s){const h=s,k=C(()=>{let e=0;return h.data.details.forEach(u=>{e+=parseFloat((u==null?void 0:u.debit)||0)}),e}),y=C(()=>{let e=0;return h.data.details.forEach(u=>{e+=parseFloat((u==null?void 0:u.credit)||0)}),e}),A=C(()=>h.data.details),g=C(()=>A.value.length>12?0:12-A.value.length),m=C(()=>$(A.value,12));function $(e,u){const D=[];for(let x=0;x<e.length;x+=u)D.push(e.slice(x,x+u));return D}return(e,u)=>{const D=st,x=Z;return c(),d("div",vt,[(c(!0),d(M,null,P(o(m),(V,f)=>{var r,n,b;return c(),d("div",{key:f,class:"flex flex-col gap-2 pt-8 relative border-2 border-black pb-4 min-h-[1000px]"},[_(D,{page:{currentPage:f+1,totalPages:o(m).length},"document-code":("useAccountingDocCodeEnums"in e?e.useAccountingDocCodeEnums:o(ot)).dv,class:"pb-4 border-b-4 border-green-400 mb-8"},null,8,["page","document-code"]),f===0?(c(),d("h1",wt," DISBURSEMENT VOUCHER ")):I("",!0),f===0?(c(),d("div",Ct,[t("div",kt,[$t,t("span",Dt,a((r=h.data)==null?void 0:r.voucher_no),1)]),t("table",Tt,[t("tbody",null,[t("tr",null,[Et,t("td",At,a((b=(n=s.data.payment_request)==null?void 0:n.stakeholder)==null?void 0:b.name),1),Nt,t("td",It,a(("dateToString"in e?e.dateToString:o(Q))(new Date(s.data.date_encoded))),1)]),t("tr",null,[Rt,t("td",St,a(s.data.particulars),1),Ot,t("td",Mt,a(("dateToString"in e?e.dateToString:o(Q))(new Date(s.data.voucher_date))),1)]),t("tr",null,[Pt,t("td",Vt,a(("amountToWords"in e?e.amountToWords:o(rt))(s.data.net_amount||0)),1),jt,t("td",qt,a(("accountingCurrency"in e?e.accountingCurrency:o(O))(s.data.net_amount)),1)])])])])):I("",!0),t("div",Lt,[t("div",Ut,[Bt,t("div",Ft,[h.data.details.length>0?(c(),d("table",Ht,[Wt,t("tbody",null,[(c(!0),d(M,null,P(V,(p,j)=>{var R,S,N;return c(),d("tr",{key:j,class:"hover:bg-gray-100 cursor-pointer"},[t("td",Yt,a((R=p.account)==null?void 0:R.account_number),1),t("td",Gt,a((S=p.account)==null?void 0:S.account_name),1),t("td",Jt,a((N=p==null?void 0:p.stakeholder)==null?void 0:N.name),1),t("td",zt,a(p.debit>0?("formatToCurrency"in e?e.formatToCurrency:o(E))(p.debit):"-"),1),t("td",Kt,a(p.credit>0?("formatToCurrency"in e?e.formatToCurrency:o(E))(p.credit):"-"),1)])}),128)),(c(!0),d(M,null,P(o(g),p=>(c(),d("tr",{key:p,class:"hover:bg-gray-100 cursor-pointer h-6"},se))),128)),t("tr",oe,[re,t("td",ae,a(("accountingCurrency"in e?e.accountingCurrency:o(O))(o(y))),1),t("td",ne,a(("accountingCurrency"in e?e.accountingCurrency:o(O))(o(k))),1)])])])):I("",!0),h.data.details.length===0?(c(),d("span",ce," No entries yet. ")):I("",!0)])]),f===o(m).length-1?(c(),d("div",de,[_(x,{approvals:h.data.approvals,"signature-view":h.data.request_status.toLowerCase()==="approved"},null,8,["approvals","signature-view"])])):I("",!0)])])}),128))])}}}),ie=dt(le,[["__scopeId","data-v-8a431895"]]),ue={key:0,class:"px-4"},pe=t("div",{class:"p-2 py-4 flex gap-2 w-full"},[t("span",{class:"text-gray-900 text-4xl text-center w-full block"},"Disbursement Voucher")],-1),be={class:"grid md:grid-cols-3 gap-2 md:justify-between"},he={class:"p-2 flex gap-2"},xe=t("span",{class:"text-teal-600 text-light"},"DV Number: ",-1),_e={class:"text-gray-900"},ye={class:"p-2 flex gap-2"},ge=t("span",{class:"text-teal-600 text-light"},"Amount: ",-1),me={class:"p-2 flex gap-2"},fe=t("span",{class:"text-teal-600 text-light"},"Status: ",-1),ve={class:"grid md:grid-cols-3 gap-2 md:justify-between"},we={class:"p-2 flex gap-2"},Ce=t("span",{class:"text-teal-600 text-light"},"Date Encoded: ",-1),ke={class:"p-2 flex gap-2"},$e=t("span",{class:"text-teal-600 text-light"},"Voucher Date: ",-1),De={class:"grid md:grid-cols-1 gap-2 md:justify-between"},Te={class:"p-2 flex gap-2"},Ee=t("span",{class:"text-teal-600 text-light"},"Particulars: ",-1),Ae={class:"p-2 border border-gray-200 rounded-lg"},Ne=t("h2",{class:"text-xl text-gray-800 tex-center font-bold p-2"}," Voucher Details ",-1),Ie={class:"overflow-x-auto"},Re={class:"min-w-full overflow-hidden overflow-x-auto align-middle shadow sm:rounded-lg"},Se={class:"min-w-full divide-y border border-gray-200"},Oe=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Account Name "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Account Number "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Debit "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Credit ")])],-1),Me={class:"bg-white divide-y divide-gray-200"},Pe={class:"px-6 py-4 whitespace-nowrap"},Ve={class:"text-sm text-gray-900"},je={class:"px-6 py-4 whitespace-nowrap"},qe={class:"text-sm text-gray-900"},Le={class:"px-6 py-4 whitespace-nowrap"},Ue={class:"text-sm text-gray-900"},Be={class:"px-6 py-4 whitespace-nowrap"},Fe={class:"text-sm text-gray-900"},He=t("td",{class:"px-6 py-4 whitespace-nowrap",colspan:"2"},[t("div",{class:"text-sm text-gray-900 font-bold"}," TOTAL ")],-1),We={class:"px-6 py-4 whitespace-nowrap"},Ye={class:"text-sm font-bold text-gray-900"},Ge={class:"px-6 py-4 whitespace-nowrap"},Je={class:"text-sm font-bold text-gray-900"},ze={class:"w-full"},Ke={key:0,class:"flex gap-2 p-2 justify-end relative"},Qe={key:1,class:"flex gap-2 justify-end w-full p-8"},is={__name:"InfoModal",props:lt({voucherData:{type:Object,required:!1,default:null},fillable:{type:Boolean,required:!1,default:!1}},{showModal:{required:!1,type:Boolean}}),emits:["update:showModal"],setup(s){const h=s,k=it(s,"showModal"),y=q(!1),A=q({pending:"warning",approved:"success",denied:"error"}),g=ft(),{remarks:m}=ut(g),$=pt(),e=q(!1),u=()=>{k.value=!1};bt(k,r=>{r||(y.value=!1)});const D=async r=>{try{e.value=!0,await g.approveDisbursementVoucher(r),$.add({type:"success",text:g.successMessage}),u()}catch(n){$.add({type:"error",text:n||"something went wrong."})}finally{e.value=!1}},x=async r=>{try{e.value=!0,await g.denyDisbursementVoucher(r),$.add({type:"success",text:g.successMessage}),u()}catch(n){$.add({type:"error",text:n||"something went wrong."})}finally{e.value=!1}},V=C(()=>{var n;let r=0;return(n=h.voucherData)==null||n.details.forEach(b=>{r+=parseFloat((b==null?void 0:b.debit)||0)}),r}),f=C(()=>{var n;let r=0;return(n=h.voucherData)==null||n.details.forEach(b=>{r+=parseFloat((b==null?void 0:b.credit)||0)}),r});return(r,n)=>{const b=et,p=Z,j=ie,R=xt,S=_t,N=yt,tt=gt;return c(),X(tt,{"show-modal":k.value,"onUpdate:showModal":n[3]||(n[3]=v=>k.value=v),"is-loading":o(e),title:""},{body:L(()=>{var v,T,U,B,F,H,W,Y,G,J;return[_(b,{type:o(A)[(v=s.voucherData)==null?void 0:v.request_status.toLowerCase()],position:"top-left",status:(T=s.voucherData)==null?void 0:T.request_status,class:"z-30"},null,8,["type","status"]),o(y)?(c(),X(R,{key:1},{default:L(()=>[_(j,{data:s.voucherData},null,8,["data"])]),_:1})):(c(),d("div",ue,[pe,t("div",be,[t("div",he,[xe,t("span",_e,a((U=s.voucherData)==null?void 0:U.voucher_no),1)]),t("div",ye,[ge,w(" "+a(("accountingCurrency"in r?r.accountingCurrency:o(O))(((B=s.voucherData)==null?void 0:B.net_amount)??0)),1)]),t("div",me,[fe,w(" "+a((F=s.voucherData)==null?void 0:F.request_status),1)])]),t("div",ve,[t("div",we,[Ce,w(" "+a((H=s.voucherData)==null?void 0:H.date_encoded),1)]),t("div",ke,[$e,w(" "+a((W=s.voucherData)==null?void 0:W.voucher_date),1)])]),t("div",De,[t("div",Te,[Ee,w(" "+a((Y=s.voucherData)==null?void 0:Y.particulars),1)])]),t("div",Ae,[Ne,t("div",Ie,[t("div",Re,[t("table",Se,[Oe,t("tbody",Me,[(c(!0),d(M,null,P((G=s.voucherData)==null?void 0:G.details,l=>{var z,K;return c(),d("tr",{key:l.id},[t("td",Pe,[t("div",Ve,a((z=l==null?void 0:l.account)==null?void 0:z.account_name),1)]),t("td",je,[t("div",qe,a((K=l==null?void 0:l.account)==null?void 0:K.account_number),1)]),t("td",Le,[t("div",Ue,a((l==null?void 0:l.debit)>0?("formatToCurrency"in r?r.formatToCurrency:o(E))(l.debit):"-"),1)]),t("td",Be,[t("div",Fe,a((l==null?void 0:l.credit)>0?("formatToCurrency"in r?r.formatToCurrency:o(E))(l.credit):"-"),1)])])}),128)),t("tr",null,[He,t("td",We,[t("div",Ye,a(("formatToCurrency"in r?r.formatToCurrency:o(E))(o(V))),1)]),t("td",Ge,[t("div",Je,a(("formatToCurrency"in r?r.formatToCurrency:o(E))(o(f))),1)])])])])])])]),t("div",ze,[_(p,{approvals:(J=s.voucherData)==null?void 0:J.approvals},null,8,["approvals"])])]))]}),footer:L(()=>{var v;return[s.voucherData.next_approval&&("useCheckIsCurrentUser"in r?r.useCheckIsCurrentUser:o(mt))((v=s.voucherData.next_approval)==null?void 0:v.user_id)?(c(),d("div",Ke,[_(S,{"deny-remarks":o(m),"onUpdate:denyRemarks":n[0]||(n[0]=T=>ht(m)?m.value=T:null),"request-id":s.voucherData.id,onApprove:D,onDeny:x},null,8,["deny-remarks","request-id"])])):(c(),d("div",Qe,[o(y)?(c(),d("button",{key:1,class:"flex items-center gap-1 justify-center bg-orange-600 p-2 hover:bg-orange-900 text-white rounded-md w-32 text-sm",onClick:n[2]||(n[2]=T=>y.value=!1)},[_(N,{name:"iconoir:printing-page"}),w(" Hide Preview ")])):(c(),d("button",{key:0,class:"flex items-center gap-1 justify-center bg-gray-600 p-2 hover:bg-gray-900 text-white rounded-md w-32 text-sm",onClick:n[1]||(n[1]=T=>y.value=!0)},[_(N,{name:"iconoir:printing-page"}),w(" Print Preview ")]))]))]}),_:1},8,["show-modal","is-loading"])}}};export{is as _};
