import w from"./Icon.DcF_NU9d.js";import{_ as P}from"./BulkUploadItemTh.vue.DSikMPPP.js";import{_ as T}from"./PsTextInputSelect.vue.8XbFofVl.js";import{f as C,o as s,c as o,i as I,x as $,M as U,a as t,j as r,b as _,t as i,F as B,r as S,G as k,u as h,v as D,h as M,l as V,s as L,B as q,w as g,d as b,O as E}from"./entry.R6V7NTxy.js";import{_ as R}from"./LoadingContainer.vue.Bz3WIh4M.js";import{_ as O}from"./AcessContainer.DJcSsti6.js";import{u as N}from"./vue.f36acd1f.Dv_A-myg.js";import{u as z,A as F}from"./Accessibilities.uaboihcy.js";import{i as j,e as G}from"./CustomFetch.BRBLzGci.js";import"./index.T-zbMaZc.js";import"./id.Dwf9xs1O.js";import"./client-only.QuN6N-R_.js";import"./loader.C2wIXBoB.js";import"./users.D5_vMoUK.js";const H=["id"],W={key:0,class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},Y=["onUpdate:modelValue","checked"],J={key:1,class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},K={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},Q={class:"flex flex-col gap-2"},X={key:0},Z={key:1,class:"text-xs font-bold text-red-700"},ee={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},te={class:"flex flex-col gap-2"},se={key:0},oe={key:1,class:"text-xs font-bold text-red-700"},re={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},ie={class:"flex flex-col gap-2"},le={key:0},ce={key:1,class:"text-xs font-bold text-red-700"},ne={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},de={class:"flex flex-col gap-2"},ae={key:0},ue={key:1,class:"text-xs font-bold text-red-700"},_e={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},me={class:"flex flex-col gap-2"},he={key:0},pe={key:1,class:"text-xs font-bold text-red-700"},xe={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},fe={class:"flex flex-col gap-2"},ge={key:0},ye={key:1,class:"text-xs font-bold text-red-700"},ve={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},ke={class:"flex flex-col gap-2"},be={key:0},we={key:1,class:"text-xs font-bold text-red-700"},Ce={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},Ie={class:"flex flex-col gap-2"},$e={key:0},Ue={key:1,class:"text-xs font-bold text-red-700"},Be={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},Me={class:"flex flex-col gap-2"},Ae={key:0},Pe={key:1,class:"text-xs font-bold text-red-700"},Te={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},Se={class:"flex flex-col gap-2"},De={key:0},Ve={key:1,class:"text-xs font-bold text-red-700"},Le={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},qe={class:"flex flex-col gap-2"},Ee={key:0},Re={key:1,class:"text-xs font-bold text-red-700"},Oe={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},Ne={class:"flex flex-col gap-2"},ze={key:0},Fe={key:1,class:"text-xs font-bold text-red-700"},je={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},Ge={class:"flex flex-col gap-2"},He={key:0},We={key:1,class:"text-xs font-bold text-red-700"},Ye={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},Je={class:"flex flex-col gap-2"},Ke={key:0},Qe={key:1,class:"text-xs font-bold text-red-700"},Xe={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},Ze={class:"flex flex-col gap-2"},et={key:0},tt={key:1,class:"text-xs font-bold text-red-700"},st={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},ot={class:"flex flex-col gap-2"},rt={key:0},it={key:1,class:"text-xs font-bold text-red-700"},lt={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},ct={class:"flex flex-col gap-2"},nt={key:0},dt={key:1,class:"text-xs font-bold text-red-700"},at={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},ut={class:"flex flex-col gap-2"},_t={key:0},mt={key:1,class:"text-xs font-bold text-red-700"},ht={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},pt={class:"flex flex-col gap-2"},xt={key:0},ft={key:1,class:"text-xs font-bold text-red-700"},gt={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},yt={class:"flex flex-col gap-2"},vt={key:0},kt={key:1,class:"text-xs font-bold text-red-700"},bt={class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap text-center"},wt={class:"flex flex-col gap-2"},Ct={key:0},It={key:1,class:"text-xs font-bold text-red-700"},$t=C({__name:"BulkUploadItemTr",props:{isCheckbox:{type:Boolean,required:!0,default:!1},isItemCode:{type:Boolean,required:!1,default:!1},dataItem:{type:Array,required:!0,default:null}},setup(c){return(l,a)=>{const p=T;return s(!0),o(B,null,I(c.dataItem,(e,n)=>(s(),o("tr",{id:l.compId,key:n+"-item",class:"bg-white border-b"},[c.isCheckbox?(s(),o("td",W,[$(t("input",{id:"checkItem","onUpdate:modelValue":d=>e.isCheck=d,type:"checkbox",name:"checkItem",checked:e.isCheck},null,8,Y),[[U,e.isCheck]])])):r("",!0),c.isItemCode?(s(),o("td",J,[_(p,{modelValue:e.item_code,"onUpdate:modelValue":d=>e.item_code=d,"item-profile":c.dataItem[n],title:"Item Code","is-standard":!1},null,8,["modelValue","onUpdate:modelValue","item-profile"])])):r("",!0),t("td",K,[t("div",Q,[e.item_description.value?(s(),o("div",X,i(e.item_description.value),1)):r("",!0),e.item_description.error?(s(),o("div",Z,i(e.item_description.error),1)):r("",!0)])]),t("td",ee,[t("div",te,[e.thickness.value?(s(),o("div",se,i(e.thickness.value),1)):r("",!0),e.thickness.error?(s(),o("div",oe,i(e.thickness.error),1)):r("",!0)])]),t("td",re,[t("div",ie,[e.length.value?(s(),o("div",le,i(e.length.value),1)):r("",!0),e.length.error?(s(),o("div",ce,i(e.length.error),1)):r("",!0)])]),t("td",ne,[t("div",de,[e.width.value?(s(),o("div",ae,i(e.width.value),1)):r("",!0),e.width.error?(s(),o("div",ue,i(e.width.error),1)):r("",!0)])]),t("td",_e,[t("div",me,[e.height.value?(s(),o("div",he,i(e.height.value),1)):r("",!0),e.height.error?(s(),o("div",pe,i(e.height.error),1)):r("",!0)])]),t("td",xe,[t("div",fe,[e.outside_diameter.value?(s(),o("div",ge,i(e.outside_diameter.value),1)):r("",!0),e.outside_diameter.error?(s(),o("div",ye,i(e.outside_diameter.error),1)):r("",!0)])]),t("td",ve,[t("div",ke,[e.inside_diameter.value?(s(),o("div",be,i(e.inside_diameter.value),1)):r("",!0),e.inside_diameter.error?(s(),o("div",we,i(e.inside_diameter.error),1)):r("",!0)])]),t("td",Ce,[t("div",Ie,[e.angle.value?(s(),o("div",$e,i(e.angle.value),1)):r("",!0),e.angle.error?(s(),o("div",Ue,i(e.angle.error),1)):r("",!0)])]),t("td",Be,[t("div",Me,[e.size.value?(s(),o("div",Ae,i(e.size.value),1)):r("",!0),e.size.error?(s(),o("div",Pe,i(e.size.error),1)):r("",!0)])]),t("td",Te,[t("div",Se,[e.volume.value?(s(),o("div",De,i(e.volume.value),1)):r("",!0),e.volume.error?(s(),o("div",Ve,i(e.volume.error),1)):r("",!0)])]),t("td",Le,[t("div",qe,[e.weight.value?(s(),o("div",Ee,i(e.weight.value),1)):r("",!0),e.weight.error?(s(),o("div",Re,i(e.weight.error),1)):r("",!0)])]),t("td",Oe,[t("div",Ne,[e.grade.value?(s(),o("div",ze,i(e.grade.value),1)):r("",!0),e.grade.error?(s(),o("div",Fe,i(e.grade.error),1)):r("",!0)])]),t("td",je,[t("div",Ge,[e.volts.value?(s(),o("div",He,i(e.volts.value),1)):r("",!0),e.volts.error?(s(),o("div",We,i(e.volts.error),1)):r("",!0)])]),t("td",Ye,[t("div",Je,[e.plates.value?(s(),o("div",Ke,i(e.plates.value),1)):r("",!0),e.plates.error?(s(),o("div",Qe,i(e.plates.error),1)):r("",!0)])]),t("td",Xe,[t("div",Ze,[e.part_number.value?(s(),o("div",et,i(e.part_number.value),1)):r("",!0),e.part_number.error?(s(),o("div",tt,i(e.part_number.error),1)):r("",!0)])]),t("td",st,[t("div",ot,[e.color.value?(s(),o("div",rt,i(e.color.value),1)):r("",!0),e.color.error?(s(),o("div",it,i(e.color.error),1)):r("",!0)])]),t("td",lt,[t("div",ct,[e.specification.value?(s(),o("div",nt,i(e.specification.value),1)):r("",!0),e.specification.error?(s(),o("div",dt,i(e.specification.error),1)):r("",!0)])]),t("td",at,[t("div",ut,[e.uom.value?(s(),o("div",_t,i(e.uom.value),1)):r("",!0),e.uom.error?(s(),o("div",mt,i(e.uom.error),1)):r("",!0)])]),t("td",ht,[t("div",pt,[e.item_group.value?(s(),o("div",xt,i(e.item_group.value),1)):r("",!0),e.item_group.error?(s(),o("div",ft,i(e.item_group.error),1)):r("",!0)])]),t("td",gt,[t("div",yt,[e.sub_item_group.value?(s(),o("div",vt,i(e.sub_item_group.value),1)):r("",!0),e.sub_item_group.error?(s(),o("div",kt,i(e.sub_item_group.error),1)):r("",!0)])]),t("td",bt,[t("div",wt,[e.inventory_type.value?(s(),o("div",Ct,i(e.inventory_type.value),1)):r("",!0),e.inventory_type.error?(s(),o("div",It,i(e.inventory_type.error),1)):r("",!0)])])],8,H))),128)}}}),Ut={class:"h-full w-full"},Bt={class:"flex flex-col gap-2 w-full border-2 border-solid border-gray-800 rounded-t"},Mt={id:"headline mb-4"},At={class:"w-full bg-gray-900 basis-[10%] grow-1 shrink-0 flex flex-row justify-between items-center border-b py-2 px-4"},Pt={class:"flex flex-row gap-2 items-center justify-center"},Tt={key:0,class:"flex justify-end items-center w-full"},St={id:"itemDetails"},Dt={key:0,id:"content",class:"overflow-auto max-h-96"},Vt={class:"table-auto w-full border-collapse"},Lt={class:"sticky top-0 bg-white"},qt={key:0,scope:"col",class:"border-0 border-b text-sm"},Et={key:1,scope:"col",class:"border-0 border-b text-sm"},Rt={key:1,class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},Ot=t("p",{class:"text-center text-lg p-2"}," NO DATA ",-1),Nt=[Ot],zt=C({__name:"BulkUploadTable",props:{title:{type:String,required:!0},titleColor:{type:String,required:!0},isCheckbox:{type:Boolean,required:!0,default:!1},isItemCode:{type:Boolean,required:!1,default:!1},headerColumns:{type:Array,required:!0},data:{type:Array,required:!0},icon:{type:String,required:!0}},emits:["doStoreBulkUpload"],setup(c,{emit:l}){const a=S(!1),p=n=>(n.forEach(d=>{a.value?d.isCheck=!0:d.isCheck=!1}),n),e=()=>{l("doStoreBulkUpload")};return(n,d)=>{const y=w,u=P,x=$t;return s(),o("div",Ut,[t("div",Bt,[t("div",Mt,[t("div",At,[t("div",Pt,[_(y,{name:c.icon,class:k(c.titleColor+" h-5 w-5 lg:h-5 lg:w-5")},null,8,["name","class"]),c.title?(s(),o("h3",{key:0,class:k(c.titleColor+" text-lg font-bold")},i(c.title),3)):r("",!0)]),c.isCheckbox?(s(),o("div",Tt,[t("input",{type:"submit",value:"Submit",class:"hover:text-green-600 hover:bg-gray-100 hover:border-green-600 uppercase font-bold cursor-pointer w-full max-w-fit py-2 px-5 block text-sm text-gray-100 text-center bg-green-600 border rounded border-green-950",onClick:e})])):r("",!0)])]),t("div",St,[c.data&&c.data.length>0?(s(),o("div",Dt,[t("table",Vt,[t("thead",Lt,[t("tr",null,[c.isCheckbox?(s(),o("th",qt,[$(t("input",{id:"checkAll","onUpdate:modelValue":d[0]||(d[0]=m=>D(a)?a.value=m:null),class:"cursor-pointer",type:"checkbox",name:"checkAllItem",onChange:d[1]||(d[1]=m=>p(c.data))},null,544),[[U,h(a)]])])):r("",!0),c.isItemCode?(s(),o("th",Et," Item Code ")):r("",!0),(s(!0),o(B,null,I(c.headerColumns,(m,f)=>(s(),M(u,{key:f+"-header",title:m},null,8,["title"]))),128))])]),t("tbody",null,[_(x,{"is-checkbox":c.isCheckbox,"is-item-code":c.isItemCode,"data-item":c.data},null,8,["is-checkbox","is-item-code","data-item"])])])])):(s(),o("div",Rt,Nt))])])])}}}),Ft=V("itemBulkProfiles",{state:()=>({isEdit:!1,listUnprocess:{data:[]},listDuplicates:{data:[]},listProcess:{data:[]},isLoading:!1,errorMessage:"",successMessage:"",remarks:""}),actions:{async doBulkUpload(c){await j("/api/item-profile/bulk-upload",{method:"POST",body:c,onRequest:()=>{this.isLoading=!0},onResponseError:({response:l})=>{throw this.errorMessage=l._data.message,new Error(l._data.message)},onResponse:({response:l})=>{if(this.isLoading=!1,l.ok)this.listUnprocess.data=l._data.unprocessed,this.listDuplicates.data=l._data.duplicates,this.listProcess.data=l._data.processed,this.listProcess.data.map(a=>(a.isCheck=!1,a)),this.errorMessage="",this.successMessage=l._data.message;else throw this.errorMessage=l._data.message,new Error(l._data.message)}})},async storeBulkUpload(){await G("/api/item-profile/bulk-save",{method:"POST",body:{processed:this.listProcess.data},onRequest:()=>{this.isLoading=!0},onResponse:({response:c})=>{if(this.isLoading=!1,c.ok)this.successMessage=c._data.message;else throw this.errorMessage=c._data.message,new Error(c._data.message)}})},clearMessages(){this.errorMessage="",this.successMessage=""}}}),jt={class:"flex flex-col gap-8 bg-white border border-gray-200 rounded-lg shadow-md p-4"},Gt={class:"flex flex-col md:flex-row justify-between items-center mt-4"},Ht=t("div",null,[t("h1",{class:"text-xl font-bold uppercase"}," Bulk Upload ")],-1),Wt={class:"flex flex-row gap-4 w-full max-w-lg"},Yt={class:"w-full max-w-sm"},Jt=["href"],Kt={class:"w-full"},Qt={class:"block hover:text-green-600 hover:bg-gray-100 hover:border-green-600 w-full mb-2 text-sm font-medium text-gray-100 text-center bg-green-600 px-2 py-3 cursor-pointer border rounded",for:"bulk_upload_file"},_s={__name:"bulk-upload",setup(c){N({title:"Bulk Upload"});const l=Ft(),{isLoading:a}=L(l),p=E(),e=[{name:"Item Description",id:"item_description"},{name:"Thickness",id:"thickness"},{name:"Length",id:"length"},{name:"Width",id:"width"},{name:"Height",id:"height"},{name:"Outside Diameter",id:"outside_diameter"},{name:"Inside Diameter",id:"inside_diameter"},{name:"Angle",id:"angle"},{name:"Size",id:"size"},{name:"Volume",id:"volume"},{name:"Weight",id:"weight"},{name:"Grade",id:"grade"},{name:"Volts",id:"volts"},{name:"Plates",id:"plates"},{name:"Part Number",id:"part_number"},{name:"Color",id:"color"},{name:"Specification",id:"specification"},{name:"UOM",id:"uom"},{name:"Item Group",id:"item_group"},{name:"Sub Item Group",id:"sub_item_group"},{name:"Inventory Type",id:"inventory_type"}],n=q(),d=async u=>{try{const x=u.target.files[0],m=new FormData;m.append("file",x),await l.doBulkUpload(m),l.errorMessage!==""?n.add({type:"error",text:l.errorMessage}):n.add({type:"success",text:l.successMessage})}catch{n.add({type:"error",text:l.errorMessage})}},y=async()=>{try{l.listProcess.data=l.listProcess.data.filter(u=>u.isCheck===!0),await l.storeBulkUpload(),l.errorMessage!==""?n.add({type:"error",text:l.errorMessage}):n.add({type:"success",text:l.successMessage})}catch{n.add({type:"error",text:l.errorMessage})}};return(u,x)=>{const m=w,f=zt,v=R,A=O;return s(),M(A,{"if-access":("useCheckAccessibility"in u?u.useCheckAccessibility:h(z))([("AccessibilityTypes"in u?u.AccessibilityTypes:h(F)).inventory_itemprofile_bulkupload])},{default:g(()=>[t("div",jt,[t("div",Gt,[Ht,t("div",Wt,[t("div",Yt,[t("a",{target:"_blank",href:h(p).public.INVENTORY_API_URL+"/downloadables/ITEMPROFILE.csv",class:"hover:text-green-600 hover:bg-gray-100 hover:border-green-600 w-full block mb-2 text-sm font-medium text-gray-100 text-center bg-green-600 px-2 py-3 cursor-pointer border rounded"},[_(m,{name:"mage:file-download-fill",class:"h-5 w-5 lg:h-5 lg:w-5"}),b(" Download Template ")],8,Jt)]),t("div",Kt,[t("label",Qt,[_(m,{name:"i-ic:round-upload-file",class:"h-5 w-5 lg:h-5 lg:w-5"}),b(" Upload CSV / Excel File ")]),t("input",{id:"bulk_upload_file",class:"hidden text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none",type:"file",accept:".csv, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",onChange:d},null,32)])])]),_(v,{class:"w-full",loading:h(a)},{default:g(()=>[_(f,{title:"Unprocessed","header-columns":e,data:h(l).listUnprocess.data,"title-color":"text-red-500",icon:"material-symbols:dangerous"},null,8,["data"])]),_:1},8,["loading"]),_(v,{class:"w-full",loading:h(a)},{default:g(()=>[_(f,{title:"Duplicates","header-columns":e,data:h(l).listDuplicates.data,"title-color":"text-yellow-500",icon:"material-symbols:warning"},null,8,["data"])]),_:1},8,["loading"]),_(v,{class:"w-full",loading:h(a)},{default:g(()=>[_(f,{"is-checkbox":!0,"is-item-code":!0,title:"Processed","header-columns":e,data:h(l).listProcess.data,"title-color":"text-green-500",icon:"material-symbols:check-circle",onDoStoreBulkUpload:y},null,8,["data"])]),_:1},8,["loading"])])]),_:1},8,["if-access"])}}};export{_s as default};
