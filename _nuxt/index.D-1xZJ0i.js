import{_ as F}from"./LayoutBoards.vue.D_rbqYxd.js";import{l as X,_ as E,s as M,B as P,r as T,o as f,h as w,w as S,a as t,g as I,x as u,u as s,A as v,c as B,F as R,i as q,t as b,D as O,G,y as x,p as D,e as j,b as h}from"./entry.32UGFqj-.js";import{u as z}from"./Utilities.DofxnkSu.js";import{u as y}from"./CustomFetch.ggXvTdIz.js";import{u as N}from"./accountgroups.COHHo6Q2.js";import{_ as Y}from"./editBoards.vue.DA5g6BdX.js";import{_ as Z}from"./PsTextInput.vue.C7eOWbog.js";import{_ as ee}from"./PsTable.BPIFONj1.js";import{_ as te}from"./CustomPagination.C91H0oe5.js";import{_ as se}from"./AcessContainer.Dum7aOuo.js";import{u as oe}from"./vue.f36acd1f.Ds2AlAv6.js";import{u as ae,A as ne}from"./Accessibilities.xGffDRXj.js";import"./loader.BQ9QddgL.js";import"./id.WqrvI90c.js";import"./client-only.CuVny2dr.js";import"./Icon.CrHlyQOo.js";import"./index.T-zbMaZc.js";import"./nuxt-link.C5IpI_HT.js";import"./users.G4iuGzk0.js";const A=X("bookStore",{state:()=>({book:{id:null,name:null,code:null,account_group_id:null},list:[],pagination:{},getParams:{},errorMessage:"",successMessage:"",isLoading:!1,isEdit:!1}),actions:{async getBooks(){this.isLoading=!0;const{data:o,error:e}=await y("/api/books",{method:"GET",params:this.getParams,onResponse:({response:n})=>{this.isLoading=!1,this.list=n._data.data,this.pagination={first_page:n._data.first_page_url,pages:n._data.links,last_page:n._data.last_page_url}}});if(o)return o;if(e)return e},async getBook(o){this.isLoading=!0;const{data:e,error:n}=await y("/api/books/"+o,{method:"GET",params:this.getParams,onResponse:({response:a})=>{this.isLoading=!1,this.book=a._data,this.book.account_id=a._data.accounts.length>0?a._data.accounts[0].account_id:null}});if(e)return e;if(n)return n},async createBook(){this.successMessage="",this.errorMessage="",await y("/api/books",{method:"POST",body:this.book,watch:!1,onResponse:({response:o})=>{o.ok?(this.getBooks(),this.reset(),this.successMessage=o._data.message):this.errorMessage=o._data.message}})},async editBook(){this.successMessage="",this.errorMessage="";const{data:o,error:e}=await y("/api/books/"+this.book.id,{method:"PUT",body:this.book,watch:!1});if(o.value)return this.getBooks(),this.successMessage=o.value.message,o;if(e.value)return this.errorMessage=e.value.data.message,e},async deleteBook(o){const{data:e,error:n}=await y("/api/books/"+o,{method:"DELETE",body:this.book,watch:!1,onResponse:({response:a})=>{this.successMessage=a._data.message}});if(e.value)return this.getBooks(),this.successMessage=e.value.message,e;if(n.value)return this.errorMessage="Error",n},clearMessages(){this.errorMessage="",this.successMessage=""},reset(){this.book={book_id:null,book_name:null,account_id:null,account_group_id:null,symbol:null},this.successMessage="",this.errorMessage=""}}}),C=o=>(D("data-v-4382e69b"),o=o(),j(),o),ie={class:"text-gray-500"},re=["onSubmit"],ce={class:"flex flex-col gap-2"},le=C(()=>t("label",{for:"book_name",class:"text-xs italic"},"Book Name",-1)),de=C(()=>t("label",{for:"book_code",class:"text-xs italic"},"Code",-1)),ue=C(()=>t("label",{for:"account_category",class:"text-xs italic"},"Account Group",-1)),_e=["value"],pe=C(()=>t("div",{class:"flex justify-end"},[t("button",{type:"submit",class:"flex-1 text-white p-2 rounded bg-teal-600 content-center mt-5"}," Add Book ")],-1)),me={__name:"NewBook",setup(o){const e=A(),n=N(),{errorMessage:a,successMessage:r}=M(e),_=P(),c=T(!1),g=async()=>{try{c.value=!0,await e.createBook(),e.errorMessage!==""?_.add({type:"error",text:e.errorMessage}):_.add({type:"success",text:e.successMessage})}catch{a.value=a,_.add({type:"error",text:e.errorMessage})}finally{c.value=!1,e.clearMessages()}};return(m,i)=>{const p=F;return f(),w(p,{title:"Book",loading:s(c)},{default:S(()=>[t("div",ie,[t("form",{onSubmit:I(g,["prevent"])},[t("div",ce,[t("div",null,[le,u(t("input",{id:"bookName","onUpdate:modelValue":i[0]||(i[0]=l=>s(e).book.name=l),type:"text",class:"w-full rounded-lg",required:""},null,512),[[v,s(e).book.name]])]),t("div",null,[de,u(t("input",{id:"bookCode","onUpdate:modelValue":i[1]||(i[1]=l=>s(e).book.code=l),type:"text",class:"w-full rounded-lg",required:""},null,512),[[v,s(e).book.code]])]),t("div",null,[ue,u(t("select",{id:"accountCategory","onUpdate:modelValue":i[2]||(i[2]=l=>s(e).book.account_group_id=l),class:"w-full rounded-lg",required:""},[(f(!0),B(R,null,q(s(n).list,(l,d)=>(f(),B("option",{key:d,value:l.id},b(("upperFirst"in m?m.upperFirst:s(z))(l.name)),9,_e))),128))],512),[[O,s(e).book.account_group_id]])])]),pe],40,re),t("p",{hidden:"",class:G(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!s(a)}])},b(s(a)),3),u(t("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic transition-opacity delay-1000"},b(s(r)),513),[[x,s(r)]])])]),_:1},8,["loading"])}}},ge=E(me,[["__scopeId","data-v-4382e69b"]]),L=o=>(D("data-v-09bbb720"),o=o(),j(),o),fe={class:"text-gray-500"},be=["onSubmit"],ke={class:"flex flex-col gap-2"},he=L(()=>t("label",{for:"book_name",class:"text-xs italic"},"Book Name",-1)),ye=L(()=>t("label",{for:"book_code",class:"text-xs italic"},"Code",-1)),xe=L(()=>t("label",{for:"account_category",class:"text-xs italic"},"Account Group",-1)),ve=["value"],Be=L(()=>t("button",{type:"submit",class:"flex-1 text-white p-2 rounded bg-teal-600 content-center mt-5 hover:bg-teal-500"}," Save ",-1)),Me={__name:"EditBook",setup(o){const e=A(),n=N(),{errorMessage:a,successMessage:r}=M(e),_=P(),c=T(!1),g=async()=>{try{c.value=!0,await e.editBook(),e.errorMessage!==""?_.add({type:"error",text:e.errorMessage}):_.add({type:"success",text:e.successMessage})}catch{a.value=a,_.add({type:"error",text:e.errorMessage})}finally{e.clearMessages(),c.value=!1}},m=()=>{e.isEdit=!1,e.reset()};return(i,p)=>{const l=Y;return f(),w(l,{title:"Book",loading:s(c)},{default:S(()=>[t("div",fe,[t("form",{onSubmit:I(g,["prevent"])},[t("div",ke,[t("div",null,[he,u(t("input",{id:"bookName","onUpdate:modelValue":p[0]||(p[0]=d=>s(e).book.name=d),type:"text",class:"w-full rounded-lg",required:""},null,512),[[v,s(e).book.name]])]),t("div",null,[ye,u(t("input",{id:"bookCode","onUpdate:modelValue":p[1]||(p[1]=d=>s(e).book.code=d),type:"text",class:"w-full rounded-lg",required:""},null,512),[[v,s(e).book.code]])]),t("div",null,[xe,u(t("select",{id:"accountCategory","onUpdate:modelValue":p[2]||(p[2]=d=>s(e).book.account_group_id=d),class:"w-full rounded-lg",required:""},[(f(!0),B(R,null,q(s(n).list,(d,$)=>(f(),B("option",{key:$,value:d.id},b(("upperFirst"in i?i.upperFirst:s(z))(d.name)),9,ve))),128))],512),[[O,s(e).book.account_group_id]])])]),t("div",{class:"flex justify-end gap-2"},[Be,t("button",{type:"button",class:"flex-1 text-white p-2 rounded bg-gray-700 content-center mt-5 hover:bg-gray-500",onClick:m}," Cancel ")])],40,be),t("p",{hidden:"",class:G(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!s(a)}])},b(s(a)),3),u(t("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic transition-opacity delay-1000"},b(s(r)),513),[[x,s(r)]])])]),_:1},8,["loading"])}}},we=E(Me,[["__scopeId","data-v-09bbb720"]]),Se={class:"w-1/2 flex px-4"},Ae={class:"pb-2 text-gray-500"},Ce={class:"flex justify-center mx-auto"},Le={__name:"BookList",setup(o){const e=A(),{list:n,isEdit:a,getParams:r,pagination:_,errorMessage:c,successMessage:g}=M(e),m=k=>{a.value=!0,e.book=k},i=async k=>{try{U.value=!0,await e.deleteBook(k.id),$.add({type:"success",text:e.successMessage})}finally{U.value=!1}},p=k=>{r.value.page=k.page??"",e.getBooks()},l=[{name:"Name",id:"name",style:"text-left"},{name:"Code",id:"code",style:"text-left"}],d={edit:!0,delete:!0},$=P(),U=T(!1);return(k,V)=>{const H=Z,K=ee,J=te,Q=F;return f(),w(Q,{title:"Books List",class:"w-full",loading:s(e).isLoading.list},{default:S(()=>[t("div",Se,[h(H,{modelValue:s(e).getParams.key,"onUpdate:modelValue":V[0]||(V[0]=W=>s(e).getParams.key=W),title:"Search Book",class:"w-full"},null,8,["modelValue"])]),t("div",Ae,[h(K,{"header-columns":l,datas:s(n),actions:d,onEditRow:m,onDeleteRow:i},null,8,["datas"])]),t("div",Ce,[h(J,{links:s(_),onChangeParams:p},null,8,["links"])]),t("p",{hidden:"",class:G(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!s(c)}])},b(s(c)),3),u(t("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic"},b(s(g)),513),[[x,s(g)]])]),_:1},8,["loading"])}}},$e={class:"flex flex-col md:flex-row gap-4"},Ee={__name:"index",setup(o){const e=A();N().getAccountGroups();const{isEdit:a}=M(e);return e.getBooks(),oe({title:"Accounting Books"}),(r,_)=>{const c=ge,g=we,m=Le,i=se;return f(),w(i,{"if-access":("useCheckAccessibility"in r?r.useCheckAccessibility:s(ae))([("AccessibilityTypes"in r?r.AccessibilityTypes:s(ne)).ACCOUNTING_SETUP_BOOK_OF_ACCOUNTS])},{default:S(()=>[t("div",$e,[u(h(c,{class:"flex-1"},null,512),[[x,!s(a)]]),u(h(g,{class:"flex-1"},null,512),[[x,s(a)]]),h(m,{class:"flex-2"})])]),_:1},8,["if-access"])}}},Xe=E(Ee,[["__scopeId","data-v-d7b5166e"]]);export{Xe as default};
