import{_ as Z,a as ee,b as te}from"./MainContainer.BswisYLp.js";import{_ as ae}from"./DetailedMultipleEmployeeSelector.BkTpFMRq.js";import{_ as G}from"./PsDateInput.vue.Dioz8erE.js";import{_ as Y}from"./PsNumberInput.vue.BU6zn-2O.js";import{_ as B}from"./DepartmentProjectSelector.BGO9zzOz.js";import{_ as oe}from"./ApprovalsList.aVDiIVet.js";import{_ as S}from"./LoadingContainer.vue.BZUQ77Em.js";import{_ as se}from"./PsModal.Bk3xu63Y.js";import{q as W,L as q,o as p,c as A,a as e,t as f,b as r,s as L,B as Q,h as x,w as h,u as t,F as R,i as H,f as N,m as le,r as C,C as ne,g as J,v as O,d as F,G as re,x as ce,y as de,j as V}from"./entry.32UGFqj-.js";import{u as $,_ as I}from"./InfoModal.DxDph4eN.js";import{u as ie,g as ue}from"./approvals.89EhJm5V.js";import{_ as me}from"./LayoutPrint.BjcxelaN.js";import{f as pe}from"./Utilities.DofxnkSu.js";import{_ as j}from"./PsTable.BPIFONj1.js";import{_ as K}from"./CustomPagination.C91H0oe5.js";import{u as z}from"./index.CBzzh1I-.js";import{_ as _e}from"./AcessContainer.Dum7aOuo.js";import{u as fe}from"./vue.f36acd1f.Ds2AlAv6.js";import{u as M,A as T}from"./Accessibilities.xGffDRXj.js";import"./id.WqrvI90c.js";import"./client-only.CuVny2dr.js";import"./LayoutBoards.vue.D_rbqYxd.js";import"./loader.BQ9QddgL.js";import"./DepartmentSelector.vue.D5_eirUz.js";import"./enum.M1X5V5yu.js";import"./CustomFetch.ggXvTdIz.js";import"./ProjectSelector.vue.D_IMAiNS.js";import"./PsSelectSearch.vue.CT-F0Leg.js";import"./Icon.CrHlyQOo.js";import"./index.T-zbMaZc.js";import"./PsTextInput.vue.C7eOWbog.js";import"./PsSelect.vue.DvuFdhGo.js";import"./UserEmployeeSelector.vue.CW0bAtx_.js";import"./RequestDetails.C8dzRGuI.js";import"./ListView.CUwkSJ9r.js";import"./ApprovalDenyButton.2aaI0auR.js";import"./PsHoverButton.B5SrmACV.js";import"./nuxt-link.C5IpI_HT.js";import"./users.G4iuGzk0.js";const ye={class:"p-2"},ge={class:"p-2"},we={class:"p-2"},he={class:"p-2"},be={class:"p-2"},Ae={__name:"DraftModalRow",props:{modelValue:{required:!1,type:Object}},emits:["update:modelValue"],setup(g){const a=W(g,"modelValue");return q(a,()=>{a.value.allowance_amount=a.value.allowance_rate*a.value.allowance_days},{deep:!0}),(n,l)=>{const o=Y;return p(),A("tr",null,[e("td",ye,f(a.value.fullname_first),1),e("td",ge,f(a.value.employee_position),1),e("td",we,[r(o,{modelValue:a.value.allowance_rate,"onUpdate:modelValue":l[0]||(l[0]=c=>a.value.allowance_rate=c),title:""},null,8,["modelValue"])]),e("td",he,[r(o,{modelValue:a.value.allowance_days,"onUpdate:modelValue":l[1]||(l[1]=c=>a.value.allowance_days=c),title:""},null,8,["modelValue"])]),e("td",be,f(a.value.allowance_amount),1)])}}},ve={class:"grid md:grid-cols-3 gap-2 md:justify-between"},xe={class:"p-2 flex flex-col gap-1"},Ce=e("span",{class:"text-teal-600 text-light"}," Charging: ",-1),Re={class:"text-gray-900"},Le={class:"p-2 flex flex-col gap-1"},$e=e("span",{class:"text-teal-600 text-light"}," Cutoff Start: ",-1),Me={class:"text-gray-900 text-sm font-bold"},Te={class:"p-2 flex flex-col gap-1"},De=e("span",{class:"text-teal-600 text-light"}," Cutoff End: ",-1),Pe={class:"text-gray-900 text-sm font-bold"},ke={class:"p-2 flex flex-col gap-1"},Ve=e("span",{class:"text-teal-600 text-light"}," Allowance Date: ",-1),Se={class:"text-gray-900 text-sm font-bold"},qe={class:"p-2 flex flex-col gap-1"},Oe=e("span",{class:"text-teal-600 text-light"}," Total # of Day(s): ",-1),Ee={class:"text-gray-900 text-sm font-bold"},Ue={class:"table-auto w-full border-collapse"},He=e("thead",null,[e("tr",{class:"border"},[e("th",{class:"p-2"}," Employee "),e("th",{class:"p-2"}," Employee Position "),e("th",{class:"p-2"}," Allowance Rate "),e("th",{class:"p-2"}," Allowance Day(s) "),e("th",{class:"p-2"}," Allowance Amount ")])],-1),Ne={__name:"DraftModal",props:{showModal:{required:!1,type:Boolean}},emits:["update:showModal"],setup(g){const a=W(g,"showModal"),n=$(),{createAllowanceRequest:l}=L(n),o=Q(),c=()=>{a.value=!1},u=async()=>{try{await n.createRequest(),o.add({type:"success",text:"Success created Allowance Request."}),c()}catch(i){o.add({type:"error",text:i})}};return(i,d)=>{const w=se;return p(),x(w,{"show-modal":a.value,"onUpdate:showModal":d[1]||(d[1]=m=>a.value=m),"is-loading":t(l).isLoading,title:"Allowance Request"},{body:h(()=>[e("div",ve,[e("div",xe,[Ce,e("span",Re,f(t(l).data.charge_name),1)]),e("div",Le,[$e,e("span",Me,f(t(l).data.cutoff_start_human),1)]),e("div",Te,[De,e("span",Pe,f(t(l).data.cutoff_end_human),1)]),e("div",ke,[Ve,e("span",Se,f(t(l).data.allowance_date_human),1)]),e("div",qe,[Oe,e("span",Ee,f(t(l).data.total_days),1)])]),e("table",Ue,[He,e("tbody",null,[(p(!0),A(R,null,H(t(l).data.employee_allowances,(m,s)=>(p(),x(Ae,{key:s+"draftallowanceitem",modelValue:t(l).data.employee_allowances[s],"onUpdate:modelValue":b=>t(l).data.employee_allowances[s]=b,class:"border"},null,8,["modelValue","onUpdate:modelValue"]))),128))])])]),footer:h(()=>[e("button",{type:"submit",class:"m-2 text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-green-700 dark:focus:ring-green-800",onClick:d[0]||(d[0]=m=>u())}," Submit ")]),_:1},8,["show-modal","is-loading"])}}},Ie={class:"mt-5 mb-6"},je=["onSubmit"],ze={class:"mt-5 mb-5 grid gap-4"},Fe={class:"w-full flex gap-2 md:flex-row flex-col"},Ge={class:"w-full flex gap-2 p-2 md:flex-row flex-col"},Ye={class:"w-full mb-2 rounded-lg p-4 bg-slate-100"},Be=e("label",{for:"approved_by",class:"block text-sm font-medium text-gray-900 dark:text-white"},"Approvals:",-1),We=e("div",{class:"flex flex-row justify-between"},[e("div",null,[e("button",{type:"submit",class:"text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-green-700 dark:focus:ring-green-800"}," Generate Allowance ")])],-1),Qe=N({__name:"AllowanceForm",async setup(g){let a,n;const l=$(),{generateDraftRequest:o}=L(l),c=ie();o.value.data.approvals=([a,n]=le(()=>c.getApprovalByName(ue)),a=await a,n(),a);const u=Q(),i=C(!1),d=async()=>{try{await l.generateDraft(),u.add({type:"success",text:"Successfully created Allowance Draft."}),i.value=!0}catch(m){u.add({type:"error",text:m})}},w=ne(()=>{if(o.value.data.cutoff_start&&o.value.data.cutoff_end){o.value.data.total_days=1;const m=new Date(o.value.data.cutoff_start),s=new Date(o.value.data.cutoff_end),b=m.setMinutes(m.getMinutes()-m.getTimezoneOffset()),y=s.setMinutes(s.getMinutes()-s.getTimezoneOffset());o.value.data.total_days=(y-b)/(24*60*60*1e3)+1}});return(m,s)=>{const b=ae,y=G,v=Y,D=B,P=oe,k=S,E=Ne;return p(),A(R,null,[r(k,{class:"w-full",loading:t(o).isLoading},{default:h(()=>[e("div",Ie,[e("form",{onSubmit:J(d,["prevent"])},[r(b,{modelValue:t(o).data.employees,"onUpdate:modelValue":s[0]||(s[0]=_=>t(o).data.employees=_),title:"Employee Name",name:"Employee Name"},null,8,["modelValue"]),e("div",ze,[e("div",Fe,[r(y,{modelValue:t(o).data.cutoff_start,"onUpdate:modelValue":s[1]||(s[1]=_=>t(o).data.cutoff_start=_),class:"w-full",title:"Cut-off Date (Start)",onChange:t(w)},null,8,["modelValue","onChange"]),r(y,{modelValue:t(o).data.cutoff_end,"onUpdate:modelValue":s[2]||(s[2]=_=>t(o).data.cutoff_end=_),class:"w-full",title:"Cut-off Date (End)",onChange:t(w)},null,8,["modelValue","onChange"]),r(y,{modelValue:t(o).data.allowance_date,"onUpdate:modelValue":s[3]||(s[3]=_=>t(o).data.allowance_date=_),class:"w-full",title:"Allowance Date"},null,8,["modelValue"])]),e("div",Ge,[r(v,{modelValue:t(o).data.total_days,"onUpdate:modelValue":s[4]||(s[4]=_=>t(o).data.total_days=_),class:"md:w-1/3 w-full",title:"Total Day(s)"},null,8,["modelValue"]),r(D,{"select-type":t(o).data.charging_type,"onUpdate:selectType":s[5]||(s[5]=_=>t(o).data.charging_type=_),"department-id":t(o).data.department_id,"onUpdate:departmentId":s[6]||(s[6]=_=>t(o).data.department_id=_),"project-id":t(o).data.project_id,"onUpdate:projectId":s[7]||(s[7]=_=>t(o).data.project_id=_),class:"md:w-1/3 w-full",title:"Charging"},null,8,["select-type","department-id","project-id"])])]),e("div",Ye,[Be,(p(!0),A(R,null,H(t(o).data.approvals,(_,U)=>(p(),x(P,{key:"hrmsetupapprovallist"+U,modelValue:t(o).data.approvals[U],"onUpdate:modelValue":X=>t(o).data.approvals[U]=X},null,8,["modelValue","onUpdate:modelValue"]))),128))]),We],40,je)])]),_:1},8,["loading"]),r(E,{"show-modal":t(i),"onUpdate:showModal":s[8]||(s[8]=_=>O(i)?i.value=_:null)},null,8,["show-modal"])],64)}}}),Je={class:"grid grid-cols-3 gap-2"},Ke={class:"flex flex-row"},Xe={class:"flex flex-row"},Ze=["onClick"],et=N({__name:"FilterSelector",setup(g){const a=$(),{allowanceRecords:n}=L(a),l=()=>{a.getAllowanceRecords()};return(o,c)=>{const u=B,i=G;return p(),A("div",Je,[e("div",Ke,[r(u,{"select-type":t(n).params.group_type,"onUpdate:selectType":c[0]||(c[0]=d=>t(n).params.group_type=d),projectId:t(n).params.project_id,"onUpdate:projectId":c[1]||(c[1]=d=>t(n).params.project_id=d),departmentId:t(n).params.department_id,"onUpdate:departmentId":c[2]||(c[2]=d=>t(n).params.department_id=d),title:"Charging"},null,8,["select-type","projectId","departmentId"])]),e("div",Xe,[r(i,{modelValue:t(n).params.allowance_date,"onUpdate:modelValue":c[3]||(c[3]=d=>t(n).params.allowance_date=d),title:"Allowance Date"},null,8,["modelValue"])]),e("button",{type:"submit",class:"text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-green-700 dark:focus:ring-green-800",onClick:J(l,["prevent"])}," View Records ",8,Ze)])}}}),tt=e("div",{class:"text-center mb-4"},[e("h1",{class:"text-xl font-bold"}," EVENPAR CONSTRUCTION AND DEVELOPMENT CORPORATION "),e("h2",{class:"text-lg"}," Allowance Record ")],-1),at={class:"mb-2 flex justify-between"},ot={class:"w-full flex gap-4"},st=e("span",{class:"font-semibold text-sm"},"Office/Project: ",-1),lt={class:"font-light text-sm"},nt=e("span",{class:"font-semibold text-sm ml-4"},"Allowance Date: ",-1),rt={class:"font-light text-sm"},ct={class:"min-w-full border border-zinc-300"},dt=e("thead",{class:"bg-zinc-100"},[e("tr",null,[e("th",{class:"border border-zinc-300 px-2 py-1 text-left"}," NO. "),e("th",{class:"border border-zinc-300 px-2 py-1 text-left"}," Fullname "),e("th",{class:"border border-zinc-300 px-2 py-1 text-left"}," Position "),e("th",{class:"border border-zinc-300 px-2 py-1 text-left"}," Allowance Rate "),e("th",{class:"border border-zinc-300 px-2 py-1 text-left"}," Allowance Days "),e("th",{class:"border border-zinc-300 px-2 py-1 text-left"}," Allowance Amount ")])],-1),it={class:"border border-zinc-300 px-2 py-1"},ut={class:"border border-zinc-300 px-2 py-1"},mt={class:"border border-zinc-300 px-2 py-1"},pt={class:"border border-zinc-300 px-2 py-1"},_t={class:"border border-zinc-300 px-2 py-1"},ft={class:"border border-zinc-300 px-2 py-1"},yt=e("td",{colspan:"5",class:"border border-zinc-300 px-2 py-1"},null,-1),gt={colspan:"1",class:"border border-zinc-300 px-2 py-1"},wt={__name:"AllowanceRecordTable",props:{data:{type:Object,required:!0}},setup(g){const a=g,n=()=>{var l;return(l=a.data.employee_allowances)==null?void 0:l.reduce((o,c)=>o+c.allowance_amount,0)};return(l,o)=>{const c=me;return p(),x(c,{class:"w-full"},{default:h(()=>[tt,e("div",at,[e("div",ot,[st,F(),e("span",lt,f(g.data.charge_name),1),nt,F(),e("span",rt,f(g.data.allowance_date),1)])]),e("table",ct,[dt,e("tbody",null,[(p(!0),A(R,null,H(g.data.employee_allowances,(u,i)=>(p(),A("tr",{key:i+"AllowanceRecord"},[e("td",it,f(i+1),1),e("td",ut,f(u.employee.fullname_first),1),e("td",mt,f(u.employee.position),1),e("td",pt,f(u.allowance_rate_formatted),1),e("td",_t,f(u.allowance_days),1),e("td",ft,f(u.allowance_amount_formatted),1)]))),128)),e("tr",null,[yt,e("td",gt," TOTAL : Php "+f(("formatToCurrency"in l?l.formatToCurrency:t(pe))(n())),1)])])])]),_:1})}}},ht={class:"w-full"},bt={__name:"AllowanceRecords",setup(g){const a=$(),{allowanceRecords:n}=L(a);return(l,o)=>{const c=et,u=wt;return p(),A("div",ht,[r(c),r(u,{data:t(n).data},null,8,["data"])])}}},At={class:"pb-2 text-gray-500 p-2"},vt={class:"flex justify-center mx-auto"},xt={__name:"AllRequests",setup(g){const a=$(),{allRequests:n,errorMessage:l,successMessage:o}=L(a),c=z(()=>{a.getAllRequests()},500);n.value.isLoaded||c(),q(()=>({...n.value.params}),(y,v)=>{y.page===v.page&&(n.value.params.page=1),c()},{deep:!0});const u=C(!1),i=y=>{n.value.params.page=y.page??""},d=[{name:"Charge Department",id:"charge_name"},{name:"Cutoff Start",id:"cutoff_start_human"},{name:"Cutoff End",id:"cutoff_end_human"},{name:"Allowance Date",id:"allowance_date_human"},{name:"Total # of Day(s)",id:"total_days"},{name:"Requested by",id:"created_by_user"},{name:"Request Status",id:"request_status"}],w={showTable:!0},m=C({}),s=C(!1),b=y=>{m.value=y,s.value=!0};return(y,v)=>{const D=j,P=K,k=S,E=I;return p(),A(R,null,[r(k,{class:"w-full",loading:t(u)},{default:h(()=>[e("div",At,[r(D,{"header-columns":d,datas:t(n).list,actions:w,onShowTable:b},null,8,["datas"])]),e("div",vt,[r(P,{links:t(n).pagination,onChangeParams:i},null,8,["links"])]),e("p",{hidden:"",class:re(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!t(l)}])},f(t(l)),3),ce(e("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic"},f(t(o)),513),[[de,t(o)]])]),_:1},8,["loading"]),r(E,{"show-modal":t(s),"onUpdate:showModal":v[0]||(v[0]=_=>O(s)?s.value=_:null),data:t(m)},null,8,["show-modal","data"])],64)}}},Ct={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},Rt={class:"flex justify-center mx-auto"},Lt={__name:"MyRequests",setup(g){const a=$(),{myRequests:n}=L(a),l=z(()=>{a.getMyRequests()},500);n.value.isLoaded||l(),q(()=>({...n.value.params}),(s,b)=>{s.page===b.page&&(n.value.params.page=1),l()},{deep:!0});const o=[{name:"Charge Department",id:"charge_name"},{name:"Cutoff Start",id:"cutoff_start_human"},{name:"Cutoff End",id:"cutoff_end_human"},{name:"Allowance Date",id:"allowance_date_human"},{name:"Total # of Day(s)",id:"total_days"},{name:"Requested by",id:"created_by_user"},{name:"Request Status",id:"request_status"}],c={showTable:!0},u=s=>{n.value.params.page=s.page??""},i=C({}),d=C(!1),w=s=>{i.value=s,d.value=!0},m=C(!1);return(s,b)=>{const y=j,v=K,D=S,P=I;return p(),A(R,null,[r(D,{class:"w-full",loading:t(m)},{default:h(()=>[e("div",Ct,[r(y,{"header-columns":o,actions:c,datas:t(n).list??[],onShowTable:w},null,8,["datas"])]),e("div",Rt,[r(v,{links:t(n).pagination,onChangeParams:u},null,8,["links"])])]),_:1},8,["loading"]),r(P,{"show-modal":t(d),"onUpdate:showModal":b[0]||(b[0]=k=>O(d)?d.value=k:null),data:t(i)},null,8,["show-modal","data"])],64)}}},$t={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},Mt={__name:"MyApprovals",setup(g){const a=$(),{myApprovals:n}=L(a),l=z(()=>{a.getMyApprovals()},500);n.value.isLoaded||l(),q(()=>({...n.value.params}),(w,m)=>{w.page===m.page&&(n.value.params.page=1),l()},{deep:!0});const o=[{name:"Charge Department",id:"charge_name"},{name:"Cutoff Start",id:"cutoff_start_human"},{name:"Cutoff End",id:"cutoff_end_human"},{name:"Allowance Date",id:"allowance_date_human"},{name:"Total # of Day(s)",id:"total_days"},{name:"Requested by",id:"created_by_user"},{name:"Request Status",id:"request_status"}],c={showTable:!0},u=C({}),i=C(!1),d=w=>{u.value=w,i.value=!0};return(w,m)=>{const s=j,b=S,y=I;return p(),A(R,null,[r(b,{class:"w-full"},{default:h(()=>[e("div",$t,[r(s,{"header-columns":o,actions:c,datas:t(n).list??[],onShowTable:d},null,8,["datas"])])]),_:1}),r(y,{"show-modal":t(i),"onUpdate:showModal":m[0]||(m[0]=v=>O(i)?i.value=v:null),data:t(u)},null,8,["show-modal","data"])],64)}}},Tt={class:"grid grid-cols-1 md:flex-row gap-4"},fa=N({__name:"allowance",setup(g){return fe({title:"Generate Allowance"}),(a,n)=>{const l=Z,o=Qe,c=ee,u=bt,i=xt,d=Lt,w=Mt,m=te,s=_e;return p(),x(s,{"if-access":("useCheckAccessibility"in a?a.useCheckAccessibility:t(M))([("AccessibilityTypes"in a?a.AccessibilityTypes:t(T)).HRMS_PAYROLL_ALLOWANCE_GROUP])},{default:h(()=>[e("div",Tt,[r(m,null,{"tab-titles":h(()=>[("useCheckAccessibility"in a?a.useCheckAccessibility:t(M))([("AccessibilityTypes"in a?a.AccessibilityTypes:t(T)).HRMS_PAYROLL_ALLOWANCE_FORMANDMYREQUEST])?(p(),x(l,{key:0,"target-id":"generateallowance",title:"Generate Allowance"})):V("",!0),("useCheckAccessibility"in a?a.useCheckAccessibility:t(M))([("AccessibilityTypes"in a?a.AccessibilityTypes:t(T)).HRMS_PAYROLL_ALLOWANCE_ALLOWANCERECORD])?(p(),x(l,{key:1,"target-id":"allowance-records",title:"Allowance Records"})):V("",!0),("useCheckAccessibility"in a?a.useCheckAccessibility:t(M))([("AccessibilityTypes"in a?a.AccessibilityTypes:t(T)).HRMS_PAYROLL_ALLOWANCE_ALLREQUESTS])?(p(),x(l,{key:2,"target-id":"allRequestsList",title:"All Requests"})):V("",!0),("useCheckAccessibility"in a?a.useCheckAccessibility:t(M))([("AccessibilityTypes"in a?a.AccessibilityTypes:t(T)).HRMS_PAYROLL_ALLOWANCE_FORMANDMYREQUEST])?(p(),x(l,{key:3,"target-id":"myRequestList",title:"My Requests"})):V("",!0),("useCheckAccessibility"in a?a.useCheckAccessibility:t(M))([("AccessibilityTypes"in a?a.AccessibilityTypes:t(T)).HRMS_PAYROLL_ALLOWANCE_MYAPPROVALS])?(p(),x(l,{key:4,"target-id":"myApprovalsList",title:"My Approvals"})):V("",!0)]),"tab-containers":h(()=>[r(c,{id:"generateallowance"},{default:h(()=>[r(o)]),_:1}),r(c,{id:"allowance-records"},{default:h(()=>[r(u)]),_:1}),r(c,{id:"allRequestsList"},{default:h(()=>[r(i)]),_:1}),r(c,{id:"myRequestList"},{default:h(()=>[r(d)]),_:1}),r(c,{id:"myApprovalsList"},{default:h(()=>[r(w)]),_:1})]),_:1})])]),_:1},8,["if-access"])}}});export{fa as default};
