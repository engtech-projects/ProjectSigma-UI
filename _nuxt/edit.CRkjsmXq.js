import j from"./Icon.CrHlyQOo.js";import{_ as $}from"./nuxt-link.C5IpI_HT.js";import{u as B,_ as L}from"./ModalContainer.C773N-tg.js";import{_ as F}from"./client-only.CuVny2dr.js";import{r as h,C as R,K as D,o as s,h as w,w as k,a as e,c as u,F as v,i as M,u as a,x as g,M as T,t as C,b as i,j as z,d as I,g as E,A as _,f as K,m as G,ax as J}from"./entry.32UGFqj-.js";import{c as P}from"./CustomFetch.ggXvTdIz.js";import{u as H}from"./hmo._XXj8zUR.js";import"./index.T-zbMaZc.js";import"./loader.BQ9QddgL.js";const Q={class:"border-t-8 border-green-500 mt-5 edit-item w-full max-w-full bg-white rounded-lg shadow dark:bg-gray-800 dark:border-gray-700 p-6 overflow-auto"},W=e("label",{for:"",class:"text-xl font-semibold text-gray-900"},"Edit HMO",-1),X=e("div",{class:"mt-5 b-6"},[e("label",{for:"hmo-amount",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Amount"),e("input",{id:"hmoAmount",type:"number",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"0.00",required:""})],-1),Y=e("div",{class:"mt-5 b-6"},[e("label",{for:"hmo_name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"HMO Name"),e("input",{id:"hmoName",type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""})],-1),Z=e("div",{class:"flex gap-4"},[e("div",{class:"mt-5 b-6 flex-1"},[e("label",{for:"hmo_start",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"HMO Start"),e("input",{id:"hmoStart",type:"date",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""})]),e("div",{class:"mt-5 b-6 flex-1"},[e("label",{for:"hmo_end",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"HMO End"),e("input",{id:"hmoEnd",type:"date",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""})])],-1),ee={class:"mt-5 mb-6"},te=e("label",{for:"employee",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Employees",-1),re={class:"flex flex-col p-4"},oe={class:"flex justify-between py-2 border-b border-slate-100"},ae={class:"flex gap-2 items-center"},le=["onUpdate:modelValue"],se={class:"text-md text-slate-800"},de={key:0,class:"flex flex-col gap-1 bg-slate-100 rounded"},ne={class:"flex gap-2"},ue={key:1,class:"w-4"},ie={class:"text-sm"},ce={class:"flex justify-end gap-4"},me=["onSubmit"],be=e("label",{for:"firstname",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Firstname",-1),ge=e("label",{for:"middlename",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Middlename",-1),fe=e("label",{for:"lastname",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Lastname",-1),xe={class:"flex justify-end gap-4 mt-4"},pe=e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"}," Add ",-1),he={__name:"HmoEdit",setup(S){const c=H(),d=B(),m=h([]),f=h({}),l=h({firstname:null,middlename:null,lastname:null});async function x(){await P("/api/hmo/members",{onResponse:({response:o})=>{var r;if(o.ok)m.value=(r=o._data)==null?void 0:r.data;else throw new Error(o._data.message)}})}function V(){f.value.members.push(l.value),d.hideModal(),l.value={firstname:null,middlename:null,lastname:null}}function q(o,r){return o.filter(p=>p!==r)}function A(o){f.value=o,d.showModal()}const U=R(()=>{const o=[];return m.value.forEach(r=>{r.members=[],r.checked=!0,o.push(r)}),o});return D(async()=>{await x()}),(o,r)=>{const b=j,p=$,N=L,O=F;return s(),w(O,null,{default:k(()=>[e("div",Q,[W,X,Y,Z,e("div",ee,[te,e("div",re,[(s(!0),u(v,null,M(a(U),t=>(s(),u("div",{key:t.id,class:"flex flex-col"},[e("div",oe,[e("div",ae,[g(e("input",{"onUpdate:modelValue":n=>t.checked=n,type:"checkbox"},null,8,le),[[T,t.checked]]),e("span",se,C(t.family_name+", "+t.first_name+" "+t.middle_name[0].toUpperCase()+"."),1)]),i(b,{name:"iconoir:plus",class:"text-2xl text-slate-800 hover:text-blue-500 cursor-pointer",onClick:n=>A(t)},null,8,["onClick"])]),t.members.length>0?(s(),u("div",de,[(s(!0),u(v,null,M(t.members,(n,y)=>(s(),u("div",{key:y,class:"flex justify-between items-center hover:bg-slate-200 px-4 py-1 border-b border-white"},[e("div",ne,[y===0?(s(),w(b,{key:0,name:"iconoir:long-arrow-down-right"})):(s(),u("span",ue)),e("span",ie,C(n.lastname+", "+n.firstname+" "+n.middlename[0].toUpperCase()+"."),1)]),i(b,{name:"iconoir:trash",class:"text-slate-700 hover:text-red-500 cursor-pointer",onClick:ke=>t.members=q(t.members,n)},null,8,["onClick"])]))),128))])):z("",!0)]))),128))])]),e("div",ce,[i(p,{to:"/hrms/setup/hmo",class:"text-white bg-slate-700 hover:bg-slate-800 focus:ring-4 focus:outline-none focus:ring-slate-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-slate-600 dark:hover:bg-slate-700 dark:focus:ring-slate-800"},{default:k(()=>[I(" Cancel ")]),_:1}),e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:r[0]||(r[0]=t=>a(c).createHmo())}," Update ")]),i(N,{size:"modal-sm",title:"Membership Addon"},{default:k(()=>[e("form",{class:"flex flex-col px-4 py-2 gap-2",onSubmit:E(V,["prevent"])},[e("div",null,[be,g(e("input",{id:"firstname","onUpdate:modelValue":r[1]||(r[1]=t=>a(l).firstname=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""},null,512),[[_,a(l).firstname]])]),e("div",null,[ge,g(e("input",{id:"middlename","onUpdate:modelValue":r[2]||(r[2]=t=>a(l).middlename=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""},null,512),[[_,a(l).middlename]])]),e("div",null,[fe,g(e("input",{id:"lastname","onUpdate:modelValue":r[3]||(r[3]=t=>a(l).lastname=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:""},null,512),[[_,a(l).lastname]])]),e("div",xe,[e("button",{class:"text-white bg-slate-700 hover:bg-slate-800 focus:ring-4 focus:outline-none focus:ring-slate-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-slate-600 dark:hover:bg-slate-700 dark:focus:ring-slate-800",onClick:r[4]||(r[4]=E((...t)=>a(d).hideModal&&a(d).hideModal(...t),["prevent"]))}," Cancel "),pe])],40,me)]),_:1})])]),_:1})}}},Ve=K({__name:"edit",async setup(S){let c,d;const m=H();return[c,d]=G(()=>m.showHmo(J().query.hmo_id)),await c,d(),(f,l)=>{const x=he;return s(),u("div",null,[i(x)])}}});export{Ve as default};
