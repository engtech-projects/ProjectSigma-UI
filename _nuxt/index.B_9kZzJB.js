import{_ as xe,a as qe,b as we}from"./MainContainer.B9hIGMIe.js";import{_ as ke}from"./DepartmentProjectSelector.CDYdLlti.js";import{_ as Ie}from"./PsTextInput.vue.DFQbUHfC.js";import{_ as Se}from"./PsDateInput.vue.DLxIFRYj.js";import{_ as Ce}from"./PsSelectSearch.vue.CrY1IpH8.js";import{f as Z,n as j,s as V,K as G,q as D,r as T,C as se,o as s,h as U,u as o,v as B,L as X,x as A,y as ne,c as m,a as e,M as $e,d as me,b,g as ee,j as R,t as C,A as O,F as N,i as P,G as pe,m as Ae,B as Re,D as oe,w as M,E as le}from"./entry.R6V7NTxy.js";import{u as te}from"./enum.C7gxcjUu.js";import _e from"./Icon.DcF_NU9d.js";import{u as re}from"./id.Dwf9xs1O.js";import{_ as Ue}from"./ApprovalsList.GUTJciN1.js";import{u as W,A as Te,T as Ne,M as Me,R as Pe}from"./requeststock.DLQJ-ZmH.js";import{u as Ve}from"./approvals.Db95ZdMZ.js";import{u as Le}from"./bom.FCOEtAH4.js";import{_ as ae}from"./PsTable.CTJad9K5.js";import{_ as ie}from"./CustomPagination.CR9ildFS.js";import{_ as ue}from"./LoadingContainer.vue.Bz3WIh4M.js";import{_ as Fe}from"./AcessContainer.DJcSsti6.js";import{u as Ee}from"./vue.f36acd1f.Dv_A-myg.js";import{u as Y,A as H}from"./Accessibilities.uaboihcy.js";import"./LayoutBoards.vue.1keADq5t.js";import"./loader.C2wIXBoB.js";import"./DepartmentSelector.vue.Cl6IMdR7.js";import"./enum.D7iLG1Bk.js";import"./CustomFetch.BRBLzGci.js";import"./ProjectSelector.vue.DM9e2bZy.js";import"./index.T-zbMaZc.js";import"./client-only.QuN6N-R_.js";import"./UserEmployeeSelector.vue.DiXko0wz.js";import"./nuxt-link.drPfi767.js";import"./Utilities.Cbr1Z9cn.js";import"./users.D5_vMoUK.js";const Oe=Z({__name:"ApprovedItemSelector",props:j({showAll:{type:Boolean,default:!1}},{modelValue:{required:!1,type:Number,default:null}}),emits:["update:modelValue"],setup(y){const d=te(),{itemEnum:a}=V(d);G(()=>{a.value.isLoaded||d.getItemList()});const l=D(y,"modelValue"),p=T({}),h=se(()=>d.filteredItemList.map(i=>({...i,display_text:`[${i.item_code||""}] ${i.item_summary||""}`,item_code:`[${i.item_code||""}] ${i.item_summary||""}`})));return(i,c)=>{const v=Ce;return s(),U(v,{result:o(p),"onUpdate:result":c[0]||(c[0]=g=>B(p)?p.value=g:null),"result-id":l.value,"onUpdate:resultId":c[1]||(c[1]=g=>l.value=g),"search-input":o(a).localFilter.item_summary,"onUpdate:searchInput":c[2]||(c[2]=g=>o(a).localFilter.item_summary=g),"search-list":o(h),loading:o(a).isLoading,title:"item_summary",placeholder:"Search Item"},null,8,["result","result-id","search-input","search-list","loading"])}}}),je={class:"w-full flex flex-col gap-2 rounded-md h-auto z-30"},De=e("label",{class:"text-lg font-bold text-center sticky top-0 bg-teal-200 z-10 p-2"}," Non BOM List ",-1),Be={class:"flex px-2 items-center text-sm font-medium text-gray-700 select-none"},Qe={key:0,class:"flex items-center gap-4 p-2"},ze={class:"flex-1"},Ke={__name:"NonBomItemSelector",props:{sectionId:{type:Number,required:!0},selectType:{type:String,default:"single"},modelValue:Boolean,itemId:{type:Number,required:!0}},emits:["update:modelValue","update:itemId","add-non-bom-item"],setup(y,{emit:d}){const a=y,l=T(a.modelValue),p=T(a.itemId);return X(l,h=>d("update:modelValue",h)),X(p,h=>d("update:itemId",h)),(h,i)=>{const c=Oe;return A((s(),m("div",je,[De,e("label",Be,[A(e("input",{"onUpdate:modelValue":i[0]||(i[0]=v=>B(l)?l.value=v:null),type:"checkbox",class:"mr-2"},null,512),[[$e,o(l)]]),me(" Add Non-BOM Items ")]),o(l)?(s(),m("div",Qe,[e("div",ze,[b(c,{modelValue:o(p),"onUpdate:modelValue":i[1]||(i[1]=v=>B(p)?p.value=v:null),class:"w-full","show-all":!0},null,8,["modelValue"])]),e("button",{class:"bg-green-600 text-white p-2 rounded hover:bg-green-800 flex items-center",type:"button",onClick:i[2]||(i[2]=ee(v=>h.$emit("add-non-bom-item",o(p)),["prevent"]))}," Add Item ")])):R("",!0)],512)),[[ne,y.sectionId]])}}},Ye={key:0,class:"text-lg font-bold text-center sticky top-0 bg-teal-200 z-10 p-2 block"},He={class:"z-10 bg-white/90 backdrop-blur-sm sticky top-[calc(2.5rem)]"},Ge={class:"px-2 py-2 border-b"},We={class:"overflow-x-auto border rounded-lg shadow-sm"},Je={class:"table-auto w-full border-collapse"},Xe={class:"bg-gray-200"},Ze={key:0},et=["colspan"],tt=["onDblclick","onKeydown"],ot={__name:"ItemsAppend",props:{headerColumns:{type:Array,required:!0},datas:{type:Array,required:!0},index:{type:Number,required:!0},selectType:{type:String,default:null}},emits:["addItem"],setup(y,{emit:d}){const a=y,l=te(),p=T(""),h=se(()=>{if(!p.value)return a.datas;const v=p.value.toLowerCase();return a.datas.filter(g=>a.headerColumns.some(q=>String(g[q.id]||"").toLowerCase().includes(v)))}),i=v=>{!v||!v.item_id||(l.itemGroupFilter=v.convertable_units,d("addItem",{item_id:v.item_id,item_summary:v.item_summary||"No summary available",uom_id:v.uom_id||null,unit:v.unit||null,quantity:v.quantity||1,convertable_units:v.convertable_units}))},c=(v,g)=>{v.key==="Enter"&&i(g)};return(v,g)=>(s(),m("div",null,[y.selectType?(s(),m("label",Ye,C(y.selectType)+" BOM List ",1)):R("",!0),e("div",He,[e("div",Ge,[A(e("input",{"onUpdate:modelValue":g[0]||(g[0]=q=>p.value=q),type:"text",placeholder:"Search Item...",class:"w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-sky-200"},null,512),[[O,p.value]])])]),e("div",We,[e("table",Je,[e("thead",Xe,[e("tr",null,[(s(!0),m(N,null,P(y.headerColumns,q=>(s(),m("th",{key:q.id,class:"p-2 border"},C(q.name),1))),128))])]),e("tbody",null,[h.value.length===0?(s(),m("tr",Ze,[e("td",{colspan:y.headerColumns.length,class:"text-center p-4 text-gray-500"}," Item does not exist ",8,et)])):R("",!0),(s(!0),m(N,null,P(h.value,(q,t)=>(s(),m("tr",{key:t,class:pe(["border text-center cursor-pointer select-none hover:bg-sky-100 transition",{"bg-gray-100":t%2===0}]),title:"Double click to add item",tabindex:"0",onDblclick:k=>i(q),onKeydown:k=>c(k,q)},[(s(!0),m(N,null,P(y.headerColumns,k=>(s(),m("td",{key:k.id,class:"p-2 border"},C(q[k.id]||"â€”"),1))),128))],42,tt))),128))])])])]))}},st=["id"],nt={class:"border border-slate-600 rounded-md px-3 text-md flex items-center relative cursor-pointer"},lt={class:"h-full flex flex-1 items-center overflow-hidden py-[9px]"},rt={key:1,class:"flex-1"},at={key:3},it={class:"absolute z-50"},ut={key:0,class:"absolute max-h-72 left-0 min-w-full py-2 px-2 border border-slate-800 bg-white rounded flex flex-col gap-2 z-10"},dt={key:0,class:"flex flex-col overflow-auto"},ct=["onClick"],mt={key:1,class:"px-4"},pt=e("span",null,"No data available.",-1),_t=[pt],ft=Z({__name:"ItemUomSelector",props:j({quantity:{type:Number,required:!0},unit:{type:String,required:!0},convertableUnits:{type:Array,required:!0}},{modelValue:{required:!1,type:Number,default:null},searchInput:{type:String,required:!0}}),emits:j(["watchItem"],["update:modelValue","update:searchInput"]),setup(y,{emit:d}){const a=re("$SvzT7CBB3i");let l=null;const p=T(!1),h=T(),i=D(y,"modelValue"),c=T(""),v=T(""),g=D(y,"searchInput"),q=()=>{l&&clearTimeout(l),p.value=!0},t=()=>{l=setTimeout(()=>{p.value=!1},100)};function k(n){c.value=n.name,i.value=n.id,d("watchItem",n),h.value.focus()}function f(){g.value=""}function w(){c.value=""}return(n,I)=>{const $=_e;return s(),m("div",{ref_key:"forFocusOut",ref:h,tabindex:"51"},[e("div",{id:o(a),ref:"compContainer",tabindex:"50",onFocusin:q,onFocusout:t},[e("div",nt,[e("div",lt,[o(p)?A((s(),m("input",{key:0,"onUpdate:modelValue":I[0]||(I[0]=x=>B(v)?v.value=x:null),type:"text",class:"border border-slate-300 rounded w-full h-full",placeholder:"Search",onClick:I[1]||(I[1]=ee(()=>{},["stop"]))},null,512)),[[O,o(v)]]):(s(),m("span",rt,C(o(c)?o(c):"Search"),1)),A(e("span",{onClick:f},[b($,{name:"material-symbols:close-rounded",class:"-ml-8 font-bold text-xl",title:"Clear Search Input"})],512),[[ne,o(p)]]),o(c)!==""?(s(),m("div",{key:2,onClick:w},[b($,{name:"material-symbols:close-rounded",class:"font-bold text-xl",title:"Clear Selection"})])):R("",!0),o(c)==""?(s(),m("div",at,[b($,{name:"iconoir:nav-arrow-down",class:"font-bold text-xl"})])):R("",!0)])]),e("div",it,[o(p)?(s(),m("div",ut,[y.convertableUnits.length?(s(),m("div",dt,[(s(!0),m(N,null,P(y.convertableUnits,(x,Q)=>(s(),m("span",{key:Q,class:"cursor-pointer hover:bg-slate-100 px-3 py-1 border-b",onClick:z=>k(x)},C(x.name),9,ct))),128))])):(s(),m("div",mt,_t))])):R("",!0)])],40,st)],512)}}}),ce=(y,d,a)=>y*(d/a),yt={key:0,class:"text-xl dark:text-white border-b block mb-1 font-medium text-gray-900 bg-teal-200 p-2 sticky top-0"},vt={class:"min-w-full table-auto w-full border-collapse"},bt=e("th",null,"Actions",-1),ht={key:0},gt=["colspan"],xt={colspan:"1",class:"px-2 py-2 border-0 border-b border-r font-medium text-gray-900 whitespace-nowrap text-center"},qt=["onUpdate:modelValue","max","onInput"],wt={colspan:"1",class:"px-2 py-2 border-0 border-b border-r font-medium text-gray-900 whitespace-nowrap text-center"},kt={key:0},It=["onClick"],St={key:1},Ct={class:"block w-full text-center font-medium"},$t=e("small",{class:"text-red-500 text-xs mt-1 font-medium italic"}," No conversion available ",-1),At={colspan:"1",class:"px-2 py-2 border-0 border-b border-r font-medium text-gray-900 whitespace-nowrap text-center"},Rt=["onUpdate:modelValue","onInput"],Ut={colspan:"1",class:"px-2 py-2 border-0 border-b border-r font-medium text-gray-900 whitespace-nowrap text-center"},Tt=["onUpdate:modelValue","onInput"],Nt={colspan:"1",class:"px-2 py-2 border-0 border-b border-r font-medium text-gray-900 whitespace-nowrap text-center"},Mt=["onUpdate:modelValue","onInput"],Pt=["onClick"],Vt={__name:"SelectedItems",props:j({title:{type:String,required:!0},headerColumns:{type:Array,required:!0}},{dataColumns:{type:Array}}),emits:j(["updateField","removeItem"],["update:dataColumns"]),setup(y,{emit:d}){const a=te(),{itemEnum:l}=V(a),p=D(y,"dataColumns"),h=se(()=>p.value),i=re("$nyTsih5ziv"),c=t=>{var k,f,w,n;if(!t)return"N/A";if((k=t.convertable_units)!=null&&k.length){const I=t.convertable_units.find($=>$.id===t.unit);return((f=I==null?void 0:I.name)==null?void 0:f.toString().toUpperCase())||"N/A"}return((n=t.uom||((w=l.value.list.find(I=>I.id===t.item_id))==null?void 0:w.uom))==null?void 0:n.toString().toUpperCase())||"N/A"},v=(t,k)=>{const f=h.value[t];f&&(f.old_unit=f.unit,f.unit=k,d("updateField",t,"unit",k),d("updateField",t,"old_unit",f.old_unit))},g=(t,k)=>{const f=h.value[t];if(!f)return;const w=f.old_unit||f.unit,n=f.convertable_units.find(F=>F.id===w),I=f.convertable_units.find(F=>F.id===k);if(!n||!I)return;const $=Number(n.conversion),x=Number(I.conversion);if(isNaN($)||isNaN(x)||!f.quantity)return;const Q=f.quantity,z=Number(ce(Q,$,x).toFixed(4));f.quantity=z;const J=f.max_quantity;let S;J==null?S=1/0:S=Number(ce(J,$,x).toFixed(2)),f.max_quantity=S,d("updateField",t,"quantity",z),d("updateField",t,"max_quantity",S)},q=(t,k)=>{g(t,k),v(t,k)};return(t,k)=>{const f=ft,w=_e;return s(),m(N,null,[y.title?(s(),m("h5",yt,C(y.title),1)):R("",!0),e("table",vt,[e("thead",null,[e("tr",null,[(s(!0),m(N,null,P(y.headerColumns,n=>(s(),m("th",{key:n.name,class:"sticky top-0 bg-white p-2"},C(n.name),1))),128)),bt])]),e("tbody",null,[p.value.length===0?(s(),m("tr",ht,[e("td",{colspan:y.headerColumns.length+1,class:"text-center p-2 italic"}," NO ITEMS SELECTED ",8,gt)])):R("",!0),(s(!0),m(N,null,P(p.value,(n,I)=>{var $;return s(),m("tr",{key:n.item_id,class:"border text-center"},[e("td",xt,[A(e("input",{"onUpdate:modelValue":x=>n.quantity=x,type:"number",min:1,max:n.max_quantity===1/0?void 0:n.max_quantity,class:"border p-1 w-24 text-center",onInput:x=>{n.quantity=Math.max(1,Math.min(Number(n.quantity)||1,n.max_quantity)),d("updateField",I,"quantity",n.quantity)}},null,40,qt),[[O,n.quantity]])]),e("td",wt,[n.convertable_units&&n.convertable_units.length>1?(s(),m("div",kt,[e("span",{class:"block w-full cursor-pointer",onClick:x=>n.showUomSelector=!0},C((($=n.convertable_units.find(x=>x.id===n.unit))==null?void 0:$.name).toString().toUpperCase()),9,It),n.showUomSelector?(s(),U(f,{key:0,id:o(i)+I,modelValue:n.unit,"onUpdate:modelValue":[x=>n.unit=x,x=>{q(I,x),n.showUomSelector=!1}],"item-id":n.item_id,quantity:n.quantity,"convertable-units":n.convertable_units,onClose:x=>n.showUomSelector=!1},null,8,["id","modelValue","onUpdate:modelValue","item-id","quantity","convertable-units","onClose"])):R("",!0)])):(s(),m("div",St,[e("span",Ct,C(c(n)),1),$t]))]),e("td",null,C(n.item_summary),1),e("td",At,[A(e("input",{"onUpdate:modelValue":x=>n.specification=x,type:"text",class:"border p-1 w-full",onInput:x=>d("updateField",I,"specification",n.specification)},null,40,Rt),[[O,n.specification]])]),e("td",Ut,[A(e("input",{"onUpdate:modelValue":x=>n.preferred_brand=x,type:"text",class:"border p-1 w-full",onInput:x=>d("updateField",I,"preferred_brand",n.preferred_brand)},null,40,Tt),[[O,n.preferred_brand]])]),e("td",Nt,[A(e("input",{"onUpdate:modelValue":x=>n.reason=x,type:"text",class:"border p-1 w-full",onInput:x=>d("updateField",I,"reason",n.reason)},null,40,Mt),[[O,n.reason]])]),e("td",null,[e("button",{class:"text-red-700 bg-transparent font-medium rounded-lg text-sm py-2.5 me-2 mb-2",onClick:ee(x=>d("removeItem",I),["prevent"])},[b(w,{name:"mdi:remove",class:"h-5 w-5 lg:h-5 lg:w-5"})],8,Pt)])])}),128))])])],64)}}},Lt={class:"PsPhoneNumberInput"},Ft=["for"],Et=["id","name","placeholder","required"],Ot=Z({__name:"PsPhoneNumberInput",props:j({title:{type:String,required:!0},name:{type:String,required:!1,default:""},placeholder:{type:String,default:""},required:{type:Boolean,default:!1}},{modelValue:{required:!1,type:Number,default:null}}),emits:["update:modelValue"],setup(y){const d=D(y,"modelValue"),a=re("$HxvcMuYLIB");return(l,p)=>(s(),m("div",Lt,[e("label",{for:o(a),class:"block mb-1 text-sm font-medium text-gray-900 dark:text-white"},C(y.title),9,Ft),A(e("input",{id:o(a),"onUpdate:modelValue":p[0]||(p[0]=h=>d.value=h),type:"number",min:"0",name:y.name,class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:y.placeholder,required:y.required},null,8,Et),[[O,d.value]])]))}}),jt={class:"text-gray-500 p-2"},Dt=["onSubmit"],Bt={class:"flex flex-col gap-4 w-full"},Qt={class:"flex flex-col gap-4 mb-5"},zt={class:"flex flex-row justify-between gap-4"},Kt={class:"w-full flex flex-col gap-2"},Yt={class:"w-full flex gap-2"},Ht={class:"w-full"},Gt={class:"w-full flex flex-col gap-2"},Wt={class:"w-full flex flex-col gap-2 border border-teal-500 shadow-md rounded-md h-[435px] overflow-y-auto z-0"},Jt=e("hr",null,null,-1),Xt=e("hr",{class:"my-4"},null,-1),Zt={class:"border border-gray-400 shadow-md rounded-lg overflow-y-auto max-h-[415px]"},eo=e("hr",{class:"my-4"},null,-1),to={class:"overflow-x-auto"},oo={class:"w-full border border-gray-300 text-sm table-fixed"},so=e("thead",{class:"bg-gray-100 text-gray-700"},[e("tr",null,[e("th",{class:"border border-gray-300 p-2 w-1/4"}," Type of Request & Contact Number "),e("th",{class:"border border-gray-300 p-2 w-1/4"}," Remarks "),e("th",{class:"border border-gray-300 p-2 w-1/2",colspan:"4"}," Equipment SMR ")])],-1),no={class:"border border-gray-300 p-3 align-top"},lo={class:"space-y-4"},ro={class:"flex items-center gap-2"},ao=["value"],io=e("option",{value:"",disabled:""}," Select Month ",-1),uo=["value"],co=e("label",{class:"font-medium block mb-1"},"Contact Number (Requestor)",-1),mo={class:"border border-gray-300 p-3 align-top"},po=["value"],_o={class:"border border-gray-300 p-3"},fo=e("label",{class:"font-medium block mb-1"},"Current SMR",-1),yo={class:"border border-gray-300 p-3"},vo=e("label",{class:"font-medium block mb-1"},"Unused SMR",-1),bo={class:"border border-gray-300 p-3"},ho=e("label",{class:"font-medium block mb-1"},"Previous SMR",-1),go={class:"border border-gray-300 p-3"},xo=e("label",{class:"font-medium block mb-1"},"Next SMR",-1),qo={class:"flex w-full"},wo={class:"pt-5 w-full mb-2 rounded-lg p-4 bg-slate-100"},ko=e("label",{for:"approved_by",class:"block text-sm font-medium text-gray-900 dark:text-white"}," Approval:",-1),Io=e("div",{class:"flex w-full items-center gap-4"},[e("button",{type:"submit",class:"text-white bg-emerald-700 hover:bg-emerald-800 focus:ring-4 focus:outline-none focus:ring-emerald-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center"}," Submit ")],-1),So={__name:"RequestStockForm",props:{modelValue:{required:!0,type:Object}},emits:["update:modelValue"],async setup(y){let d,a;const l=te(),{itemEnum:p}=V(l),h=Le(),{currentBom:i}=V(h),v=new Date().getFullYear(),g=W(),{approvalList:q}=V(g);G(()=>{g.fetchRs(),t.value.section_type&&(S.value=t.value.section_type)});const t=D(y,"modelValue");t.value&&(t.value.month||(t.value.month=""));const k=Ve();q.value.list=([d,a]=Ae(()=>k.getApprovalByName(Te)),d=await d,a(),d);const f=Re(),w=T([]),n=()=>{const _=p.value.list.find(u=>u.id===t.value.item_id);if(!t.value.item_id){f.add({type:"error",text:"Please select an item before adding."});return}if(!_){f.add({type:"error",text:"Invalid item selected."});return}if(w.value.some(u=>u.item_id===_.id)){f.add({type:"error",text:"Item already added!"});return}w.value.push({item_id:_.id,item_summary:_.item_summary,quantity:1,max_quantity:1/0,unit:_.uom,old_unit:_.uom,uom:_.uom_name,specification:"",preferred_brand:"",reason:"",convertable_units:_.convertable_units||[],showUomSelector:!1}),w.value=[...w.value],t.value.item_id=null,f.add({type:"success",text:"Item Added"})},I=_=>{if(w.value.some(K=>K.item_id===_.item_id)){f.add({type:"warning",text:"Item already in the list!"});return}w.value.push({item_id:_.item_id,item_summary:_.item_summary,quantity:1,max_quantity:_.quantity,unit:_.uom_id,old_unit:_.uom_id,uom:_.unit,specification:"",preferred_brand:"",reason:"",convertable_units:_.convertable_units||[],showUomSelector:!1}),w.value=[...w.value]},$=(_,u,K)=>{w.value[_][u]=K},x=_=>{w.value.splice(_,1)},Q=async()=>{try{if(!w.value.length){f.add({type:"error",text:"Please add at least one item before submitting the request."});return}if(t.value.type_of_request==="Consolidated Request for the month of"&&!t.value.month){f.add({type:"error",text:"Please select a month for consolidated request."});return}for(const _ of w.value)if(!_.item_id||!_.unit||!_.quantity){f.add({type:"error",text:"Each item must have an Item, UOM, and Quantity."});return}t.value.items=w.value.map(_=>({item_id:_.item_id,quantity:_.quantity,unit:_.unit,specification:_.specification||"",preferred_brand:_.preferred_brand||"",reason:_.reason||""})),t.value.approvals=q.value.list,t.value.type_of_request=t.value.type_of_request==="Consolidated Request for the month of"?`${t.value.type_of_request} ${t.value.month}`:t.value.type_of_request,await g.storeRequest(),g.errorMessage!==""?f.add({type:"error",text:g.errorMessage}):(f.add({type:"success",text:g.successMessage}),w.value=[])}catch(_){f.add({type:"error",text:_.message||_})}},z=[{name:"Qty",id:"quantity"},{name:"Unit",id:"unit"},{name:"Item Description",id:"item_id"},{name:"Specification",id:"specification"},{name:"Preferred Brand",id:"preferred_brand"},{name:"Reason For Request",id:"reason"}],J=[{name:"Item Description",id:"item_summary"},{name:"Quantity",id:"quantity"},{name:"Warehouse",id:""}],S=T(null);X([S,()=>i.value.params.department_id,()=>i.value.params.project_id],()=>{i.value.params.effectivity=v,i.value.params.assignment_type=S.value,i.value.params.assignment_id=i.value.params.department_id||i.value.params.project_id,t.value.section_type=S.value,t.value.section_id=i.value.params.assignment_id,S.value==="Department"?t.value.warehouse_id=1:S.value==="Project"&&(t.value.warehouse_id=i.value.params.project_id),h.getCurrentBOM()});const F=T(!1);return X(()=>t.value.type_of_request,_=>{_!=="Consolidated Request for the month of"&&(t.value.month="")}),(_,u)=>{const K=ke,E=Ie,de=Se,fe=Ke,ye=ot,ve=Vt,be=Ot,he=Ue;return s(),m("div",jt,[e("form",{onSubmit:ee(Q,["prevent"])},[e("div",Bt,[e("div",Qt,[e("div",zt,[e("div",Kt,[e("div",Yt,[e("div",Ht,[b(K,{"select-type":o(S),"onUpdate:selectType":u[0]||(u[0]=r=>B(S)?S.value=r:null),"department-id":o(i).params.department_id,"onUpdate:departmentId":u[1]||(u[1]=r=>o(i).params.department_id=r),"project-id":o(i).params.project_id,"onUpdate:projectId":u[2]||(u[2]=r=>o(i).params.project_id=r),title:"Department/Project"},null,8,["select-type","department-id","project-id"])]),e("div",{class:pe({"w-full":!t.value.section_id,"w-2/3":t.value.section_id})},[b(E,{modelValue:t.value.office_project_address,"onUpdate:modelValue":u[3]||(u[3]=r=>t.value.office_project_address=r),class:"w-full",title:"Address"},null,8,["modelValue"])],2)]),b(E,{modelValue:t.value.request_for,"onUpdate:modelValue":u[4]||(u[4]=r=>t.value.request_for=r),required:!0,class:"w-full",title:"Request For"},null,8,["modelValue"])]),e("div",Gt,[me(C(t.value.reference_no)+" ",1),b(de,{modelValue:t.value.date_prepared,"onUpdate:modelValue":u[5]||(u[5]=r=>t.value.date_prepared=r),required:!0,class:"w-full",title:"Date Prepared"},null,8,["modelValue"]),b(de,{modelValue:t.value.date_needed,"onUpdate:modelValue":u[6]||(u[6]=r=>t.value.date_needed=r),required:!0,class:"w-full",title:"Date Needed"},null,8,["modelValue"]),b(E,{modelValue:t.value.equipment_no,"onUpdate:modelValue":u[7]||(u[7]=r=>t.value.equipment_no=r),class:"w-full",title:"Equipment No."},null,8,["modelValue"])]),A(e("div",Wt,[b(fe,{isCheckboxChecked:o(F),"onUpdate:isCheckboxChecked":u[8]||(u[8]=r=>B(F)?F.value=r:null),itemId:t.value.item_id,"onUpdate:itemId":u[9]||(u[9]=r=>t.value.item_id=r),"section-id":t.value.section_id,"select-type":o(S),onAddNonBomItem:n},null,8,["isCheckboxChecked","itemId","section-id","select-type"]),Jt,b(ye,{"header-columns":J,datas:o(i).list??[],"select-type":o(S),onAddItem:I},null,8,["datas","select-type"])],512),[[ne,t.value.section_id]])]),Xt,e("div",Zt,[b(ve,{title:"Selected Items","header-columns":z,"data-columns":o(w),onUpdateField:$,onRemoveItem:x},null,8,["data-columns"])]),eo,e("div",to,[e("table",oo,[so,e("tbody",null,[e("tr",null,[e("td",no,[e("div",lo,[e("div",null,[e("div",ro,[A(e("select",{"onUpdate:modelValue":u[10]||(u[10]=r=>t.value.type_of_request=r),class:"w-full border rounded-md px-2 py-1"},[(s(!0),m(N,null,P(o(Ne),(r,L)=>(s(),m("option",{key:L,value:r},C(r),9,ao))),128))],512),[[oe,t.value.type_of_request]]),t.value.type_of_request==="Consolidated Request for the month of"?A((s(),m("select",{key:0,"onUpdate:modelValue":u[11]||(u[11]=r=>t.value.month=r),class:"w-48 border rounded-md px-2 py-1"},[io,(s(!0),m(N,null,P(o(Me),(r,L)=>(s(),m("option",{key:L,value:r},C(r),9,uo))),128))],512)),[[oe,t.value.month]]):R("",!0)])]),e("div",null,[co,b(be,{modelValue:t.value.contact_no,"onUpdate:modelValue":u[12]||(u[12]=r=>t.value.contact_no=r),required:!1,class:"w-full"},null,8,["modelValue"])])])]),e("td",mo,[A(e("select",{"onUpdate:modelValue":u[13]||(u[13]=r=>t.value.remarks=r),class:"w-full border rounded-md px-2 py-1"},[(s(!0),m(N,null,P(o(Pe),(r,L)=>(s(),m("option",{key:L,value:r},C(r),9,po))),128))],512),[[oe,t.value.remarks]])]),e("td",_o,[fo,b(E,{modelValue:t.value.current_smr,"onUpdate:modelValue":u[14]||(u[14]=r=>t.value.current_smr=r),required:!1,class:"w-full"},null,8,["modelValue"])]),e("td",yo,[vo,b(E,{modelValue:t.value.unused_smr,"onUpdate:modelValue":u[15]||(u[15]=r=>t.value.unused_smr=r),required:!1,class:"w-full"},null,8,["modelValue"])]),e("td",bo,[ho,b(E,{modelValue:t.value.previous_smr,"onUpdate:modelValue":u[16]||(u[16]=r=>t.value.previous_smr=r),required:!1,class:"w-full"},null,8,["modelValue"])]),e("td",go,[xo,b(E,{modelValue:t.value.next_smr,"onUpdate:modelValue":u[17]||(u[17]=r=>t.value.next_smr=r),required:!1,class:"w-full"},null,8,["modelValue"])])])])])]),e("div",qo,[e("div",wo,[ko,(s(!0),m(N,null,P(o(q).list,(r,L)=>(s(),U(he,{key:"hrmsetupapprovallist"+r,modelValue:o(q).list[L],"onUpdate:modelValue":ge=>o(q).list[L]=ge},null,8,["modelValue","onUpdate:modelValue"]))),128))])]),Io])])],40,Dt)])}}},Co={class:"pb-2 text-gray-500 overflow-y-auto p-2"},$o={class:"flex justify-center mx-auto"},Ao={__name:"AllRequests",setup(y){const d=W(),{allRequests:a}=V(d);G(()=>{a.isLoaded||d.getAllRequests()});const l=[{name:"Reference No",id:"reference_no"},{name:"Office/Project",id:"section_type"},{name:"Project Address",id:"office_project_address"},{name:"Date Needed",id:"date_needed"}],p={showTable:!0,edit:!1,delete:!1},h=c=>{le({path:"/inventory/requisition-slip/request-details",query:{key:c.id}})},i=c=>{a.value.params.page=c.page??""};return(c,v)=>{const g=ae,q=ie,t=ue;return s(),U(t,{class:"w-full",loading:o(a).isLoading},{default:M(()=>[e("div",Co,[b(g,{"header-columns":l,actions:p,datas:o(a).list??[],onShowTable:h},null,8,["datas"])]),e("div",$o,[b(q,{links:o(a).pagination,onChangeParams:i},null,8,["links"])])]),_:1},8,["loading"])}}},Ro={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},Uo={class:"flex justify-center mx-auto"},To={__name:"MyApprovals",setup(y){const d=W(),{myApprovals:a}=V(d);G(()=>{a.value.isLoaded||d.getMyApprovals()});const l=[{name:"Reference No",id:"reference_no"},{name:"Office/Project",id:"section_type"},{name:"Project Address",id:"office_project_address"},{name:"Date Needed",id:"date_needed"}],p={showTable:!0,edit:!1,delete:!1},h=c=>{le({path:"/inventory/requisition-slip/request-details",query:{key:c.id}})},i=c=>{a.value.params.page=c.page??""};return(c,v)=>{const g=ae,q=ie,t=ue;return s(),U(t,{class:"w-full",loading:o(a).isLoading},{default:M(()=>[e("div",Ro,[b(g,{"header-columns":l,actions:p,datas:o(a).list??[],onShowTable:h},null,8,["datas"])]),e("div",Uo,[b(q,{links:o(a).pagination,onChangeParams:i},null,8,["links"])])]),_:1},8,["loading"])}}},No={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},Mo={class:"flex justify-center mx-auto"},Po={__name:"MyRequests",setup(y){const d=W(),{myRequests:a}=V(d);G(()=>{a.value.isLoaded||d.getMyRequests()});const l=[{name:"Reference No",id:"reference_no"},{name:"Office/Project",id:"section_type"},{name:"Project Address",id:"office_project_address"},{name:"Date Needed",id:"date_needed"}],p={showTable:!0,edit:!1,delete:!1},h=c=>{le({path:"/inventory/requisition-slip/request-details",query:{key:c.id}})},i=c=>{a.value.params.page=c.page??""};return(c,v)=>{const g=ae,q=ie,t=ue;return s(),U(t,{class:"w-full",loading:o(a).isLoading},{default:M(()=>[e("div",No,[b(g,{"header-columns":l,actions:p,datas:o(a).list??[],onShowTable:h},null,8,["datas"])]),e("div",Mo,[b(q,{links:o(a).pagination,onChangeParams:i},null,8,["links"])])]),_:1},8,["loading"])}}},ps=Z({__name:"index",setup(y){const d=W(),{requestStock:a}=V(d);return Ee({title:"Requisition Slip"}),(l,p)=>{const h=xe,i=So,c=qe,v=Ao,g=To,q=Po,t=we,k=Fe;return s(),U(k,{"if-access":("useCheckAccessibility"in l?l.useCheckAccessibility:o(Y))([("AccessibilityTypes"in l?l.AccessibilityTypes:o(H)).INVENTORY_REQUESTSTOCK_GROUP]),class:"w-full"},{default:M(()=>[b(t,null,{"tab-titles":M(()=>[("useCheckAccessibility"in l?l.useCheckAccessibility:o(Y))([("AccessibilityTypes"in l?l.AccessibilityTypes:o(H)).INVENTORY_REQUESTSTOCK_FORM])?(s(),U(h,{key:0,"target-id":"Form",title:"Requisition Slip Form"})):R("",!0),("useCheckAccessibility"in l?l.useCheckAccessibility:o(Y))([("AccessibilityTypes"in l?l.AccessibilityTypes:o(H)).INVENTORY_REQUESTSTOCK_ALLREQUESTS])?(s(),U(h,{key:1,"target-id":"allRequest",title:"All Request"})):R("",!0),("useCheckAccessibility"in l?l.useCheckAccessibility:o(Y))([("AccessibilityTypes"in l?l.AccessibilityTypes:o(H)).INVENTORY_REQUESTSTOCK_MYAPPROVALS])?(s(),U(h,{key:2,"target-id":"myApprovals",title:"My Approvals"})):R("",!0),("useCheckAccessibility"in l?l.useCheckAccessibility:o(Y))([("AccessibilityTypes"in l?l.AccessibilityTypes:o(H)).INVENTORY_REQUESTSTOCK_FORM])?(s(),U(h,{key:3,"target-id":"myRequests",title:"My Request"})):R("",!0)]),"tab-containers":M(()=>[b(c,{id:"Form"},{default:M(()=>[b(i,{modelValue:o(a).form,"onUpdate:modelValue":p[0]||(p[0]=f=>o(a).form=f)},null,8,["modelValue"])]),_:1}),b(c,{id:"allRequest"},{default:M(()=>[b(v)]),_:1}),b(c,{id:"myApprovals"},{default:M(()=>[b(g)]),_:1}),b(c,{id:"myRequests"},{default:M(()=>[b(q)]),_:1})]),_:1})]),_:1},8,["if-access"])}}});export{ps as default};
