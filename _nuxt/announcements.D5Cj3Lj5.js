import{c as t,b as r}from"./CustomFetch.BRBLzGci.js";import{l as n}from"./entry.R6V7NTxy.js";const g=n("Announcements",{state:()=>({isEdit:!1,announcement:{id:null,title:"",content:"",start_date:"",end_date:""},createData:{isLoading:!1,errorMessage:"",successMessage:"",params:{title:"",content:"",start_date:"",end_date:""}},list:[],activeList:[],pagination:{},getParams:{},errorMessage:"",successMessage:""}),actions:{async getAll(){const{data:e,error:s}=await t("/api/announcement",{method:"GET",params:this.getParams,onResponse:({response:a})=>{this.list=a._data.data,this.pagination={first_page:a._data.first_page_url,pages:a._data.links,last_page:a._data.last_page_url}}});if(e)return e;if(s)return s},async getactiveAll(){const{data:e,error:s}=await t("/api/current-announcements",{method:"GET",params:this.getParams,onResponse:({response:a})=>{this.activeList=a._data.data}});if(e)return e;if(s)return s},async createone(){this.successMessage="",this.errorMessage="",!this.createData.isLoading&&await r("/api/announcement",{method:"POST",body:this.announcement,onRequest(){this.createData.isLoading=!0},onResponseError:({response:e})=>{throw this.createData.isLoading=!1,this.errorMessage=e._data.message,new Error(e._data.message)},onResponse:({response:e})=>{if(this.createData.isLoading=!1,e.ok)return this.$reset(),this.getAll(),this.successMessage=e._data.message,e._data;throw this.errorMessage=e._data.message,new Error(e._data.message)}})},clearMessages(){this.errorMessage="",this.successMessage=""},reset(){this.announcement={id:null,title:"",content:"",start_date:"",end_date:""},this.isEdit=!1,this.successMessage="",this.errorMessage=""},async editone(){this.successMessage="",this.errorMessage="",await r("/api/announcement/"+this.announcement.id,{method:"PATCH",body:this.announcement,onResponse:({response:e})=>{if(e.ok)return this.reset(),this.getAll(),this.successMessage=e._data.message,e._data;throw this.errorMessage=e._data.message,new Error(e._data.message)}})},async deleteone(e){const{data:s,error:a}=await t("/api/announcement/"+e,{method:"DELETE",watch:!1,onResponse:({response:i})=>{this.$reset(),this.getAll(),this.successMessage=i._data.message}});if(a.value)throw this.errorMessage=a.value.data.message,new Error(this.errorMessage);if(s.value)return this.getAll(),s}}});export{g as u};
