import we from"./Icon.DcF_NU9d.js";import{_ as _e}from"./InfoModal.Dg5h4GzJ.js";import{u as ve,_ as he}from"./InfoModal.DdSZgkSx.js";import{u as Me,_ as ge}from"./InfoModal.23vrZH2f.js";import{c as be,u as ke,_ as xe}from"./notifications.wsmzCy68.js";import{u as Se,_ as qe}from"./InfoModal.BBxhZEAc.js";import{u as Ie,_ as Re}from"./InfoModal.vue.Dyagz4st.js";import{u as Ue,_ as Ae}from"./InfoModal.DgNQPO6A.js";import{u as Ce,_ as Oe}from"./InfoModal.CUQz7hY3.js";import{_ as $e}from"./InfoModal.DZwpOe8f.js";import{_ as Te}from"./InfoModal.vue.USBRBW-Q.js";import{_ as F}from"./ItemTh.vue.DHCZWLF-.js";import{_ as G}from"./ListView.DgUPeMcI.js";import{_ as L}from"./ApprovalDenyButton.B1ShEyLo.js";import{_ as H}from"./PsModal.DW9SixU3.js";import{f as Q,n as j,q as D,s as Y,B as z,r as T,o as l,h as y,w as N,a as r,b as f,c as g,F as E,i as J,t as M,u as a,v as w,j as m,L as Ne,d as Ee,g as Pe}from"./entry.R6V7NTxy.js";import{a as K}from"./Accessibilities.uaboihcy.js";import{u as W}from"./bom.FCOEtAH4.js";import{u as X}from"./suppliers.Jeng9i7R.js";import{_ as Be}from"./InfoModal.Bofjx90x.js";import{_ as Fe}from"./InfoModal.DhGC-DOj.js";import{_ as Ge}from"./InfoModal.CuvpTCsB.js";import{u as Le}from"./manpower.DrDvUPqB.js";import{u as He}from"./generatePayroll.Dcm8DQPI.js";import{u as Qe}from"./itemprofiles.cSnjaZ2b.js";import{u as je}from"./requeststock.DLQJ-ZmH.js";import{u as De}from"./TransactionFlow.B8FObCfL.js";import{u as Ye}from"./voucher.CMoMfa7r.js";const ze={class:"grid gap-2 md:justify-between"},Je={class:"pb-2 text-gray-500 overflow-x-auto mb-4"},Ke={class:"table-auto w-full border-collapse"},We={class:"px-2 font-medium text-gray-900 whitespace-nowrap text-center"},Xe={class:"px-2 font-medium text-gray-900 whitespace-nowrap text-center"},Ze={class:"px-2 font-medium text-gray-900 whitespace-nowrap text-center"},Ve={class:"px-2 font-medium text-gray-900 whitespace-nowrap text-center"},et={class:"px-2 font-medium text-gray-900 whitespace-nowrap text-center"},tt={class:"w-full"},at={key:0,class:"flex gap-2 p-2 justify-end relative"},ot=Q({__name:"InfoModal",props:j({data:{type:Object,required:!0}},{showModal:{required:!1,type:Boolean}}),emits:["update:showModal"],setup(c){const t=D(c,"showModal"),d=W(),{remarks:k}=Y(d),_=z(),v=T(!1),x=()=>{t.value=!1},R=async p=>{try{v.value=!0,await d.approveApprovalForm(p),d.errorMessage!==""?_.add({type:"error",text:d.errorMessage}):_.add({type:"success",text:d.successMessage}),x()}catch(u){_.add({type:"error",text:u||"something went wrong."})}finally{v.value=!1}},U=async p=>{try{v.value=!0,await d.denyApprovalForm(p),d.errorMessage!==""?_.add({type:"error",text:d.errorMessage}):_.add({type:"success",text:d.successMessage}),x()}catch(u){_.add({type:"error",text:u||"something went wrong."})}finally{v.value=!1}},S=(p,u)=>p*u;return(p,u)=>{const h=F,A=G,C=L,O=H;return l(),y(O,{"show-modal":t.value,"onUpdate:showModal":u[1]||(u[1]=n=>t.value=n),"is-loading":a(v),title:"Item Profile"},{body:N(()=>[r("div",ze,[r("div",Je,[r("table",Ke,[r("thead",null,[r("tr",null,[f(h,{title:"Item"}),f(h,{title:"Unit"}),f(h,{title:"Price"}),f(h,{title:"Quantity"}),f(h,{title:"Amount"})])]),r("tbody",null,[(l(!0),g(E,null,J(c.data.item_summary,(n,b)=>(l(),g("tr",{key:b,class:"bg-white border-b"},[r("td",We,M(n.item_summary),1),r("td",Xe,M(n.uom_id?n.uom_id:""),1),r("td",Ze,M(n.unit_price?n.unit_price:0),1),r("td",Ve,M(n.quantity?n.quantity:0),1),r("td",et,M(S(parseFloat(n.quantity),parseFloat(n.unit_price))?S(parseFloat(n.quantity),parseFloat(n.unit_price)):0),1)]))),128))])])])]),r("div",tt,[f(A,{approvals:c.data.approvals},null,8,["approvals"])])]),footer:N(()=>{var n;return[c.data.next_approval&&("useCheckIsCurrentUser"in p?p.useCheckIsCurrentUser:a(K))((n=c.data.next_approval)==null?void 0:n.user_id)?(l(),g("div",at,[f(C,{"deny-remarks":a(k),"onUpdate:denyRemarks":u[0]||(u[0]=b=>w(k)?k.value=b:null),"request-id":c.data.id,onApprove:R,onDeny:U},null,8,["deny-remarks","request-id"])])):m("",!0)]}),_:1},8,["show-modal","is-loading"])}}}),nt={class:"grid gap-2 md:justify-between"},st={class:"pb-2 text-gray-500 overflow-x-auto mb-4"},rt={class:"table-auto w-full border-collapse"},it={class:"px-2 font-medium text-gray-900 whitespace-nowrap text-center"},lt={class:"px-2 font-medium text-gray-900 whitespace-nowrap text-center"},dt={class:"px-2 font-medium text-gray-900 whitespace-nowrap text-center"},ut={class:"px-2 font-medium text-gray-900 whitespace-nowrap text-center"},ct={class:"px-2 font-medium text-gray-900 whitespace-nowrap text-center"},mt={class:"w-full"},pt={key:0,class:"flex gap-2 p-2 justify-end relative"},ft=Q({__name:"InfoModal",props:j({data:{type:Object,required:!0}},{showModal:{required:!1,type:Boolean}}),emits:["update:showModal"],setup(c){const t=D(c,"showModal"),d=X(),{remarks:k}=Y(d),_=z(),v=T(!1),x=()=>{t.value=!1},R=async p=>{try{v.value=!0,await d.approveApprovalForm(p),d.errorMessage!==""?_.add({type:"error",text:d.errorMessage}):_.add({type:"success",text:d.successMessage}),x()}catch(u){_.add({type:"error",text:u||"something went wrong."})}finally{v.value=!1}},U=async p=>{try{v.value=!0,await d.denyApprovalForm(p),d.errorMessage!==""?_.add({type:"error",text:d.errorMessage}):_.add({type:"success",text:d.successMessage}),x()}catch(u){_.add({type:"error",text:u||"something went wrong."})}finally{v.value=!1}},S=(p,u)=>p*u;return(p,u)=>{const h=F,A=G,C=L,O=H;return l(),y(O,{"show-modal":t.value,"onUpdate:showModal":u[1]||(u[1]=n=>t.value=n),"is-loading":a(v),title:"Item Profile"},{body:N(()=>[r("div",nt,[r("div",st,[r("table",rt,[r("thead",null,[r("tr",null,[f(h,{title:"Item"}),f(h,{title:"Unit"}),f(h,{title:"Price"}),f(h,{title:"Quantity"}),f(h,{title:"Amount"})])]),r("tbody",null,[(l(!0),g(E,null,J(c.data.item_summary,(n,b)=>(l(),g("tr",{key:b,class:"bg-white border-b"},[r("td",it,M(n.item_summary),1),r("td",lt,M(n.uom_id?n.uom_id:""),1),r("td",dt,M(n.unit_price?n.unit_price:0),1),r("td",ut,M(n.quantity?n.quantity:0),1),r("td",ct,M(S(parseFloat(n.quantity),parseFloat(n.unit_price))?S(parseFloat(n.quantity),parseFloat(n.unit_price)):0),1)]))),128))])])])]),r("div",mt,[f(A,{approvals:c.data.approvals},null,8,["approvals"])])]),footer:N(()=>{var n;return[c.data.next_approval&&("useCheckIsCurrentUser"in p?p.useCheckIsCurrentUser:a(K))((n=c.data.next_approval)==null?void 0:n.user_id)?(l(),g("div",pt,[f(C,{"deny-remarks":a(k),"onUpdate:denyRemarks":u[0]||(u[0]=b=>w(k)?k.value=b:null),"request-id":c.data.id,onApprove:R,onDeny:U},null,8,["deny-remarks","request-id"])])):m("",!0)]}),_:1},8,["show-modal","is-loading"])}}}),yt={key:"AllNotifs",href:"#",class:"relative flex py-3 px-4 border-b hover:bg-gray-100 dark:hover:bg-gray-600 dark:border-gray-600"},wt={class:"flex-shrink-0"},_t={class:"w-11 h-11 rounded-full"},vt={class:"pl-3 w-full"},ht={class:"text-gray-500 font-normal text-sm mb-1.5 dark:text-gray-400"},Mt={class:"font-semibold text-gray-900 dark:text-white"},gt={class:"flex text-xs font-medium text-primary-600 dark:text-primary-500"},bt={class:"flex justify-end ml-auto"},kt=["onClick"],xt={key:0,class:"absolute p-8 inset-0 flex items-center justify-center bg-black bg-opacity-10 z-50"},St={key:0},ea={__name:"NotifItem",props:{notification:{type:Object,required:!0}},setup(c){const t=c,d=be(),k=Le(),_=ve(),v=Me(),x=ke(),R=Se(),U=Ie(),S=Ue(),p=Ce(),u=He(),h=Qe(),A=W(),C=X(),O=je(),n=De(),b=Ye(),e=T(!1),i=T({}),q=T(!1),Z={ManpowerRequest:"ic:round-people-alt",FailureToLog:"ic:baseline-flag-circle",EmployeePanRequest:"ic:round-add-card",LeaveEmployeeRequest:"fluent-mdl2:leave-user",TravelOrder:"material-symbols:googler-travel",CashAdvance:"material-symbols:dynamic-form-outline-rounded",Overtime:"mingcute:time-line",GenerateAllowance:"tabler:pig-money",GeneratePayroll:"carbon:money",RequestItemProfiling:"material-symbols:inventory-2-outline",RequestBOM:"i-carbon:request-quote",RequestStock:"i-carbon:request-quote",ACCOUNTING_PAYMENT_REQUEST:"iconoir:credit-card-2",ACCOUNTING_DISBURSEMENT_REQUEST:"material-symbols:dynamic-form-outline-rounded",ACCOUNTING_CASH_REQUEST:"iconoir:money-square"},V=async()=>{q.value=!0;try{switch(t.notification.data.type){case"ManpowerRequest":i.value=await k.getOne(t.notification.data.metadata.id);break;case"FailureToLog":i.value=await _.getOne(t.notification.data.metadata.id);break;case"EmployeePanRequest":i.value=await v.getOne(t.notification.data.metadata.id);break;case"LeaveEmployeeRequest":i.value=await x.getOne(t.notification.data.metadata.id);break;case"TravelOrder":i.value=await R.getOne(t.notification.data.metadata.id);break;case"CashAdvance":i.value=await U.getOne(t.notification.data.metadata.id);break;case"Overtime":i.value=await S.getOne(t.notification.data.metadata.id);break;case"GenerateAllowance":i.value=await p.getOne(t.notification.data.metadata.id);break;case"GeneratePayroll":i.value=await u.getOne(t.notification.data.metadata.id);break;case"RequestItemProfiling":i.value=await h.getOne(t.notification.data.metadata.id);break;case"RequestBOM":i.value=await A.getOne(t.notification.data.metadata.id);break;case"RequestSupplier":i.value=await C.getOne(t.notification.data.metadata.id);break;case"RequestStock":i.value=await O.getOne(t.notification.data.metadata.id);break;case"ACCOUNTING_PAYMENT_REQUEST":i.value=await n.getOne(t.notification.data.metadata.id);break;case"ACCOUNTING_DISBURSEMENT_REQUEST":i.value=await b.getOne(t.notification.data.metadata.id,"disbursement");break;case"ACCOUNTING_CASH_REQUEST":i.value=await b.getOne(t.notification.data.metadata.id,"cash");break;default:break}e.value=!0,window.scrollBy(0,1)}finally{q.value=!1}},ee=async I=>{q.value=!0,await d.setSingleNotifAsRead(I),q.value=!1,window.scrollBy(0,1)},te=async I=>{q.value=!0,await d.setSingleNotifAsUnread(I),q.value=!1};return Ne(e,(I,o)=>{o&&!I&&d.setSingleNotifAsRead(t.notification.id)}),(I,o)=>{var B;const $=we,ae=_e,oe=he,ne=ge,se=xe,re=qe,ie=Re,le=Ae,de=Oe,ue=$e,ce=Te,me=ot,P=ft,pe=Be,fe=Fe,ye=Ge;return l(),g(E,null,[(l(),g("a",yt,[r("div",wt,[r("div",_t,[f($,{name:Z[c.notification.data.type],class:"w-full h-full"},null,8,["name"])])]),r("div",vt,[r("div",ht,[r("span",Mt,M(c.notification.data.message),1)]),r("div",gt,[Ee(M(((B=c.notification.data.module)==null?void 0:B.toUpperCase())??"HRMS")+": "+M(c.notification.created_at_human)+" ",1),r("div",bt,[c.notification.read_at?(l(),g("button",{key:1,title:"Mark As Unread",onClick:o[1]||(o[1]=s=>te(c.notification.id))},[f($,{name:"material-symbols:notifications",color:"gray",class:"w-5 h-5"})])):(l(),g("button",{key:0,title:"Mark As Read",onClick:o[0]||(o[0]=s=>ee(c.notification.id))},[f($,{name:"material-symbols:notifications-unread",color:"blue",class:"w-5 h-5"})])),r("button",{title:"View Notification",onClick:Pe(V,["prevent"])},[f($,{name:"material-symbols:visibility-rounded",color:"blue",class:"w-5 h-5"})],8,kt)])])]),a(q)?(l(),g("div",xt,[r("span",null,[f($,{name:"eos-icons:three-dots-loading",color:"teal",class:"w-12 h-12"})])])):m("",!0)])),a(e)?(l(),g("div",St,[t.notification.data.type==="ManpowerRequest"?(l(),y(ae,{key:0,showModal:a(e),"onUpdate:showModal":o[2]||(o[2]=s=>w(e)?e.value=s:null),data:a(i).data},null,8,["showModal","data"])):m("",!0),t.notification.data.type==="FailureToLog"?(l(),y(oe,{key:1,showModal:a(e),"onUpdate:showModal":o[3]||(o[3]=s=>w(e)?e.value=s:null),data:a(i).data},null,8,["showModal","data"])):m("",!0),t.notification.data.type==="EmployeePanRequest"?(l(),y(ne,{key:2,showModal:a(e),"onUpdate:showModal":o[4]||(o[4]=s=>w(e)?e.value=s:null),data:a(i).data},null,8,["showModal","data"])):m("",!0),t.notification.data.type==="LeaveEmployeeRequest"?(l(),y(se,{key:3,showModal:a(e),"onUpdate:showModal":o[5]||(o[5]=s=>w(e)?e.value=s:null),data:a(i).data},null,8,["showModal","data"])):m("",!0),t.notification.data.type==="TravelOrder"?(l(),y(re,{key:4,showModal:a(e),"onUpdate:showModal":o[6]||(o[6]=s=>w(e)?e.value=s:null),data:a(i).data},null,8,["showModal","data"])):m("",!0),t.notification.data.type==="CashAdvance"?(l(),y(ie,{key:5,showModal:a(e),"onUpdate:showModal":o[7]||(o[7]=s=>w(e)?e.value=s:null),data:a(i).data},null,8,["showModal","data"])):m("",!0),t.notification.data.type==="Overtime"?(l(),y(le,{key:6,showModal:a(e),"onUpdate:showModal":o[8]||(o[8]=s=>w(e)?e.value=s:null),data:a(i).data},null,8,["showModal","data"])):m("",!0),t.notification.data.type==="GenerateAllowance"?(l(),y(de,{key:7,showModal:a(e),"onUpdate:showModal":o[9]||(o[9]=s=>w(e)?e.value=s:null),data:a(i).data},null,8,["showModal","data"])):m("",!0),t.notification.data.type==="GeneratePayroll"?(l(),y(ue,{key:8,showModal:a(e),"onUpdate:showModal":o[10]||(o[10]=s=>w(e)?e.value=s:null),data:a(i).data},null,8,["showModal","data"])):m("",!0),t.notification.data.type==="RequestItemProfiling"?(l(),y(ce,{key:9,showModal:a(e),"onUpdate:showModal":o[11]||(o[11]=s=>w(e)?e.value=s:null),data:a(i).data},null,8,["showModal","data"])):m("",!0),t.notification.data.type==="RequestBOM"?(l(),y(me,{key:10,showModal:a(e),"onUpdate:showModal":o[12]||(o[12]=s=>w(e)?e.value=s:null),data:a(i).data},null,8,["showModal","data"])):m("",!0),t.notification.data.type==="RequestSupplier"?(l(),y(P,{key:11,showModal:a(e),"onUpdate:showModal":o[13]||(o[13]=s=>w(e)?e.value=s:null),data:a(i).data},null,8,["showModal","data"])):m("",!0),t.notification.data.type==="RequestStock"?(l(),y(P,{key:12,showModal:a(e),"onUpdate:showModal":o[14]||(o[14]=s=>w(e)?e.value=s:null),data:a(i).data},null,8,["showModal","data"])):m("",!0),t.notification.data.type==="ACCOUNTING_PAYMENT_REQUEST"?(l(),y(pe,{key:13,showModal:a(e),"onUpdate:showModal":o[15]||(o[15]=s=>w(e)?e.value=s:null),"payment-data":a(i).data.data},null,8,["showModal","payment-data"])):m("",!0),t.notification.data.type==="ACCOUNTING_DISBURSEMENT_REQUEST"?(l(),y(fe,{key:14,showModal:a(e),"onUpdate:showModal":o[16]||(o[16]=s=>w(e)?e.value=s:null),"voucher-data":a(i).data.data},null,8,["showModal","voucher-data"])):m("",!0),t.notification.data.type==="ACCOUNTING_CASH_REQUEST"?(l(),y(ye,{key:15,showModal:a(e),"onUpdate:showModal":o[17]||(o[17]=s=>w(e)?e.value=s:null),"voucher-data":a(i).data.data},null,8,["showModal","voucher-data"])):m("",!0)])):m("",!0)],64)}}};export{ea as _};
