import{_ as F}from"./LayoutBoards.vue.D_rbqYxd.js";import{ab as K,l as O,O as Q,_ as W,s as $,B as U,r as H,o as g,h as P,w as T,a as e,g as V,x as r,u as t,A as h,c as E,F as q,i as B,t as b,D as I,G as j,y as S,p as X,e as Y,aF as J,b as C}from"./entry.32UGFqj-.js";import{h as w}from"./CustomFetch.ggXvTdIz.js";import{_ as Z}from"./editBoards.vue.DA5g6BdX.js";import{_ as ee}from"./PsTable.BPIFONj1.js";import{_ as te}from"./CustomPagination.C91H0oe5.js";import{_ as se}from"./AcessContainer.Dum7aOuo.js";import{u as oe}from"./vue.f36acd1f.Ds2AlAv6.js";import{u as ae,A as ne}from"./Accessibilities.xGffDRXj.js";import"./loader.BQ9QddgL.js";import"./Icon.CrHlyQOo.js";import"./index.T-zbMaZc.js";import"./nuxt-link.C5IpI_HT.js";import"./Utilities.DofxnkSu.js";import"./users.G4iuGzk0.js";const{token:A}=K(),R=Q(),ie="Amount",re="Percentage",z=[ie,re],L=O("philContrib",{state:()=>({isEdit:!1,contribution:{id:null,range_from:null,range_to:null,share_type:"",employee_share:null,employer_share:null},list:[],pagination:{},getParams:{},errorMessage:"",successMessage:""}),actions:{async getContribution(){const{data:n,error:o}=await w("/api/philhealth",{baseURL:R.public.HRMS_API_URL,method:"GET",headers:{Authorization:A.value+"",Accept:"application/json"},params:this.getParams,onResponse:({response:s})=>{this.list=s._data.data.data,this.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last}}},"$HXzMMKsemF");if(n)return n;if(o)return o},async addContribution(){this.successMessage="",this.errorMessage="",await w("/api/philhealth",{baseURL:R.public.HRMS_API_URL,method:"POST",headers:{Authorization:A.value+"",Accept:"application/json"},body:this.contribution,watch:!1,onResponse:({response:n})=>{n.ok?(this.getContribution(),this.reset(),this.successMessage=n._data.message):this.errorMessage=n._data.message}},"$LWiBxFno5q")},clearMessages(){this.errorMessage="",this.successMessage=""},async editContribution(){this.successMessage="",this.errorMessage="";const{data:n,error:o}=await w("/api/philhealth/"+this.contribution.id,{baseURL:R.public.HRMS_API_URL,method:"PATCH",headers:{Authorization:A.value+"",Accept:"application/json"},body:this.contribution,watch:!1,onResponse:({response:s})=>{this.successMessage=s._data.message}},"$kswaVGQM7v");if(n.value)return this.getContribution(),this.reset(),this.successMessage=n.value.message,n;if(o.value)return this.errorMessage=o.value.data.message,o},async deleteContribution(n){const{data:o,error:s}=await w("/api/philhealth/"+n,{baseURL:R.public.HRMS_API_URL,method:"DELETE",headers:{Authorization:A.value+"",Accept:"application/json"},watch:!1,onResponse:({response:c})=>{this.successMessage=c._data.message}},"$9Qit4CK3Ks");if(o.value)return this.getContribution(),this.successMessage=o.value.message,o;if(s.value)return this.errorMessage=s.value.data.message,s},reset(){this.contribution={id:null,range_from:null,range_to:null,share_type:"",employee_share:null,employer_share:null},this.isEdit=!1,this.successMessage="",this.errorMessage=""}}}),f=n=>(X("data-v-65159ca3"),n=n(),Y(),n),le={class:"text-gray-500 mt-2"},ce=["onSubmit"],de=f(()=>e("label",{class:"text-sm"},"Add Contribution Record",-1)),ue={class:"grid grid-cols-2 gap-2"},pe=f(()=>e("label",{for:"rangeFrom",class:"text-sm italic"},"Range From",-1)),me=f(()=>e("label",{for:"rangeTo",class:"text-sm italic"},"Range To",-1)),_e={class:"grid grid-cols-2 gap-2"},he=f(()=>e("label",{for:"empShare",class:"text-sm italic"},"Employee Share",-1)),ge=f(()=>e("label",{for:"empShare",class:"text-sm italic"},"Employer Share",-1)),be={class:"grid grid-rows-1 mt-1"},fe=f(()=>e("label",{for:"share_type",class:"text-sm italic"},"Share Type",-1)),ye=f(()=>e("option",{value:"",disabled:"",selected:""}," Choose Share Type ",-1)),ve=["value"],xe=f(()=>e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"flex-1 text-white p-2 rounded bg-teal-600 content-center mt-5"}," Add Contribution ")],-1)),Me={__name:"AddContribution",setup(n){const o=L(),{contribution:s,errorMessage:c,successMessage:m}=$(o),u=U(),d=H(!1),_=async()=>{try{d.value=!0,await o.addContribution(),o.errorMessage!==""?u.add({type:"error",text:o.errorMessage}):u.add({type:"success",text:o.successMessage})}catch{u.add({type:"error",text:o.errorMessage})}finally{o.clearMessages(),d.value=!1}};return(y,i)=>{const p=F;return g(),P(p,{title:"PhilHealth",loading:t(d)},{default:T(()=>[e("div",le,[e("form",{onSubmit:V(_,["prevent"])},[de,e("div",ue,[e("div",null,[pe,r(e("input",{id:"rangeFrom","onUpdate:modelValue":i[0]||(i[0]=a=>t(s).range_from=a),type:"number",class:"w-full rounded-lg",step:".01",min:"0",required:""},null,512),[[h,t(s).range_from]])]),e("div",null,[me,r(e("input",{id:"rangeTo","onUpdate:modelValue":i[1]||(i[1]=a=>t(s).range_to=a),type:"number",class:"w-full rounded-lg",step:".01",min:"0"},null,512),[[h,t(s).range_to]])])]),e("div",_e,[e("div",null,[he,r(e("input",{id:"empShare","onUpdate:modelValue":i[2]||(i[2]=a=>t(s).employee_share=a),type:"number",class:"w-full rounded-lg",step:".01",min:"0",required:""},null,512),[[h,t(s).employee_share]])]),e("div",null,[ge,r(e("input",{id:"empShare","onUpdate:modelValue":i[3]||(i[3]=a=>t(s).employer_share=a),type:"number",class:"w-full rounded-lg",step:".01",min:"0",required:""},null,512),[[h,t(s).employer_share]])])]),e("div",be,[fe,r(e("select",{id:"share_type","onUpdate:modelValue":i[4]||(i[4]=a=>t(s).share_type=a),class:"bg-slate-100 border border-slate-300 rounded py-1.5 pl-3 cursor-pointer focus:outline focus:outline-color1 focus:bg-white",required:""},[ye,(g(!0),E(q,null,B(t(z),(a,M)=>(g(),E("option",{key:M,value:a},b(a),9,ve))),128))],512),[[I,t(s).share_type]])]),xe],40,ce),e("p",{hidden:"",class:j(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!t(c)}])},b(t(c)),3),r(e("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic"},b(t(m)),513),[[S,t(m)]])])]),_:1},8,["loading"])}}},Ce=W(Me,[["__scopeId","data-v-65159ca3"]]),Se={class:"text-gray-500 mt-2"},we=["onSubmit"],Ae=e("div",{class:"space-y-2"},[e("label",{class:"text-md italic"},"Edit Contribution Record")],-1),Re={class:"grid grid-cols-2 gap-2"},Ee=e("label",{for:"rangeFrom",class:"text-sm italic"},"Range From",-1),$e=e("label",{for:"rangeTo",class:"text-sm italic"},"Range To",-1),Pe={class:"grid grid-cols-2 gap-2"},Te=e("label",{for:"empShare",class:"text-sm italic"},"Employee Share",-1),Le=e("label",{for:"empShare",class:"text-sm italic"},"Employer Share",-1),ke={class:"grid grid-rows-1 mt-1"},Ue=e("label",{for:"share_type",class:"text-sm italic"},"Share Type",-1),He=e("option",{value:"",disabled:"",selected:""}," Choose Share Type ",-1),Fe=["value"],Ve=e("button",{type:"submit",class:"flex-1 text-white p-2 rounded bg-teal-600 content-center mt-5"}," Save ",-1),qe={hidden:"",class:"text-red-600 text-center font-semibold"},Be={__name:"editContribution",setup(n){const o=L(),{contribution:s,errorMessage:c,successMessage:m}=$(o),u=U(),d=H(!1),_=()=>{o.reset()},y=async()=>{try{d.value=!0,await o.editContribution(),u.add({type:"success",text:o.successMessage})}catch{u.add({type:"error",text:o.errorMessage||"something went wrong."})}finally{o.clearMessages(),d.value=!1}},i=(p,a)=>{p[a]=Math.abs(p[a])};return(p,a)=>{const M=Z,v=J("oninput");return g(),P(M,{title:"Edit Contribution",loading:t(d)},{default:T(()=>[e("div",Se,[e("form",{onSubmit:V(y,["prevent"])},[Ae,e("div",Re,[e("div",null,[Ee,r(e("input",{id:"rangeFrom","onUpdate:modelValue":a[0]||(a[0]=l=>t(s).range_from=l),type:"number",class:"w-full rounded-lg",step:".01",min:"0",required:""},null,512),[[h,t(s).range_from],[v,i(t(s),"range_from")]])]),e("div",null,[$e,r(e("input",{id:"rangeFrom","onUpdate:modelValue":a[1]||(a[1]=l=>t(s).range_to=l),type:"number",class:"w-full rounded-lg",step:".01",min:"0"},null,512),[[h,t(s).range_to],[v,i(t(s),"range_to")]])])]),e("div",Pe,[e("div",null,[Te,r(e("input",{id:"empShare","onUpdate:modelValue":a[2]||(a[2]=l=>t(s).employee_share=l),type:"number",class:"w-full rounded-lg",step:".01",min:"0",required:""},null,512),[[h,t(s).employee_share],[v,i(t(s),"employee_share")]])]),e("div",null,[Le,r(e("input",{id:"empShare","onUpdate:modelValue":a[3]||(a[3]=l=>t(s).employer_share=l),type:"number",class:"w-full rounded-lg",step:".01",min:"0",required:""},null,512),[[h,t(s).employer_share],[v,i(t(s),"employer_share")]])])]),e("div",ke,[Ue,r(e("select",{id:"share_type","onUpdate:modelValue":a[4]||(a[4]=l=>t(s).share_type=l),class:"bg-slate-100 border border-slate-300 rounded py-1.5 pl-3 cursor-pointer focus:outline focus:outline-color1 focus:bg-white",required:""},[He,(g(!0),E(q,null,B(t(z),(l,k)=>(g(),E("option",{key:k,value:l},b(l),9,Fe))),128))],512),[[I,t(s).share_type]])]),e("div",{class:"flex justify-end gap-4"},[Ve,e("button",{type:"button",class:"flex-1 text-white p-2 rounded bg-gray-700 content-center mt-5 hover:bg-gray-500",onClick:_}," Cancel ")])],40,we),e("p",qe,b(t(c)),1),r(e("p",{hidden:"",class:"text-green-600 text-center font-semibold"},b(t(m)),513),[[S,t(m)]])])]),_:1},8,["loading"])}}},Ie={class:"pb-2 text-gray-500"},je={class:"flex justify-center mx-auto p-2"},ze={__name:"ContributionList",setup(n){const o=L(),{list:s,isEdit:c,contribution:m,getParams:u,pagination:d,errorMessage:_,successMessage:y}=$(o),i=U(),p=H(!1),a=x=>{c.value=!0,m.value=x},M=async x=>{try{p.value=!0,await o.deleteContribution(x.id),i.add({type:"success",text:o.successMessage})}finally{p.value=!1}},v=x=>{u.value.page=x.page??""},l=[{name:"Range From",id:"range_from"},{name:"Range To",id:"range_to"},{name:"Employer Share",id:"employer_share"},{name:"Employee Share",id:"employee_share"},{name:"Share Type",id:"share_type"}],k={edit:!0,delete:!0};return(x,Ge)=>{const D=ee,G=te,N=F;return g(),P(N,{title:"Contribution Table",class:"w-full",loading:t(p)},{default:T(()=>[e("div",Ie,[C(D,{"header-columns":l,datas:t(s),actions:k,onEditRow:a,onDeleteRow:M},null,8,["datas"])]),e("div",je,[C(G,{links:t(d),onChangeParams:v},null,8,["links"])]),e("p",{hidden:"",class:j(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!t(_)}])},b(t(_)),3),r(e("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic"},b(t(y)),513),[[S,t(y)]])]),_:1},8,["loading"])}}},De={class:"flex flex-col mt-10 md:mt-0 md:flex-row gap-4"},it={__name:"philhealth",setup(n){const o=L(),{isEdit:s}=$(o);return o.getContribution(),oe({title:"PhilHealth"}),(c,m)=>{const u=Ce,d=Be,_=ze,y=se;return g(),P(y,{"if-access":("useCheckAccessibility"in c?c.useCheckAccessibility:t(ae))([("AccessibilityTypes"in c?c.AccessibilityTypes:t(ne)).hrms_setup_phil_health])},{default:T(()=>[e("div",De,[r(C(u,null,null,512),[[S,!t(s)]]),r(C(d,null,null,512),[[S,t(s)]]),C(_)])]),_:1},8,["if-access"])}}};export{it as default};
