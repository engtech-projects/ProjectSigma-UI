import{l as r,O as o}from"./entry.32UGFqj-.js";import{i,e as s}from"./CustomFetch.ggXvTdIz.js";const l=o(),d=r("itemprofiles",{state:()=>({isEdit:!1,itemProfile:{id:null,item_code:"",item_description:"",thickness:"",length:"",width:"",height:"",outside_diameter:"",inside_diameter:"",angle:"",size:"",volume:"",weight:"",grade:"",volts:"",plates:"",part_number:"",color:"",specification:"",uom:null,item_group:"",sub_item_group:"",uom_conversion_value:null,inventory_type:"",active_status:"Inactive",is_approved:!1,is_edit:!1,item_group_list:[],subitem_group_list:[]},addItemProfile:[],formItemProfile:{},newItemProfile:[],uom:[],itemDetails:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{}},allRequests:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{}},myApprovals:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{}},myRequests:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{}},exportList:{isLoading:!1,isLoaded:!1,list:[],itemFilters:[],filters:[],headers:[],tempFile:"",params:{},pagination:{},errorMessage:null,successMessage:null},approval:{params:{id:null,remarks:""},errorMessage:"",successMessage:""},page:{list:{}},pagination:{},getParams:{},errorMessage:"",successMessage:"",remarks:""}),getters:{uomLength(e){return e.uom.filter(function(a){return a.group_id===1?a:null})},uomWeight(e){return e.uom.filter(function(a){return a.group_id===2?a:null})},uomVolume(e){return e.uom.filter(function(a){return a.group_id===3?a:null})},uomArea(e){return e.uom.filter(function(a){return a.group_id===4?a:null})},uomForce(e){return e.uom.filter(function(a){return a.group_id===5?a:null})},uomDimension(e){return e.uom.filter(function(a){return a.group_id===6?a:null})},uomCustom(e){return e.uom.filter(function(a){return a.is_standard===0?a:null})}},actions:{async getUOM(){await i("/api/uom/list",{method:"GET",watch:!1,onResponse:({response:e})=>{e.ok?this.uom=e._data.data:this.errorMessage=e._data.message}})},async activeItemProfile(e){await s("/api/item-profile/"+e+"/activate",{method:"PATCH",watch:!1,onRequest:()=>{this.allRequests.isLoading=!0},onResponse:({response:a})=>{if(a.ok)this.getItemProfile(),this.successMessage=a._data.message;else throw this.errorMessage=a._data.message,new Error(a._data.message)}})},async inActiveItemProfile(e){await s("/api/item-profile/"+e+"/deactivate",{method:"PATCH",watch:!1,onRequest:()=>{this.allRequests.isLoading=!0},onResponse:({response:a})=>{if(a.ok)this.getItemProfile(),this.successMessage=a._data.message;else throw this.errorMessage=a._data.message,new Error(a._data.message)}})},async getAllRequests(){await s("/api/item-profile/new-request/all-request",{method:"GET",params:this.allRequests.params,onRequest:()=>{this.allRequests.isLoading=!0},onResponse:({response:e})=>{this.allRequests.isLoading=!1,e.ok&&(this.allRequests.isLoaded=!0,this.allRequests.list=e._data.data.data,this.allRequests.pagination={first_page:e._data.data.links.first,pages:e._data.data.meta.links,last_page:e._data.data.links.last})}})},async getMyRequests(){await s("/api/item-profile/new-request/my-request",{method:"GET",params:this.myRequests.params,onRequest:()=>{this.myRequests.isLoading=!0},onResponse:({response:e})=>{if(this.myRequests.isLoading=!1,e.ok)this.myRequests.isLoaded=!0,this.myRequests.list=e._data.data.data,this.myRequests.pagination={first_page:e._data.data.links.first,pages:e._data.data.meta.links,last_page:e._data.data.links.last};else throw new Error(e._data.message)}})},async getMyApprovals(){await s("/api/item-profile/new-request/my-approvals",{method:"GET",params:this.myApprovals.params,onRequest:()=>{this.myApprovals.isLoading=!0},onResponse:({response:e})=>{if(this.myApprovals.isLoading=!1,e.ok)this.myApprovals.isLoaded=!0,this.myApprovals.list=e._data.data.data,this.myApprovals.pagination={first_page:e._data.data.links.first,pages:e._data.data.meta.links,last_page:e._data.data.links.last};else throw new Error(e._data.message)}})},async storeItemProfile(){const{data:e,error:a}=await s("/api/item-profile/new-request/resource",{method:"POST",body:this.formItemProfile,watch:!1,onResponse:({response:t})=>{if(t.ok)this.reloadResources(),this.successMessage=t._data.message;else throw this.errorMessage=t._data.message,new Error(t._data.message)}});if(e)return e;if(a)return a},async getItemProfile(){await s("/api/item-profile/list",{method:"GET",params:this.itemDetails.params,onRequest:()=>{this.itemDetails.isLoading=!0},onResponse:({response:e})=>{if(this.itemDetails.isLoading=!1,e.ok)this.itemDetails.isLoaded=!0,this.itemDetails.list=e._data.data.data,this.itemDetails.pagination={first_page:e._data.data.links.first,pages:e._data.data.meta.links,last_page:e._data.data.links.last};else throw new Error(e._data.message)}})},async getOne(e){return await i("/api/payment-request/"+e,{method:"GET",params:this.getParams,onResponse:({response:a})=>{if(a.ok)return this.page.list=a._data.data,a._data.data;throw new Error(a._data.message)}})},async getMyApprovalRequests(){await s("/api/item-profile/new-request/my-approvals",{method:"GET",onResponse:({response:e})=>{if(e.ok)this.myApprovals.list=e._data.data;else throw this.errorMessage=e._data.message,new Error(e._data.message)}})},async approveApprovalForm(e){this.successMessage="",this.errorMessage="",await s("/api/approvals/approve/RequestItemProfiling/"+e,{method:"POST",onResponseError:({response:a})=>{throw this.errorMessage=a._data.message,new Error(a._data.message)},onResponse:({response:a})=>{if(a.ok)return this.successMessage=a._data.message,a._data}})},async denyApprovalForm(e){this.successMessage="",this.errorMessage="";const a=new FormData;a.append("id",e),a.append("remarks",this.remarks),await s("/api/approvals/disapprove/RequestItemProfiling/"+e,{method:"POST",body:a,onResponseError:({response:t})=>{throw this.errorMessage=t._data.message,new Error(t._data.message)},onResponse:({response:t})=>{if(t.ok)return this.successMessage=t._data.message,t._data}})},async getExportList(){await s("/api/export/item-list",{params:this.exportList.params,method:"GET",watch:!1,onRequest:()=>{this.exportList.isLoading=!0,this.exportList.tempFile=""},onResponseError:({response:e})=>{throw this.exportList.isLoading=!1,this.exportList.errorMessage=e._data.message,new Error(e._data.message)},onResponse:({response:e})=>{this.exportList.isLoading=!1,e.ok&&(this.exportList.successMessage=e._data.message,this.exportList.tempFile=l.public.INVENTORY_API_URL+e._data.url)}})},itemProfileReset(){this.addItemProfile=[],this.newItemProfile=[]},reloadResources(){const e=[];this.allRequests.isLoaded&&e.push(this.getAllRequests),this.myRequests.isLoaded&&e.push(this.getMyRequests),this.myApprovals.isLoaded&&e.push(this.getMyApprovals),this.$reset(),this.itemProfileReset(),this.getUOM(),e.forEach(a=>{a()})}}});export{d as u};
