import{_ as z}from"./ProjectSelector.vue.DM9e2bZy.js";import{p as G}from"./Utilities.Cbr1Z9cn.js";import{f as F,B as q,ab as J,r as i,C as K,L as C,K as Q,o as g,c as y,a as e,j as $,G as Z,b as U,g as X,x as n,A as h,M as c,u as I,H as Y,p as ee,e as te,d as ae,O as se,_ as le,h as re,w as de}from"./entry.R6V7NTxy.js";import{h as E}from"./CustomFetch.BRBLzGci.js";import{_ as L}from"./loader.C2wIXBoB.js";import{i as oe,a as ne,b as ie,F as ue}from"./index.D1WMzuIK.js";import{u as ce}from"./projects.BzIGGuNp.js";import{_ as me}from"./AcessContainer.DJcSsti6.js";import{u as fe}from"./vue.f36acd1f.Dv_A-myg.js";import{u as ge,A as pe}from"./Accessibilities.uaboihcy.js";import"./PsSelectSearch.vue.CrY1IpH8.js";import"./Icon.DcF_NU9d.js";import"./index.T-zbMaZc.js";import"./enum.D7iLG1Bk.js";import"./users.D5_vMoUK.js";const r=p=>(ee("data-v-31e5c900"),p=p(),te(),p),be={class:"md:flex gap-4"},ve=r(()=>e("head",null,[e("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"})],-1)),ye={class:"w-full w-full md:w-1/2 justify-start border border-teal-100 shadow-md rounded-lg mt-5 relative"},he={key:0,class:"absolute bg-slate-200/50 rounded-lg w-full h-full flex items-center justify-center z-50"},xe=r(()=>e("img",{class:"flex justify-center w-28 rounded-md",src:L,alt:"logo"},null,-1)),_e=[xe],ke={class:"p-4"},we={class:"group p-2 rounded-lg bg-slate-50",open:""},Se=Y('<summary class="flex cursor-pointer list-none items-center justify-between text-lg font-medium text-gray-900 bg-teal-100 rounded-sm" data-v-31e5c900><label for="" class="text-lg font-medium p-2" data-v-31e5c900>Set Schedule</label><div class="text-gray-500" data-v-31e5c900><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="black" class="block h-5 w-5 transition-all duration-300 group-open:rotate-180 m-2" data-v-31e5c900><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" data-v-31e5c900></path></svg></div></summary>',1),Te={class:"pb-2 text-black text-md font-medium border border-slate-100 rounded-b-lg p-3"},je=["onSubmit"],Re=r(()=>e("div",null,[e("div",{class:"border-b w-full h-[14px] text-center p-3 mb-4"},[e("span",{class:"text-sm bg-slate-50 text-black px-10 italic"}," Schedule Time ")])],-1)),Ce={class:"flex md:flex justify-center mx-auto"},Ee={class:"p-2 gap-4 items-center"},Ue=r(()=>e("label",{for:"eventTitleIn",class:"block text-xs text-center italic"},"In",-1)),Ie={class:"p-2 gap-4 items-center"},Ae=r(()=>e("label",{for:"eventTitleOut",class:"block text-xs text-center italic"},"Out",-1)),Ve=r(()=>e("div",null,[e("div",{class:"border-b w-full h-[14px] text-center p-3 mt-4 mb-2"},[e("span",{class:"text-sm bg-gray-50 text-black px-10 italic"}," Schedule Type ")])],-1)),Oe=r(()=>e("div",{class:"mb-4 dark:border-gray-700"},[e("ul",{id:"default-tab",class:"flex flex-wrap justify-center -mb-px text-sm font-medium text-center","data-tabs-toggle":"#default-tab-content",role:"tablist"},[e("li",{class:"mr-2",role:"presentation"},[e("button",{id:"regular-tab",class:"inline-block p-4 border-b-2 rounded-t-lg","data-tabs-target":"#regular",type:"button",role:"tab","aria-controls":"regular","aria-selected":"false"}," Regular ")]),e("li",{class:"mr-2",role:"presentation"},[e("button",{id:"irregular-tab",class:"inline-block p-4 border-b-2 rounded-t-lg hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300","data-tabs-target":"#irregular",type:"button",role:"tab","aria-controls":"irregular","aria-selected":"false"}," Irregular ")])])],-1)),$e={id:"default-tab-content"},Le={id:"regular",class:"p-1 rounded-lg bg-gray-50 dark:bg-gray-800",role:"tabpanel","aria-labelledby":"regular-tab"},Me=r(()=>e("div",{class:"border-b w-full h-[14px] text-center p-3 mb-2"},[e("span",{class:"text-sm bg-slate-50 text-black px-10 italic"}," Days ")],-1)),Pe={class:"grid grid-cols-3 gap-y-2 md:flex-1 mx-auto justify-center items-center mt-5 md:gap-4 p-2 rounded-md"},De={class:"flex"},We=r(()=>e("label",{for:"monday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Monday",-1)),Ne={class:"flex"},Be=r(()=>e("label",{for:"tuesday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Tuesday",-1)),He={class:"flex"},ze=r(()=>e("label",{for:"wednesday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Wednesday",-1)),Ge={class:"flex"},Fe=r(()=>e("label",{for:"thursday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Thursday",-1)),qe={class:"flex"},Je=r(()=>e("label",{for:"friday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Friday",-1)),Ke={class:"flex"},Qe=r(()=>e("label",{for:"saturday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Saturday",-1)),Ze={class:"flex"},Xe=r(()=>e("label",{for:"sunday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Sunday",-1)),Ye=r(()=>e("div",{class:"border-b w-full h-[14px] text-center p-3 mb-2"},null,-1)),et={class:"flex md:flex justify-center mx-auto"},tt={class:"p-2 gap-4 items-center"},at=r(()=>e("label",{for:"dateStart",class:"block text-xs text-center italic"},"Date Start",-1)),st={class:"p-2 gap-4 items-center"},lt=r(()=>e("label",{for:"dateEnd",class:"block text-xs italic ml-3"},[ae("Date End "),e("b",{class:"text-orange-500"}," (optional)")],-1)),rt={id:"irregular",class:"p-1 rounded-lg bg-gray-50 dark:bg-gray-800",role:"tabpanel","aria-labelledby":"irregular-tab"},dt=r(()=>e("div",{class:"border-b w-full h-[14px] text-center p-3 mb-5"},[e("span",{class:"text-sm bg-slate-50 text-black px-10 italic"}," Schedule Dates ")],-1)),ot={class:"flex justify-end mt-4"},nt={key:0,type:"submit",class:"px-4 py-2 bg-blue-500 text-white rounded-md"},it={key:1,type:"submit",class:"px-4 py-2 bg-blue-500 text-white rounded-md"},ut={class:"w-full md:w-3/4 justify-start border border-teal-100 shadow-md rounded-lg mt-5"},ct={class:"border-t-4 border-teal-400 p-2 rounded-md bg-white relative"},mt={key:0,class:"absolute bg-slate-200/50 rounded-lg w-full h-full flex items-center justify-center z-50"},ft=r(()=>e("img",{class:"flex justify-center w-28 rounded-md",src:L,alt:"logo"},null,-1)),gt=[ft],pt=F({__name:"ScheduleProj",setup(p){const u=G();ce().getProject();const x=q(),{token:b}=J(),w=se(),S=i(null),d=i([!1,!1,!1,!1,!1,!1,!1]),s=i({id:null,groupType:"project",department_id:null,project_id:null,employee_id:null,scheduleType:"Regular",daysOfWeek:[],startTime:"",endTime:"",startRecur:"",endRecur:""}),_=i([]),m=i(""),v=i(""),k=i(!1),T=i(!1),f=i(!1),P=i({plugins:[oe,ne,ie],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},initialView:"dayGridMonth",weekends:!0,nowIndicator:!0,editable:!0,selectable:!0,dateClick:a=>{s.value.startRecur=a.dateStr},select:a=>{s.value.startRecur=a.startStr,s.value.endRecur=a.endStr},eventContent:function(a){const t=a.event.start.toLocaleString([],{hour:"2-digit",minute:"2-digit"}),o=a.event.end.toLocaleString([],{hour:"2-digit",minute:"2-digit"});return{html:`<div class="event-container flex flex-col justify-between items-center p-1 event-container bg-blue-600 text-[10px] overflow-hidden text-white rounded-md">
                        ${t+" - "+o}
                        <div class="flex gap-[5px]">
                            <i class="fa fa-edit text-slate-200 hover:text-white text-[10px] event-edit edit-${a.event.id}" data-event="${a.event.id}"></i>
                            <i class="fa fa-trash text-slate-200 hover:text-white text-[10px] event-trash delete-${a.event.id}" data-event="${a.event.id}"></i>
                        </div>
                    </div>`}}});async function j(){T.value=!0,await E("/api/schedule",{baseURL:w.public.HRMS_API_URL,method:"GET",headers:{Authorization:b.value+"",Accept:"application/json"},watch:!1,onResponse:({response:a})=>{T.value=!1,a.ok?(_.value=[],a._data.data.forEach(t=>{t.groupType==="project"&&_.value.push(t)}),A()):m.value=a._data.message}},"$SdmZMUQ2wK")}function A(){R(),_.value.forEach(a=>{if(a.project_id.toString()===s.value.project_id.toString()){const t=JSON.parse(JSON.stringify(a));a.scheduleType==="Irregular"&&(t.daysOfWeek=null),S.value.addEvent(t)}})}function D(a){d.value=[!1,!1,!1,!1,!1,!1,!1];const t=document.getElementById("regular-tab"),o=document.getElementById("irregular-tab");_.value.forEach(l=>{parseInt(l.id)===parseInt(a)&&(l.daysOfWeek.forEach(H=>{d.value[H]=!0}),l.scheduleType==="Irregular"?o.click():t.click(),s.value=l,f.value=!0)})}async function W(a){await E("/api/schedule/"+a,{baseURL:w.public.HRMS_API_URL,method:"DELETE",headers:{Authorization:b.value+"",Accept:"application/json"},body:s.value,watch:!1,onResponse:({response:t})=>{k.value=!1,t.ok?(R(),v.value=t._data.message,j()):m.value=t._data.message}},"$2pyDqayu9r")}function R(){S.value.getEvents().forEach(a=>a.remove())}function V(){f.value=!1,d.value=[!1,!1,!1,!1,!1,!1,!1],s.value={id:null,groupType:"project",department_id:null,project_id:s.value.project_id,employee_id:null,scheduleType:"Regular",daysOfWeek:[],startTime:"",endTime:"",startRecur:"",endRecur:""}}async function N(){for(const o in d.value)d.value[o]&&s.value.daysOfWeek.push(o.toString());const a=f.value?"/api/schedule/"+s.value.id:"/api/schedule";k.value=!0,s.value.daysOfWeek.length===0?(s.value.scheduleType="Irregular",alert(s.value.scheduleType)):s.value.scheduleType="Regular",s.value.scheduleType==="Irregular"&&(s.value.endRecur=u.value.addOneDay(s.value.startRecur));const t=JSON.parse(JSON.stringify(s.value));t.startTime=u.value.formatTime(t.startTime),t.endTime=u.value.formatTime(t.endTime),await E(a,{baseURL:w.public.HRMS_API_URL,method:f.value?"PUT":"POST",headers:{Authorization:b.value+"",Accept:"application/json"},body:t,watch:!1,onResponse:({response:o})=>{k.value=!1,o.ok?(R(),v.value=o._data.message,V(),j()):m.value=o._data.message}},"$ka4uxxWxNF")}const B=K(()=>s.value.project_id);C(B,()=>{A()});const O=i();return Q(()=>{S.value=O.value.getApi(),document.getElementById("fCalendar").addEventListener("click",t=>{t.target.classList.contains("event-edit")&&D(t.target.dataset.event),t.target.classList.contains("event-trash")&&W(t.target.dataset.event)}),j()}),C(v,a=>{a!==""&&(x.add({type:"success",text:v.value}),v.value="")}),C(m,a=>{a!==""&&(x.add({type:"error",text:m.value}),m.value="")}),(a,t)=>{const o=z;return g(),y("div",be,[ve,e("div",ye,[k.value?(g(),y("div",he,_e)):$("",!0),e("div",{class:Z(["p-4",f.value?"border-t-8 border-green-500 rounded-md":""])},[U(o,{modelValue:s.value.project_id,"onUpdate:modelValue":t[0]||(t[0]=l=>s.value.project_id=l)},null,8,["modelValue"])],2),e("div",ke,[e("details",we,[Se,e("div",Te,[e("form",{onSubmit:X(N,["prevent"])},[Re,e("div",Ce,[e("div",Ee,[Ue,n(e("input",{id:"eventTitleIn","onUpdate:modelValue":t[1]||(t[1]=l=>s.value.startTime=l),type:"time",class:"w-44 md:w-44 rounded-lg",required:""},null,512),[[h,s.value.startTime]])]),e("div",Ie,[Ae,n(e("input",{id:"eventTitleOut","onUpdate:modelValue":t[2]||(t[2]=l=>s.value.endTime=l),type:"time",class:"w-44 md:w-44 rounded-lg",required:""},null,512),[[h,s.value.endTime]])])]),Ve,Oe,e("div",$e,[e("div",Le,[Me,e("div",Pe,[e("div",De,[n(e("input",{id:"monday","onUpdate:modelValue":t[3]||(t[3]=l=>d.value[1]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[c,d.value[1]]]),We]),e("div",Ne,[n(e("input",{id:"tuesday","onUpdate:modelValue":t[4]||(t[4]=l=>d.value[2]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[c,d.value[2]]]),Be]),e("div",He,[n(e("input",{id:"wednesday","onUpdate:modelValue":t[5]||(t[5]=l=>d.value[3]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[c,d.value[3]]]),ze]),e("div",Ge,[n(e("input",{id:"thursday","onUpdate:modelValue":t[6]||(t[6]=l=>d.value[4]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[c,d.value[4]]]),Fe]),e("div",qe,[n(e("input",{id:"friday","onUpdate:modelValue":t[7]||(t[7]=l=>d.value[5]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[c,d.value[5]]]),Je]),e("div",Ke,[n(e("input",{id:"saturday","onUpdate:modelValue":t[8]||(t[8]=l=>d.value[6]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[c,d.value[6]]]),Qe]),e("div",Ze,[n(e("input",{id:"sunday","onUpdate:modelValue":t[9]||(t[9]=l=>d.value[0]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[c,d.value[0]]]),Xe])]),Ye,e("div",et,[e("div",tt,[at,n(e("input",{id:"dateStart","onUpdate:modelValue":t[10]||(t[10]=l=>s.value.startRecur=l),type:"date",class:"w-36 md:w-32 rounded-lg",required:""},null,512),[[h,s.value.startRecur]])]),e("div",st,[lt,n(e("input",{id:"dateEnd","onUpdate:modelValue":t[11]||(t[11]=l=>s.value.endRecur=l),type:"date",class:"w-36 md:w-32 rounded-lg"},null,512),[[h,s.value.endRecur]])])])]),e("div",rt,[dt,n(e("input",{id:"scheduledDates","onUpdate:modelValue":t[12]||(t[12]=l=>s.value.startRecur=l),type:"date",class:"w-full rounded-lg",onChange:t[13]||(t[13]=l=>s.value.daysOfWeek=[])},null,544),[[h,s.value.startRecur]])]),e("div",ot,[f.value?(g(),y("button",nt," Update ")):(g(),y("button",it," Submit ")),e("button",{type:"reset",class:"px-4 py-2 ml-2 bg-gray-300 text-gray-700 rounded-md",onClick:V}," Reset ")])])],40,je)])])])]),e("div",ut,[e("div",ct,[T.value?(g(),y("div",mt,gt)):$("",!0),U(I(ue),{id:"fCalendar",ref_key:"fCalendar",ref:O,options:P.value,class:"mt-10 text-xs flex md:flex md:text-sm"},null,8,["options"])])])])}}}),bt=le(pt,[["__scopeId","data-v-31e5c900"]]),vt={class:"w-full"},yt=e("div",{class:"text-2xl font-normal mb-4 mt-10 md:mt-0"}," Project Schedule ",-1),ht=e("hr",null,null,-1),$t={__name:"project",setup(p){return fe({title:"Project Schedule",meta:[{name:"description",content:""}]}),(u,M)=>{const x=bt,b=me;return g(),re(b,{"if-access":("useCheckAccessibility"in u?u.useCheckAccessibility:I(ge))([("AccessibilityTypes"in u?u.AccessibilityTypes:I(pe)).hrms_schedule_project])},{default:de(()=>[e("div",vt,[yt,ht,e("div",null,[U(x)])])]),_:1},8,["if-access"])}}};export{$t as default};
