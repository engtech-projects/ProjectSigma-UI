import{d as i}from"./Utilities.Cbr1Z9cn.js";import{o as h,c as u,a as t,F as b,i as q,t as o,u as n,l as L}from"./entry.R6V7NTxy.js";import{b as d,c as l}from"./CustomFetch.BRBLzGci.js";const A={class:"printTable border border-gray-500"},M=t("thead",{class:"text-md"},[t("tr",{class:"py-4"},[t("th",{colspan:"10",class:"py-4 border-gray-500"}," 13TH MONTH FORMULA COMPUTATION ")]),t("tr",null,[t("th",{class:"border border-gray-500"}," NO "),t("th",{class:"border border-gray-500"}," NAME "),t("th",{class:"border border-gray-500"}," PAYROLL DURATION "),t("th",{class:"border border-gray-500"}," TOTAL NO. OF PAYROLLS "),t("th",{class:"border border-gray-500"}," REGULAR DAYS "),t("th",{class:"border border-gray-500"}," REGULAR HOLIDAY "),t("th",{class:"border border-gray-500"}," SPECIAL HOLIDAY "),t("th",{class:"border border-gray-500"}," TOTAL AMOUNT OF GROSS PAY "),t("th",{class:"border border-gray-500"}," OFFICE / PROJECT CODE "),t("th",{class:"border border-gray-500"}," SIGNATURE ")])],-1),E={class:"text-sm"},O={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-center"},w={class:"border border-gray-500 h-8 px-2 font-bold text-sm"},k={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-center"},x={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-right"},v={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-right"},D={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-right"},T={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-right"},F={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-right"},S={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-right"},C=t("td",{class:"border border-gray-500 h-8 px-2 font-bold text-sm text-right"},null,-1),B={__name:"ComputationTable",props:{data:{type:Object,required:!0}},setup(a){return(e,r)=>(h(),u("table",A,[M,t("tbody",E,[(h(!0),u(b,null,q(a.data.details,(s,m)=>{var c,g,p,y,R,_,f;return h(),u("tr",{key:"13thMonthComputationDataRow"+m,class:"h-2"},[t("td",O,o(m+1),1),t("td",w,o(((c=s.employee)==null?void 0:c.fullname_last)||s.metadata.employee_name||"N/A"),1),t("td",k,o(a.data.payroll_duration),1),t("td",x,o(((g=s.metadata)==null?void 0:g.payroll_record_count)||0),1),t("td",v,o(("useFormatCurrency"in e?e.useFormatCurrency:n(i))(((p=s.metadata)==null?void 0:p.total_payroll_regular)||0)),1),t("td",D,o(("useFormatCurrency"in e?e.useFormatCurrency:n(i))(((y=s.metadata)==null?void 0:y.total_payroll_regular_holiday)||0)),1),t("td",T,o(("useFormatCurrency"in e?e.useFormatCurrency:n(i))(((R=s.metadata)==null?void 0:R.total_payroll_special_holiday)||0)),1),t("td",F,o(("useFormatCurrency"in e?e.useFormatCurrency:n(i))(((_=s.metadata)==null?void 0:_.total_amount)||0)),1),t("td",S,o(s.charging_names||((f=s.metadata)==null?void 0:f.charging_names)||"N/A"),1),C])}),128))])]))}},I="13th Month Request",U=L("13thmonthStore",{state:()=>({isEdit:!1,generateDraftRequest:{isLoading:!1,data:{date_from:"",date_to:"",total_days:0,date_requested:"",employee_ids:[],days_advance:0,charging_type:"",charging_id:null},errorMessage:"",successMessage:""},createRequestData:{isLoading:!1,data:{},resourceData:{},errorMessage:"",successMessage:""},createApprovalsBackup:[],allRequests:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""},myApprovals:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""},myRequests:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""},summary:{isLoading:!1,isLoaded:!1,data:[],params:{date_requested:""},errorMessage:"",successMessage:""}}),actions:{async getOne(a){return await d("/api/13th-month/resource/"+a,{method:"GET",onResponse:({response:e})=>{if(e.ok)return e._data.data;throw new Error(e._data.message)}})},async getAllRequests(){this.allRequests.isLoaded=!0,await l("/api/13th-month/resource",{method:"GET",params:this.allRequests.params,watch:!1,onRequest:()=>{this.allRequests.isLoading=!0},onResponse:({response:a})=>{this.allRequests.isLoading=!1,a.ok&&(this.allRequests.list=a._data.data,this.allRequests.pagination={first_page:a._data.links.first,pages:a._data.meta.links,last_page:a._data.links.last})}})},async getMyRequests(){this.myRequests.isLoaded=!0,await l("/api/13th-month/my-requests",{method:"GET",params:this.myRequests.params,watch:!1,onRequest:()=>{this.myRequests.isLoading=!0},onResponse:({response:a})=>{if(this.myRequests.isLoading=!1,a.ok)this.myRequests.list=a._data.data,this.myRequests.pagination={first_page:a._data.links.first,pages:a._data.meta.links,last_page:a._data.links.last};else throw this.myRequests.errorMessage=a._data.message,new Error(a._data.message)}})},async getMyApprovals(){this.myApprovals.isLoaded=!0,await l("/api/13th-month/my-approvals",{method:"GET",params:this.myApprovals.params,watch:!1,onRequest:()=>{this.myApprovals.isLoading=!0},onResponse:({response:a})=>{if(this.myApprovals.isLoading=!1,a.ok)this.myApprovals.list=a._data.data,this.myApprovals.successMessage=a._data.message,this.myApprovals.pagination={first_page:a._data.links.first,pages:a._data.meta.links,last_page:a._data.links.last};else throw this.myApprovals.errorMessage=a._data.message,new Error(a._data.message)}})},async generateDraft(){await d("/api/13th-month/draft",{method:"POST",body:this.generateDraftRequest.data,onRequest:()=>{this.generateDraftRequest.isLoading=!0},onResponseError:({response:a})=>{throw this.generateDraftRequest.isLoading=!1,this.generateDraftRequest.errorMessage=a._data.message,new Error(a._data.message)},onResponse:({response:a})=>{this.generateDraftRequest.isLoading=!1,this.createRequestData.data=a._data.data.json,this.createRequestData.resourceData=a._data.data.model,this.generateDraftRequest.successMessage=a._data.message}})},async createRequest(){this.createRequestData.isLoading||await d("/api/13th-month/resource",{method:"POST",body:this.createRequestData.data,onRequest:()=>{this.createRequestData.isLoading=!0},onResponse:({response:a})=>{if(this.createRequestData.isLoading=!1,a.ok)this.reloadResources(),this.createRequestData.successMessage=a._data.message;else throw this.createRequestData.errorMessage=a._data.message,new Error(a._data.message)}})},async deleteRequest(a){return await d("/api/13th-month/resource/"+a,{method:"DELETE",watch:!1,onResponse:({response:e})=>{if(e.ok)return this.reloadResources(),e._data.message}})},async approveApprovalForm(a){await d("/api/approvals/approve/Request13thMonth/"+a,{method:"POST",onResponseError:({response:e})=>{throw new Error(e._data.message)},onResponse:({response:e})=>{if(e.ok)return this.reloadResources(),e._data;throw new Error(e._data.message)}})},async denyApprovalForm(a,e){const r=new FormData;r.append("id",a),r.append("remarks",e),await d("/api/approvals/disapprove/Request13thMonth/"+a,{method:"POST",body:r,onResponseError:({response:s})=>{throw new Error(s._data.message)},onResponse:({response:s})=>{if(s.ok)return this.reloadResources(),s._data}})},async getSummary(){await l("/api/13th-month/summary",{method:"GET",params:this.summary.params,onRequest:()=>{this.summary.isLoading=!0},onResponseError:({response:a})=>{throw this.summary.isLoading=!1,this.summary.errorMessage=a._data.message,new Error(a._data.message)},onResponse:({response:a})=>{this.summary.isLoading=!1,this.summary.data=a._data.data,this.summary.successMessage=a._data.message}})},reloadResources(){const a=this.createApprovalsBackup;this.generateDraftRequest.data.employee_ids=[];const e=this.generateDraftRequest.data,r=[];this.allRequests.isLoaded&&r.push(this.getAllRequests),this.myRequests.isLoaded&&r.push(this.getMyRequests),this.myApprovals.isLoaded&&r.push(this.getMyApprovals),this.$reset(),this.createApprovalsBackup=a,this.generateDraftRequest.data=e,r.forEach(s=>{s()})}}});export{I as F,B as _,U as u};
