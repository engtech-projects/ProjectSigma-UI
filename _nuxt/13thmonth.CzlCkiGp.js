import{d as n}from"./Utilities.DofxnkSu.js";import{o as l,c as h,a as s,F as f,i as b,t as o,u,l as q}from"./entry.32UGFqj-.js";import{b as i,c as d}from"./CustomFetch.ggXvTdIz.js";const L={class:"printTable border border-gray-500"},A=s("thead",{class:"text-md"},[s("tr",{class:"py-4"},[s("th",{colspan:"9",class:"py-4 border-gray-500"}," 13TH MONTH FORMULA COMPUTATION ")]),s("tr",null,[s("th",{class:"border border-gray-500"}," NO "),s("th",{class:"border border-gray-500"}," NAME "),s("th",{class:"border border-gray-500"}," PAYROLL DURATION "),s("th",{class:"border border-gray-500"}," TOTAL NO. OF PAYROLLS "),s("th",{class:"border border-gray-500"}," REGULAR DAYS "),s("th",{class:"border border-gray-500"}," SPECIAL HOLIDAY "),s("th",{class:"border border-gray-500"}," TOTAL AMOUNT OF GROSS PAY "),s("th",{class:"border border-gray-500"}," OFFICE / PROJECT CODE "),s("th",{class:"border border-gray-500"}," SIGNATURE ")])],-1),M={class:"text-sm"},E={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-center"},O={class:"border border-gray-500 h-8 px-2 font-bold text-sm"},w={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-center"},k={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-right"},v={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-right"},x={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-right"},D={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-right"},T={class:"border border-gray-500 h-8 px-2 font-bold text-sm text-right"},F=s("td",{class:"border border-gray-500 h-8 px-2 font-bold text-sm text-right"},null,-1),P={__name:"ComputationTable",props:{data:{type:Object,required:!0}},setup(a){return(e,r)=>(l(),h("table",L,[A,s("tbody",M,[(l(!0),h(f,null,b(a.data.details,(t,m)=>{var c,g,p,y,R,_;return l(),h("tr",{key:"13thMonthComputationDataRow"+m,class:"h-2"},[s("td",E,o(m+1),1),s("td",O,o(((c=t.employee)==null?void 0:c.fullname_last)||t.metadata.employee_name||"N/A"),1),s("td",w,o(a.data.payroll_duration),1),s("td",k,o(((g=t.metadata)==null?void 0:g.payroll_record_count)||0),1),s("td",v,o(("useFormatCurrency"in e?e.useFormatCurrency:u(n))(((p=t.metadata)==null?void 0:p.total_payroll_regular)||0)),1),s("td",x,o(("useFormatCurrency"in e?e.useFormatCurrency:u(n))(((y=t.metadata)==null?void 0:y.total_payroll_special_holiday)||0)),1),s("td",D,o(("useFormatCurrency"in e?e.useFormatCurrency:u(n))(((R=t.metadata)==null?void 0:R.total_amount)||0)),1),s("td",T,o(t.charging_names||((_=t.metadata)==null?void 0:_.charging_names)||"N/A"),1),F])}),128))])]))}},G="13th Month Request",B=q("13thmonthStore",{state:()=>({isEdit:!1,generateDraftRequest:{isLoading:!1,data:{date_from:"",date_to:"",total_days:0,date_requested:"",employee_ids:[],days_advance:0,charging_type:"",charging_id:null},errorMessage:"",successMessage:""},createRequestData:{isLoading:!1,data:{},resourceData:{},errorMessage:"",successMessage:""},createApprovalsBackup:[],allRequests:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""},myApprovals:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""},myRequests:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{},errorMessage:"",successMessage:""},summary:{isLoading:!1,isLoaded:!1,data:[],params:{date_requested:""},errorMessage:"",successMessage:""}}),actions:{async getOne(a){return await i("/api/13th-month/resource/"+a,{method:"GET",onResponse:({response:e})=>{if(e.ok)return e._data.data;throw new Error(e._data.message)}})},async getAllRequests(){this.allRequests.isLoaded=!0,await d("/api/13th-month/resource",{method:"GET",params:this.allRequests.params,watch:!1,onRequest:()=>{this.allRequests.isLoading=!0},onResponse:({response:a})=>{this.allRequests.isLoading=!1,a.ok&&(this.allRequests.list=a._data.data,this.allRequests.pagination={first_page:a._data.links.first,pages:a._data.meta.links,last_page:a._data.links.last})}})},async getMyRequests(){this.myRequests.isLoaded=!0,await d("/api/13th-month/my-requests",{method:"GET",params:this.myRequests.params,watch:!1,onRequest:()=>{this.myRequests.isLoading=!0},onResponse:({response:a})=>{if(this.myRequests.isLoading=!1,a.ok)this.myRequests.list=a._data.data,this.myRequests.pagination={first_page:a._data.links.first,pages:a._data.meta.links,last_page:a._data.links.last};else throw this.myRequests.errorMessage=a._data.message,new Error(a._data.message)}})},async getMyApprovals(){this.myApprovals.isLoaded=!0,await d("/api/13th-month/my-approvals",{method:"GET",params:this.myApprovals.params,watch:!1,onRequest:()=>{this.myApprovals.isLoading=!0},onResponse:({response:a})=>{if(this.myApprovals.isLoading=!1,a.ok)this.myApprovals.list=a._data.data,this.myApprovals.successMessage=a._data.message,this.myApprovals.pagination={first_page:a._data.links.first,pages:a._data.meta.links,last_page:a._data.links.last};else throw this.myApprovals.errorMessage=a._data.message,new Error(a._data.message)}})},async generateDraft(){await i("/api/13th-month/draft",{method:"POST",body:this.generateDraftRequest.data,onRequest:()=>{this.generateDraftRequest.isLoading=!0},onResponseError:({response:a})=>{throw this.generateDraftRequest.isLoading=!1,this.generateDraftRequest.errorMessage=a._data.message,new Error(a._data.message)},onResponse:({response:a})=>{this.generateDraftRequest.isLoading=!1,this.createRequestData.data=a._data.data.json,this.createRequestData.resourceData=a._data.data.model,this.generateDraftRequest.successMessage=a._data.message}})},async createRequest(){this.createRequestData.isLoading||await i("/api/13th-month/resource",{method:"POST",body:this.createRequestData.data,onRequest:()=>{this.createRequestData.isLoading=!0},onResponse:({response:a})=>{if(this.createRequestData.isLoading=!1,a.ok)this.reloadResources(),this.createRequestData.successMessage=a._data.message;else throw this.createRequestData.errorMessage=a._data.message,new Error(a._data.message)}})},async deleteRequest(a){return await i("/api/13th-month/resource/"+a,{method:"DELETE",watch:!1,onResponse:({response:e})=>{if(e.ok)return this.reloadResources(),e._data.message}})},async approveApprovalForm(a){await i("/api/approvals/approve/Request13thMonth/"+a,{method:"POST",onResponseError:({response:e})=>{throw new Error(e._data.message)},onResponse:({response:e})=>{if(e.ok)return this.reloadResources(),e._data;throw new Error(e._data.message)}})},async denyApprovalForm(a,e){const r=new FormData;r.append("id",a),r.append("remarks",e),await i("/api/approvals/disapprove/Request13thMonth/"+a,{method:"POST",body:r,onResponseError:({response:t})=>{throw new Error(t._data.message)},onResponse:({response:t})=>{if(t.ok)return this.reloadResources(),t._data}})},async getSummary(){await d("/api/13th-month/summary",{method:"GET",params:this.summary.params,onRequest:()=>{this.summary.isLoading=!0},onResponseError:({response:a})=>{throw this.summary.isLoading=!1,this.summary.errorMessage=a._data.message,new Error(a._data.message)},onResponse:({response:a})=>{this.summary.isLoading=!1,this.summary.data=a._data.data,this.summary.successMessage=a._data.message}})},reloadResources(){const a=this.createApprovalsBackup;this.generateDraftRequest.data.employee_ids=[];const e=this.generateDraftRequest.data,r=[];this.allRequests.isLoaded&&r.push(this.getAllRequests),this.myRequests.isLoaded&&r.push(this.getMyRequests),this.myApprovals.isLoaded&&r.push(this.getMyApprovals),this.$reset(),this.createApprovalsBackup=a,this.generateDraftRequest.data=e,r.forEach(t=>{t()})}}});export{G as F,P as _,B as u};
