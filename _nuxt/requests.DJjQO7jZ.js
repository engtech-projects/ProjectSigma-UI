import{_ as Z,a as ee,b as te}from"./MainContainer.BswisYLp.js";import{_ as se}from"./PsTable.BPIFONj1.js";import{_ as oe}from"./CustomPagination.C91H0oe5.js";import{_ as B}from"./LoadingContainer.vue.BZUQ77Em.js";import{s as L,o as r,h as m,w as o,b as s,u as e,a as l,f as ie,R as J,j as h,ax as z,c as w,_ as _e,r as W,C as k,K as ne,L as H,t as Y,F as G,i as K,p as pe,e as ye,d as X}from"./entry.32UGFqj-.js";import{u as j}from"./request.Dhmi1LZ2.js";import{u as x,A as U}from"./Accessibilities.xGffDRXj.js";import{_ as fe}from"./LayoutBoards.vue.D_rbqYxd.js";import Ce from"./Icon.CrHlyQOo.js";import{_ as he,a as ve}from"./PrintDetailsLayout.vue.gZNsRlaG.js";import{_ as be}from"./LayoutPrintAdvanced.BMLOtvVg.js";import{_ as Re,a as Ee,b as Te,c as Se}from"./CanvassSummaryForm.COawSRn_.js";import{_ as ge}from"./ItemForm.ofBA6-en.js";import{_ as qe}from"./PrintTableFormat.CikOF02w.js";import{_ as ae}from"./AcessContainer.Dum7aOuo.js";import{_ as Pe}from"./PriceQuotationForm.1oL1dGet.js";import{_ as Oe}from"./IsoHeader.vue.AGltULgl.js";import{_ as Ne}from"./PsFormLabel.vue.w_U4qcHv.js";import{u as re}from"./canvassSummary.DmBm8aJ2.js";import{u as ce}from"./pricequotation.T207ntps.js";import{u as ke}from"./vue.f36acd1f.Ds2AlAv6.js";import"./id.WqrvI90c.js";import"./client-only.CuVny2dr.js";import"./nuxt-link.C5IpI_HT.js";import"./Utilities.DofxnkSu.js";import"./loader.BQ9QddgL.js";import"./CustomFetch.ggXvTdIz.js";import"./users.G4iuGzk0.js";import"./index.T-zbMaZc.js";import"./CanvasserSelector.vue.COcyn1P6.js";import"./UserEmployeeSelector.vue.CW0bAtx_.js";import"./enum.M1X5V5yu.js";import"./ListView.CUwkSJ9r.js";import"./ApprovalDenyButton.2aaI0auR.js";import"./requeststock.Bjy66h2H.js";import"./enums.DZVv3ml5.js";import"./PsTextInput.vue.C7eOWbog.js";import"./PsNumberInput.vue.BU6zn-2O.js";import"./index.CBzzh1I-.js";import"./ApprovalsList.aVDiIVet.js";import"./approvals.89EhJm5V.js";import"./ChangesToIndividualLinesPo.CEqxZXYt.js";import"./ncpo.BVUkFjS9.js";import"./PsDateInput.vue.Dioz8erE.js";import"./SearchSupplierSelector.vue.WZi4Qcil.js";import"./PsSelectSearch.vue.CT-F0Leg.js";import"./enum.u5rtwjs9.js";import"./suppliers.DPePSG36.js";import"./evenpar.CfYVxA5n.js";const Ie={class:"flex justify-center mx-auto"},Ae={__name:"OngoingTable",emits:["show-table"],setup(T){const d=j(),{unserved:u}=L(d);d.getUnserved();const v={showTable:!0,edit:!1,delete:!1},i=[{name:"RS No.",id:"rs_reference_no"},{name:"Date",id:"rs_date_prepared_human"},{name:"Status",id:"status"}],t=c=>{u.value.params.page=c.page??""};return(c,p)=>{const b=se,_=oe,E=B;return r(),m(E,{loading:e(u).isLoading},{default:o(()=>[s(b,{"header-columns":i,actions:v,datas:e(u).list??[],class:"rounded-md",onShowTable:p[0]||(p[0]=n=>c.$emit("show-table",n))},null,8,["datas"]),l("div",Ie,[s(_,{links:e(u).pagination,onChangeParams:t},null,8,["links"])])]),_:1},8,["loading"])}}},we={class:"flex justify-center mx-auto"},xe={__name:"AllRequestTable",emits:["show-table"],setup(T){const d=j(),{allRequests:u}=L(d);d.getAllRequests();const v={showTable:!0,edit:!1,delete:!1},i=[{name:"RS No.",id:"rs_reference_no"},{name:"Date",id:"rs_date_prepared_human"},{name:"Status",id:"status"}],t=c=>{u.value.params.page=c.page??""};return(c,p)=>{const b=se,_=oe,E=B;return r(),m(E,{loading:e(u).isLoading},{default:o(()=>[s(b,{"header-columns":i,actions:v,datas:e(u).list??[],class:"rounded-md",onShowTable:p[0]||(p[0]=n=>c.$emit("show-table",n))},null,8,["datas"]),l("div",we,[s(_,{links:e(u).pagination,onChangeParams:t},null,8,["links"])])]),_:1},8,["loading"])}}},Ue=ie({__name:"MainLists",setup(T){const d=J(),u=i=>{d.push({query:{pr_id:i.id}})},v={showTable:!0};return(i,t)=>{const c=Z,p=Ae,b=ee,_=xe,E=te;return r(),m(E,null,{"tab-titles":o(()=>[("useCheckAccessibility"in i?i.useCheckAccessibility:e(x))([("AccessibilityTypes"in i?i.AccessibilityTypes:e(U)).INVENTORY_PROCUREMENT_PROCUREMENTREQUESTS_REQUESTLISTONGOING])?(r(),m(c,{key:0,"target-id":"ongoing",title:"Ongoing"})):h("",!0),("useCheckAccessibility"in i?i.useCheckAccessibility:e(x))([("AccessibilityTypes"in i?i.AccessibilityTypes:e(U)).INVENTORY_PROCUREMENT_PROCUREMENTREQUESTS_REQUESTLISTALL])?(r(),m(c,{key:1,"target-id":"all",title:"All"})):h("",!0)]),"tab-containers":o(()=>[s(b,{id:"ongoing"},{default:o(()=>[s(p,{actions:v,onShowTable:u})]),_:1}),s(b,{id:"all"},{default:o(()=>[s(_,{actions:v,onShowTable:u})]),_:1})]),_:1})}}}),Le={class:"mt-4 p-4 bg-white rounded-md border-4 border-sky-200"},Me=ie({__name:"DetailsInfo",setup(T){const d=z(),u=J(),v=j(),{viewRequests:i}=L(v),t=[{name:"Supplier",id:"supplier_name"},{name:"Quotation Date",id:"created_at_human"}],c=[{name:"Terms of Payment",id:"terms_of_payment"},{name:"Availability",id:"availability"},{name:"Delivery Terms",id:"delivery_terms"},{name:"Created at",id:"created_at_human"}],p=()=>{u.push({query:{...d.query,create_pq:1}})},b=n=>{u.push({query:{...d.query,pq_id:n.id}})},_=()=>{u.push({query:{...d.query,create_cs:1}})},E=n=>{u.push({query:{...d.query,cs_id:n.id}})};return(n,y)=>{const f=he,S=ve,g=be,M=B,C=Z,P=Re,N=ee,I=ge,$=qe,Q=te,a=ae;return r(),w("div",null,[l("div",Le,[e(i).details?(r(),m(M,{key:0,loading:e(i).isLoading,class:"w-full h-full flex items-center justify-center"},{default:o(()=>[s(g,null,{"system-layout":o(()=>[e(i).details?(r(),m(f,{key:0,title:"Requisition Slip",data:e(i).details.requisition_slip,canvasser:e(i).details.canvasser,"show-price-quotations":!0,"show-canvasser":!0},null,8,["data","canvasser"])):h("",!0)]),"print-layout":o(()=>[e(i).details?(r(),m(S,{key:0,title:"Requisition Slip",data:e(i).details.requisition_slip},null,8,["data"])):h("",!0)]),_:1})]),_:1},8,["loading"])):h("",!0)]),s(a,{"if-access":("useCheckAccessibility"in n?n.useCheckAccessibility:e(x))([("AccessibilityTypes"in n?n.AccessibilityTypes:e(U)).INVENTORY_PROCUREMENT_PROCUREMENTREQUESTS_GROUP]),class:"w-full mt-4"},{default:o(()=>[s(Q,null,{"tab-titles":o(()=>[("useCheckAccessibility"in n?n.useCheckAccessibility:e(x))([("AccessibilityTypes"in n?n.AccessibilityTypes:e(U)).INVENTORY_PROCUREMENT_PROCUREMENTREQUESTS_PRICEQUOTATION])?(r(),m(C,{key:0,"target-id":"rpq",title:"REQUEST FOR PRICE QUOTATION"})):h("",!0),("useCheckAccessibility"in n?n.useCheckAccessibility:e(x))([("AccessibilityTypes"in n?n.AccessibilityTypes:e(U)).INVENTORY_PROCUREMENT_PROCUREMENTREQUESTS_CANVASSSUMMARY])?(r(),m(C,{key:1,"target-id":"cs",title:"CANVASS SUMMARY"})):h("",!0),("useCheckAccessibility"in n?n.useCheckAccessibility:e(x))([("AccessibilityTypes"in n?n.AccessibilityTypes:e(U)).INVENTORY_PROCUREMENT_PROCUREMENTREQUESTS_PURCHASEORDER_CREATENCPO])?(r(),m(C,{key:2,"target-id":"ncpo",title:"NOTICE OF CHANGES IN PURCHASE ORDER (NCPO)"})):h("",!0)]),"tab-containers":o(()=>[s(N,{id:"rpq"},{default:o(()=>[s(P,{headers:t,datas:e(i).details.price_quotations,"on-create":p,"on-edit":b,title:"Price Quotations List","icon-label":"Create Price Quotations"},null,8,["datas"])]),_:1}),s(N,{id:"cs"},{default:o(()=>[s(P,{headers:c,datas:e(i).details.canvass_summaries,"on-create":_,"on-edit":E,title:"Canvass Summary List","icon-label":"Create Canvass Summary"},null,8,["datas"])]),_:1}),s(N,{id:"ncpo"},{default:o(()=>[s($,null,{default:o(()=>[s(I,{title:"NOTICE OF CHANGES IN PURCHASE ORDER (NCPO)"})]),_:1})]),_:1})]),_:1})]),_:1},8,["if-access"])])}}}),$e=T=>(pe("data-v-7aac8d8b"),T=T(),ye(),T),Qe={class:"text-gray-500 p-2"},De={class:"flex flex-col gap-4 pt-4 w-full"},Fe={key:0,class:"basis-[10%] grow-1 shrink-0 flex items-center justify-center rounded-t mb-4"},He={class:"pl-4 text-2xl font-bold text-gray-900 p-4 uppercase"},je={class:"flex flex-col gap-4 mb-5"},Ve={class:"flex flex-row justify-between gap-4"},Ye={class:"w-full flex flex-col"},Be={class:"w-full flex flex-col"},Ge={class:"border border-t-0 border-gray-700 shadow-sm uppercase text-black bg-white"},Ke={class:"w-1/2 px-4 py-4 font-medium border-r border-gray-700 flex items-center justify-center"},We={class:"w-1/4 px-4 py-4 flex items-center text-black font-semibold"},Je={class:"flex h-[100px]"},ze=$e(()=>l("div",{class:"w-1/2 px-4 py-4 font-medium border-r border-gray-700 flex items-center justify-center"}," Remarks ",-1)),Xe={class:"w-1/2 px-4 py-4 font-semibold"},Ze={__name:"CanvassSummaryFormEdit",props:{title:{type:String,required:!0}},setup(T){const d=z(),u=re(),v=ce(),i=j(),{canvassSummary:t}=L(u),{viewRequests:c}=L(i),{quotationsForCanvass:p}=L(v),b=W({}),_=W(0),E=[{name:"ITEM NO.",key:"id"},{name:"ITEM DESCRIPTION",key:"itemDescription"},{name:"SPECIFICATION",key:"specification"},{name:"QTY",key:"qty"},{name:"UNIT OF MEASUREMENT",key:"unit"},...[1,2,3].flatMap(y=>[{name:"UNIT PRICE",key:`supplier${y}_unit_price`},{name:"TOTAL",key:`supplier${y}_total`},{name:"REMARKS",key:`supplier${y}_remarks`}])],n=k(()=>{if(!p.value.list||!t.value.details)return[];const y=new Set(t.value.details.items.map(C=>C.item_id)),f=p.value.list.map(C=>({...C,items:C.items.filter(P=>y.has(P.item_id))})),S=t.value.details.price_quotation_id,g=f.findIndex(C=>C.id===S);return g===-1?f.slice(0,3):[f.splice(g,1)[0],...f].slice(0,3)});return ne(()=>{v.getQuotationsForCanvass(d.query.pr_id)}),H(()=>t.value.details,y=>{y!=null&&y.items&&(b.value=Object.fromEntries(y.items.map((f,S)=>[f.item_id,!0]).concat(y.items.map((f,S)=>[S,!0]))),_.value=0)},{deep:!0}),(y,f)=>{var C,P,N,I,$,Q,a,D,F,R,O,V;const S=Oe,g=Ne,M=Ee;return r(),w("div",Qe,[l("div",De,[s(S,{page:{currentPage:1,totalPages:1}}),T.title?(r(),w("div",Fe,[l("h3",He,Y(T.title),1)])):h("",!0),l("div",je,[l("div",Ve,[l("div",Ye,[(r(!0),w(G,null,K({DATE:(C=e(t).details)==null?void 0:C.date,"PROJECT CODE":(N=(P=e(c).details)==null?void 0:P.requisition_slip)==null?void 0:N.office_project,"CONSO/RS REFERENCE NUMBER":($=(I=e(c).details)==null?void 0:I.requisition_slip)==null?void 0:$.reference_no},(A,q)=>(r(),m(g,{key:q,title:q,value:A},null,8,["title","value"]))),128))]),l("div",Be,[(r(!0),w(G,null,K({"CS NUMBER":(Q=e(t).details)==null?void 0:Q.cs_number},(A,q)=>(r(),m(g,{key:q,title:q,value:A},null,8,["title","value"]))),128))])]),l("div",null,[s(M,{"selected-items":e(b),"active-supplier":e(_),items:(D=(a=e(t))==null?void 0:a.details)==null?void 0:D.items,suppliers:e(n),columns:E,loading:e(p).isLoading||e(c).isLoading||e(t).isLoading,"read-only":!0},null,8,["selected-items","active-supplier","items","suppliers","loading"]),l("div",Ge,[(r(!0),w(G,null,K({"Terms and Conditions":(F=e(t).details)==null?void 0:F.terms_of_payment,Availability:(R=e(t).details)==null?void 0:R.availability,"Delivery Terms":(O=e(t).details)==null?void 0:O.delivery_terms},(A,q)=>(r(),w("div",{key:q,class:"flex h-[60px] border-b border-gray-700 last:border-b-0"},[l("div",Ke,Y(q),1),l("div",We,Y(A||"-"),1)]))),128)),l("div",Je,[ze,l("div",Xe,Y(((V=e(t).details)==null?void 0:V.remarks)||"No remarks"),1)])])])])])])}}},et=_e(Ze,[["__scopeId","data-v-7aac8d8b"]]),tt={id:"showOnlyOneChild",class:"flex flex-col md:flex-cols gap-4 [&>*]:hidden [&>:last-child]:block"},zt={__name:"requests",setup(T){ke({title:"PROCUREMENT REQUESTS"});const d=j(),{viewRequests:u}=L(d),v=ce(),i=re(),t=z(),c=J(),p=W({}),b=()=>{var a,D;if((D=(a=u.value)==null?void 0:a.details)!=null&&D.requisition_slip){const F=u.value.details.requisition_slip,R={id:t.query.id,date:new Date().toISOString().split("T")[0],items:F.request_stock_items||[]};p.value={...p.value,...R}}};H(()=>{var a;return(a=u.value)==null?void 0:a.details},a=>{a!=null&&a.requisition_slip&&b()},{deep:!0}),ne(()=>{t.query.pr_id&&d.getOne(t.query.pr_id),t.query.pq_id&&v.getPriceQuotationDetails(t.query.pq_id),t.query.cs_id&&i.getOne(t.query.cs_id)});const _=k(()=>t.query.pr_id||null),E=k(()=>!!t.query.create_pq),n=k(()=>t.query.pq_id||null),y=k(()=>!!t.query.create_cs),f=k(()=>t.query.cs_id||null),S=k(()=>!!t.query.create_ncpo),g=k(()=>t.query.ncpo_id||null);H(_,a=>{a&&d.getOne(a)}),H(n,a=>{a&&v.getPriceQuotationDetails(a)}),H(f,a=>{a&&i.getOne(a)}),H(g,a=>{a&&console.log("Fetching NCPO details for NCPO ID:",a)});const M=()=>{c.replace({query:{...t.query,pr_id:void 0}}),_.value=null},C=async()=>{_.value&&await d.getOne(_.value),c.replace({query:{...t.query,create_pq:void 0}}),E.value=!1},P=()=>{c.replace({query:{...t.query,pq_id:void 0}}),n.value=null},N=async()=>{_.value&&await i.getOne(_.value),c.replace({query:{...t.query,create_cs:void 0}}),y.value=!1},I=()=>{c.replace({query:{...t.query,cs_id:void 0}}),f.value=null},$=()=>{c.replace({query:{...t.query,create_ncpo:void 0}}),S.value=!1},Q=()=>{c.replace({query:{...t.query,ncpo_id:void 0}}),g.value=null};return(a,D)=>{const F=Ue,R=fe,O=Ce,V=Me,A=Pe,q=B,le=Te,ue=Se,me=et,de=ae;return r(),m(de,{"if-access":("useCheckAccessibility"in a?a.useCheckAccessibility:e(x))([("AccessibilityTypes"in a?a.AccessibilityTypes:e(U)).INVENTORY_PROCUREMENT_PROCUREMENTREQUESTS_GROUP]),class:"w-full"},{default:o(()=>[l("div",tt,[s(R,{title:"Procurement Requests"},{default:o(()=>[s(F,{class:"rounded-md shadow-sm"})]),_:1}),e(_)?(r(),m(R,{key:0,title:"Procurement Request Details"},{"header-options":o(()=>[l("button",{class:"text-gray-500 hover:text-white hover:bg-red-600",onClick:M},[s(O,{name:"mdi:close",class:"h-5 w-5"})])]),default:o(()=>[s(V)]),_:1})):h("",!0),e(E)?(r(),m(R,{key:1,title:"Create Price Quotation"},{"header-options":o(()=>[l("button",{class:"text-gray-500 hover:text-white hover:bg-red-600",onClick:C},[s(O,{name:"mdi:close",class:"h-5 w-5"})])]),default:o(()=>[s(q,{loading:e(v).createRequest.isLoading},{default:o(()=>[s(A,{"pr-id":e(_),onSubmitSuccess:C},null,8,["pr-id"])]),_:1},8,["loading"])]),_:1})):h("",!0),e(n)?(r(),m(R,{key:2,title:"Procurement Request Details"},{"header-options":o(()=>[l("button",{class:"text-gray-500 hover:text-white hover:bg-red-600",onClick:P},[s(O,{name:"mdi:close",class:"h-5 w-5"})])]),default:o(()=>[s(le,{"pq-id":e(n),onSubmitSuccess:P},null,8,["pq-id"])]),_:1})):h("",!0),e(y)?(r(),m(R,{key:3,title:"Create Canvass Summary"},{"header-options":o(()=>[l("button",{class:"text-gray-500 hover:text-white hover:bg-red-600",onClick:N},[s(O,{name:"mdi:close",class:"h-5 w-5"})])]),default:o(()=>[s(q,{loading:e(i).createRequest.isLoading},{default:o(()=>[s(ue,{"cs-id":e(f),title:"Canvass Summary",onSubmitSuccess:N},null,8,["cs-id"])]),_:1},8,["loading"])]),_:1})):h("",!0),e(f)?(r(),m(R,{key:4,title:"Canvass Summary"},{"header-options":o(()=>[l("button",{class:"text-gray-500 hover:text-white hover:bg-red-600",onClick:I},[s(O,{name:"mdi:close",class:"h-5 w-5"})])]),default:o(()=>[s(me,{"cs-id":e(f),title:"Canvass Summary",onSubmitSuccess:I},null,8,["cs-id"])]),_:1})):h("",!0),e(S)?(r(),m(R,{key:5,title:"Create Canvass Summary"},{"header-options":o(()=>[l("button",{class:"text-gray-500 hover:text-white hover:bg-red-600",onClick:$},[s(O,{name:"mdi:close",class:"h-5 w-5"})])]),default:o(()=>[X(" CREATE NCPO FORM HERE ")]),_:1})):h("",!0),e(g)?(r(),m(R,{key:6,title:"Create Canvass Summary"},{"header-options":o(()=>[l("button",{class:"text-gray-500 hover:text-white hover:bg-red-600",onClick:Q},[s(O,{name:"mdi:close",class:"h-5 w-5"})])]),default:o(()=>[X(" NCPO VIEW HERE ")]),_:1})):h("",!0)])]),_:1},8,["if-access"])}}};export{zt as default};
