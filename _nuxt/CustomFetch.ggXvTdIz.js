import{ac as M,r as w,ad as N,ae as S,a6 as $,af as F,N as H,L as B,a1 as Y,ag as q,u as G,C as V,ah as _,ai as K,aj as Q,ak as Z,al as I,ab as J,am as g,an as x,O as W,ao as T}from"./entry.32UGFqj-.js";const X=a=>a==="defer"||a===!1;function ee(...a){var D;const s=typeof a[a.length-1]=="string"?a.pop():void 0;typeof a[0]!="string"&&a.unshift(s);let[e,o,t={}]=a;if(typeof e!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof o!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const n=Y(),u=o,A=()=>null,L=()=>n.isHydrating?n.payload.data[e]:n.static.data[e];t.server=t.server??!0,t.default=t.default??A,t.getCachedData=t.getCachedData??L,t.lazy=t.lazy??!1,t.immediate=t.immediate??!0,t.deep=t.deep??M.deep,t.dedupe=t.dedupe??"cancel";const m=()=>![null,void 0].includes(t.getCachedData(e));if(!n._asyncData[e]||!t.immediate){(D=n.payload._errors)[e]??(D[e]=null);const i=t.deep?w:N;n._asyncData[e]={data:i(t.getCachedData(e)??t.default()),pending:w(!m()),error:S(n.payload._errors,e),status:w("idle")}}const r={...n._asyncData[e]};r.refresh=r.execute=(i={})=>{if(n._asyncDataPromises[e]){if(X(i.dedupe??t.dedupe))return n._asyncDataPromises[e];n._asyncDataPromises[e].cancelled=!0}if((i._initial||n.isHydrating&&i._initial!==!1)&&m())return Promise.resolve(t.getCachedData(e));r.pending.value=!0,r.status.value="pending";const d=new Promise((c,p)=>{try{c(u(n))}catch(P){p(P)}}).then(c=>{if(d.cancelled)return n._asyncDataPromises[e];let p=c;t.transform&&(p=t.transform(c)),t.pick&&(p=te(p,t.pick)),n.payload.data[e]=p,r.data.value=p,r.error.value=null,r.status.value="success"}).catch(c=>{if(d.cancelled)return n._asyncDataPromises[e];r.error.value=q(c),r.data.value=G(t.default()),r.status.value="error"}).finally(()=>{d.cancelled||(r.pending.value=!1,delete n._asyncDataPromises[e])});return n._asyncDataPromises[e]=d,n._asyncDataPromises[e]};const k=()=>r.refresh({_initial:!0}),U=t.server!==!1&&n.payload.serverRendered;{const i=$();if(i&&!i._nuxtOnBeforeMountCbs){i._nuxtOnBeforeMountCbs=[];const c=i._nuxtOnBeforeMountCbs;i&&(F(()=>{c.forEach(p=>{p()}),c.splice(0,c.length)}),H(()=>c.splice(0,c.length)))}U&&n.isHydrating&&(r.error.value||m())?(r.pending.value=!1,r.status.value=r.error.value?"error":"success"):i&&(n.payload.serverRendered&&n.isHydrating||t.lazy)&&t.immediate?i._nuxtOnBeforeMountCbs.push(k):t.immediate&&k(),t.watch&&B(t.watch,()=>r.refresh());const d=n.hook("app:data:refresh",async c=>{(!c||c.includes(e))&&await r.refresh()});i&&H(d)}const R=Promise.resolve(n._asyncDataPromises[e]).then(()=>r);return Object.assign(R,r),R}function te(a,s){const e={};for(const o of s)e[o]=a[o];return e}function b(a,s,e){const[o={},t]=typeof s=="string"?[{},s]:[s,e],n=V(()=>{let y=a;return typeof y=="function"&&(y=y()),_(y)}),u=o.key||K([t,typeof n.value=="string"?n.value:"",...ae(o)]);if(!u||typeof u!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+u);if(!a)throw new Error("[nuxt] [useFetch] request is missing.");const A=u===t?"$f"+u:u;if(!o.baseURL&&typeof n.value=="string"&&n.value[0]==="/"&&n.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:L,lazy:m,default:r,transform:k,pick:U,watch:R,immediate:D,getCachedData:i,deep:d,dedupe:c,...p}=o,P=Q({...Z,...p,cache:typeof o.cache=="boolean"?void 0:o.cache}),z={server:L,lazy:m,default:r,transform:k,pick:U,immediate:D,getCachedData:i,deep:d,dedupe:c,watch:R===!1?[]:[P,n,...R||[]]};let h;return ee(A,()=>{var j;(j=h==null?void 0:h.abort)==null||j.call(h),h=typeof AbortController<"u"?new AbortController:{};const y=_(o.timeout);return y&&setTimeout(()=>h.abort(),y),(o.$fetch||globalThis.$fetch)(n.value,{signal:h.signal,...P})},z)}function ae(a){var e;const s=[((e=_(a.method))==null?void 0:e.toUpperCase())||"GET",_(a.baseURL)];for(const o of[a.params||a.query]){const t=_(o);if(!t)continue;const n={};for(const[u,A]of Object.entries(t))n[_(u)]=_(A);s.push(n)}return s}const f=W(),C=new Date;C.setFullYear(C.getFullYear()+1);const l=I("portal_token",{expires:C}),O=I("portal_token_backup",{expires:C}),E=l.value==="Resetting"?O.value:l.value;l.value&&(l.value==="Resetting"&&(l.value=O.value),setTimeout(()=>{O.value=l.value,l.value="Resetting",setTimeout(()=>{l.value=E},100)},100));const{token:v}=J();function re(a,s={}){const e={baseURL:f.public.HRMS_API_URL,key:a,headers:{Authorization:v.value+"",Accept:"application/json"},dedupe:"cancel",onResponse(t){},onResponseError(t){}},o=g(s,e);return b(a,o,"$e04HVETnoD")}function ce(a,s){return x.create({baseURL:f.public.HRMS_API_URL,headers:{Authorization:v.value+"",Accept:"application/json"}})(a,s)}function ie(a,s={}){const e=l.value==="Resetting"?E:l.value,o=T(),t={server:!1,baseURL:f.public.HRMS_API_URL,key:a,headers:{...o,Accept:"application/json",Portal_token:e+"",Authorization:"Bearer "+e,Cookie:"portal_token="+e+";"},dedupe:"cancel",onResponse(u){},onResponseError(u){}},n=g(s,t);return b(a,n,"$8SztwY1mZP")}function ue(a,s){const e=l.value==="Resetting"?E:l.value,o=T();return x.create({baseURL:f.public.HRMS_API_URL,headers:{...o,Accept:"application/json",Portal_token:e+"",Authorization:"Bearer "+e,Cookie:"portal_token="+e+";"}})(a,s)}function le(a,s={}){const e={baseURL:f.public.PROJECTS_API_URL,key:a,headers:{Authorization:v.value+"",Accept:"application/json"},dedupe:"cancel",onResponse(t){},onResponseError(t){}},o=g(s,e);return b(a,o,"$kHLhNvQ2ii")}function pe(a,s={}){const e={baseURL:f.public.ACCOUNTING_API_URL,key:a,headers:{Authorization:v.value+"",Accept:"application/json"},dedupe:"cancel",onResponse(t){},onResponseError(t){}},o=g(s,e);return b(a,o,"$2g3Q70uG6C")}function fe(a,s){return x.create({baseURL:f.public.ACCOUNTING_API_URL,headers:{Authorization:v.value+"",Accept:"application/json"}})(a,s)}function de(a,s={}){const e={baseURL:f.public.INVENTORY_API_URL,key:a,headers:{Authorization:v.value+"",Accept:"application/json"},dedupe:"cancel",onResponse(t){},onResponseError(t){}},o=g(s,e);return b(a,o,"$ZrHL6YCyP1")}function he(a,s){return x.create({baseURL:f.public.INVENTORY_API_URL,headers:{Authorization:v.value+"",Accept:"application/json"}})(a,s)}export{fe as a,ce as b,re as c,le as d,de as e,ie as f,ue as g,b as h,he as i,pe as u};
