import{_ as ee,a as te,b as ae}from"./MainContainer.BswisYLp.js";import{u as se,_ as oe}from"./search-bar.vue.DimEkj6Y.js";import{_ as ne}from"./PsTextInput.vue.C7eOWbog.js";import{_ as ie}from"./PsNumberInput.vue.BU6zn-2O.js";import P from"./Icon.CrHlyQOo.js";import{_ as V}from"./LoadingContainer.vue.BZUQ77Em.js";import{l as le,s as N,B as Z,C as J,o as _,h as x,w as g,a as e,g as de,b as l,t as L,u as t,x as R,P as Q,A as B,d as M,f as z,r as S,c as D,j as w,F as re,i as ce,n as me,q as ue,_ as I,K as H,L as F,k as j,v as K}from"./entry.32UGFqj-.js";import{c as E,b as X}from"./CustomFetch.ggXvTdIz.js";import{_ as U}from"./SearchEmployeeSelector.vue.B5O7htiL.js";import{_ as q}from"./CustomPagination.C91H0oe5.js";import{d as O}from"./Utilities.DofxnkSu.js";import{u as $,A as C}from"./Accessibilities.xGffDRXj.js";import{_ as _e}from"./PsModal.Bk3xu63Y.js";import{u as G}from"./index.CBzzh1I-.js";import{_ as pe}from"./AcessContainer.Dum7aOuo.js";import{u as ge}from"./id.WqrvI90c.js";import{u as fe}from"./vue.f36acd1f.Ds2AlAv6.js";import"./LayoutBoards.vue.D_rbqYxd.js";import"./loader.BQ9QddgL.js";import"./PsSelectSearch.vue.CT-F0Leg.js";import"./employeeSearch.AgeAeP2j.js";import"./index.T-zbMaZc.js";import"./users.G4iuGzk0.js";import"./client-only.CuVny2dr.js";const T=le("LoansStore",{state:()=>({createData:{isLoading:!1,data:{id:null,employee_id:null,name:"",amount:null,installment_deduction:null,deduction_date_start:"",terms_of_payment:""},successMessage:"",errorMessage:""},editData:{data:{id:null,employee_id:null,name:"'",amount:null,installment_deduction:null,deduction_date_start:"",terms_of_payment:""},successMessage:"",errorMessage:""},allList:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{}},ongoingList:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{}},paidList:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{}},paymentsList:{isLoading:!1,isLoaded:!1,list:[],params:{},pagination:{}},paymentData:{cashadvance_id:null,data:{paymentAmount:0},successMessage:"",errorMessage:""},pagination:{},getParams:{}}),actions:{async getAllList(){await E("/api/loans/resource",{method:"GET",params:this.allList.params,watch:!1,onRequest:()=>{this.allList.isLoading=!0},onResponseError:({response:s})=>{throw new Error(s._data.message)},onResponse:({response:s})=>{this.allList.isLoading=!1,s.ok&&(this.allList.list=s._data.data,this.allList.isLoaded=!0,this.allList.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last})}})},async getOngoingList(){return await E("/api/loans/ongoing",{method:"GET",params:this.ongoingList.params,watch:!1,onRequest:()=>{this.ongoingList.isLoading=!0},onResponseError:({response:s})=>{throw new Error(s._data.message)},onResponse:({response:s})=>{this.ongoingList.isLoading=!1,s.ok&&(this.ongoingList.isLoaded=!0,this.ongoingList.list=s._data.data,this.ongoingList.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last})}})},async getPaidList(){return await E("/api/loans/paid",{method:"GET",params:this.paidList.params,watch:!1,onRequest:()=>{this.paidList.isLoading=!0},onResponseError:({response:s})=>{throw new Error(s._data.message)},onResponse:({response:s})=>{this.paidList.isLoading=!1,s.ok&&(this.paidList.isLoaded=!0,this.paidList.list=s._data.data,this.paidList.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last})}})},async getPaymentsList(){return await E("/api/loans/payments",{method:"GET",params:this.paymentsList.params,watch:!1,onRequest:()=>{this.paymentsList.isLoading=!0},onResponseError:({response:s})=>{throw new Error(s._data.message)},onResponse:({response:s})=>{this.paymentsList.isLoading=!1,s.ok&&(this.paymentsList.isLoaded=!0,this.paymentsList.list=s._data.data,this.paymentsList.pagination={first_page:s._data.links.first,pages:s._data.meta.links,last_page:s._data.links.last})}})},async createResource(){if(this.createData.isLoading)return;const s=this.createData.data.employee_id;await X("/api/loans/resource",{method:"POST",body:this.createData.data,onRequest:()=>{this.createData.isLoading=!0},onResponseError:({response:n})=>{throw this.createData.errorMessage=n._data.message,new Error(n._data.message)},onResponse:({response:n})=>{this.createData.isLoading=!1,n.ok&&(this.reloadResources(),this.createData.data.employee_id=s,this.createData.successMessage=n._data.message)}})},async editResource(){await E("/api/loans/resource",{method:"POST",watch:!1,body:this.editData.data,onResponseError:({response:s})=>{throw this.editData.errorMessage=s._data.message,new Error(s._data.message)},onResponse:({response:s})=>{s.ok&&(this.editData.data=s._data.data,this.editData.successMessage=s._data.message)}})},async submitPayment(s){return await X("/api/loans/manual-payment/"+s,{method:"POST",body:this.paymentData.data,onResponseError:({response:n})=>{throw new Error(n._data.message)},onResponse:({response:n})=>{if(n.ok)return this.reloadResources(),this.paymentData.successMessage=n._data.message,n._data.data;throw new Error(n._data.message)}})},reloadResources(){const s=[];this.allList.isLoaded&&s.push(this.getAllList),this.ongoingList.isLoaded&&s.push(this.getOngoingList),this.paidList.isLoaded&&s.push(this.getPaidList),this.paymentsList.isLoaded&&s.push(this.getPaymentsList),this.$reset(),s.forEach(n=>{n()})}}}),ye=["onSubmit"],be={class:"mt-3 grid grid-cols-1 gap-4 sm:grid-cols-2"},he=e("label",{for:"employee_name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Employee Name ",-1),xe={class:"mt-3 grid grid-cols-1 gap-6 sm:grid-cols-2"},ve=e("label",{for:"department",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Department/Project",-1),Le={id:"departmentproj",class:"cursor-not-allowed bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},ke=e("label",{for:"position",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Position",-1),we={id:"position",class:"cursor-not-allowed bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},Ae={class:"mt-3 grid grid-cols-1 gap-6 sm:grid-cols-2"},De={class:"mt-3 grid grid-cols-1 gap-6 sm:grid-cols-2"},$e=e("label",{class:"block text-md font-medium text-gray-900 dark:text-white mb-6"}," Terms ",-1),Ce={class:"md:flex gap-6 mt-4"},Se={class:"flex flex-wrap items-center mb-4 gap-3"},Me=e("label",{for:"terms-weekly",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," Weekly ",-1),Pe={class:"flex flex-wrap items-center mb-4 gap-3"},Ne=e("label",{for:"termsbimonthly",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," Semi-monthly ",-1),Te={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},Ee=e("label",{for:"amt",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},[e("p",null,"Monthly Deduction")],-1),Re={class:"text-xs"},Ve=e("br",null,null,-1),Oe=e("label",{for:"date_fill",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},L("Deduction Date Start"),-1),Ie={class:"max-w-full flex flex-row-reverse mt-5"},He={type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-4 py-2 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},Fe={__name:"LoansForm",setup(s){const n=T(),a=se(),{createData:i}=N(n),m=Z(),b=()=>{i.value.data.employee_id=a.information.id},r=J(()=>{if(a.information.current_employment)return a.information.current_employment.work_location==="Office"?a.information.current_employment.department_name:a.information.current_employment.project_names}),c=J(()=>a.information.current_employment&&a.information.current_employment.position?a.information.current_employment.position.name:"NONE"),v=async()=>{try{await n.createResource(),m.add({type:"success",text:i.value.successMessage})}catch(d){m.add({type:"error",text:d||"Something went wrong."})}};return(d,o)=>{const p=oe,h=ne,u=ie,k=P,A=V;return _(),x(A,{loading:t(i).isLoading},{default:g(()=>[e("form",{class:"relative",onSubmit:de(v,["prevent"])},[e("div",be,[e("div",null,[he,l(p,{onSearchChanged:b})])]),e("div",xe,[e("div",null,[ve,e("label",Le,L(t(r)||"-"),1)]),e("div",null,[ke,e("label",we,L(t(c)),1)])]),e("div",Ae,[l(h,{modelValue:t(i).data.name,"onUpdate:modelValue":o[0]||(o[0]=f=>t(i).data.name=f),title:"Loan Name",placeholder:"Loan Name",name:"loanName",required:""},null,8,["modelValue"]),l(u,{modelValue:t(i).data.amount,"onUpdate:modelValue":o[1]||(o[1]=f=>t(i).data.amount=f),title:"Amount Loaned",name:"loanAmt",required:""},null,8,["modelValue"])]),e("div",De,[e("div",null,[$e,e("div",Ce,[e("div",Se,[R(e("input",{id:"terms-weekly","onUpdate:modelValue":o[2]||(o[2]=f=>t(i).data.terms_of_payment=f),type:"radio",value:"weekly",name:"default-radio",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[Q,t(i).data.terms_of_payment]]),Me]),e("div",Pe,[R(e("input",{id:"termsbimonthly","onUpdate:modelValue":o[3]||(o[3]=f=>t(i).data.terms_of_payment=f),type:"radio",value:"bimonthly",name:"default-radio",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[Q,t(i).data.terms_of_payment]]),Ne])])])]),e("div",Te,[e("div",null,[Ee,R(e("input",{id:"amt_deduct","onUpdate:modelValue":o[4]||(o[4]=f=>t(i).data.installment_deduction=f),type:"number",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[B,t(i).data.installment_deduction]]),e("div",Re,[M(" Bi-Monthly Deduction: "+L(t(i).data.installment_deduction?t(i).data.installment_deduction/2:0)+" ",1),Ve,M(" Weekly Deduction: "+L(t(i).data.installment_deduction?t(i).data.installment_deduction/4:0),1)])]),e("div",null,[Oe,R(e("input",{id:"date_fill","onUpdate:modelValue":o[5]||(o[5]=f=>t(i).data.deduction_date_start=f),type:"date",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[B,t(i).data.deduction_date_start]])])]),e("div",Ie,[e("button",He,[l(k,{name:"ic:baseline-add",class:"w-4 h-4",fill:"currentColor"}),M(" Add ")])])],40,ye)]),_:1},8,["loading"])}}},je={key:0,class:"flex flex-col gap-2"},Ue={class:"flex gap-4"},qe={class:"flex flex-1 flex-col gap-1"},Ge=e("label",{class:"font-semibold text-gray-700"},"Employee Name: ",-1),Be=["value"],ze={class:"flex flex-1 flex-col gap-1"},Ke=e("label",{class:"font-semibold text-gray-700"},"Project: ",-1),We=["value"],Ye={class:"flex flex-1 flex-col gap-1"},Je=e("label",{class:"font-semibold text-gray-700"},"Department: ",-1),Qe=["value"],Xe={class:"flex gap-4"},Ze={class:"flex flex-1 flex-col gap-1"},et=e("label",{class:"font-semibold text-gray-700"},"Loan Name: ",-1),tt=["value"],at={class:"flex flex-1 flex-col gap-1"},st=e("label",{class:"font-semibold text-gray-700"},"Terms: ",-1),ot=["value"],nt={class:"flex flex-1 flex-col gap-1"},it=e("label",{class:"font-semibold text-gray-700"},"Deduction Date start: ",-1),lt=["value"],dt={class:"flex gap-4"},rt={class:"flex flex-1 flex-col gap-1"},ct=e("label",{class:"font-semibold text-gray-700"},"Loan Amount: ",-1),mt=["value"],ut={class:"flex flex-1 flex-col gap-1"},_t=e("label",{class:"font-semibold text-gray-700"},"Installment Deduction: ",-1),pt=["value"],gt={class:"flex flex-1 flex-col gap-1"},ft=e("label",{class:"font-semibold text-gray-700"},"Balance: ",-1),yt=["value"],bt={class:"flex flex-col mt-6"},ht={class:"flex items-center justify-between border-b pb-2"},xt=e("label",{for:"",class:"text-md text-slate-700 font-bold"},"Payment History",-1),vt={key:0,class:"table w-full text-left mt-4 border"},Lt=e("thead",{class:"border-b"},[e("th",{class:"py-2"}," Amount Paid "),e("th",{class:"py-2"}," Date Paid "),e("th",{class:"py-2"}," Payment Type "),e("th",{class:"py-2"}," Posting Status ")],-1),kt={class:"px-2 py-1 text-slate-600"},wt={class:"px-2 py-1 text-slate-600"},At={class:"px-2 py-1 text-slate-600"},Dt={class:"px-2 py-1 text-slate-600"},$t={key:1,class:"w-full py-4 flex justify-center bg-slate-100 items-center"},Ct=e("span",null,"No payments yet.",-1),St=[Ct],Mt={key:1},Pt={class:"flex gap-4 mb-2"},Nt={class:"flex flex-1 flex-col gap-1"},Tt=e("label",{for:"",class:"text-gray-500 text-sm"},"Payment Amount",-1),Et={class:"flex flex-1 flex-col gap-1"},Rt=z({__name:"LoanDetails",props:{data:{type:Object,required:!0}},emits:["closeModal"],setup(s,{emit:n}){const a=s,i=T(),{paymentData:m}=N(i),b=Z(),r=S(!1),c=async()=>{try{await i.submitPayment(a.data.id),b.add({type:"success",text:m.value.successMessage}),n("closeModal")}catch(o){b.add({type:"error",text:o||"Something went wrong."})}},v=()=>{m.value.data.paymentAmount=0,r.value=!1},d=()=>{r.value=!0};return(o,p)=>{const h=P;return t(r)?(_(),D("div",Mt,[e("div",Pt,[e("div",Nt,[Tt,R(e("input",{"onUpdate:modelValue":p[1]||(p[1]=u=>t(m).data.paymentAmount=u),type:"number",class:"border border-gray-200 bg-white rounded-md",placeholder:"0.00",required:""},null,512),[[B,t(m).data.paymentAmount]])]),e("div",Et,[e("button",{class:"bg-gray-100 rounded-md px-4 py-1 text-gray-800 hover:bg-gray-200 active:bg-gray-300",onClick:p[2]||(p[2]=u=>v())},[l(h,{name:"mingcute:minus-circle-line",class:"font-bold text-md text-gray-600 mb-1"}),M(" Cancel ")]),e("button",{class:"bg-green-500 rounded-md px-8 py-1 text-white hover:bg-green-600 active:bg-green-700",onClick:p[3]||(p[3]=u=>c())},[l(h,{name:"iconoir:hand-card",class:"font-bold text-xl"}),M(" Pay ")])])])])):(_(),D("div",je,[e("div",Ue,[e("div",qe,[Ge,e("input",{type:"text",class:"border border-gray-200 bg-gray-100 rounded-md",value:s.data.employee.fullname_first||"",disabled:""},null,8,Be)]),e("div",ze,[Ke,e("input",{type:"text",class:"border border-gray-200 bg-gray-100 rounded-md",value:s.data.project?s.data.project.project_code:"N/A",disabled:""},null,8,We)]),e("div",Ye,[Je,e("input",{type:"text",class:"border border-gray-200 bg-gray-100 rounded-md",value:s.data.department?s.data.department.department_name:"N/A",disabled:""},null,8,Qe)])]),e("div",Xe,[e("div",Ze,[et,e("input",{type:"text",class:"border border-gray-200 bg-gray-100 rounded-md",value:s.data.name,disabled:""},null,8,tt)]),e("div",at,[st,e("input",{type:"text",class:"border border-gray-200 bg-gray-100 rounded-md",value:s.data.terms_of_payment,disabled:""},null,8,ot)]),e("div",nt,[it,e("input",{type:"text",class:"border border-gray-200 bg-gray-100 rounded-md",value:s.data.deduction_date_start,disabled:""},null,8,lt)])]),e("div",dt,[e("div",rt,[ct,e("input",{type:"text",class:"border border-gray-200 bg-gray-100 rounded-md",value:("useFormatCurrency"in o?o.useFormatCurrency:t(O))(s.data.amount),disabled:""},null,8,mt)]),e("div",ut,[_t,e("input",{type:"text",class:"border border-gray-200 bg-gray-100 rounded-md",value:("useFormatCurrency"in o?o.useFormatCurrency:t(O))(s.data.installment_deduction),disabled:""},null,8,pt)]),e("div",gt,[ft,e("input",{type:"text",class:"border border-gray-200 bg-gray-100 rounded-md",value:("useFormatCurrency"in o?o.useFormatCurrency:t(O))(s.data.remaining_balance),disabled:""},null,8,yt)])]),e("div",bt,[e("div",ht,[xt,!s.data.is_fully_paid&&("useCheckAccessibility"in o?o.useCheckAccessibility:t($))([("AccessibilityTypes"in o?o.AccessibilityTypes:t(C)).HRMS_LOANSANDADVANCES_LOANS_MAKEPAYMENTS])?(_(),D("button",{key:0,class:"bg-green-500 rounded-md px-4 py-1 text-white hover:bg-green-600 active:bg-green-700",onClick:p[0]||(p[0]=u=>d())},[l(h,{name:"iconoir:hand-card",class:"font-bold text-xl"}),M(" Make Payment ")])):w("",!0)]),s.data.payments.length>0?(_(),D("table",vt,[Lt,e("tbody",null,[(_(!0),D(re,null,ce(s.data.payments,u=>(_(),D("tr",{key:u.id,class:"border"},[e("td",kt,L(("useFormatCurrency"in o?o.useFormatCurrency:t(O))(u.amount_paid)),1),e("td",wt,L(u.date_paid),1),e("td",At,L(u.payment_type),1),e("td",Dt,L(u.posting_status),1)]))),128))])])):(_(),D("div",$t,St))])]))}}}),W=z({__name:"InfoModal",props:me({data:{type:Object,required:!0}},{showModal:{required:!1,type:Boolean}}),emits:["update:showModal"],setup(s){const n=ue(s,"showModal"),a=()=>{n.value=!1};return(i,m)=>{const b=Rt,r=_e;return _(),x(r,{"show-modal":n.value,"onUpdate:showModal":m[0]||(m[0]=c=>n.value=c),title:"Loan Details"},{body:g(()=>[l(b,{data:s.data,onCloseModal:a},null,8,["data"])]),_:1},8,["show-modal"])}}}),Vt={class:"w-full"},Ot={class:"w-full"},It={class:"mt-5 mb-6"},Ht={class:"flex flex-row gap-1"},Ft=["onClick"],jt={class:"flex justify-center mx-auto"},Ut={__name:"LoansTable",setup(s){const n=T(),{allList:a}=N(n),i=G(()=>{n.getAllList()},500);H(()=>{a.value.isLoaded||i()}),F(()=>({...a.value.params}),(d,o)=>{d.page===o.page&&(a.value.params.page=1),i()},{deep:!0});const m=[{text:"Employee Name",value:"employee.fullname_first"},{text:"Date Filed",value:"date_filed"},{text:"Loan Name",value:"name"},{text:"Amount Loaned",value:"amount_formatted"},{text:"Deduction",value:"installment_deduction_formatted"},{text:"Action",value:"actions"}],b=d=>{a.value.params.page=d.page??""},r=S({}),c=S(!1),v=d=>{r.value=d,c.value=!0};return(d,o)=>{const p=U,h=P,u=j("EasyDataTable"),k=q,A=W,f=V;return _(),x(f,{loading:t(a).isLoading},{default:g(()=>[e("div",Vt,[l(p,{modelValue:t(a).params.employee_id,"onUpdate:modelValue":o[0]||(o[0]=y=>t(a).params.employee_id=y)},null,8,["modelValue"])]),e("div",Ot,[e("div",It,[l(u,{class:"mt-5",headers:m,items:t(a).list,"hide-footer":!0},{"item-actions":g(y=>[e("div",Ht,[e("button",{onClick:Y=>v(y)},[l(h,{name:"material-symbols:visibility-rounded",color:"white",class:"bg-teal-700 rounded h-8 w-8 p-1"})],8,Ft)])]),_:1},8,["items"])]),e("div",jt,[l(k,{links:t(a).pagination,onChangeParams:b},null,8,["links"])])]),l(A,{"show-modal":t(c),"onUpdate:showModal":o[1]||(o[1]=y=>K(c)?c.value=y:null),data:t(r)},null,8,["show-modal","data"])]),_:1},8,["loading"])}}},qt=I(Ut,[["__scopeId","data-v-568cbf15"]]),Gt={class:"w-full"},Bt={class:"w-full"},zt={class:"mt-5 mb-6"},Kt={class:"flex flex-row gap-1"},Wt=["onClick"],Yt={class:"flex justify-center mx-auto"},Jt={__name:"OngoingTable",setup(s){const n=T(),{ongoingList:a}=N(n),i=G(()=>{n.getOngoingList()},500);H(()=>{a.value.isLoaded||i()}),F(()=>({...a.value.params}),(d,o)=>{d.page===o.page&&(a.value.params.page=1),i()},{deep:!0});const m=[{text:"Employee Name",value:"employee.fullname_first"},{text:"Date Filed",value:"date_filed"},{text:"Loan Name",value:"name"},{text:"Amount Loaned",value:"amount_formatted"},{text:"Deduction",value:"installment_deduction_formatted"},{text:"Action",value:"actions"}],b=d=>{a.value.params.page=d.page??""},r=S({}),c=S(!1),v=d=>{r.value=d,c.value=!0};return(d,o)=>{const p=U,h=P,u=j("EasyDataTable"),k=q,A=W,f=V;return _(),x(f,{loading:t(a).isLoading},{default:g(()=>[e("div",Gt,[l(p,{modelValue:t(a).params.employee_id,"onUpdate:modelValue":o[0]||(o[0]=y=>t(a).params.employee_id=y)},null,8,["modelValue"])]),e("div",Bt,[e("div",zt,[l(u,{"buttons-pagination":"",class:"mt-5","table-class-name":"customize-table",headers:m,items:t(a).list,"hide-footer":!0},{"item-actions":g(y=>[e("div",Kt,[e("button",{onClick:Y=>v(y)},[l(h,{name:"material-symbols:visibility-rounded",color:"white",class:"bg-teal-700 rounded h-8 w-8 p-1"})],8,Wt)])]),_:1},8,["items"])]),e("div",Yt,[t(a).list.length?(_(),x(k,{key:0,links:t(n).pagination,onChangeParams:b},null,8,["links"])):w("",!0)])]),l(A,{"show-modal":t(c),"onUpdate:showModal":o[1]||(o[1]=y=>K(c)?c.value=y:null),data:t(r)},null,8,["show-modal","data"])]),_:1},8,["loading"])}}},Qt=I(Jt,[["__scopeId","data-v-1b24c0cd"]]),Xt={class:"w-full"},Zt={class:"w-full"},ea={class:"mt-5 mb-6"},ta={class:"flex flex-row gap-1"},aa=["onClick"],sa={class:"flex justify-center mx-auto"},oa={__name:"PaidTable",setup(s){const n=T(),{paidList:a}=N(n),i=G(()=>{n.getPaidList()},500);H(()=>{a.value.isLoaded||i()}),F(()=>({...a.value.params}),(d,o)=>{d.page===o.page&&(a.value.params.page=1),i()},{deep:!0});const m=[{text:"Employee Name",value:"employee.fullname_first"},{text:"Date Filed",value:"date_filed"},{text:"Loan Name",value:"name"},{text:"Amount Loaned",value:"amount_formatted"},{text:"Deduction",value:"installment_deduction_formatted"},{text:"Action",value:"actions"}],b=d=>{a.value.params.page=d.page??""},r=S({}),c=S(!1),v=d=>{r.value=d,c.value=!0};return(d,o)=>{const p=U,h=P,u=j("EasyDataTable"),k=q,A=W,f=V;return _(),x(f,null,{default:g(()=>[e("div",Xt,[l(p,{modelValue:t(a).params.employee_id,"onUpdate:modelValue":o[0]||(o[0]=y=>t(a).params.employee_id=y)},null,8,["modelValue"])]),e("div",Zt,[e("div",ea,[l(u,{"buttons-pagination":"",class:"mt-5","table-class-name":"customize-table",headers:m,items:t(a).list,"hide-footer":!0},{"item-actions":g(y=>[e("div",ta,[e("button",{onClick:Y=>v(y)},[l(h,{name:"material-symbols:visibility-rounded",color:"white",class:"bg-teal-700 rounded h-8 w-8 p-1"})],8,aa)])]),_:1},8,["items"])]),e("div",sa,[t(a).list.length?(_(),x(k,{key:0,links:t(n).pagination,onChangeParams:b},null,8,["links"])):w("",!0)])]),l(A,{"show-modal":t(c),"onUpdate:showModal":o[1]||(o[1]=y=>K(c)?c.value=y:null),data:t(r)},null,8,["show-modal","data"])]),_:1})}}},na=I(oa,[["__scopeId","data-v-c2818fdd"]]),ia={class:"w-full"},la={class:"w-full"},da={class:"mt-5 mb-6"},ra={class:"flex flex-row gap-1"},ca=["onClick"],ma={class:"flex justify-center mx-auto"},ua={__name:"PaymentsTable",setup(s){const n=T(),{paymentsList:a}=N(n),i=G(()=>{n.getPaymentsList()},500);H(()=>{a.value.isLoaded||i()}),F(()=>({...a.value.params}),(r,c)=>{r.page===c.page&&(a.value.params.page=1),i()},{deep:!0});const m=[{text:"Employee Name",value:"employee.fullname_first"},{text:"Amount Paid",value:"amount_paid_formatted"},{text:"Date Paid",value:"date_paid_human"},{text:"Mode of Payment",value:"payment_type"}],b=r=>{a.value.params.page=r.page??""};return(r,c)=>{const v=U,d=P,o=j("EasyDataTable"),p=q,h=V;return _(),x(h,null,{default:g(()=>[e("div",ia,[l(v,{modelValue:t(a).params.employee_id,"onUpdate:modelValue":c[0]||(c[0]=u=>t(a).params.employee_id=u)},null,8,["modelValue"])]),e("div",la,[e("div",da,[l(o,{class:"mt-5",headers:m,items:t(a).list,"hide-footer":!0},{"item-actions":g(u=>[e("div",ra,[e("button",{onClick:k=>r.showDetails(u)},[l(d,{name:"material-symbols:visibility-rounded",color:"white",class:"bg-teal-700 rounded h-8 w-8 p-1"})],8,ca)])]),_:1},8,["items"])]),e("div",ma,[l(p,{links:t(a).pagination,onChangeParams:b},null,8,["links"])])])]),_:1})}}},_a=I(ua,[["__scopeId","data-v-f6cad172"]]),pa={class:"w-full flex gap-2"},Ha=z({__name:"index",setup(s){const n=ge("$GiDoedzch9");return fe({title:"Loans",meta:[{name:"description",content:""}]}),(a,i)=>{const m=ee,b=Fe,r=te,c=qt,v=Qt,d=na,o=_a,p=ae,h=pe;return _(),x(h,{"if-access":("useCheckAccessibility"in a?a.useCheckAccessibility:t($))([("AccessibilityTypes"in a?a.AccessibilityTypes:t(C)).HRMS_LOANSANDADVANCES_LOANS_GROUP])},{default:g(()=>[e("div",pa,[l(p,null,{"tab-titles":g(()=>[("useCheckAccessibility"in a?a.useCheckAccessibility:t($))([("AccessibilityTypes"in a?a.AccessibilityTypes:t(C)).HRMS_LOANSANDADVANCES_LOANS_FORMS])?(_(),x(m,{key:0,"target-id":"tab0"+t(n),title:"Loans Form"},null,8,["target-id"])):w("",!0),("useCheckAccessibility"in a?a.useCheckAccessibility:t($))([("AccessibilityTypes"in a?a.AccessibilityTypes:t(C)).HRMS_LOANSANDADVANCES_LOANS_ALL])?(_(),x(m,{key:1,"target-id":"tab1"+t(n),title:"All Loans"},null,8,["target-id"])):w("",!0),("useCheckAccessibility"in a?a.useCheckAccessibility:t($))([("AccessibilityTypes"in a?a.AccessibilityTypes:t(C)).HRMS_LOANSANDADVANCES_LOANS_ONGOING])?(_(),x(m,{key:2,"target-id":"tab2"+t(n),title:"Ongoing Loans"},null,8,["target-id"])):w("",!0),("useCheckAccessibility"in a?a.useCheckAccessibility:t($))([("AccessibilityTypes"in a?a.AccessibilityTypes:t(C)).HRMS_LOANSANDADVANCES_LOANS_PAID])?(_(),x(m,{key:3,"target-id":"tab3"+t(n),title:"Paid Loans"},null,8,["target-id"])):w("",!0),("useCheckAccessibility"in a?a.useCheckAccessibility:t($))([("AccessibilityTypes"in a?a.AccessibilityTypes:t(C)).HRMS_LOANSANDADVANCES_LOANS_PAYMENTS])?(_(),x(m,{key:4,"target-id":"tab4"+t(n),title:"Loan Payments"},null,8,["target-id"])):w("",!0)]),"tab-containers":g(()=>[l(r,{id:"tab0"+t(n)},{default:g(()=>[l(b)]),_:1},8,["id"]),l(r,{id:"tab1"+t(n)},{default:g(()=>[l(c)]),_:1},8,["id"]),l(r,{id:"tab2"+t(n)},{default:g(()=>[l(v)]),_:1},8,["id"]),l(r,{id:"tab3"+t(n)},{default:g(()=>[l(d)]),_:1},8,["id"]),l(r,{id:"tab4"+t(n)},{default:g(()=>[l(o)]),_:1},8,["id"])]),_:1})])]),_:1},8,["if-access"])}}});export{Ha as default};
