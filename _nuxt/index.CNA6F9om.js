import L from"./Icon.CrHlyQOo.js";import{_ as M}from"./UserEmployeeSelector.vue.CW0bAtx_.js";import{_ as E}from"./CustomPagination.C91H0oe5.js";import{_ as F}from"./LayoutBoards.vue.D_rbqYxd.js";import{_ as N,s as j,K as H,B as R,o as n,h as C,w,a as e,c as g,F as A,i as x,u as _,g as h,d as q,t as D,b as u,x as f,A as O,P as v,p as G,e as K}from"./entry.32UGFqj-.js";import{u as z}from"./approvals.89EhJm5V.js";import{_ as J}from"./AcessContainer.Dum7aOuo.js";import{u as Q}from"./vue.f36acd1f.Ds2AlAv6.js";import{u as W,A as X}from"./Accessibilities.xGffDRXj.js";import"./index.T-zbMaZc.js";import"./enum.M1X5V5yu.js";import"./CustomFetch.ggXvTdIz.js";import"./loader.BQ9QddgL.js";import"./users.G4iuGzk0.js";const S=i=>(G("data-v-35a44c79"),i=i(),K(),i),Y={class:"pb-2 text-gray-500"},Z={class:"table-auto w-full border-collapse"},ee=S(()=>e("thead",null,[e("tr",{class:""},[e("th",{class:"p-2"}," Form "),e("th",{class:"p-2"}," Approvals "),e("th",{class:"p-2"}," Action ")])],-1)),te={class:"p-2"},oe=["id","onSubmit"],se={class:"p-2 space-y-2"},ae={class:"flex ml-auto"},re={class:"grid gap-2 md:grid-cols-2"},le=S(()=>e("label",{for:"",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Approval Type",-1)),ce=["onUpdate:modelValue"],ne={class:"flex items-center"},ie=["id","onUpdate:modelValue","name","onChange"],de=["for"],ue={class:"flex items-center"},_e=["id","onUpdate:modelValue","name","onChange"],pe=["for"],me={class:"flex items-center"},ge=["id","onUpdate:modelValue","name","onChange"],fe=["for"],ye={class:"p-2 rounded-md"},be={class:"grid md:grid-rows-1 justify-center gap-4 p-2"},he=["form"],ve={class:"flex justify-center mx-auto"},ke={__name:"ApprovalsForm",setup(i){const l=z(),{accountingApprovals:c,editApproval:p}=j(l);H(()=>{c.value.isLoaded||l.getAccountingApprovals()});const m=R(),y=a=>{a.selector_type!=="specific"&&(a.user_id=null)},V=a=>{a.push({type:"",user_id:null,selector_type:"specific"})},U=(a,b)=>{a.splice(b,1)},$=async a=>{try{await l.editApprovals(a),m.add({type:"success",text:p.value.successMessage})}catch{m.add({type:"error",text:p.value.errorMessage})}},T=a=>{c.value.params.page=a.page??""};return(a,b)=>{const k=L,P=M,B=E,I=F;return n(),C(I,{title:"Approvals",class:"w-full",loading:_(c).isLoading},{default:w(()=>[e("div",Y,[e("table",Z,[ee,e("tbody",null,[(n(!0),g(A,null,x(_(c).list,(d,o)=>(n(),g("tr",{key:o,class:"border-2 border-slate-300"},[e("td",te,[e("form",{id:o+"approvform",onSubmit:h(t=>$(d),["prevent"])},null,40,oe),q(" "+D(d.form),1)]),e("div",se,[(n(!0),g(A,null,x(d.approvals,(t,r)=>(n(),g("td",{key:r,class:"p-3 flex flex-col border border-slate-400 rounded-lg"},[e("div",ae,[u(k,{name:"ic:baseline-minus",class:"flex ml-auto bg-red-400 hover:bg-red-500 text-black hover:text-white rounded-sm w-10",onClick:h(s=>U(d.approvals,r),["prevent"])},null,8,["onClick"])]),e("div",re,[e("div",null,[le,f(e("input",{"onUpdate:modelValue":s=>t.type=s,class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:"text"},null,8,ce),[[O,t.type]])]),e("div",null,[e("div",ne,[f(e("input",{id:r+"user_selector"+o,"onUpdate:modelValue":s=>t.selector_type=s,type:"radio",value:"employee",name:r+"radio1"+o,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600",onChange:s=>y(t)},null,40,ie),[[v,t.selector_type]]),e("label",{for:r+"user_selector"+o,class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," Employee Selector ",8,de)]),e("div",ue,[f(e("input",{id:r+"head_selector"+o,"onUpdate:modelValue":s=>t.selector_type=s,type:"radio",value:"head",name:r+"radio1"+o,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600",onChange:s=>y(t)},null,40,_e),[[v,t.selector_type]]),e("label",{for:r+"head_selector"+o,class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," Head Selector ",8,pe)]),e("div",me,[f(e("input",{id:r+"employee_selector"+o,"onUpdate:modelValue":s=>t.selector_type=s,type:"radio",value:"specific",name:r+"radio2"+o,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600",onChange:s=>y(t)},null,40,ge),[[v,t.selector_type]]),e("label",{for:r+"employee_selector"+o,class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"}," Specific Employee ",8,fe),u(P,{id:"users_list",modelValue:t.user_id,"onUpdate:modelValue":s=>t.user_id=s,form:o+"approvform",disabled:t.selector_type!=="specific",required:t.selector_type==="specific"},null,8,["modelValue","onUpdate:modelValue","form","disabled","required"])])])])]))),128)),u(k,{name:"ic:baseline-plus",class:"flex ml-auto bg-green-400 hover:bg-green-500 text-black hover:text-white rounded-sm w-10",onClick:h(t=>V(d.approvals),["prevent"])},null,8,["onClick"])]),e("td",ye,[e("div",be,[e("button",{form:o+"approvform",type:"submit",class:"rounded-md bg-green-400 p-2 text-white hover:bg-green-500 justify-end"}," Save Changes ",8,he)])])]))),128))])])]),e("div",ve,[u(B,{links:_(c).pagination,onChangeParams:T},null,8,["links"])])]),_:1},8,["loading"])}}},Ae=N(ke,[["__scopeId","data-v-35a44c79"]]),xe={class:"flex flex-col md:flex-row gap-4"},Ne={__name:"index",setup(i){return Q({title:"Approvals"}),(l,c)=>{const p=Ae,m=J;return n(),C(m,{"if-access":("useCheckAccessibility"in l?l.useCheckAccessibility:_(W))([("AccessibilityTypes"in l?l.AccessibilityTypes:_(X)).ACCOUNTING_SETUP_APPROVALS])},{default:w(()=>[e("div",xe,[u(p)])]),_:1},8,["if-access"])}}};export{Ne as default};
