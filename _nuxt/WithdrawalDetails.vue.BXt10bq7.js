import{_ as L}from"./IsoHeader.vue.CeUOAvDJ.js";import N from"./Icon.DcF_NU9d.js";import{_ as P}from"./AcceptRejectButton.BK4bgbmc.js";import{_ as Q}from"./LoadingContainer.vue.Bz3WIh4M.js";import{_ as S}from"./LayoutPrint.Dr_MMYe1.js";import{f as V,r as z,B as U,s as E,C as G,o as n,c as d,a as e,b as y,w as j,t,j as _,u as i,F as q,i as R,v as F,G as W}from"./entry.R6V7NTxy.js";import{d as h}from"./Utilities.Cbr1Z9cn.js";const H={class:"h-full w-full bg-white border border-gray-200 rounded-lg shadow-md sm:p-6 md:p-2 dark:bg-gray-800 dark:border-gray-700"},O={class:"flex flex-col gap-2 w-full p-4"},J={id:"headline mb-4 "},K={class:"basis-[10%] grow-1 shrink-0 flex items-center justify-center rounded-t mb-4 mt-4"},X={key:0,class:"pl-4 text-xl font-semibold text-gray-900 p-4"},Y={class:"flex justify-between mb-4"},Z={class:"w-1/2"},ee={class:"flex justify-start p-2"},te={class:"grid grid-cols-2"},se=e("p",{class:"text-md font-bold"}," Supplier: ",-1),oe={class:"text-md underline indent-2"},re=e("p",{class:"text-md font-bold"}," Reference: ",-1),ae={class:"text-md underline indent-2"},ne=e("p",{class:"text-md font-bold"}," Terms of Payment: ",-1),de={class:"text-md underline indent-2"},ce=e("p",{class:"text-md font-bold"}," Particulars: ",-1),ie={class:"text-md underline indent-2"},le={class:"w-1/2 text-left"},ue={class:"flex justify-around p-2"},_e={class:"grid grid-cols-2"},me=e("p",{class:"text-md font-bold"}," Reference Number: ",-1),pe={class:"text-md font-bold underline indent-2"},ye=e("p",{class:"text-md font-bold"}," Transaction Date: ",-1),he={class:"text-md underline indent-2"},xe=e("p",{class:"text-md font-bold"}," Project Code: ",-1),fe={class:"text-md underline indent-2"},ge=e("p",{class:"text-md font-bold"}," Equipment No.: ",-1),be={class:"text-md underline indent-2"},ve=e("p",{class:"text-md font-bold"}," Source PO: ",-1),ke={class:"text-md underline indent-2"},we={id:"itemDetails"},Ce={id:"content",class:"overflow-auto"},je={class:"table-auto w-full border-collapse"},qe={class:"bg-[#dbe5f1]"},Re={class:"border px-2 py-1 text-center"},Fe={class:"border px-2 py-1 text-center"},Ae={class:"border px-2 py-1 text-center"},De={class:"border px-2 py-1 text-center"},Me={class:"border px-2 py-1 text-center"},Te={class:"border px-2 py-1 text-center"},$e={class:"border px-2 py-1 text-center"},Ie={class:"border px-2 py-1 text-center"},Be={class:"border px-2 py-1 text-center"},Le={class:"border px-2 py-1 text-center"},Ne={key:0,class:"flex justify-center relative group"},Pe=e("div",{role:"tooltip",class:"absolute bottom-full mb-2 hidden group-hover:block z-10 w-32 px-2 py-1 text-xs text-white bg-gray-700 rounded-lg shadow-md"}," Rejected ",-1),Qe={key:1,class:"flex justify-center relative group"},Se=e("div",{role:"tooltip",class:"absolute bottom-full mb-2 hidden group-hover:block z-10 w-32 px-2 py-1 text-xs text-white bg-gray-700 rounded-lg shadow-md"}," Accepted ",-1),Ve={class:"border px-2 py-1 text-center"},ze={class:"border px-2 py-1 text-center"},Ue={class:"border"},Ee={colspan:"10"},Ge={class:"flex justify-end p-2 py-2"},We={class:"grid grid-cols-2 gap-2"},He={key:0,class:"text-md text-gray-900"},Oe=e("strong",null,"Total net of VAT cost:",-1),Je=[Oe],Ke={key:1,class:"text-md text-gray-900"},Xe={key:2,class:"text-md text-gray-900"},Ye=e("strong",null,"Total Input VAT:",-1),Ze=[Ye],et={key:3,class:"text-md text-gray-900"},tt={key:4,class:"text-md text-gray-900"},st=e("strong",null," Grand Total:",-1),ot=[st],rt={key:5,class:"text-md text-gray-900"},_t=V({__name:"WithdrawalDetails",props:{title:{type:String,required:!0},headerColumns:{type:Array,required:!0},data:{type:Array,required:!0}},setup(s){const x=s,b=z(!1),o=useReceivingStore(),l=U(),{receiving:A,remarks:p}=E(o),f=G(()=>x.data),D=async({requestId:a,remarks:c})=>{try{await o.acceptAllItem(a,{remarks:c}),o.errorMessage!==""?l.add({type:"error",text:o.errorMessage}):(l.add({type:"success",text:o.successMessage}),o.$reset(),o.fetchReceivingDetails(x.data.id),b.value=!0)}catch(u){l.add({type:"error",text:u||"something went wrong."})}},M=async({requestId:a,acceptedQty:c,remarks:u})=>{if(u===""){l.add({type:"error",text:"Quantity & Remarks are required."});return}try{await o.acceptQtyRemarks(a,{accepted_qty:c,remarks:u}),o.errorMessage!==""?l.add({type:"error",text:o.errorMessage}):(l.add({type:"success",text:o.successMessage}),o.$reset(),await o.fetchReceivingDetails(x.data.id),b.value=!0)}catch(g){l.add({type:"error",text:g||"something went wrong."})}},T=async({requestId:a,remarks:c})=>{if(c.trim()===""){l.add({type:"error",text:"Remarks are required."});return}try{await o.rejectItem(a,{remarks:c.trim()}),o.errorMessage!==""?l.add({type:"error",text:o.errorMessage}):(l.add({type:"success",text:o.successMessage}),o.$reset(),await o.fetchReceivingDetails(x.data.id),b.value=!0)}catch(u){l.add({type:"error",text:u||"something went wrong."})}};return(a,c)=>{const u=L,g=N,$=P,I=Q,B=S;return n(),d("div",H,[e("div",O,[y(B,null,{default:j(()=>{var v,k,w,C;return[e("div",J,[y(u),e("div",K,[s.title?(n(),d("h3",X,t(s.title),1)):_("",!0)]),e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[se,e("p",oe,t(((k=(v=s.data)==null?void 0:v.supplier)==null?void 0:k.company_name)||""),1),re,e("p",ae,t(s.data.reference_code),1),ne,e("p",de,t(s.data.terms_of_payment),1),ce,e("p",ie,t(s.data.particulars),1)])])]),e("div",le,[e("div",ue,[e("div",_e,[me,e("p",pe,t(s.data.reference_no),1),ye,e("p",he,t(s.data.transaction_date),1),xe,e("p",fe,t((C=(w=s.data)==null?void 0:w.project)==null?void 0:C.project_code),1),ge,e("p",be,t(s.data.equipment_no),1),ve,e("p",ke,t(s.data.source_po),1)])])])])]),y(I,{class:"w-full",loading:i(A).isLoading},{default:j(()=>[e("div",we,[e("div",Ce,[e("table",je,[e("thead",null,[e("tr",qe,[(n(!0),d(q,null,R(s.headerColumns,(r,m)=>(n(),d("th",{key:m,scope:"col",class:"p-2 border-b text-sm"},t(r.name),1))),128))])]),e("tbody",null,[(n(!0),d(q,null,R(i(f).items,r=>(n(),d("tr",{key:r.id,class:"bg-white border-b"},[e("td",Re,t(r.item_code),1),e("td",Fe,t(r.item_profile),1),e("td",Ae,t(r.specification),1),e("td",De,t(r.actual_brand),1),e("td",Me,t(r.qty),1),e("td",Te,t(r.accepted_qty),1),e("td",$e,t(r.uom),1),e("td",Ie,t(("useFormatCurrency"in a?a.useFormatCurrency:i(h))(r.unit_price)),1),e("td",Be,t(("useFormatCurrency"in a?a.useFormatCurrency:i(h))(r.unit_price)),1),e("td",Le,[r.status==="Rejected"?(n(),d("div",Ne,[y(g,{name:"mdi:close-circle",class:"h-8 w-8 text-red-700"}),Pe])):r.status==="Accepted"?(n(),d("div",Qe,[y(g,{name:"mdi:check-circle",class:"h-8 w-8 text-green-700"}),Se])):_("",!0)]),e("td",Ve,t(r.remarks),1),e("td",ze,[y($,{"accept-remarks":i(p),"onUpdate:acceptRemarks":c[0]||(c[0]=m=>F(p)?p.value=m:null),"reject-remarks":i(p),"onUpdate:rejectRemarks":c[1]||(c[1]=m=>F(p)?p.value=m:null),"accepted-qty":a.acceptedQty,"onUpdate:acceptedQty":c[2]||(c[2]=m=>a.acceptedQty=m),"max-quantity":r.qty,"request-id":r.id,disabled:!!r.remarks,class:W({"opacity-60 cursor-not-allowed pointer-events-none":!!r.remarks}),onAcceptAll:D,onAccept:M,onReject:T},null,8,["accept-remarks","reject-remarks","accepted-qty","max-quantity","request-id","disabled","class"])])]))),128)),e("tr",Ue,[e("td",Ee,[e("div",Ge,[e("div",We,[s.title?(n(),d("p",He,Je)):_("",!0),s.title?(n(),d("p",Ke,t(("useFormatCurrency"in a?a.useFormatCurrency:i(h))(i(f).total_net_of_vat_cost)),1)):_("",!0),s.title?(n(),d("p",Xe,Ze)):_("",!0),s.title?(n(),d("p",et,t(("useFormatCurrency"in a?a.useFormatCurrency:i(h))(i(f).total_input_vat)),1)):_("",!0),s.title?(n(),d("p",tt,ot)):_("",!0),s.title?(n(),d("p",rt,t(`â‚±${("useFormatCurrency"in a?a.useFormatCurrency:i(h))(i(f).grand_total)}`),1)):_("",!0)])])])])])])])])]),_:1},8,["loading"])]}),_:1})])])}}});export{_t as _};
