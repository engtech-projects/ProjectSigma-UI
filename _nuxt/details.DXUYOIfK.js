import{a as N,_ as V}from"./AcessContainer.Dum7aOuo.js";import{u as j,_ as z}from"./13thmonth.CzlCkiGp.js";import{_ as G}from"./ListView.CUwkSJ9r.js";import{f as $,o as r,c as f,a as y,F as E,i as K,G as Y,t as L,h as v,r as b,ax as J,B as Q,K as W,w as _,b as n,u as e,j as q,v as X}from"./entry.32UGFqj-.js";import{_ as Z}from"./ApprovalDenyButton.2aaI0auR.js";import{_ as ee}from"./LayoutPrintAdvanced.BMLOtvVg.js";import{_ as ae}from"./LayoutBoards.vue.D_rbqYxd.js";import{u as te}from"./vue.f36acd1f.Ds2AlAv6.js";import{u as se}from"./id.WqrvI90c.js";import{a as oe,u as re,A as ne}from"./Accessibilities.xGffDRXj.js";import"./Utilities.DofxnkSu.js";import"./CustomFetch.ggXvTdIz.js";import"./Icon.CrHlyQOo.js";import"./index.T-zbMaZc.js";import"./loader.BQ9QddgL.js";import"./client-only.CuVny2dr.js";import"./users.G4iuGzk0.js";const le={class:"bg-white w-full shadow sm:rounded-lg"},ie={class:"border-t border-gray-200"},ue={class:"text-sm font-medium text-gray-500"},de={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},ce=$({__name:"PsDataDisplayBanded",props:{data:{type:Array,required:!0}},setup(s){return(u,h)=>(r(),f("div",le,[y("div",ie,[y("dl",null,[(r(!0),f(E,null,K(s.data,(o,l)=>(r(),f("div",{key:l,class:Y(["px-4 py-2 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",l%2===0?"bg-white":"bg-gray-50"])},[y("dt",ue,L(o.label),1),y("dd",de,L(o.value),1)],2))),128))])])]))}}),me={__name:"RequestDetails",props:{data:{type:Object,required:!0}},setup(s){return(u,h)=>{const o=ce;return r(),v(o,{data:[{label:"13th Month Date",value:s.data.date_requested_human},{label:"Payroll Duration",value:s.data.payroll_duration},{label:"Days Advance",value:s.data.days_advance},{label:"Requested By",value:s.data.created_by_user_name},{label:"Requested On",value:s.data.created_at_human},{label:"Request Status",value:s.data.request_status}]},null,8,["data"])}}},pe={key:0,class:"flex gap-2 p-2 justify-end relative"},$e=$({__name:"details",setup(s){const u=j();te({title:"Payroll Summary Details"});const h=se("$k5ozTHn1BO"),o=b(!1),l=J(),t=b(),d=Q();W(()=>{g()});const g=async()=>{if(l.query.id)try{o.value=!0,t.value=await u.getOne(l.query.id)}catch(a){d.add({type:"error",text:a||"Failed to load request details."})}finally{o.value=!1}},P=async a=>{try{await u.approveApprovalForm(a),await g(),d.add({type:"success",text:"Successfully Approved."})}catch(i){d.add({type:"error",text:i||"something went wrong."})}},p=b(""),H=async a=>{try{await u.denyApprovalForm(a,p.value),await g(),d.add({type:"success",text:"Successfully Denied"})}catch(i){d.add({type:"error",text:i||"something went wrong."})}};return(a,i)=>{const M=N,k=z,w=G,O=me,S=Z,T=ee,F=ae,I=V;return r(),v(I,{"if-access":("useCheckAccessibility"in a?a.useCheckAccessibility:e(re))([("AccessibilityTypes"in a?a.AccessibilityTypes:e(ne)).HRMS_PAYROLL_13THMONTH_GROUP]),"comp-id":e(h),class:"min-h-40"},{default:_(()=>[n(F,{title:"13th Month Request Details","is-loading":e(o)},{default:_(()=>{var A;return[e(l).query.id?q("",!0):(r(),v(M,{key:0,message:"Please select a 13th Month Request"})),(A=e(t))!=null&&A.data?(r(),v(T,{key:1},{"print-layout":_(()=>{var c,m;return[n(k,{data:(c=e(t))==null?void 0:c.data},null,8,["data"]),n(w,{approvals:(m=e(t))==null?void 0:m.data.approvals,"signature-view":!0},null,8,["approvals"])]}),"system-layout":_(()=>{var c,m,D,R,C,x,B;return[n(O,{data:(c=e(t))==null?void 0:c.data},null,8,["data"]),n(k,{data:(m=e(t))==null?void 0:m.data},null,8,["data"]),n(w,{approvals:(D=e(t))==null?void 0:D.data.approvals,"signature-view":!1},null,8,["approvals"]),(R=e(t))!=null&&R.data.next_approval&&("useCheckIsCurrentUser"in a?a.useCheckIsCurrentUser:e(oe))((x=(C=e(t))==null?void 0:C.data.next_approval)==null?void 0:x.user_id)?(r(),f("div",pe,[n(S,{"deny-remarks":e(p),"onUpdate:denyRemarks":i[0]||(i[0]=U=>X(p)?p.value=U:null),"request-id":(B=e(t))==null?void 0:B.data.id,onApprove:P,onDeny:H},null,8,["deny-remarks","request-id"])])):q("",!0)]}),_:1})):q("",!0)]}),_:1},8,["is-loading"])]),_:1},8,["if-access","comp-id"])}}});export{$e as default};
