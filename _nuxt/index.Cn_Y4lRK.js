import{_ as A}from"./LayoutBoards.vue.D_rbqYxd.js";import{l as I,_ as P,s as S,B as N,r as B,o as x,h as M,w as b,a as r,g as R,b as d,u as s,G as w,t as g,x as f,y,p as D,e as H,C as U,k as G}from"./entry.32UGFqj-.js";import{u as _}from"./CustomFetch.ggXvTdIz.js";import{_ as L}from"./PsTextInput.vue.C7eOWbog.js";import{_ as O}from"./PsTable.BPIFONj1.js";import{_ as j}from"./CustomPagination.C91H0oe5.js";import{_ as q}from"./AcessContainer.Dum7aOuo.js";import{u as z}from"./vue.f36acd1f.Ds2AlAv6.js";import{u as F,A as K}from"./Accessibilities.xGffDRXj.js";import"./loader.BQ9QddgL.js";import"./id.WqrvI90c.js";import"./client-only.CuVny2dr.js";import"./Icon.CrHlyQOo.js";import"./index.T-zbMaZc.js";import"./nuxt-link.C5IpI_HT.js";import"./Utilities.DofxnkSu.js";import"./users.G4iuGzk0.js";const v=I("stakeholderStore",{state:()=>({stakeholder:{id:null,name:null},list:[],pagination:{},getParams:{},errorMessage:"",successMessage:"",isLoading:!1,isEdit:!1}),actions:{async getStakeholders(){this.isLoading=!0,this.getParams.type="payee";const{data:t,error:e}=await _("/api/stakeholders",{method:"GET",params:this.getParams,onResponse:({response:a})=>{this.isLoading=!1,this.list=a._data.data.data,this.pagination={first_page:a._data.data.links.first,pages:a._data.data.meta.links,last_page:a._data.data.links.last}}});if(t)return t;if(e)return e},async createStakeholder(){this.successMessage="",this.errorMessage="",await _("/api/stakeholders",{method:"POST",body:this.stakeholder,watch:!1,onResponse:({response:t})=>{t.ok?(this.getStakeholders(),this.successMessage=t._data.message):this.errorMessage=t._data.message}})},async editStakeholder(){this.successMessage="",this.errorMessage="";const{data:t,error:e}=await _("/api/stakeholders/"+this.stakeholder.id,{method:"PATCH",body:this.stakeholder,watch:!1});if(t.value)return this.getStakeholders(),this.successMessage=t.value.message,t;if(e.value)return this.errorMessage=e.value.data.message,e},async deleteStakeholder(t){const{data:e,error:a}=await _("/api/stakeholders/"+t,{method:"DELETE",body:this.stakeholder,watch:!1,onResponse:({response:o})=>{this.successMessage=o._data.message}});if(e.value)return this.getStakeholders(),this.successMessage=e.value.message,e;if(a.value)return this.errorMessage="Error",a},clearMessages(){this.errorMessage="",this.successMessage=""},reset(){this.stakeholder={id:null,name:null},this.successMessage="",this.errorMessage=""}}}),J=t=>(D("data-v-50998545"),t=t(),H(),t),Q={class:"text-gray-500"},W=["onSubmit"],X={class:"flex flex-col gap-2 py-3"},Y=J(()=>r("div",{class:"flex justify-end"},[r("button",{type:"submit",class:"flex-1 text-white p-2 rounded bg-teal-600 content-center mt-5"}," Add Payee ")],-1)),Z={__name:"StakeholderCreate",setup(t){const e=v(),{stakeholder:a,errorMessage:o,successMessage:u}=S(e),l=N(),c=B(!1),h=async()=>{try{c.value=!0,await e.createStakeholder(),e.errorMessage!==""?l.add({type:"error",text:e.errorMessage}):l.add({type:"success",text:e.successMessage})}catch{o.value=o,l.add({type:"error",text:e.errorMessage})}finally{c.value=!1,e.clearMessages()}};return(m,p)=>{const k=A;return x(),M(k,{title:"Payee",loading:s(c)},{default:b(()=>[r("div",Q,[r("form",{class:"p-2",onSubmit:R(h,["prevent"])},[r("div",X,[d(L,{modelValue:s(a).name,"onUpdate:modelValue":p[0]||(p[0]=i=>s(a).name=i),title:"Payee Name",required:""},null,8,["modelValue"])]),Y],40,W),r("p",{hidden:"",class:w(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!s(o)}])},g(s(o)),3),f(r("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic transition-opacity delay-1000"},g(s(u)),513),[[y,s(u)]])])]),_:1},8,["loading"])}}},ee=P(Z,[["__scopeId","data-v-50998545"]]),se={class:"w-1/2 flex px-4"},te={class:"pb-2 text-gray-500"},ae={class:"flex justify-center mx-auto my-8"},oe={__name:"StakeholderList",setup(t){const e=v(),{list:a,getParams:o,pagination:u,errorMessage:l,successMessage:c}=S(e),h=i=>{o.value.page=i.page??"",e.getStakeholders()},m=[{name:"Name",id:"name",style:"text-left"},{name:"Type",id:"stakeholder_type",style:"text-left"}],p=i=>{if(i){const n=i.split("\\");return n[n.length-1]}return"N/A"},k=U(()=>{const i=[];return a.value.forEach(n=>{n.stakeholder_type=p(n.stakeholdable_type),i.push(n)}),i});return(i,n)=>{const C=L,T=O,E=j,$=A;return x(),M($,{title:"Payee List",class:"w-full",loading:s(e).isLoading},{default:b(()=>[r("div",se,[d(C,{modelValue:s(e).getParams.key,"onUpdate:modelValue":n[0]||(n[0]=V=>s(e).getParams.key=V),title:"Search Payee",class:"w-full"},null,8,["modelValue"])]),r("div",te,[d(T,{"header-columns":m,datas:s(k),class:"!text-left"},null,8,["datas"])]),r("div",ae,[d(E,{links:s(u),onChangeParams:h},null,8,["links"])]),r("p",{hidden:"",class:w(["error-message text-red-600 text-center font-semibold mt-2 italic",{"fade-out":!s(l)}])},g(s(l)),3),f(r("p",{hidden:"",class:"success-message text-green-600 text-center font-semibold italic"},g(s(c)),513),[[y,s(c)]])]),_:1},8,["loading"])}}},re={class:"flex flex-col md:flex-row gap-4"},ie={__name:"index",setup(t){const e=v(),{isEdit:a}=S(e);return e.getStakeholders(),z({title:"Accounting Stakeholder"}),(o,u)=>{const l=ee,c=G("AccountingSetupStakeholderEdit"),h=oe,m=q;return x(),M(m,{"if-access":("useCheckAccessibility"in o?o.useCheckAccessibility:s(F))([("AccessibilityTypes"in o?o.AccessibilityTypes:s(K)).ACCOUNTING_SETUP_STAKEHOLDERS])},{default:b(()=>[r("div",re,[f(d(l,{class:"flex-1"},null,512),[[y,!s(a)]]),f(d(c,{class:"flex-1"},null,512),[[y,s(a)]]),d(h,{class:"flex-2"})])]),_:1},8,["if-access"])}}},ve=P(ie,[["__scopeId","data-v-b303d807"]]);export{ve as default};
