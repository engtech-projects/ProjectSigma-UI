import{f as M,s as G,K as D,q as P,o as u,c,x as d,D as J,a as e,F as K,i as Q,t as X,u as E,B as Y,ab as Z,r as n,L as C,j as O,G as ee,b as I,g as te,A as k,M as p,H as ae,p as se,e as le,d as re,O as oe,_ as de,h as ne,w as ie}from"./entry.R6V7NTxy.js";import{u as ue}from"./enum.D7iLG1Bk.js";import{p as ce}from"./Utilities.Cbr1Z9cn.js";import{c as me,h as $}from"./CustomFetch.BRBLzGci.js";import{_ as N}from"./loader.C2wIXBoB.js";import{i as fe,a as pe,b as ge,F as be}from"./index.D1WMzuIK.js";import{u as ye}from"./employee.tVj1qUbX.js";import{_ as ve}from"./AcessContainer.DJcSsti6.js";import{u as xe}from"./vue.f36acd1f.Dv_A-myg.js";import{u as _e,A as he}from"./Accessibilities.uaboihcy.js";import"./users.D5_vMoUK.js";const ke=e("option",{value:null,selected:""}," --Select Employee-- ",-1),we=["value"],Te=M({__name:"EmployeeSelector",props:{modelValue:{required:!1,type:Number,default:null}},emits:["update:modelValue"],setup(m){const i=ue(),{allEmployeeEnum:g}=G(i);D(()=>{g.value.isLoaded||i.getEmployeeEnum()});const f=P(m,"modelValue");return(v,b)=>(u(),c("div",null,[d(e("select",{id:"users_list","onUpdate:modelValue":b[0]||(b[0]=r=>f.value=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[ke,(u(!0),c(K,null,Q(E(g).list,(r,a)=>(u(),c("option",{key:a,value:r.id},X(r.fullname_last),9,we))),128))],512),[[J,f.value]])]))}}),o=m=>(se("data-v-83237a3f"),m=m(),le(),m),Se={class:"md:flex gap-4"},Ee=o(()=>e("head",null,[e("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"})],-1)),Re={class:"w-full md:w-1/2 justify-start border border-teal-100 shadow-md rounded-lg mt-5 relative"},Ve={key:0,class:"absolute bg-slate-200/50 rounded-lg w-full h-full flex items-center justify-center z-50"},je=o(()=>e("img",{class:"flex justify-center w-28 rounded-md",src:N,alt:"logo"},null,-1)),Ce=[je],Ie={class:"p-4"},Ue={class:"group p-2 rounded-lg bg-slate-50",open:""},Ae=ae('<summary class="flex cursor-pointer list-none items-center justify-between text-lg font-medium text-gray-900 bg-teal-100 rounded-sm" data-v-83237a3f><label for="" class="text-lg font-medium p-2" data-v-83237a3f>Set Schedule</label><div class="text-gray-500" data-v-83237a3f><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="black" class="block h-5 w-5 transition-all duration-300 group-open:rotate-180 m-2" data-v-83237a3f><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" data-v-83237a3f></path></svg></div></summary>',1),Le={class:"pb-2 text-black text-md font-medium border border-slate-100 rounded-b-lg p-3"},Oe=["onSubmit"],$e=o(()=>e("div",null,[e("div",{class:"border-b w-full h-[14px] text-center p-3 mb-4"},[e("span",{class:"text-sm bg-slate-50 text-black px-10 italic"}," Schedule Time ")])],-1)),Me={class:"flex md:flex justify-center mx-auto"},De={class:"p-2 gap-4 items-center"},Ne=o(()=>e("label",{for:"eventTitleIn",class:"block text-xs text-center italic"},"In",-1)),We={class:"p-2 gap-4 items-center"},Be=o(()=>e("label",{for:"eventTitleOut",class:"block text-xs text-center italic"},"Out",-1)),He=o(()=>e("div",null,[e("div",{class:"border-b w-full h-[14px] text-center p-3 mt-4 mb-2"},[e("span",{class:"text-sm bg-gray-50 text-black px-10 italic"}," Schedule Type ")])],-1)),Fe=o(()=>e("div",{class:"mb-4 dark:border-gray-700"},[e("ul",{id:"default-tab",class:"flex flex-wrap justify-center -mb-px text-sm font-medium text-center","data-tabs-toggle":"#default-tab-content",role:"tablist"},[e("li",{class:"mr-2",role:"presentation"},[e("button",{id:"regular-tab",class:"inline-block p-4 border-b-2 rounded-t-lg","data-tabs-target":"#regular",type:"button",role:"tab","aria-controls":"regular","aria-selected":"false"}," Regular ")]),e("li",{class:"mr-2",role:"presentation"},[e("button",{id:"irregular-tab",class:"inline-block p-4 border-b-2 rounded-t-lg hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300","data-tabs-target":"#irregular",type:"button",role:"tab","aria-controls":"irregular","aria-selected":"false"}," Irregular ")])])],-1)),qe={id:"default-tab-content"},ze={id:"regular",class:"p-1 rounded-lg bg-gray-50 dark:bg-gray-800",role:"tabpanel","aria-labelledby":"regular-tab"},Ge=o(()=>e("div",{class:"border-b w-full h-[14px] text-center p-3 mb-2"},[e("span",{class:"text-sm bg-slate-50 text-black px-10 italic"}," Days ")],-1)),Pe={class:"grid grid-cols-3 gap-y-2 md:flex-1 mx-auto justify-center items-center mt-5 md:gap-4 p-2 rounded-md"},Je={class:"flex"},Ke=o(()=>e("label",{for:"monday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Monday",-1)),Qe={class:"flex"},Xe=o(()=>e("label",{for:"tuesday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Tuesday",-1)),Ye={class:"flex"},Ze=o(()=>e("label",{for:"wednesday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Wednesday",-1)),et={class:"flex"},tt=o(()=>e("label",{for:"thursday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Thursday",-1)),at={class:"flex"},st=o(()=>e("label",{for:"friday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Friday",-1)),lt={class:"flex"},rt=o(()=>e("label",{for:"saturday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Saturday",-1)),ot={class:"flex"},dt=o(()=>e("label",{for:"sunday",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Sunday",-1)),nt=o(()=>e("div",{class:"border-b w-full h-[14px] text-center p-3 mb-2"},null,-1)),it={class:"flex md:flex justify-center mx-auto"},ut={class:"p-2 gap-4 items-center"},ct=o(()=>e("label",{for:"dateStart",class:"block text-xs text-center italic"},"Date Start",-1)),mt={class:"p-2 gap-4 items-center"},ft=o(()=>e("label",{for:"dateEnd",class:"block text-xs italic ml-3"},[re("Date End "),e("b",{class:"text-orange-500"}," (optional)")],-1)),pt={id:"irregular",class:"p-1 rounded-lg bg-gray-50 dark:bg-gray-800",role:"tabpanel","aria-labelledby":"irregular-tab"},gt=o(()=>e("div",{class:"border-b w-full h-[14px] text-center p-3 mb-5"},[e("span",{class:"text-sm bg-slate-50 text-black px-10 italic"}," Schedule Dates ")],-1)),bt={class:"flex justify-end mt-4"},yt={key:0,type:"submit",class:"px-4 py-2 bg-blue-500 text-white rounded-md"},vt={key:1,type:"submit",class:"px-4 py-2 bg-blue-500 text-white rounded-md"},xt={class:"w-full md:w-3/4 justify-start border border-teal-100 shadow-md rounded-lg mt-5"},_t={class:"border-t-4 border-teal-400 p-2 rounded-md bg-white relative"},ht={key:0,class:"absolute bg-slate-200/50 rounded-lg w-full h-full flex items-center justify-center z-50"},kt=o(()=>e("img",{class:"flex justify-center w-28 rounded-md",src:N,alt:"logo"},null,-1)),wt=[kt],Tt=M({__name:"ScheduleEmp",setup(m){const i=ce(),g=Y(),{token:f}=Z(),v=oe(),b=n(null),r=n([!1,!1,!1,!1,!1,!1,!1]),a=n({id:null,groupType:"employee",department_id:null,project_id:null,employee_id:null,scheduleType:"Regular",daysOfWeek:[],startTime:"",endTime:null,startRecur:null,endRecur:null,employee:Object}),w=n([]),x=n(""),_=n(""),T=n(!1),R=n(!1),y=n(!1),W=n({plugins:[fe,pe,ge],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},initialView:"dayGridMonth",weekends:!0,nowIndicator:!0,editable:!0,selectable:!0,dateClick:s=>{a.value.startRecur=s.dateStr},select:s=>{a.value.startRecur=s.startStr,a.value.endRecur=s.endStr},eventContent:function(s){const t=s.event.start.toLocaleString([],{hour:"2-digit",minute:"2-digit"}),h=s.event.end.toLocaleString([],{hour:"2-digit",minute:"2-digit"});return{html:`<div class="event-container flex flex-col justify-between items-center p-1 event-container bg-blue-600 text-[10px] overflow-hidden text-white rounded-md">
                        ${t+" - "+h}
                        <div class="flex gap-[5px]">
                            <i class="fa fa-edit text-slate-200 hover:text-white text-[10px] event-edit edit-${s.event.id}" data-event="${s.event.id}"></i>
                            <i class="fa fa-trash text-slate-200 hover:text-white text-[10px] event-trash delete-${s.event.id}" data-event="${s.event.id}"></i>
                        </div>
                    </div>`}}});async function V(){R.value=!0,await me("/api/schedule",{watch:!1,onResponse:({response:s})=>{R.value=!1,s.ok&&(w.value=[],s._data.data.forEach(t=>{t.groupType==="employee"&&w.value.push(t)}),U())}})}function U(){j(),w.value.forEach(s=>{if(s.employee_id.toString()===a.value.employee_id.toString()){const t=JSON.parse(JSON.stringify(s));s.scheduleType==="Irregular"&&(t.daysOfWeek=null),b.value.addEvent(t)}})}function B(s){r.value=[!1,!1,!1,!1,!1,!1,!1];const t=document.getElementById("regular-tab"),h=document.getElementById("irregular-tab");w.value.forEach(l=>{parseInt(l.id)===parseInt(s)&&(l.daysOfWeek.forEach(z=>{r.value[z]=!0}),l.scheduleType==="Irregular"?h.click():t.click(),a.value=l,y.value=!0)})}async function H(s){await $("/api/schedule/"+s,{baseURL:v.public.HRMS_API_URL,method:"DELETE",headers:{Authorization:f.value+"",Accept:"application/json"},body:a.value,watch:!1,onResponse:({response:t})=>{T.value=!1,t.ok?(j(),_.value=t._data.message,V()):x.value=t._data.message}},"$w66p9mc9xv")}function j(){b.value.getEvents().forEach(s=>s.remove())}function A(){y.value=!1,r.value=[!1,!1,!1,!1,!1,!1,!1],a.value={id:null,groupType:"employee",department_id:null,project_id:null,employee_id:a.value.employee_id,scheduleType:"Regular",daysOfWeek:[],startTime:"",endTime:null,startRecur:null,endRecur:null,employee:Object}}async function F(){for(const t in r.value)r.value[t]&&a.value.daysOfWeek.push(t.toString());const s=y.value?"/api/schedule/"+a.value.id:"/api/schedule";a.value.startTime=i.value.formatTime(a.value.startTime),a.value.endTime=i.value.formatTime(a.value.endTime),T.value=!0,a.value.daysOfWeek.length===0?a.value.scheduleType="Irregular":a.value.scheduleType="Regular",a.value.scheduleType==="Irregular"&&(a.value.endRecur=i.value.addOneDay(a.value.startRecur)),await $(s,{baseURL:v.public.HRMS_API_URL,method:y.value?"PUT":"POST",headers:{Authorization:f.value+"",Accept:"application/json"},body:a.value,watch:!1,onResponse:({response:t})=>{T.value=!1,t.ok?(j(),_.value=t._data.message,A(),V()):x.value=t._data.message}},"$ni7WxPKL0f")}ye().getEmployeeList();const S=n({});C(S,()=>{q(S.value)},{deep:!0});function q(s){a.value.employee_id=s,U()}const L=n();return D(()=>{b.value=L.value.getApi(),document.getElementById("fCalendar").addEventListener("click",t=>{t.target.classList.contains("event-edit")&&B(t.target.dataset.event),t.target.classList.contains("event-trash")&&H(t.target.dataset.event)}),V()}),C(_,s=>{s!==""&&(g.add({type:"success",text:_.value}),_.value="")}),C(x,s=>{s!==""&&(g.add({type:"error",text:x.value}),x.value="")}),(s,t)=>{const h=Te;return u(),c("div",Se,[Ee,e("div",Re,[T.value?(u(),c("div",Ve,Ce)):O("",!0),e("div",{class:ee(["p-4 flex flex-col gap-4",y.value?"border-t-8 border-green-500 rounded-md":""])},[I(h,{modelValue:S.value,"onUpdate:modelValue":t[0]||(t[0]=l=>S.value=l),title:"Employee Name",name:"Employee Name"},null,8,["modelValue"])],2),e("div",Ie,[e("details",Ue,[Ae,e("div",Le,[e("form",{onSubmit:te(F,["prevent"])},[$e,e("div",Me,[e("div",De,[Ne,d(e("input",{id:"eventTitleIn","onUpdate:modelValue":t[1]||(t[1]=l=>a.value.startTime=l),type:"time",class:"w-44 md:w-44 rounded-lg",required:""},null,512),[[k,a.value.startTime]])]),e("div",We,[Be,d(e("input",{id:"eventTitleOut","onUpdate:modelValue":t[2]||(t[2]=l=>a.value.endTime=l),type:"time",class:"w-44 md:w-44 rounded-lg",required:""},null,512),[[k,a.value.endTime]])])]),He,Fe,e("div",qe,[e("div",ze,[Ge,e("div",Pe,[e("div",Je,[d(e("input",{id:"monday","onUpdate:modelValue":t[3]||(t[3]=l=>r.value[1]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[p,r.value[1]]]),Ke]),e("div",Qe,[d(e("input",{id:"tuesday","onUpdate:modelValue":t[4]||(t[4]=l=>r.value[2]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[p,r.value[2]]]),Xe]),e("div",Ye,[d(e("input",{id:"wednesday","onUpdate:modelValue":t[5]||(t[5]=l=>r.value[3]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[p,r.value[3]]]),Ze]),e("div",et,[d(e("input",{id:"thursday","onUpdate:modelValue":t[6]||(t[6]=l=>r.value[4]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[p,r.value[4]]]),tt]),e("div",at,[d(e("input",{id:"friday","onUpdate:modelValue":t[7]||(t[7]=l=>r.value[5]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[p,r.value[5]]]),st]),e("div",lt,[d(e("input",{id:"saturday","onUpdate:modelValue":t[8]||(t[8]=l=>r.value[6]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[p,r.value[6]]]),rt]),e("div",ot,[d(e("input",{id:"sunday","onUpdate:modelValue":t[9]||(t[9]=l=>r.value[0]=l),type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[p,r.value[0]]]),dt])]),nt,e("div",it,[e("div",ut,[ct,d(e("input",{id:"dateStart","onUpdate:modelValue":t[10]||(t[10]=l=>a.value.startRecur=l),type:"date",class:"w-36 md:w-32 rounded-lg",required:""},null,512),[[k,a.value.startRecur]])]),e("div",mt,[ft,d(e("input",{id:"dateEnd","onUpdate:modelValue":t[11]||(t[11]=l=>a.value.endRecur=l),type:"date",class:"w-36 md:w-32 rounded-lg"},null,512),[[k,a.value.endRecur]])])])]),e("div",pt,[gt,d(e("input",{id:"scheduledDates","onUpdate:modelValue":t[12]||(t[12]=l=>a.value.startRecur=l),type:"date",class:"w-full rounded-lg"},null,512),[[k,a.value.startRecur]])]),e("div",bt,[y.value?(u(),c("button",yt," Update ")):(u(),c("button",vt," Submit ")),e("button",{type:"reset",class:"px-4 py-2 ml-2 bg-gray-300 text-gray-700 rounded-md",onClick:A}," Reset ")])])],40,Oe)])])])]),e("div",xt,[e("div",_t,[R.value?(u(),c("div",ht,wt)):O("",!0),I(E(be),{id:"fCalendar",ref_key:"fCalendar",ref:L,options:W.value,class:"mt-10 text-xs flex md:flex md:text-sm"},null,8,["options"])])])])}}}),St=de(Tt,[["__scopeId","data-v-83237a3f"]]),Et={class:"w-full"},Rt=e("div",{class:"text-2xl font-normal mb-4 mt-10 md:mt-0"}," Employee Schedule ",-1),Vt=e("hr",null,null,-1),Bt={__name:"employee",setup(m){return xe({title:"Employee Schedule",meta:[{name:"description",content:""}]}),(i,g)=>{const f=St,v=ve;return u(),ne(v,{"if-access":("useCheckAccessibility"in i?i.useCheckAccessibility:E(_e))([("AccessibilityTypes"in i?i.AccessibilityTypes:E(he)).hrms_schedule_employee])},{default:ie(()=>[e("div",Et,[Rt,Vt,e("div",null,[I(f)])])]),_:1},8,["if-access"])}}};export{Bt as default};
