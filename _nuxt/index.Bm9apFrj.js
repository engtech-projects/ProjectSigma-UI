import{_ as J,a as Z,b as ee}from"./MainContainer.B9hIGMIe.js";import{_ as te}from"./PsDateInput.vue.DLxIFRYj.js";import{u as H}from"./id.Dwf9xs1O.js";import{f as S,n as C,q as U,o as p,c as h,a as e,d as B,t as R,u as o,x,A as $,b as d,s as A,j as w,F as j,i as P,h as v,m as oe,B as se,r as ae,D as F,v as ne,g as re,K as W,w as g,E as L}from"./entry.R6V7NTxy.js";import{_ as ie}from"./DepartmentProjectSelector.CDYdLlti.js";import Y from"./Icon.DcF_NU9d.js";import{a as le,_ as de}from"./ItemUomSelector.vue.Cl-RS3Cm.js";import{u as T,A as ue}from"./withdrawal.rN_FYZZK.js";import{_ as me}from"./PsTextInput.vue.DFQbUHfC.js";import{_ as ce}from"./ApprovalsList.GUTJciN1.js";import{u as pe}from"./approvals.Db95ZdMZ.js";import{_ as M}from"./PsTable.CTJad9K5.js";import{_ as E}from"./CustomPagination.CR9ildFS.js";import{_ as N}from"./LoadingContainer.vue.Bz3WIh4M.js";import{_ as _e}from"./AcessContainer.DJcSsti6.js";import{u as fe}from"./vue.f36acd1f.Dv_A-myg.js";import{u as q,A as I}from"./Accessibilities.uaboihcy.js";import"./LayoutBoards.vue.1keADq5t.js";import"./loader.C2wIXBoB.js";import"./client-only.QuN6N-R_.js";import"./DepartmentSelector.vue.Cl6IMdR7.js";import"./enum.D7iLG1Bk.js";import"./CustomFetch.BRBLzGci.js";import"./ProjectSelector.vue.DM9e2bZy.js";import"./PsSelectSearch.vue.CrY1IpH8.js";import"./index.T-zbMaZc.js";import"./enum.C7gxcjUu.js";import"./UserEmployeeSelector.vue.DiXko0wz.js";import"./nuxt-link.drPfi767.js";import"./Utilities.Cbr1Z9cn.js";import"./users.D5_vMoUK.js";const ye={class:"PsTimeInput w-full"},be=["for"],he={class:"text-red-600"},ge={class:"relative w-full"},ve=["id","name","placeholder","required"],we=S({__name:"PsTimeInput",props:C({title:{type:String,required:!0},name:{type:String,required:!1,default:""},placeholder:{type:String,default:""},required:{type:Boolean,default:!1}},{modelValue:{required:!1,type:String,default:""}}),emits:["update:modelValue"],setup(_){const c=U(_,"modelValue"),a=H("$KKcCyAf4Q3"),t=()=>{const m=new Date,n=String(m.getHours()).padStart(2,"0"),s=String(m.getMinutes()).padStart(2,"0");c.value=`${n}:${s}`};return(m,n)=>(p(),h("div",ye,[e("label",{for:o(a),class:"block mb-1 text-sm font-medium text-gray-900 dark:text-white"},[B(R(_.title),1),e("span",he,R(_.required?"*":""),1)],8,be),e("div",ge,[x(e("input",{id:o(a),"onUpdate:modelValue":n[0]||(n[0]=s=>c.value=s),type:"time",step:"1",name:_.name,class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:_.placeholder,required:_.required,disabled:""},null,8,ve),[[$,c.value]]),e("button",{type:"button",class:"absolute right-2 top-1/2 transform -translate-y-1/2 px-3 py-1 text-blue-500 rounded-lg hover:ring-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300",onClick:t}," Time Now ")])]))}}),xe={class:"border-b-2 border-gray-300"},Ae={colspan:"1",class:"px-2 py-2 border-0 border-b border-r font-medium text-gray-900 whitespace-nowrap text-center"},Te=["id"],ke={colspan:"1",class:"px-2 py-2 border-0 border-b border-r font-medium text-gray-900 whitespace-nowrap text-center"},qe={colspan:"1",class:"px-2 py-2 border-0 border-b border-r font-medium text-gray-900 whitespace-nowrap text-center"},Ie=["id"],Re={colspan:"1",class:"px-2 py-2 border-0 border-b border-r font-medium text-gray-900 whitespace-nowrap text-center"},$e={colspan:"1",class:"px-2 py-2 border-0 border-b border-r font-medium text-gray-900 whitespace-nowrap text-center"},Se=["id"],Ve={class:"flex flex-row justify-center items-center px-2 font-medium text-gray-900 whitespace-nowrap text-center"},Ce={class:"cancel-control"},je=S({__name:"ItemAppend",props:C({index:{type:Number,required:!0}},{item:{required:!0,type:Object,default:null}}),emits:C(["removeItem"],["update:item"]),setup(_,{emit:c}){const a=n=>{c("removeItem",n)},t=U(_,"item"),m=H("$6PIX1BvYCh");return(n,s)=>{const u=le,b=de,y=Y;return p(),h("tr",xe,[e("td",Ae,[x(e("input",{id:o(m),"onUpdate:modelValue":s[0]||(s[0]=l=>t.value.qty=l),type:"number",class:"w-full min-w-[120px] border border-slate-600 rounded-md px-3 text-md flex items-center relative cursor-pointer",required:""},null,8,Te),[[$,t.value.qty]])]),e("td",ke,[d(u,{id:o(m),modelValue:t.value.unit,"onUpdate:modelValue":s[1]||(s[1]=l=>t.value.unit=l)},null,8,["id","modelValue"])]),e("td",qe,[x(e("input",{id:o(m),"onUpdate:modelValue":s[2]||(s[2]=l=>t.value.item_code=l),type:"text",class:"w-full min-w-[120px] border border-slate-600 rounded-md px-3 text-md flex items-center relative cursor-pointer",disabled:""},null,8,Ie),[[$,t.value.item_code]])]),e("td",Re,[d(b,{modelValue:t.value.item_id,"onUpdate:modelValue":s[3]||(s[3]=l=>t.value.item_id=l)},null,8,["modelValue"])]),e("td",$e,[x(e("input",{id:o(m),"onUpdate:modelValue":s[4]||(s[4]=l=>t.value.purpose=l),type:"text",class:"w-full min-w-[120px] border border-slate-600 rounded-md px-3 text-md flex items-center relative cursor-pointer"},null,8,Se),[[$,t.value.purpose]])]),e("td",Ve,[e("div",Ce,[e("button",{type:"button",class:"text-red-700 font-medium text-lg hover:text-white hover:bg-red-700 px-2 py-2",onClick:s[5]||(s[5]=l=>a(_.index))},[d(y,{name:"mdi:remove",class:"h-5 w-5 lg:h-5 lg:w-5"})])])])])}}}),Pe={class:"h-full w-full"},Ue={id:"itemDetails"},We={key:0,class:"text-xl font-medium text-gray-900 dark:text-white border-b p-2"},Le={id:"content",class:"overflow-auto max-h-96"},Me={class:"table-auto w-full border-collapse"},Ee={class:"sticky top-0 bg-white"},Ne={class:"border-b-2 border-gray-300"},Oe={class:"px-2 py-2 border-0 font-medium text-gray-900 whitespace-nowrap text-center"},De=S({__name:"ItemTable",props:{title:{type:String,required:!0},headerColumns:{type:Array,required:!0}},setup(_){const c=T(),{withdrawal:a}=A(c),t=()=>{a.value.items.push({item_id:"",item_code:"",qty:"",unit:"",purpose:""})},m=n=>{a.value.items.splice(n,1)};return(n,s)=>{const u=Y,b=je;return p(),h("div",Pe,[e("div",Ue,[_.title?(p(),h("h5",We,R(_.title),1)):w("",!0),e("div",Le,[e("table",Me,[e("thead",Ee,[e("tr",null,[(p(!0),h(j,null,P(_.headerColumns,(y,l)=>(p(),h("th",{key:l,scope:"col",class:"p-2 border-0 border-b text-sm"},R(y.name),1))),128))])]),e("tbody",null,[e("tr",Ne,[e("td",Oe,[e("button",{type:"button",class:"text-white bg-emerald-700 hover:bg-emerald-800 focus:ring-4 focus:ring-blue-300 font-semibold text-sm p-2 me-2 mb-2 flex justify-center",onClick:t},[d(u,{name:"mdi:plus",class:"h-5 w-5 text-white"})])])]),(p(!0),h(j,null,P(o(a).items,(y,l)=>(p(),v(b,{key:l,item:o(a).items[l],"onUpdate:item":f=>o(a).items[l]=f,index:l,onRemoveItem:m},null,8,["item","onUpdate:item","index"]))),128))])])])])])}}}),Fe={class:"text-gray-500 p-2"},He=["onSubmit"],Be={class:"flex flex-col gap-4 pt-4 w-full"},Ye={class:"flex flex-col gap-4 mb-5"},Qe={class:"flex flex-row justify-between gap-4"},Ke={class:"w-full flex flex-col gap-2"},Ge={class:"w-full"},Xe=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Date and Time ",-1),ze={class:"flex flex-row items-center gap-2"},Je={class:"w-full"},Ze={class:"w-full"},et=e("label",{for:"warehouse-type",class:"block mb-1 text-sm font-medium text-gray-900"}," Withdraw From ",-1),tt=e("option",{value:"Main Warehouse"}," Main Warehouse ",-1),ot=e("option",{value:"Site Warehouse"}," Site Warehouse ",-1),st=[tt,ot],at={key:0,class:"mt-4 p-4 bg-gray-100 rounded-lg shadow-md"},nt={class:"w-full"},rt=e("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Charging",-1),it=e("p",{class:"text-base font-semibold text-gray-700 indent-2"}," Main Warehouse ",-1),lt={key:1,class:"w-full mt-4 p-4 bg-gray-100 rounded-lg shadow-md"},dt={class:"w-full flex gap-2"},ut={class:"w-full"},mt={class:"w-full flex gap-2"},ct={class:"w-full"},pt={class:"w-full mt-4 p-4 bg-white rounded-lg shadow-md"},_t={class:"w-full flex flex-col gap-2"},ft=e("label",{for:"diesel-withdrawal",class:"block mb-1 text-sm font-medium text-gray-900"}," For Diesel Withdrawal ",-1),yt=e("option",{value:""}," -- Select Option -- ",-1),bt=e("option",{value:"Full Tank"}," Full Tank ",-1),ht=e("option",{value:"Partial"}," Partial ",-1),gt=[yt,bt,ht],vt={class:"flex w-full"},wt={class:"pt-5 w-full mb-2 rounded-lg p-4 bg-slate-100"},xt=e("label",{for:"approved_by",class:"block text-sm font-medium text-gray-900 dark:text-white"}," Approval:",-1),At=e("div",{class:"flex w-full items-center gap-4"},[e("button",{type:"submit",class:"text-white bg-emerald-700 hover:bg-emerald-800 focus:ring-4 focus:outline-none focus:ring-emerald-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center"}," Submit ")],-1),Tt={__name:"WithdrawalForm",props:{modelValue:{required:!0,type:Object}},emits:["update:modelValue"],async setup(_){let c,a;const t=T(),{approvalList:m,withdrawal:n}=A(t),s=U(_,"modelValue"),u=pe();m.value.list=([c,a]=oe(()=>u.getApprovalByName(ue)),c=await c,a(),c);const b=se(),y=async()=>{try{if(s.value.items=t.withdrawal.items,!s.value.items||s.value.items.length===0){b.add({type:"error",text:"Please add items before submitting the request."});return}s.value.approvals=m.value.list,await t.storeRequest(),t.errorMessage!==""?b.add({type:"error",text:t.errorMessage}):b.add({type:"success",text:t.successMessage})}catch(k){b.add({type:"error",text:k.message||k})}},l=[{name:"QTY",id:"quantity"},{name:"UNIT",id:"unit"},{name:"ITEM CODE",id:"item_code"},{name:"ITEM DESCRIPTION",id:"item_id"},{name:"PURPOSE OF WITHDRAWAL",id:"purpose"}],f=ae("Main Warehouse");return(k,r)=>{const Q=te,K=we,V=ie,G=De,O=me,X=ce;return p(),h("div",Fe,[e("form",{onSubmit:re(y,["prevent"])},[e("div",Be,[e("div",Ye,[e("div",Qe,[e("div",Ke,[e("div",Ge,[Xe,e("div",ze,[d(Q,{modelValue:s.value.date,"onUpdate:modelValue":r[0]||(r[0]=i=>s.value.date=i),required:!0,class:"w-full"},null,8,["modelValue"]),d(K,{modelValue:s.value.time,"onUpdate:modelValue":r[1]||(r[1]=i=>s.value.time=i),required:!0,class:"w-full"},null,8,["modelValue"])])]),e("div",Je,[e("div",Ze,[et,x(e("select",{id:"warehouse-type","onUpdate:modelValue":r[2]||(r[2]=i=>ne(f)?f.value=i:null),class:"mt-1 block text-base text-gray-900 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},st,512),[[F,o(f)]])]),o(f)==="Main Warehouse"?(p(),h("div",at,[e("div",nt,[d(V,{"select-type":s.value.requesting,"onUpdate:selectType":r[3]||(r[3]=i=>s.value.requesting=i),"project-id":o(n).params.project_id,"onUpdate:projectId":r[4]||(r[4]=i=>o(n).params.project_id=i),"department-id":o(n).params.department_id,"onUpdate:departmentId":r[5]||(r[5]=i=>o(n).params.department_id=i),title:"Requesting"},null,8,["select-type","project-id","department-id"])]),rt,it])):w("",!0),o(f)==="Site Warehouse"?(p(),h("div",lt,[e("div",dt,[e("div",ut,[d(V,{"select-type":s.value.requesting,"onUpdate:selectType":r[6]||(r[6]=i=>s.value.requesting=i),"project-id":o(n).params.project_id,"onUpdate:projectId":r[7]||(r[7]=i=>o(n).params.project_id=i),"department-id":o(n).params.department_id,"onUpdate:departmentId":r[8]||(r[8]=i=>o(n).params.department_id=i),title:"Requesting"},null,8,["select-type","project-id","department-id"])])]),e("div",mt,[e("div",ct,[d(V,{"select-type":s.value.charging,"onUpdate:selectType":r[9]||(r[9]=i=>s.value.charging=i),"project-id":o(n).params.project_id,"onUpdate:projectId":r[10]||(r[10]=i=>o(n).params.project_id=i),"department-id":o(n).params.department_id,"onUpdate:departmentId":r[11]||(r[11]=i=>o(n).params.department_id=i),title:"Charging"},null,8,["select-type","project-id","department-id"])])])])):w("",!0),e("div",pt,[d(G,{title:"Item List","header-columns":l,"data-columns":s.value.items},null,8,["data-columns"])])])]),e("div",_t,[d(O,{modelValue:s.value.equipment_no,"onUpdate:modelValue":r[12]||(r[12]=i=>s.value.equipment_no=i),required:!0,class:"w-full",title:"Equipment No."},null,8,["modelValue"]),d(O,{modelValue:s.value.smr,"onUpdate:modelValue":r[13]||(r[13]=i=>s.value.smr=i),required:!0,class:"w-full",title:"SMR"},null,8,["modelValue"]),e("div",null,[ft,x(e("select",{id:"diesel-withdrawal","onUpdate:modelValue":r[14]||(r[14]=i=>s.value.withdrawal_type=i),class:"mt-1 block text-base text-gray-900 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},gt,512),[[F,s.value.withdrawal_type]])])])]),e("div",vt,[e("div",wt,[xt,(p(!0),h(j,null,P(o(m).list,(i,D)=>(p(),v(X,{key:"hrmsetupapprovallist"+i,modelValue:o(m).list[D],"onUpdate:modelValue":z=>o(m).list[D]=z},null,8,["modelValue","onUpdate:modelValue"]))),128))])]),At])])],40,He)])}}},kt={class:"pb-2 text-gray-500 overflow-y-auto p-2"},qt={class:"flex justify-center mx-auto"},It={__name:"AllRequests",setup(_){const c=T(),{allRequests:a}=A(c);W(()=>{a.isLoaded||c.getAllRequests()});const t=[{name:"Reference No",id:"reference_no"},{name:"Project Code",id:"project.project_code"},{name:"Transaction Date",id:"transaction_date"}],m={showTable:!0,edit:!1,delete:!1},n=u=>{L({path:"/inventory/withdrawal/request-details",query:{key:u.id}})},s=u=>{a.value.params.page=u.page??""};return(u,b)=>{const y=M,l=E,f=N;return p(),v(f,{class:"w-full",loading:o(a).isLoading},{default:g(()=>[e("div",kt,[B(R(u.allRequest)+" ",1),d(y,{"header-columns":t,actions:m,datas:o(a).list??[],onShowTable:n},null,8,["datas"])]),e("div",qt,[d(l,{links:o(a).pagination,onChangeParams:s},null,8,["links"])])]),_:1},8,["loading"])}}},Rt={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},$t={class:"flex justify-center mx-auto"},St={__name:"MyApprovals",setup(_){const c=T(),{myApprovals:a}=A(c);W(()=>{a.value.isLoaded||c.getMyApprovals()});const t=[{name:"Reference No",id:"reference_no"},{name:"Office/Project",id:"project.project_code"},{name:"Project Address",id:"office_project_address"},{name:"Date Needed",id:"date_needed"}],m={showTable:!0,edit:!1,delete:!1},n=u=>{L({path:"/inventory/withdrawal/request-details",query:{key:u.id}})},s=u=>{a.value.params.page=u.page??""};return(u,b)=>{const y=M,l=E,f=N;return p(),v(f,{class:"w-full",loading:o(a).isLoading},{default:g(()=>[e("div",Rt,[d(y,{"header-columns":t,actions:m,datas:o(a).list??[],onShowTable:n},null,8,["datas"])]),e("div",$t,[d(l,{links:o(a).pagination,onChangeParams:s},null,8,["links"])])]),_:1},8,["loading"])}}},Vt={class:"pb-2 text-gray-500 text-[12px] overflow-y-auto p-2"},Ct={class:"flex justify-center mx-auto"},jt={__name:"MyRequests",setup(_){const c=T(),{myRequests:a}=A(c);W(()=>{a.value.isLoaded||c.getMyRequests()});const t=[{name:"Reference No",id:"reference_no"},{name:"Office/Project",id:"project.project_code"},{name:"Project Address",id:"office_project_address"},{name:"Date Needed",id:"date_needed"}],m={showTable:!0,edit:!1,delete:!1},n=u=>{L({path:"/inventory/withdrawal/request-details",query:{key:u.id}})},s=u=>{a.value.params.page=u.page??""};return(u,b)=>{const y=M,l=E,f=N;return p(),v(f,{class:"w-full",loading:o(a).isLoading},{default:g(()=>[e("div",Vt,[d(y,{"header-columns":t,actions:m,datas:o(a).list??[],onShowTable:n},null,8,["datas"])]),e("div",Ct,[d(l,{links:o(a).pagination,onChangeParams:s},null,8,["links"])])]),_:1},8,["loading"])}}},co=S({__name:"index",setup(_){const c=T(),{withdrawal:a}=A(c);return fe({title:"Withdrawal"}),(t,m)=>{const n=J,s=Tt,u=Z,b=It,y=St,l=jt,f=ee,k=_e;return p(),v(k,{"if-access":("useCheckAccessibility"in t?t.useCheckAccessibility:o(q))([("AccessibilityTypes"in t?t.AccessibilityTypes:o(I)).INVENTORY_WAREHOUSE_WITHDRAWAL_GROUP]),class:"w-full"},{default:g(()=>[d(f,null,{"tab-titles":g(()=>[("useCheckAccessibility"in t?t.useCheckAccessibility:o(q))([("AccessibilityTypes"in t?t.AccessibilityTypes:o(I)).INVENTORY_WAREHOUSE_WITHDRAWAL_FORMSANDMYREQUESTS])?(p(),v(n,{key:0,"target-id":"Form",title:"Withdrawal Form"})):w("",!0),("useCheckAccessibility"in t?t.useCheckAccessibility:o(q))([("AccessibilityTypes"in t?t.AccessibilityTypes:o(I)).INVENTORY_WAREHOUSE_WITHDRAWAL_ALLREQUEST])?(p(),v(n,{key:1,"target-id":"allRequest",title:"All Request"})):w("",!0),("useCheckAccessibility"in t?t.useCheckAccessibility:o(q))([("AccessibilityTypes"in t?t.AccessibilityTypes:o(I)).INVENTORY_WAREHOUSE_WITHDRAWAL_MYAPPROVALS])?(p(),v(n,{key:2,"target-id":"myApprovals",title:"My Approvals"})):w("",!0),("useCheckAccessibility"in t?t.useCheckAccessibility:o(q))([("AccessibilityTypes"in t?t.AccessibilityTypes:o(I)).INVENTORY_WAREHOUSE_WITHDRAWAL_FORMSANDMYREQUESTS])?(p(),v(n,{key:3,"target-id":"myRequests",title:"My Request"})):w("",!0)]),"tab-containers":g(()=>[d(u,{id:"Form"},{default:g(()=>[d(s,{modelValue:o(a).form,"onUpdate:modelValue":m[0]||(m[0]=r=>o(a).form=r)},null,8,["modelValue"])]),_:1}),d(u,{id:"allRequest"},{default:g(()=>[d(b)]),_:1}),d(u,{id:"myApprovals"},{default:g(()=>[d(y)]),_:1}),d(u,{id:"myRequests"},{default:g(()=>[d(l)]),_:1})]),_:1})]),_:1},8,["if-access"])}}});export{co as default};
